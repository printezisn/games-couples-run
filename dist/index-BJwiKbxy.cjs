"use strict";var Fv=Object.defineProperty;var Lv=(n,t,e)=>t in n?Fv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var vt=(n,t,e)=>Lv(n,typeof t!="symbol"?t+"":t,e);var Nv=Object.defineProperty,Uv=(n,t,e)=>t in n?Nv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Pe=(n,t,e)=>Uv(n,typeof t!="symbol"?t+"":t,e);const W={gameName:"",gameContainer:document.body,maxFPS:60,debug:!1,assets:{basePath:"/assets",manifest:{},extra:[]},colors:{backgroundColor:"#000000"},screen:{width:1280,aspectRatio:1.7777777777777777},tickIntervalMillis:16,loadingScene:{fontFamily:"Arial, sans-serif",fontSize:28,textColor:16777215,keepAliveTimeMS:2e3,text:"Loading..."},pauseScene:{overlayColor:0,overlayAlpha:.8,fontFamily:"Arial, sans-serif",titleFontSize:48,subTitleFontSize:28,textColor:16777215,title:"Paused",subTitle:"Click/tap to continue"},signals:{onResize:"onResize",onOrientationChange:"onOrientationChange",onTick:"onTick",destroyLoadingScene:"destroyLoadingScene"},sounds:{click:"click"}},st={screen:{orientation:"landscape",width:0,height:0},scene:null,muted:localStorage.getItem("muted")==="true"};var K=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(K||{});const Uh=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},zo=(n,t)=>Uh(n).priority??t,de={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Uh).forEach(t=>{t.type.forEach(e=>{var i,r;return(r=(i=this._removeHandlers)[e])==null?void 0:r.call(i,t)})}),this},add(...n){return n.map(Uh).forEach(t=>{t.type.forEach(e=>{var i,r;const s=this._addHandlers,o=this._queue;s[e]?(r=s[e])==null||r.call(s,t):(o[e]=o[e]||[],(i=o[e])==null||i.push(t))})}),this},handle(n,t,e){var i;const r=this._addHandlers,s=this._removeHandlers;if(r[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=t,s[n]=e;const o=this._queue;return o[n]&&((i=o[n])==null||i.forEach(a=>t(a)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(r=>r.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((r,s)=>zo(s.value,e)-zo(r.value,e)))},i=>{const r=t.findIndex(s=>s.name===i.name);r!==-1&&t.splice(r,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,s)=>zo(s,e)-zo(r,e)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})}},zv={extension:{type:K.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(()=>require("./browserAll-BpoGT0PN-DB8o5BC_.cjs"))}},jv={extension:{type:K.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(()=>require("./webworkerAll-DQbc7pxG-1xA_fCO_.cjs"))}};class Qt{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new Qt(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vm={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function s(l,h,c,p,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var u=new r(c,p||l,f),m=e?e+h:h;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],u]:l._events[m].push(u):(l._events[m]=u,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],h,c;if(this._eventsCount===0)return l;for(c in h=this._events)t.call(h,c)&&l.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},a.prototype.listeners=function(l){var h=e?e+l:l,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var p=0,f=c.length,u=new Array(f);p<f;p++)u[p]=c[p].fn;return u},a.prototype.listenerCount=function(l){var h=e?e+l:l,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(l,h,c,p,f,u){var m=e?e+l:l;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,b,T;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,c),!0;case 4:return g.fn.call(g.context,h,c,p),!0;case 5:return g.fn.call(g.context,h,c,p,f),!0;case 6:return g.fn.call(g.context,h,c,p,f,u),!0}for(T=1,b=new Array(y-1);T<y;T++)b[T-1]=arguments[T];g.fn.apply(g.context,b)}else{var C=g.length,P;for(T=0;T<C;T++)switch(g[T].once&&this.removeListener(l,g[T].fn,void 0,!0),y){case 1:g[T].fn.call(g[T].context);break;case 2:g[T].fn.call(g[T].context,h);break;case 3:g[T].fn.call(g[T].context,h,c);break;case 4:g[T].fn.call(g[T].context,h,c,p);break;default:if(!b)for(P=1,b=new Array(y-1);P<y;P++)b[P-1]=arguments[P];g[T].fn.apply(g[T].context,b)}}return!0},a.prototype.on=function(l,h,c){return s(this,l,h,c,!1)},a.prototype.once=function(l,h,c){return s(this,l,h,c,!0)},a.prototype.removeListener=function(l,h,c,p){var f=e?e+l:l;if(!this._events[f])return this;if(!h)return o(this,f),this;var u=this._events[f];if(u.fn)u.fn===h&&(!p||u.once)&&(!c||u.context===c)&&o(this,f);else{for(var m=0,g=[],y=u.length;m<y;m++)(u[m].fn!==h||p&&!u[m].once||c&&u[m].context!==c)&&g.push(u[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var h;return l?(h=e?e+l:l,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(Vm);var Gv=Vm.exports;const me=Zc(Gv),Hv=Math.PI*2,qv=180/Math.PI,Wv=Math.PI/180;class ue{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new ue(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Xl.x=0,Xl.y=0,Xl}}const Xl=new ue;class dt{constructor(t=1,e=0,i=0,r=1,s=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,s,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new ue;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new ue;const i=this.a,r=this.b,s=this.c,o=this.d,a=this.tx,l=this.ty,h=1/(i*o+s*-r),c=t.x,p=t.y;return e.x=o*h*c+-s*h*p+(l*s-a*o)*h,e.y=i*h*p+-r*h*c+(-l*i+a*r)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,s=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}appendFrom(t,e){const i=t.a,r=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,h=e.a,c=e.b,p=e.c,f=e.d;return this.a=i*h+r*p,this.b=i*c+r*f,this.c=s*h+o*p,this.d=s*c+o*f,this.tx=a*h+l*p+e.tx,this.ty=a*c+l*f+e.ty,this}setTransform(t,e,i,r,s,o,a,l,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,e),h=Math.abs(a+l);return h<1e-5||Math.abs(Hv-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,s=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(t*this.ty-e*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new dt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Xv.identity()}static get shared(){return Yv.identity()}}const Yv=new dt,Xv=new dt,Ci=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ii=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ri=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],zh=[],Dm=[],jo=Math.sign;function Kv(){for(let n=0;n<16;n++){const t=[];zh.push(t);for(let e=0;e<16;e++){const i=jo(Ci[n]*Ci[e]+Ii[n]*Pi[e]),r=jo(Pi[n]*Ci[e]+Ri[n]*Pi[e]),s=jo(Ci[n]*Ii[e]+Ii[n]*Ri[e]),o=jo(Pi[n]*Ii[e]+Ri[n]*Ri[e]);for(let a=0;a<16;a++)if(Ci[a]===i&&Pi[a]===r&&Ii[a]===s&&Ri[a]===o){t.push(a);break}}}for(let n=0;n<16;n++){const t=new dt;t.set(Ci[n],Pi[n],Ii[n],Ri[n],0,0),Dm.push(t)}}Kv();const Mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Ci[n],uY:n=>Pi[n],vX:n=>Ii[n],vY:n=>Ri[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>zh[n][t],sub:(n,t)=>zh[n][Mt.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Mt.S:Mt.N:Math.abs(t)*2<=Math.abs(n)?n>0?Mt.E:Mt.W:t>0?n>0?Mt.SE:Mt.SW:n>0?Mt.NE:Mt.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const r=Dm[Mt.inv(t)];r.tx=e,r.ty=i,n.append(r)}},Go=[new ue,new ue,new ue,new ue];class Gt{constructor(t=0,e=0,i=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Gt(0,0,0,0)}clone(){return new Gt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i){const{width:r,height:s}=this;if(r<=0||s<=0)return!1;const o=this.x,a=this.y,l=o-i/2,h=o+r+i/2,c=a-i/2,p=a+s+i/2,f=o+i/2,u=o+r-i/2,m=a+i/2,g=a+s-i/2;return t>=l&&t<=h&&e>=c&&e<=p&&!(t>f&&t<u&&e>m&&e<g)}intersects(t,e){if(!e){const _=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=_)return!1;const x=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>x}const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=Go[0].set(t.left,t.top),l=Go[1].set(t.left,t.bottom),h=Go[2].set(t.right,t.top),c=Go[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const p=Math.sign(e.a*e.d-e.b*e.c);if(p===0||(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=i||Math.min(a.x,l.x,h.x,c.x)>=r||Math.max(a.y,l.y,h.y,c.y)<=s||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const f=p*(l.y-a.y),u=p*(a.x-l.x),m=f*i+u*s,g=f*r+u*s,y=f*i+u*o,b=f*r+u*o;if(Math.max(m,g,y,b)<=f*a.x+u*a.y||Math.min(m,g,y,b)>=f*c.x+u*c.y)return!1;const T=p*(a.y-h.y),C=p*(h.x-a.x),P=T*i+C*s,S=T*r+C*s,I=T*i+C*o,w=T*r+C*o;return!(Math.max(P,S,I,w)<=T*a.x+C*a.y||Math.min(P,S,I,w)>=T*c.x+C*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=s-r,this}getBounds(t){return t=t||new Gt,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Kl={default:-1};function Xt(n="default"){return Kl[n]===void 0&&(Kl[n]=-1),++Kl[n]}const _p={},gt="8.0.0",Qv="8.3.4";function mt(n,t,e=3){if(_p[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),_p[t]=!0}const Bm=()=>{};function jh(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function vp(n){return!(n&n-1)&&!!n}function Jv(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const xp=Object.create(null);function Zv(n){const t=xp[n];return t===void 0&&(xp[n]=Xt("resource")),t}const Om=class Fm extends me{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Fm.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){mt(gt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Zv(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Om.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Lm=Om;const Nm=class Um extends me{constructor(t={}){super(),this.options=t,this.uid=Xt("textureSource"),this._resourceType="textureSource",this._resourceId=Xt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Um.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Lm(Jv(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Xt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i=i||this._resolution,t=t||this.width,e=e||this.height;const r=Math.round(t*i),s=Math.round(e*i);return this.width=r/i,this.height=s/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Xt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=vp(this.pixelWidth)&&vp(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Nm.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let pn=Nm;class $c extends pn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":i="bgra8unorm"),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}$c.extension=K.TextureSource;const bp=new dt;class zm{constructor(t,e){this.mapCoord=new dt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];e[r]=s*i.a+o*i.c+i.tx,e[r+1]=s*i.b+o*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,r=t.trim;r&&(bp.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(bp));const s=t.source,o=this.uClampFrame,a=this.clampMargin/s._resolution,l=this.clampOffset/s._resolution;return o[0]=(t.frame.x+a+l)/s.width,o[1]=(t.frame.y+a+l)/s.height,o[2]=(t.frame.x+t.frame.width-a+l)/s.width,o[3]=(t.frame.y+t.frame.height-a+l)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=t.frame.width===s.width&&t.frame.height===s.height&&t.rotate===0,!0}}class ot extends me{constructor({source:t,label:e,frame:i,orig:r,trim:s,defaultAnchor:o,defaultBorders:a,rotate:l,dynamic:h}={}){if(super(),this.uid=Xt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Gt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new pn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:c,height:p}=this._source;this.frame.width=c,this.frame.height=p}this.orig=r||this.frame,this.trim=s,this.rotate=l??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new zm(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:r}=this._source,s=e.x/i,o=e.y/r,a=e.width/i,l=e.height/r;let h=this.rotate;if(h){const c=a/2,p=l/2,f=s+c,u=o+p;h=Mt.add(h,Mt.NW),t.x0=f+c*Mt.uX(h),t.y0=u+p*Mt.uY(h),h=Mt.add(h,2),t.x1=f+c*Mt.uX(h),t.y1=u+p*Mt.uY(h),h=Mt.add(h,2),t.x2=f+c*Mt.uX(h),t.y2=u+p*Mt.uY(h),h=Mt.add(h,2),t.x3=f+c*Mt.uX(h),t.y3=u+p*Mt.uY(h)}else t.x0=s,t.y0=o,t.x1=s+a,t.y1=o,t.x2=s+a,t.y2=o+l,t.x3=s,t.y3=o+l}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return mt(gt,"Texture.baseTexture is now Texture.source"),this._source}}ot.EMPTY=new ot({label:"EMPTY",source:new pn({label:"EMPTY"})});ot.EMPTY.destroy=Bm;ot.WHITE=new ot({source:new $c({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ot.WHITE.destroy=Bm;function jm(n,t,e,i){const{width:r,height:s}=e.orig,o=e.trim;if(o){const a=o.width,l=o.height;n.minX=o.x-t._x*r-i,n.maxX=n.minX+a,n.minY=o.y-t._y*s-i,n.maxY=n.minY+l}else n.minX=-t._x*r-i,n.maxX=n.minX+r,n.minY=-t._y*s-i,n.maxY=n.minY+s}const wp=new dt;let Nn=class Gm{constructor(t=1/0,e=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=wp,this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Gt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=wp,this}set(t,e,i,r){this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}addFrame(t,e,i,r,s){s||(s=this.matrix);const o=s.a,a=s.b,l=s.c,h=s.d,c=s.tx,p=s.ty;let f=this.minX,u=this.minY,m=this.maxX,g=this.maxY,y=o*t+l*e+c,b=a*t+h*e+p;y<f&&(f=y),b<u&&(u=b),y>m&&(m=y),b>g&&(g=b),y=o*i+l*e+c,b=a*i+h*e+p,y<f&&(f=y),b<u&&(u=b),y>m&&(m=y),b>g&&(g=b),y=o*t+l*r+c,b=a*t+h*r+p,y<f&&(f=y),b<u&&(u=b),y>m&&(m=y),b>g&&(g=b),y=o*i+l*r+c,b=a*i+h*r+p,y<f&&(f=y),b<u&&(u=b),y>m&&(m=y),b>g&&(g=b),this.minX=f,this.minY=u,this.maxX=m,this.maxY=g}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a:o,b:a,c:l,d:h,tx:c,ty:p}=t;let f=o*e+l*i+c,u=a*e+h*i+p;this.minX=f,this.minY=u,this.maxX=f,this.maxY=u,f=o*r+l*i+c,u=a*r+h*i+p,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*e+l*s+c,u=a*e+h*s+p,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY,f=o*r+l*s+c,u=a*r+h*s+p,this.minX=f<this.minX?f:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Gm(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,r){let s=this.minX,o=this.minY,a=this.maxX,l=this.maxY;r||(r=this.matrix);const h=r.a,c=r.b,p=r.c,f=r.d,u=r.tx,m=r.ty;for(let g=e;g<i;g+=2){const y=t[g],b=t[g+1],T=h*y+p*b+u,C=c*y+f*b+m;s=T<s?T:s,o=C<o?C:o,a=T>a?T:a,l=C>l?C:l}this.minX=s,this.minY=o,this.maxX=a,this.maxY=l}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}};var $v={grad:.9,turn:360,rad:360/(2*Math.PI)},Vn=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},re=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},nn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Hm=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Ap=function(n){return{r:nn(n.r,0,255),g:nn(n.g,0,255),b:nn(n.b,0,255),a:nn(n.a)}},Ql=function(n){return{r:re(n.r),g:re(n.g),b:re(n.b),a:re(n.a,3)}},tx=/^#([0-9a-f]{3,8})$/i,Ho=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},qm=function(n){var t=n.r,e=n.g,i=n.b,r=n.a,s=Math.max(t,e,i),o=s-Math.min(t,e,i),a=o?s===t?(e-i)/o:s===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},Wm=function(n){var t=n.h,e=n.s,i=n.v,r=n.a;t=t/360*6,e/=100,i/=100;var s=Math.floor(t),o=i*(1-e),a=i*(1-(t-s)*e),l=i*(1-(1-t+s)*e),h=s%6;return{r:255*[i,a,o,o,l,i][h],g:255*[l,i,i,a,o,o][h],b:255*[o,o,l,i,i,a][h],a:r}},Tp=function(n){return{h:Hm(n.h),s:nn(n.s,0,100),l:nn(n.l,0,100),a:nn(n.a)}},Sp=function(n){return{h:re(n.h),s:re(n.s),l:re(n.l),a:re(n.a,3)}},Ep=function(n){return Wm((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Bs=function(n){return{h:(t=qm(n)).h,s:(r=(200-(e=t.s))*(i=t.v)/100)>0&&r<200?e*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,i,r},ex=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ix=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gh={string:[[function(n){var t=tx.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?re(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?re(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=ix.exec(n)||rx.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:Ap({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=ex.exec(n)||nx.exec(n);if(!t)return null;var e,i,r=Tp({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*($v[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ep(r)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Vn(t)&&Vn(e)&&Vn(i)?Ap({r:Number(t),g:Number(e),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Vn(t)||!Vn(e)||!Vn(i))return null;var o=Tp({h:Number(t),s:Number(e),l:Number(i),a:Number(s)});return Ep(o)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Vn(t)||!Vn(e)||!Vn(i))return null;var o=function(a){return{h:Hm(a.h),s:nn(a.s,0,100),v:nn(a.v,0,100),a:nn(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(s)});return Wm(o)},"hsv"]]},Cp=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},sx=function(n){return typeof n=="string"?Cp(n.trim(),Gh.string):typeof n=="object"&&n!==null?Cp(n,Gh.object):[null,void 0]},Jl=function(n,t){var e=Bs(n);return{h:e.h,s:nn(e.s+100*t,0,100),l:e.l,a:e.a}},Zl=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Pp=function(n,t){var e=Bs(n);return{h:e.h,s:e.s,l:nn(e.l+100*t,0,100),a:e.a}},Hh=function(){function n(t){this.parsed=sx(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return re(Zl(this.rgba),2)},n.prototype.isDark=function(){return Zl(this.rgba)<.5},n.prototype.isLight=function(){return Zl(this.rgba)>=.5},n.prototype.toHex=function(){return t=Ql(this.rgba),e=t.r,i=t.g,r=t.b,o=(s=t.a)<1?Ho(re(255*s)):"","#"+Ho(e)+Ho(i)+Ho(r)+o;var t,e,i,r,s,o},n.prototype.toRgb=function(){return Ql(this.rgba)},n.prototype.toRgbString=function(){return t=Ql(this.rgba),e=t.r,i=t.g,r=t.b,(s=t.a)<1?"rgba("+e+", "+i+", "+r+", "+s+")":"rgb("+e+", "+i+", "+r+")";var t,e,i,r,s},n.prototype.toHsl=function(){return Sp(Bs(this.rgba))},n.prototype.toHslString=function(){return t=Sp(Bs(this.rgba)),e=t.h,i=t.s,r=t.l,(s=t.a)<1?"hsla("+e+", "+i+"%, "+r+"%, "+s+")":"hsl("+e+", "+i+"%, "+r+"%)";var t,e,i,r,s},n.prototype.toHsv=function(){return t=qm(this.rgba),{h:re(t.h),s:re(t.s),v:re(t.v),a:re(t.a,3)};var t},n.prototype.invert=function(){return gn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),gn(Jl(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),gn(Jl(this.rgba,-t))},n.prototype.grayscale=function(){return gn(Jl(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),gn(Pp(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),gn(Pp(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?gn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):re(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=Bs(this.rgba);return typeof t=="number"?gn({h:t,s:e.s,l:e.l,a:e.a}):re(e.h)},n.prototype.isEqual=function(t){return this.toHex()===gn(t).toHex()},n}(),gn=function(n){return n instanceof Hh?n:new Hh(n)},Ip=[],ox=function(n){n.forEach(function(t){Ip.indexOf(t)<0&&(t(Hh,Gh),Ip.push(t))})};function ax(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in e)i[e[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=i[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),p=1/0,f="black";if(!s.length)for(var u in e)s[u]=new n(e[u]).toRgb();for(var m in e){var g=(a=c,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<p&&(p=g,f=m)}return f}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new n(l).toRgb():null},"name"])}ox([ax]);const Ir=class As{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof As)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((r,s)=>r===e[s]);if(t!==null&&e!==null){const r=Object.keys(t),s=Object.keys(e);return r.length!==s.length?!1:r.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb,t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;const[e,i,r,s]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,r,s]=As._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return e&&(i=i*t+.5|0,r=r*t+.5|0,s=s*t+.5|0),(t*255<<24)+(i<<16)+(r<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,r,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,r,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,r,s=255]=t,e/=255,i/=255,r/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=As.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=gn(t);o.isValid()&&({r:e,g:i,b:r,a:s}=o.rgba,e/=255,i/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((r,s)=>{t[s]=Math.min(Math.max(r,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof As||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};Ir.shared=new Ir;Ir._temp=new Ir;Ir.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ht=Ir;const lx={cullArea:null,cullable:!1,cullableChildren:!0};class tu{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var e;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(e=i.init)==null||e.call(i,t),i}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class hx{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new tu(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const An=new hx;function Ym(n,t,e){const i=n.length;let r;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(r=t;r<s;++r)n[r]=n[r+e];n.length=s}const cx={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,i=e-n,r=[];if(i>0&&i<=e){for(let o=e-1;o>=n;o--){const a=this.children[o];a&&(r.push(a),a.parent=null)}Ym(this.children,n,e);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||mt(gt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const r=n.parent.children.indexOf(n);if(n.parent===this&&r===t)return n;r!==-1&&n.parent.children.splice(r,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}};class qh{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class ux{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return An.get(i.maskClass,t)}return t}returnMaskEffect(t){An.return(t)}}const Wh=new ux;de.handleByList(K.MaskEffect,Wh._effectClasses);const dx={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],addEffect(n){if(this.effects.indexOf(n)!==-1)return;this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority);const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0),this._updateIsSimple()},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),Wh.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Wh.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask)},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var t;!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new qh);n=n;const i=(n==null?void 0:n.length)>0,r=((t=e.filters)==null?void 0:t.length)>0,s=i!==r;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),s&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new qh),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},px={label:null,get name(){return mt(gt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){mt(gt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const r=e[i];if(r.label===n||n instanceof RegExp&&n.test(r.label))return r}if(t)for(let i=0;i<e.length;i++){const r=e[i].getChildByLabel(n,!0);if(r)return r}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let r=0;r<i.length;r++){const s=i[r];(s.label===n||n instanceof RegExp&&n.test(s.label))&&e.push(s)}if(t)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(n,!0,e);return e}},On=new tu(dt),Hi=new tu(Nn);function eu(n,t,e){e.clear();let i,r;return n.parent?t?i=n.parent.worldTransform:(r=On.get().identity(),i=va(n,r)):i=dt.IDENTITY,Xm(n,e,i,t),r&&On.return(r),e.isValid||e.set(0,0,0,0),e}function Xm(n,t,e,i){var r,s;if(!n.visible||!n.measurable)return;let o;i?o=n.worldTransform:(n.updateLocalTransform(),o=On.get(),o.appendFrom(n.localTransform,e));const a=t,l=!!n.effects.length;if(l&&(t=Hi.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.addBounds&&(t.matrix=o,n.addBounds(t));for(let h=0;h<n.children.length;h++)Xm(n.children[h],t,o,i)}if(l){for(let h=0;h<n.effects.length;h++)(s=(r=n.effects[h]).addBounds)==null||s.call(r,t);a.addBounds(t,dt.IDENTITY),Hi.return(t)}i||On.return(o)}function va(n,t){const e=n.parent;return e&&(va(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}let $l=0;const Rp=500;function Lt(...n){$l!==Rp&&($l++,$l===Rp?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function nu(n,t,e){return t.clear(),e||(e=dt.IDENTITY),Km(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function Km(n,t,e,i,r){var s,o;let a;if(r)a=On.get(),a=e.copyTo(a);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const c=n.localTransform;a=On.get(),a.appendFrom(c,e)}const l=t,h=!!n.effects.length;if(h&&(t=Hi.get().clear()),n.boundsArea)t.addRect(n.boundsArea,a);else{n.renderPipeId&&(t.matrix=a,n.addBounds(t));const c=n.children;for(let p=0;p<c.length;p++)Km(c[p],t,a,i,!1)}if(h){for(let c=0;c<n.effects.length;c++)(o=(s=n.effects[c]).addLocalBounds)==null||o.call(s,t,i);l.addBounds(t,dt.IDENTITY),Hi.return(t)}On.return(a)}function Qm(n,t){const e=n.children;for(let i=0;i<e.length;i++){const r=e[i],s=r.uid,o=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,a=t.index;(t.data[a]!==s||t.data[a+1]!==o)&&(t.data[t.index]=s,t.data[t.index+1]=o,t.didChange=!0),t.index=a+2,r.children.length&&Qm(r,t)}return t.didChange}const fx=new dt,mx={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Nn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),Qm(this,n),n.didChange&&nu(this,n.localBounds,fx),n.localBounds},getBounds(n,t){return eu(this,n,t||new Nn)}},gx={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},yx={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(_x))}};function _x(n,t){return n._zIndex-t._zIndex}const vx={getGlobalPosition(n=new ue,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){if(!e){this.updateLocalTransform();const i=va(this,new dt);return i.append(this.localTransform),i.apply(n,t)}return this.worldTransform.apply(n,t)},toLocal(n,t,e,i){if(t&&(n=t.toGlobal(n,e,i)),!i){this.updateLocalTransform();const r=va(this,new dt);return r.append(this.localTransform),r.applyInverse(n,e)}return this.worldTransform.applyInverse(n,e)}};let xx=0;class Jm{constructor(){this.uid=Xt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.tick=0}reset(){this.instructionSize=0,this.tick=xx++}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}class bx{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new dt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Jm,this._onRenderContainers=[]}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],e);return e}}function wx(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const th=new Qt(null),eh=new Qt(null),nh=new Qt(null,1,1),Yh=1,Zm=2,sa=4;class Te extends me{constructor(t={}){var e,i;super(),this.uid=Xt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new dt,this.relativeGroupTransform=new dt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Qt(this,0,0),this._scale=nh,this._pivot=eh,this._skew=th,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],wx(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(r=>this.addChild(r)),(i=t.parent)==null||i.addChild(this)}static mixin(t){Object.defineProperties(Te.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||mt(gt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const e=t[0];if(e.parent===this)return this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),e;e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=An.get(bx,this),this.groupTransform=dt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),An.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new dt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*qv}set angle(t){this.rotation=t*Wv}get pivot(){return this._pivot===eh&&(this._pivot=new Qt(this,0,0)),this._pivot}set pivot(t){this._pivot===eh&&(this._pivot=new Qt(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===th&&(this._skew=new Qt(this,0,0)),this._skew}set skew(t){this._skew===th&&(this._skew=new Qt(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===nh&&(this._scale=new Qt(this,1,1)),this._scale}set scale(t){this._scale===nh&&(this._scale=new Qt(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,r=this._pivot,s=this._position,o=i._x,a=i._y,l=r._x,h=r._y;e.a=this._cx*o,e.b=this._sx*o,e.c=this._cy*a,e.d=this._sy*a,e.tx=s._x-(l*e.a+h*e.c),e.ty=s._y-(l*e.b+h*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Yh,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const e=Ht.shared.setValue(t??16777215).toBgrNumber();e!==this.localColor&&(this.localColor=e,this._updateFlags|=Yh,this._onUpdate())}get tint(){const t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zm,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=sa,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=sa,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=sa,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var e;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&i)for(let r=0;r<i.length;++r)i[r].destroy(t);(e=this.renderGroup)==null||e.destroy(),this.renderGroup=null}}Te.mixin(cx);Te.mixin(vx);Te.mixin(gx);Te.mixin(mx);Te.mixin(dx);Te.mixin(px);Te.mixin(yx);Te.mixin(lx);class $a extends Te{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=0,this._lastInstructionTick=-1,this._bounds=new Nn(0,1,0,0),this._boundsDirty=!0}_updateBounds(){}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:r}=t;return i>=e.minX&&i<=e.maxX&&r>=e.minY&&r<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}}class qi extends $a{constructor(t=ot.EMPTY){t instanceof ot&&(t={texture:t});const{texture:e=ot.EMPTY,anchor:i,roundPixels:r,width:s,height:o,...a}=t;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBoundsDirty=!0,this._anchor=new Qt({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),o!==void 0&&(this.height=o)}static from(t,e=!1){return t instanceof ot?new qi(t):new qi(ot.from(t,e))}set texture(t){t||(t=ot.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){const e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){const e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){this._sourceBoundsDirty=this._boundsDirty=!0,super.onViewUpdate()}_updateBounds(){jm(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const t=this._anchor,e=this._texture,i=this._sourceBounds,{width:r,height:s}=e.orig;i.maxX=-t._x*r,i.minX=i.maxX+r,i.maxY=-t._y*s,i.minY=i.maxY+s}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(e)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const Ax=new Nn;function $m(n,t,e){const i=Ax;n.measurable=!0,eu(n,e,i),t.addBoundsMask(i),n.measurable=!1}function tg(n,t,e){const i=Hi.get();n.measurable=!0;const r=On.get().identity(),s=eg(n,e,r);nu(n,i,s),n.measurable=!1,t.addBoundsMask(i),On.return(r),Hi.return(i)}function eg(n,t,e){return n?(n!==t&&(eg(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(Lt("Mask bounds, renderable is not inside the root container"),e)}class ng{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof qi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||$m(this.mask,t,e)}addLocalBounds(t,e){tg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof qi}}ng.extension=K.MaskEffect;class ig{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}ig.extension=K.MaskEffect;class rg{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){$m(this.mask,t,e)}addLocalBounds(t,e){tg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Te}}rg.extension=K.MaskEffect;const Tx={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let kp=Tx;const Pt={get(){return kp},set(n){kp=n}};class iu extends pn{constructor(t){t.resource||(t.resource=Pt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;const e=t.resource;(this.pixelWidth!==e.width||this.pixelWidth!==e.height)&&this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}iu.extension=K.TextureSource;class qr extends pn{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Pt.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,Lt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}qr.extension=K.TextureSource;var xa=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(xa||{});class ih{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const sg=class He{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ih(null,null,1/0),this.deltaMS=1/He.targetFPMS,this.elapsedMS=1/He.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=xa.NORMAL){return this._addListener(new ih(t,e,i))}addOnce(t,e,i=xa.NORMAL){return this._addListener(new ih(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*He.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,He.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!He._shared){const t=He._shared=new He;t.autoStart=!0,t._protected=!0}return He._shared}static get system(){if(!He._system){const t=He._system=new He;t.autoStart=!0,t._protected=!0}return He._system}};sg.targetFPMS=.06;let xn=sg,rh;async function og(){return rh??(rh=(async()=>{var n;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(r),t.deleteTexture(i),(n=t.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),rh}const tl=class ag extends pn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...ag.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=xn.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await og(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(xn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(xn.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(xn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};tl.extension=K.TextureSource;tl.defaultOptions={...pn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};tl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let oa=tl;const hn=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class Sx{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Lt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=hn(t);let r;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(e)){r=h.getCacheableAssets(i,e);break}}const s=new Map(Object.entries(r||{}));r||i.forEach(l=>{s.set(l,e)});const o=[...s.keys()],a={cacheKeys:o,keys:i};i.forEach(l=>{this._cacheMap.set(l,a)}),o.forEach(l=>{const h=r?r[l]:e;this._cache.has(l)&&this._cache.get(l)!==h&&Lt("[Cache] already has key:",l),this._cache.set(l,s.get(l))})}remove(t){if(!this._cacheMap.has(t)){Lt(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Et=new Sx,Xh=[];de.handleByList(K.TextureSource,Xh);function lg(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let r=0;r<Xh.length;r++){const s=Xh[r];if(s.test(e))return new s(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function Ex(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,r=e?n:{resource:n};if(!t&&Et.has(i))return Et.get(i);const s=new ot({source:lg(r)});return s.on("destroy",()=>{Et.has(i)&&Et.remove(i)}),t||Et.set(i,s),s}function Cx(n,t=!1){return typeof n=="string"?Et.get(n):n instanceof pn?new ot({source:n}):Ex(n,t)}ot.from=Cx;pn.from=lg;de.add(ng,ig,rg,oa,qr,iu,$c);var qn=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(qn||{});function ln(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function ys(n){return n.split("?")[0].split("#")[0]}function Px(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ix(n,t,e){return n.replace(new RegExp(Px(t),"g"),e)}function Rx(n,t){let e="",i=0,r=-1,s=0,o=-1;for(let a=0;a<=n.length;++a){if(a<n.length)o=n.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),r=a,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,r=a,s=0;continue}}}else e.length>0?e+=`/${n.slice(r+1,a)}`:e=n.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s!==-1?++s:s=-1}return e}const pe={toPosix(n){return Ix(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){ln(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(ln(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=ys(this.toPosix(t??Pt.get().getBaseUrl())),r=ys(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?pe.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(ln(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=Rx(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return ln(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(ln(i),i.length>0)if(t===void 0)t=i;else{const r=n[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(ln(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,r=!0;const s=this.getProtocol(n),o=n;n=n.slice(s.length);for(let a=n.length-1;a>=1;--a)if(t=n.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?e?"/":this.isUrl(o)?s+n:s:e&&i===1?"//":s+n.slice(0,i)},rootname(n){ln(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){ln(n),t&&ln(t),n=ys(this.toPosix(n));let e=0,i=-1,r=!0,s;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let o=t.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(l===47){if(!r){e=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=n.length),n.slice(e,i)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!r){e=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(e,i)},extname(n){ln(n),n=ys(this.toPosix(n));let t=-1,e=0,i=-1,r=!0,s=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){ln(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=ys(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let r;t.root=this.rootname(n),i||this.hasProtocol(n)?r=1:r=0;let s=-1,o=0,a=-1,l=!0,h=n.length-1,c=0;for(;h>=r;--h){if(e=n.charCodeAt(h),e===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),e===46?s===-1?s=h:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||a===-1||c===0||c===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?t.base=t.name=n.slice(1,a):t.base=t.name=n.slice(o,a)):(o===0&&i?(t.name=n.slice(1,s),t.base=n.slice(1,a)):(t.name=n.slice(o,s),t.base=n.slice(o,a)),t.ext=n.slice(s,a)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function hg(n,t,e,i,r){const s=t[e];for(let o=0;o<s.length;o++){const a=s[o];e<t.length-1?hg(n.replace(i[e],a),t,e+1,i,r):r.push(n.replace(i[e],a))}}function kx(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const r=[];e.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),hg(n,r,0,e,i)}else i.push(n);return i}const ba=n=>!Array.isArray(n);class Wr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return hn(e||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(s=>(s==null?void 0:s.src)??s):r!=null&&r.src?r.src:r,!0)}addManifest(t){this._manifest&&Lt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:{alias:s,...o})),r.forEach(s=>{const o=s.src,a=s.alias;let l;if(typeof a=="string"){const h=this._createBundleAssetId(t,a);i.push(h),l=[a,h]}else{const h=a.map(c=>this._createBundleAssetId(t,c));i.push(...h),l=[...a,...h]}this.add({...s,alias:l,src:o})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=r=>{this.hasKey(r)&&Lt(`[Resolver] already has key: ${r} overwriting`)},hn(e).forEach(r=>{const{src:s}=r;let{data:o,format:a,loadParser:l}=r;const h=hn(s).map(f=>typeof f=="string"?kx(f):Array.isArray(f)?f:[f]),c=this.getAlias(r);Array.isArray(c)?c.forEach(i):i(c);const p=[];h.forEach(f=>{f.forEach(u=>{let m={};if(typeof u!="object"){m.src=u;for(let g=0;g<this._parsers.length;g++){const y=this._parsers[g];if(y.test(u)){m=y.parse(u);break}}}else o=u.data??o,a=u.format??a,l=u.loadParser??l,m={...m,...u};if(!c)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this._buildResolvedAsset(m,{aliases:c,data:o,format:a,loadParser:l}),p.push(m)})}),c.forEach(f=>{this._assetMap[f]=p})})}resolveBundle(t){const e=ba(t);t=hn(t);const i={};return t.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(r,l)]=h}i[r]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const r in e)i[r]=e[r].src;return i}return e.src}resolve(t){const e=ba(t);t=hn(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s);o==null||o.priority.forEach(a=>{o.params[a].forEach(l=>{const h=s.filter(c=>c[a]?c[a]===l:!1);h.length&&(s=h)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:s,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=pe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??t.format??Mx(t.src),t}}Wr.RETINA_PREFIX=/@([0-9\.]+)x/;function Mx(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Kh=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},cg=class Ts{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof ot?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ts.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Ts.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const r=this._frameKeys[e],s=this._frames[r],o=s.frame;if(o){let a=null,l=null;const h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new Gt(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s.rotated?a=new Gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Gt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new ot({source:this.textureSource,frame:a,orig:c,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ts.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ts.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};cg.BATCH_SIZE=1e3;let Mp=cg;const Vx=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function ug(n,t,e){const i={};if(n.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[r]=t.textures[r]}),!e){const r=pe.dirname(n[0]);t.linkedSheets.forEach((s,o)=>{const a=ug([`${r}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const Dx={extension:K.Asset,cache:{test:n=>n instanceof Mp,getCacheableAssets:(n,t)=>ug(n,t,!1)},resolver:{extension:{type:K.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&Vx.includes(i)},parse:n=>{var t;const e=n.split(".");return{resolution:parseFloat(((t=Wr.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:K.LoadParser,priority:qn.Normal,name:"spritesheetLoader"},async testParse(n,t){return pe.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var i,r;const{texture:s,imageFilename:o}=(t==null?void 0:t.data)??{};let a=pe.dirname(t.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let l;if(s instanceof ot)l=s;else{const p=Kh(a+(o??n.meta.image),t.src);l=(await e.load([p]))[p]}const h=new Mp(l.source,n);await h.parse();const c=(i=n==null?void 0:n.meta)==null?void 0:i.related_multi_packs;if(Array.isArray(c)){const p=[];for(const u of c){if(typeof u!="string")continue;let m=a+u;(r=t.data)!=null&&r.ignoreMultiPack||(m=Kh(m,t.src),p.push(e.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(p);h.linkedSheets=f,f.forEach(u=>{u.linkedSheets=[h].concat(h.linkedSheets.filter(m=>m!==u))})}return h},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};de.add(Dx);const sh=Object.create(null),Vp=Object.create(null);function el(n,t){let e=Vp[n];return e===void 0&&(sh[t]===void 0&&(sh[t]=1),Vp[n]=e=sh[t]++),e}let _s;function dg(){return(!_s||_s!=null&&_s.isContextLost())&&(_s=Pt.get().createCanvas().getContext("webgl",{})),_s}let qo;function Bx(){if(!qo){qo="mediump";const n=dg();n&&n.getShaderPrecisionFormat&&(qo=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return qo}function Ox(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function Fx(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let r=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return r==="highp"&&i!=="highp"&&(r="mediump"),`precision ${r} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function Lx(n,t){return t?`#version 300 es
${n}`:n}const Nx={},Ux={};function zx(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?Nx:Ux;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function jx(n,t){return t?n.replace("#version 300 es",""):n}const oh={stripVersion:jx,ensurePrecision:Fx,addProgramDefines:Ox,setProgramName:zx,insertVersion:Lx},ah=Object.create(null),pg=class Qh{constructor(t){t={...Qh.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Bx()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let r=t.fragment,s=t.vertex;Object.keys(oh).forEach(o=>{const a=i[o];r=oh[o](r,a,!0),s=oh[o](s,a,!1)}),this.fragment=r,this.vertex=s,this._key=el(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return ah[e]||(ah[e]=new Qh(t)),ah[e]}};pg.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ru=pg;const Dp={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function fg(n){return Dp[n]??Dp.float32}const Gx={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function Hx({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const r=n.indexOf("->",i);if(r!==-1){const s=n.substring(i,r),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let a;for(;(a=o.exec(s))!==null;){const l=Gx[a[3]]??"float32";e[a[2]]={location:parseInt(a[1],10),format:l,stride:fg(l).stride,offset:0,instance:!1,start:0}}}}return e}function lh(n){var t,e;const i=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,p=(t=n.match(i))==null?void 0:t.map(u=>({group:parseInt(u.match(r)[1],10),binding:parseInt(u.match(s)[1],10),name:u.match(o)[2],isUniform:u.match(o)[1]==="<uniform>",type:u.match(a)[1]}));if(!p)return{groups:[],structs:[]};const f=((e=n.match(l))==null?void 0:e.map(u=>{const m=u.match(c)[1],g=u.match(h).reduce((y,b)=>{const[T,C]=b.split(":");return y[T.trim()]=C.trim(),y},{});return g?{name:m,members:g}:null}).filter(({name:u})=>p.some(m=>m.type===u)))??[];return{groups:p,structs:f}}var Ss=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Ss||{});function qx({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:Ss.VERTEX|Ss.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:Ss.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:Ss.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function Wx({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function Yx(n,t){const e=new Set,i=new Set,r=[...n.structs,...t.structs].filter(o=>e.has(o.name)?!1:(e.add(o.name),!0)),s=[...n.groups,...t.groups].filter(o=>{const a=`${o.name}-${o.binding}`;return i.has(a)?!1:(i.add(a),!0)});return{structs:r,groups:s}}const hh=Object.create(null);class vo{constructor(t){var e,i;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:r,vertex:s,layout:o,gpuLayout:a,name:l}=t;if(this.name=l,this.fragment=r,this.vertex=s,r.source===s.source){const h=lh(r.source);this.structsAndGroups=h}else{const h=lh(s.source),c=lh(r.source);this.structsAndGroups=Yx(h,c)}this.layout=o??Wx(this.structsAndGroups),this.gpuLayout=a??qx(this.structsAndGroups),this.autoAssignGlobalUniforms=((e=this.layout[0])==null?void 0:e.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((i=this.layout[1])==null?void 0:i.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=el(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=Hx(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return hh[e]||(hh[e]=new vo(t)),hh[e]}}const mg=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>"],Xx=mg.reduce((n,t)=>(n[t]=!0,n),{});function Kx(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const gg=class yg{constructor(t,e){this._touched=0,this.uid=Xt("uniform"),this._resourceType="uniformGroup",this._resourceId=Xt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...yg.defaultOptions,...e},this.uniformStructures=t;const i={};for(const r in t){const s=t[r];if(s.name=r,s.size=s.size??1,!Xx[s.type])throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${mg.join(", ")}`);s.value??(s.value=Kx(s.type,s.size)),i[r]=s.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=el(Object.keys(i).map(r=>`${r}-${t[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};gg.defaultOptions={ubo:!1,isStatic:!1};let su=gg;class Os{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const r=t[i];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var i,r;const s=this.resources[e];t!==s&&(s&&((i=t.off)==null||i.call(t,"change",this.onResourceChange,this)),(r=t.on)==null||r.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var t;const e=this.resources;for(const i in e){const r=e[i];(t=r.off)==null||t.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var wa=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(wa||{});class nl extends me{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:r,resources:s,compatibleRenderers:o,groupMap:a}=t;this.gpuProgram=e,this.glProgram=i,o===void 0&&(o=0,e&&(o|=wa.WEBGPU),i&&(o|=wa.WEBGL)),this.compatibleRenderers=o;const l={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&r&&!a)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&r&&a)for(const h in a)for(const c in a[h]){const p=a[h][c];l[p]={group:h,binding:c,name:p}}else if(e&&r&&!a){const h=e.structsAndGroups.groups;a={},h.forEach(c=>{a[c.group]=a[c.group]||{},a[c.group][c.binding]=c.name,l[c.name]=c})}else if(s){r={},a={},e&&e.structsAndGroups.groups.forEach(c=>{a[c.group]=a[c.group]||{},a[c.group][c.binding]=c.name,l[c.name]=c});let h=0;for(const c in s)l[c]||(r[99]||(r[99]=new Os,this._ownedBindGroups.push(r[99])),l[c]={group:99,binding:h,name:c},a[99]=a[99]||{},a[99][h]=c,h++);for(const c in s){const p=c;let f=s[c];!f.source&&!f._resourceType&&(f=new su(f));const u=l[p];u&&(r[u.group]||(r[u.group]=new Os,this._ownedBindGroups.push(r[u.group])),r[u.group].setResource(f,u.binding))}}this.groups=r,this._uniformBindMap=a,this.resources=this._buildResourceAccessor(r,l)}addResource(t,e,i){var r,s;(r=this._uniformBindMap)[e]||(r[e]={}),(s=this._uniformBindMap[e])[i]||(s[i]=t),this.groups[e]||(this.groups[e]=new Os,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const r in e){const s=e[r];Object.defineProperty(i,s.name,{get(){return t[s.group].getResource(s.binding)},set(o){t[s.group].setResource(o,s.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...r}=t;let s,o;return e&&(s=vo.from(e)),i&&(o=ru.from(i)),new nl({gpuProgram:s,glProgram:o,...r})}}const Jh=[];de.handleByNamedList(K.Environment,Jh);async function Qx(n){if(!n)for(let t=0;t<Jh.length;t++){const e=Jh[t];if(e.value.test()){await e.value.load();return}}}let vs;function _g(){if(typeof vs=="boolean")return vs;try{vs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{vs=!1}return vs}var ou={exports:{}};ou.exports=il;ou.exports.default=il;function il(n,t,e){e=e||2;var i=t&&t.length,r=i?t[0]*e:n.length,s=vg(n,0,r,e,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,h,c,p,f,u;if(i&&(s=eb(n,t,s,e)),n.length>80*e){a=h=n[0],l=c=n[1];for(var m=e;m<r;m+=e)p=n[m],f=n[m+1],p<a&&(a=p),f<l&&(l=f),p>h&&(h=p),f>c&&(c=f);u=Math.max(h-a,c-l),u=u!==0?32767/u:0}return Ys(s,o,e,a,l,u,0),o}function vg(n,t,e,i,r){var s,o;if(r===tc(n,t,e,i)>0)for(s=t;s<e;s+=i)o=Bp(s,n[s],n[s+1],o);else for(s=e-i;s>=t;s-=i)o=Bp(s,n[s],n[s+1],o);return o&&rl(o,o.next)&&(Ks(o),o=o.next),o}function Wi(n,t){if(!n)return n;t||(t=n);var e=n,i;do if(i=!1,!e.steiner&&(rl(e,e.next)||Dt(e.prev,e,e.next)===0)){if(Ks(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Ys(n,t,e,i,r,s,o){if(n){!o&&s&&ob(n,i,r,s);for(var a=n,l,h;n.prev!==n.next;){if(l=n.prev,h=n.next,s?Zx(n,i,r,s):Jx(n)){t.push(l.i/e|0),t.push(n.i/e|0),t.push(h.i/e|0),Ks(n),n=h.next,a=h.next;continue}if(n=h,n===a){o?o===1?(n=$x(Wi(n),t,e),Ys(n,t,e,i,r,s,2)):o===2&&tb(n,t,e,i,r,s):Ys(Wi(n),t,e,i,r,s,1);break}}}}function Jx(n){var t=n.prev,e=n,i=n.next;if(Dt(t,e,i)>=0)return!1;for(var r=t.x,s=e.x,o=i.x,a=t.y,l=e.y,h=i.y,c=r<s?r<o?r:o:s<o?s:o,p=a<l?a<h?a:h:l<h?l:h,f=r>s?r>o?r:o:s>o?s:o,u=a>l?a>h?a:h:l>h?l:h,m=i.next;m!==t;){if(m.x>=c&&m.x<=f&&m.y>=p&&m.y<=u&&yr(r,a,s,l,o,h,m.x,m.y)&&Dt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Zx(n,t,e,i){var r=n.prev,s=n,o=n.next;if(Dt(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,c=r.y,p=s.y,f=o.y,u=a<l?a<h?a:h:l<h?l:h,m=c<p?c<f?c:f:p<f?p:f,g=a>l?a>h?a:h:l>h?l:h,y=c>p?c>f?c:f:p>f?p:f,b=Zh(u,m,t,e,i),T=Zh(g,y,t,e,i),C=n.prevZ,P=n.nextZ;C&&C.z>=b&&P&&P.z<=T;){if(C.x>=u&&C.x<=g&&C.y>=m&&C.y<=y&&C!==r&&C!==o&&yr(a,c,l,p,h,f,C.x,C.y)&&Dt(C.prev,C,C.next)>=0||(C=C.prevZ,P.x>=u&&P.x<=g&&P.y>=m&&P.y<=y&&P!==r&&P!==o&&yr(a,c,l,p,h,f,P.x,P.y)&&Dt(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;C&&C.z>=b;){if(C.x>=u&&C.x<=g&&C.y>=m&&C.y<=y&&C!==r&&C!==o&&yr(a,c,l,p,h,f,C.x,C.y)&&Dt(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;P&&P.z<=T;){if(P.x>=u&&P.x<=g&&P.y>=m&&P.y<=y&&P!==r&&P!==o&&yr(a,c,l,p,h,f,P.x,P.y)&&Dt(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function $x(n,t,e){var i=n;do{var r=i.prev,s=i.next.next;!rl(r,s)&&xg(r,i,i.next,s)&&Xs(r,s)&&Xs(s,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),Ks(i),Ks(i.next),i=n=s),i=i.next}while(i!==n);return Wi(i)}function tb(n,t,e,i,r,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&hb(o,a)){var l=bg(o,a);o=Wi(o,o.next),l=Wi(l,l.next),Ys(o,t,e,i,r,s,0),Ys(l,t,e,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function eb(n,t,e,i){var r=[],s,o,a,l,h;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:n.length,h=vg(n,a,l,i,!1),h===h.next&&(h.steiner=!0),r.push(lb(h));for(r.sort(nb),s=0;s<r.length;s++)e=ib(r[s],e);return e}function nb(n,t){return n.x-t.x}function ib(n,t){var e=rb(n,t);if(!e)return t;var i=bg(e,n);return Wi(i,i.next),Wi(e,e.next)}function rb(n,t){var e=t,i=n.x,r=n.y,s=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var a=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>s&&(s=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,h=o.x,c=o.y,p=1/0,f;e=o;do i>=e.x&&e.x>=h&&i!==e.x&&yr(r<c?i:s,r,h,c,r<c?s:i,r,e.x,e.y)&&(f=Math.abs(r-e.y)/(i-e.x),Xs(e,n)&&(f<p||f===p&&(e.x>o.x||e.x===o.x&&sb(o,e)))&&(o=e,p=f)),e=e.next;while(e!==l);return o}function sb(n,t){return Dt(n.prev,n,t.prev)<0&&Dt(t.next,n,n.next)<0}function ob(n,t,e,i){var r=n;do r.z===0&&(r.z=Zh(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,ab(r)}function ab(n){var t,e,i,r,s,o,a,l,h=1;do{for(e=n,n=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<h&&(a++,i=i.nextZ,!!i);t++);for(l=h;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;e=i}s.nextZ=null,h*=2}while(o>1);return n}function Zh(n,t,e,i,r){return n=(n-e)*r|0,t=(t-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function lb(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function yr(n,t,e,i,r,s,o,a){return(r-o)*(t-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(r-o)*(i-a)}function hb(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!cb(n,t)&&(Xs(n,t)&&Xs(t,n)&&ub(n,t)&&(Dt(n.prev,n,t.prev)||Dt(n,t.prev,t))||rl(n,t)&&Dt(n.prev,n,n.next)>0&&Dt(t.prev,t,t.next)>0)}function Dt(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function rl(n,t){return n.x===t.x&&n.y===t.y}function xg(n,t,e,i){var r=Yo(Dt(n,t,e)),s=Yo(Dt(n,t,i)),o=Yo(Dt(e,i,n)),a=Yo(Dt(e,i,t));return!!(r!==s&&o!==a||r===0&&Wo(n,e,t)||s===0&&Wo(n,i,t)||o===0&&Wo(e,n,i)||a===0&&Wo(e,t,i))}function Wo(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Yo(n){return n>0?1:n<0?-1:0}function cb(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&xg(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Xs(n,t){return Dt(n.prev,n,n.next)<0?Dt(n,t,n.next)>=0&&Dt(n,n.prev,t)>=0:Dt(n,t,n.prev)<0||Dt(n,n.next,t)<0}function ub(n,t){var e=n,i=!1,r=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function bg(n,t){var e=new $h(n.i,n.x,n.y),i=new $h(t.i,t.x,t.y),r=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function Bp(n,t,e,i){var r=new $h(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ks(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $h(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}il.deviation=function(n,t,e,i){var r=t&&t.length,s=r?t[0]*e:n.length,o=Math.abs(tc(n,0,s,e));if(r)for(var a=0,l=t.length;a<l;a++){var h=t[a]*e,c=a<l-1?t[a+1]*e:n.length;o-=Math.abs(tc(n,h,c,e))}var p=0;for(a=0;a<i.length;a+=3){var f=i[a]*e,u=i[a+1]*e,m=i[a+2]*e;p+=Math.abs((n[f]-n[m])*(n[u+1]-n[f+1])-(n[f]-n[u])*(n[m+1]-n[f+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function tc(n,t,e,i){for(var r=0,s=t,o=e-i;s<e;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}il.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var o=0;o<t;o++)e.vertices.push(n[r][s][o]);r>0&&(i+=n[r-1].length,e.holes.push(i))}return e};var db=ou.exports;const pb=Zc(db);var au=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(au||{});class wg{constructor(t){this.items=[],this._name=t}emit(t,e,i,r,s,o,a,l){const{name:h,items:c}=this;for(let p=0,f=c.length;p<f;p++)c[p][h](t,e,i,r,s,o,a,l);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const fb=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],Ag=class Tg extends me{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...fb,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await Qx(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...Tg.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof Te&&(i={container:i},e&&(mt(gt,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor){const r=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=r?i.clearColor:Ht.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const r=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==r&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=au.ALL);const{clear:i,clearColor:r,target:s}=t;Ht.shared.setValue(r??this.background.colorRgba),e.renderTarget.clear(s,i,Ht.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new wg(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const r in this.runners)this.runners[r].add(i);return this}_addPipes(t,e){const i=e.reduce((r,s)=>(r[s.name]=s.value,r),{});t.forEach(r=>{const s=r.value,o=r.name,a=i[o];this.renderPipes[o]=new s(this,a?new a:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!_g())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};Ag.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let lu=Ag,ch;function mb(n){return ch!==void 0||(ch=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:n??lu.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Pt.get().getWebGLRenderingContext())return!1;let i=Pt.get().createCanvas().getContext("webgl",e);const r=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}})()),ch}let uh;async function gb(n={}){return uh!==void 0||(uh=await(async()=>{const t=Pt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),uh}const Op=["webgl","webgpu","canvas"];async function yb(n){let t=[];n.preference?(t.push(n.preference),Op.forEach(s=>{s!==n.preference&&t.push(s)})):t=Op.slice();let e,i={};for(let s=0;s<t.length;s++){const o=t[s];if(o==="webgpu"&&await gb()){const{WebGPURenderer:a}=await Promise.resolve().then(()=>require("./WebGPURenderer-CFR6AS1D-B1G7ZsDO.cjs"));e=a,i={...n,...n.webgpu};break}else if(o==="webgl"&&mb(n.failIfMajorPerformanceCaveat??lu.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await Promise.resolve().then(()=>require("./WebGLRenderer-Di-BqfWs-BmWtBq4n.cjs"));e=a,i={...n,...n.webgl};break}else if(o==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const r=new e;return await r.init(i),r}const hu="8.5.2";class Sg{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,hu)}static destroy(){}}Sg.extension=K.Application;class Eg{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,hu)}destroy(){this._renderer=null}}Eg.extension={type:[K.WebGLSystem,K.WebGPUSystem],name:"initHook",priority:-10};const Cg=class ec{constructor(...t){this.stage=new Te,t[0]!==void 0&&mt(gt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await yb(t),ec._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return mt(gt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=ec._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Cg._plugins=[];let Pg=Cg;de.handleByList(K.Application,Pg._plugins);de.add(Sg);class Ig extends me{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return mt(gt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return mt(gt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return mt(gt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return mt(gt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return mt(gt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const Rg=class nc{constructor(t,e,i,r){this.uid=Xt("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=i,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:Ht.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){const t=nc.defaultTextureSize,{gradientStops:e}=this,i=Pt.get().createCanvas();i.width=t,i.height=t;const r=i.getContext("2d"),s=r.createLinearGradient(0,0,nc.defaultTextureSize,1);for(let g=0;g<e.length;g++){const y=e[g];s.addColorStop(y.offset,y.color)}r.fillStyle=s,r.fillRect(0,0,t,t),this.texture=new ot({source:new qr({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:o,y0:a,x1:l,y1:h}=this,c=new dt,p=l-o,f=h-a,u=Math.sqrt(p*p+f*f),m=Math.atan2(f,p);c.translate(-o,-a),c.scale(1/t,1/t),c.rotate(-m),c.scale(256/u,1),this.transform=c,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(r=>`${r.offset}-${r.color}`).join("-"),e=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};Rg.defaultTextureSize=256;let Qs=Rg;const Fp={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class sl{constructor(t,e){this.uid=Xt("fillPattern"),this.transform=new dt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Fp[e].addressModeU,t.source.style.addressModeV=Fp[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var _b=xb,dh={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},vb=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function xb(n){var t=[];return n.replace(vb,function(e,i,r){var s=i.toLowerCase();for(r=wb(r),s=="m"&&r.length>2&&(t.push([i].concat(r.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(r.length==dh[s])return r.unshift(i),t.push(r);if(r.length<dh[s])throw new Error("malformed path data");t.push([i].concat(r.splice(0,dh[s])))}}),t}var bb=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function wb(n){var t=n.match(bb);return t?t.map(Number):[]}const Ab=Zc(_b);function Tb(n,t){const e=Ab(n),i=[];let r=null,s=0,o=0;for(let a=0;a<e.length;a++){const l=e[a],h=l[0],c=l;switch(h){case"M":s=c[1],o=c[2],t.moveTo(s,o);break;case"m":s+=c[1],o+=c[2],t.moveTo(s,o);break;case"H":s=c[1],t.lineTo(s,o);break;case"h":s+=c[1],t.lineTo(s,o);break;case"V":o=c[1],t.lineTo(s,o);break;case"v":o+=c[1],t.lineTo(s,o);break;case"L":s=c[1],o=c[2],t.lineTo(s,o);break;case"l":s+=c[1],o+=c[2],t.lineTo(s,o);break;case"C":s=c[5],o=c[6],t.bezierCurveTo(c[1],c[2],c[3],c[4],s,o);break;case"c":t.bezierCurveTo(s+c[1],o+c[2],s+c[3],o+c[4],s+c[5],o+c[6]),s+=c[5],o+=c[6];break;case"S":s=c[3],o=c[4],t.bezierCurveToShort(c[1],c[2],s,o);break;case"s":t.bezierCurveToShort(s+c[1],o+c[2],s+c[3],o+c[4]),s+=c[3],o+=c[4];break;case"Q":s=c[3],o=c[4],t.quadraticCurveTo(c[1],c[2],s,o);break;case"q":t.quadraticCurveTo(s+c[1],o+c[2],s+c[3],o+c[4]),s+=c[3],o+=c[4];break;case"T":s=c[1],o=c[2],t.quadraticCurveToShort(s,o);break;case"t":s+=c[1],o+=c[2],t.quadraticCurveToShort(s,o);break;case"A":s=c[6],o=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,o);break;case"a":s+=c[6],o+=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,o);break;case"Z":case"z":t.closePath(),i.length>0&&(r=i.pop(),r?(s=r.startX,o=r.startY):(s=0,o=0)),r=null;break;default:Lt(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&r===null&&(r={startX:s,startY:o},i.push(r))}return t}class ol{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new ol(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}strokeContains(t,e,i){if(this.radius===0)return!1;const r=this.x-t,s=this.y-e,o=this.radius,a=i/2,l=Math.sqrt(r*r+s*s);return l<o+a&&l>o-a}getBounds(t){return t=t||new Gt,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class cu{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new cu(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i){const{halfWidth:r,halfHeight:s}=this;if(r<=0||s<=0)return!1;const o=i/2,a=r-o,l=s-o,h=r+o,c=s+o,p=t-this.x,f=e-this.y,u=p*p/(a*a)+f*f/(l*l),m=p*p/(h*h)+f*f/(c*c);return u>1&&m<=1}getBounds(t){return t=t||new Gt,t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Sb(n,t,e,i,r,s){const o=n-e,a=t-i,l=r-e,h=s-i,c=o*l+a*h,p=l*l+h*h;let f=-1;p!==0&&(f=c/p);let u,m;f<0?(u=e,m=i):f>1?(u=r,m=s):(u=e+f*l,m=i+f*h);const g=n-u,y=t-m;return g*g+y*y}class br{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let r=0,s=e.length;r<s;r++)i.push(e[r].x,e[r].y);e=i}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new br(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[s*2],l=this.points[s*2+1],h=this.points[o*2],c=this.points[o*2+1];l>e!=c>e&&t<(h-a)*((e-l)/(c-l))+a&&(i=!i)}return i}strokeContains(t,e,i){const r=i/2,s=r*r,{points:o}=this,a=o.length-(this.closePath?0:2);for(let l=0;l<a;l+=2){const h=o[l],c=o[l+1],p=o[(l+2)%o.length],f=o[(l+3)%o.length];if(Sb(t,e,h,c,p,f)<=s)return!0}return!1}getBounds(t){t=t||new Gt;const e=this.points;let i=1/0,r=-1/0,s=1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=2){const h=e[a],c=e[a+1];i=h<i?h:i,r=h>r?h:r,s=c<s?c:s,o=c>o?c:o}return t.x=i,t.width=r-i,t.y=s,t.height=o-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Xo=(n,t,e,i,r,s)=>{const o=n-e,a=t-i,l=Math.sqrt(o*o+a*a);return l>=r-s&&l<=r+s};class al{constructor(t=0,e=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s}getBounds(t){return t=t||new Gt,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new al(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=t-(this.x+this.width-i),r*r+s*s<=o)||(s=e-(this.y+this.height-i),r*r+s*s<=o)||(r=t-(this.x+i),r*r+s*s<=o))return!0}return!1}strokeContains(t,e,i){const{x:r,y:s,width:o,height:a,radius:l}=this,h=i/2,c=r+l,p=s+l,f=o-l*2,u=a-l*2,m=r+o,g=s+a;return(t>=r-h&&t<=r+h||t>=m-h&&t<=m+h)&&e>=p&&e<=p+u||(e>=s-h&&e<=s+h||e>=g-h&&e<=g+h)&&t>=c&&t<=c+f?!0:t<c&&e<p&&Xo(t,e,c,p,l,h)||t>m-l&&e<p&&Xo(t,e,m-l,p,l,h)||t>m-l&&e>g-l&&Xo(t,e,m-l,g-l,l,h)||t<c&&e>g-l&&Xo(t,e,c,g-l,l,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Eb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Cb(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function Pb(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=Eb.replace(/%forloop%/gi,Cb(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let hr=null;function uu(){var n;if(hr)return hr;const t=dg();return hr=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),hr=Pb(hr,t),(n=t.getExtension("WEBGL_lose_context"))==null||n.loseContext(),hr}const kg={};function Mg(n,t){let e=2166136261;for(let i=0;i<t;i++)e^=n[i].uid,e=Math.imul(e,16777619),e>>>=0;return kg[e]||Ib(n,t,e)}let ph=0;function Ib(n,t,e){const i={};let r=0;ph||(ph=uu());for(let o=0;o<ph;o++){const a=o<t?n[o]:ot.EMPTY.source;i[r++]=a.source,i[r++]=a.style}const s=new Os(i);return kg[e]=s,s}class ic{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function rc(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const r=n.byteLength-e*8;if(r>0){const s=new Uint8Array(n,e*8,r);new Uint8Array(t,e*8,r).set(s)}}const Rb={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Vg=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(Vg||{});function sc(n,t){return t.alphaMode==="no-premultiply-alpha"&&Rb[n]||n}class kb{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class Mb{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new kb,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Dg=[];let oc=0;function Lp(){return oc>0?Dg[--oc]:new Mb}function Np(n){Dg[oc++]=n}let xs=0;const Bg=class aa{constructor(t={}){this.uid=Xt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],aa.defaultOptions.maxTextures=aa.defaultOptions.maxTextures??uu(),t={...aa.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:r}=t;this.attributeBuffer=new ic(i*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Np(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=Lp(),r=i.textures;r.clear();const s=e[this.elementStart];let o=sc(s.blendMode,s.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const a=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,h=this.indexBuffer;let c=this._batchIndexSize,p=this._batchIndexStart,f="startBatch";const u=this.maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const g=e[m];e[m]=null;const y=g.texture._source,b=sc(g.blendMode,y),T=o!==b;if(y._batchTick===xs&&!T){g._textureId=y._textureBindLocation,c+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,a,l,g._attributeStart,g._textureId),this.packQuadIndex(h,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,a,l,g._attributeStart,g._textureId),this.packIndex(g,h,g._indexStart,g._attributeStart/this.vertexSize)),g._batch=i;continue}y._batchTick=xs,(r.count>=u||T)&&(this._finishBatch(i,p,c-p,r,o,t,f),f="renderBatch",p=c,o=b,i=Lp(),r=i.textures,r.clear(),++xs),g._textureId=y._textureBindLocation=r.count,r.ids[y.uid]=r.count,r.textures[r.count++]=y,g._batch=i,c+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,a,l,g._attributeStart,g._textureId),this.packQuadIndex(h,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,a,l,g._attributeStart,g._textureId),this.packIndex(g,h,g._indexStart,g._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(i,p,c-p,r,o,t,f),p=c,++xs),this.elementStart=this.elementSize,this._batchIndexStart=p,this._batchIndexSize=c}_finishBatch(t,e,i,r,s,o,a){t.gpuBindGroup=null,t.bindGroup=null,t.action=a,t.batcher=this,t.textures=r,t.blendMode=s,t.start=e,t.size=i,++xs,this.batches[this.batchIndex++]=t,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new ic(e);rc(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let s=0;s<e.length;s++)r[s]=e[s];else rc(e.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,r){const s=t.indices,o=t.indexSize,a=t.indexOffset,l=t.attributeOffset;for(let h=0;h<o;h++)e[i++]=r+s[h+a]-l}destroy(){for(let t=0;t<this.batches.length;t++)Np(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Bg.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Vb=Bg;var Ce=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Ce||{});class Rr extends me{constructor(t){let{data:e,size:i}=t;const{usage:r,label:s,shrinkToFit:o}=t;super(),this.uid=Xt("buffer"),this._resourceType="buffer",this._resourceId=Xt("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i=i??(e==null?void 0:e.byteLength);const a=!!e;this.descriptor={size:i,usage:r,mappedAtCreation:a,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&Ce.STATIC)}set static(t){t?this.descriptor.usage|=Ce.STATIC:this.descriptor.usage&=~Ce.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const r=this._data;if(this._data=t,r.length!==t.length){!this.shrinkToFit&&t.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Xt("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Og(n,t){if(!(n instanceof Rr)){let e=t?Ce.INDEX:Ce.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=Ce.INDEX|Ce.COPY_DST):(n=new Float32Array(n),e=Ce.VERTEX|Ce.COPY_DST)),n=new Rr({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function Db(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const r=i.buffer.data;let s=1/0,o=1/0,a=-1/0,l=-1/0;const h=r.BYTES_PER_ELEMENT,c=(i.offset||0)/h,p=(i.stride||2*4)/h;for(let f=c;f<r.length;f+=p){const u=r[f],m=r[f+1];u>a&&(a=u),m>l&&(l=m),u<s&&(s=u),m<o&&(o=m)}return e.minX=s,e.minY=o,e.maxX=a,e.maxY=l,e}function Bb(n){return(n instanceof Rr||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=Og(n.buffer,!1),n}class Fg extends me{constructor(t={}){super(),this.uid=Xt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Nn,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:r}=t;if(this.buffers=[],this.attributes={},e)for(const s in e)this.addAttribute(s,e[s]);this.instanceCount=t.instanceCount||1,i&&this.addIndex(i),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=Bb(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=Og(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Db(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Ob=new Float32Array(1),Fb=new Uint32Array(1);class Lb extends Fg{constructor(){const t=new Rr({data:Ob,label:"attribute-batch-buffer",usage:Ce.VERTEX|Ce.COPY_DST,shrinkToFit:!1}),e=new Rr({data:Fb,label:"index-batch-buffer",usage:Ce.INDEX|Ce.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:e})}}function Up(n,t,e){if(n)for(const i in n){const r=i.toLocaleLowerCase(),s=t[r];if(s){let o=n[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&s.push(`//----${e}----//`),s.push(o)}else Lt(`${i} placement hook does not exist in shader`)}}const Nb=/\{\{(.*?)\}\}/g;function zp(n){var t;const e={};return(((t=n.match(Nb))==null?void 0:t.map(i=>i.replace(/[{()}]/g,"")))??[]).forEach(i=>{e[i]=[]}),e}function jp(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function Gp(n,t,e=!1){const i=[];jp(t,i),n.forEach(a=>{a.header&&jp(a.header,i)});const r=i;e&&r.sort();const s=r.map((a,l)=>`       @location(${l}) ${a},`).join(`
`);let o=t.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${s}
`),o}function Hp(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function Ub(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function zb(n){const t=/@.*?\s+/g;return n.replace(t,"")}function jb(n,t){const e=[];Hp(t,e),n.forEach(l=>{l.header&&Hp(l.header,e)});let i=0;const r=e.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${i++}) ${l}`).join(`,
`),s=e.sort().map(l=>`       var ${zb(l)};`).join(`
`),o=`return VSOutput(
                ${e.sort().map(l=>` ${Ub(l)}`).join(`,
`)});`;let a=t.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`
${r}
`),a=a.replace("{{start}}",`
${s}
`),a=a.replace("{{return}}",`
${o}
`),a}function qp(n,t){let e=n;for(const i in t){const r=t[i];r.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${r.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const Di=Object.create(null),fh=new Map;let Gb=0;function Hb({template:n,bits:t}){const e=Lg(n,t);if(Di[e])return Di[e];const{vertex:i,fragment:r}=Wb(n,t);return Di[e]=Ng(i,r,t),Di[e]}function qb({template:n,bits:t}){const e=Lg(n,t);return Di[e]||(Di[e]=Ng(n.vertex,n.fragment,t)),Di[e]}function Wb(n,t){const e=t.map(o=>o.vertex).filter(o=>!!o),i=t.map(o=>o.fragment).filter(o=>!!o);let r=Gp(e,n.vertex,!0);r=jb(e,r);const s=Gp(i,n.fragment,!0);return{vertex:r,fragment:s}}function Lg(n,t){return t.map(e=>(fh.has(e)||fh.set(e,Gb++),fh.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function Ng(n,t,e){const i=zp(n),r=zp(t);return e.forEach(s=>{Up(s.vertex,i,s.name),Up(s.fragment,r,s.name)}),{vertex:qp(n,i),fragment:qp(t,r)}}const Yb=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,Xb=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,Kb=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Qb=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,Jb={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},Zb={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function Ug({bits:n,name:t}){const e=Hb({template:{fragment:Xb,vertex:Yb},bits:[Jb,...n]});return vo.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function zg({bits:n,name:t}){return new ru({name:t,...qb({template:{vertex:Kb,fragment:Qb},bits:[Zb,...n]})})}const jg={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Gg={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},mh={};function $b(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function t1(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function Hg(n){return mh[n]||(mh[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${$b(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${t1(n)}
            `}}),mh[n]}const gh={};function e1(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function qg(n){return gh[n]||(gh[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${e1(n)}
            `}}),gh[n]}const Wg={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Yg={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Wp={};function Xg(n){let t=Wp[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=Wp[n]=new su({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class n1 extends nl{constructor(t){const e=zg({name:"batch",bits:[Gg,qg(t),Yg]}),i=Ug({name:"batch",bits:[jg,Hg(t),Wg]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:Xg(t)}})}}let Yp=null;const Kg=class Qg extends Vb{constructor(){super(...arguments),this.geometry=new Lb,this.shader=Yp||(Yp=new n1(this.maxTextures)),this.name=Qg.extension.name,this.vertexSize=6}packAttributes(t,e,i,r,s){const o=s<<16|t.roundPixels&65535,a=t.transform,l=a.a,h=a.b,c=a.c,p=a.d,f=a.tx,u=a.ty,{positions:m,uvs:g}=t,y=t.color,b=t.attributeOffset,T=b+t.attributeSize;for(let C=b;C<T;C++){const P=C*2,S=m[P],I=m[P+1];e[r++]=l*S+c*I+f,e[r++]=p*I+h*S+u,e[r++]=g[P],e[r++]=g[P+1],i[r++]=y,i[r++]=o}}packQuadAttributes(t,e,i,r,s){const o=t.texture,a=t.transform,l=a.a,h=a.b,c=a.c,p=a.d,f=a.tx,u=a.ty,m=t.bounds,g=m.maxX,y=m.minX,b=m.maxY,T=m.minY,C=o.uvs,P=t.color,S=s<<16|t.roundPixels&65535;e[r+0]=l*y+c*T+f,e[r+1]=p*T+h*y+u,e[r+2]=C.x0,e[r+3]=C.y0,i[r+4]=P,i[r+5]=S,e[r+6]=l*g+c*T+f,e[r+7]=p*T+h*g+u,e[r+8]=C.x1,e[r+9]=C.y1,i[r+10]=P,i[r+11]=S,e[r+12]=l*g+c*b+f,e[r+13]=p*b+h*g+u,e[r+14]=C.x2,e[r+15]=C.y2,i[r+16]=P,i[r+17]=S,e[r+18]=l*y+c*b+f,e[r+19]=p*b+h*y+u,e[r+20]=C.x3,e[r+21]=C.y3,i[r+22]=P,i[r+23]=S}};Kg.extension={type:[K.Batcher],name:"default"};let Jg=Kg;function i1(n,t,e,i,r,s,o,a=null){let l=0;e*=t,r*=s;const h=a.a,c=a.b,p=a.c,f=a.d,u=a.tx,m=a.ty;for(;l<o;){const g=n[e],y=n[e+1];i[r]=h*g+p*y+u,i[r+1]=c*g+f*y+m,r+=s,e+=t,l++}}function r1(n,t,e,i){let r=0;for(t*=e;r<i;)n[t]=0,n[t+1]=0,t+=e,r++}function Zg(n,t,e,i,r){const s=t.a,o=t.b,a=t.c,l=t.d,h=t.tx,c=t.ty;e=e||0,i=i||2,r=r||n.length/i-e;let p=e*i;for(let f=0;f<r;f++){const u=n[p],m=n[p+1];n[p]=s*u+a*m+h,n[p+1]=o*u+l*m+c,p+=i}}function s1(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,r=n&255,s=t>>16&255,o=t>>8&255,a=t&255,l=e*s/255,h=i*o/255,c=r*a/255;return(l<<16)+(h<<8)+c}const o1=new dt;class du{constructor(){this.packAsQuad=!1,this.batcherName="default",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?s1(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||o1}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0,this.renderable=null}}const Js={extension:{type:K.ShapeBuilder,name:"circle"},build(n,t){let e,i,r,s,o,a;if(n.type==="circle"){const P=n;e=P.x,i=P.y,o=a=P.radius,r=s=0}else if(n.type==="ellipse"){const P=n;e=P.x,i=P.y,o=P.halfWidth,a=P.halfHeight,r=s=0}else{const P=n,S=P.width/2,I=P.height/2;e=P.x+S,i=P.y+I,o=a=Math.max(0,Math.min(P.radius,Math.min(S,I))),r=S-o,s=I-a}if(!(o>=0&&a>=0&&r>=0&&s>=0))return t;const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(r?4:0)+(s?4:0);if(h===0)return t;if(l===0)return t[0]=t[6]=e+r,t[1]=t[3]=i+s,t[2]=t[4]=e-r,t[5]=t[7]=i-s,t;let c=0,p=l*4+(r?2:0)+2,f=p,u=h,m=r+o,g=s,y=e+m,b=e-m,T=i+g;if(t[c++]=y,t[c++]=T,t[--p]=T,t[--p]=b,s){const P=i-g;t[f++]=b,t[f++]=P,t[--u]=P,t[--u]=y}for(let P=1;P<l;P++){const S=Math.PI/2*(P/l),I=r+Math.cos(S)*o,w=s+Math.sin(S)*a,_=e+I,x=e-I,A=i+w,R=i-w;t[c++]=_,t[c++]=A,t[--p]=A,t[--p]=x,t[f++]=x,t[f++]=R,t[--u]=R,t[--u]=_}m=r,g=s+a,y=e+m,b=e-m,T=i+g;const C=i-g;return t[c++]=y,t[c++]=T,t[--u]=C,t[--u]=y,r&&(t[c++]=b,t[c++]=T,t[--u]=C,t[--u]=b),t},triangulate(n,t,e,i,r,s){if(n.length===0)return;let o=0,a=0;for(let c=0;c<n.length;c+=2)o+=n[c],a+=n[c+1];o/=n.length/2,a/=n.length/2;let l=i;t[l*e]=o,t[l*e+1]=a;const h=l++;for(let c=0;c<n.length;c+=2)t[l*e]=n[c],t[l*e+1]=n[c+1],c>0&&(r[s++]=l,r[s++]=h,r[s++]=l-1),l++;r[s++]=h+1,r[s++]=h,r[s++]=l-1}},a1={...Js,extension:{...Js.extension,name:"ellipse"}},l1={...Js,extension:{...Js.extension,name:"roundedRectangle"}},h1=1e-4,Xp=1e-4;function c1(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,r=n[t-2],s=n[t-1];i<t;i+=2){const o=n[i],a=n[i+1];e+=(o-r)*(a+s),r=o,s=a}return e<0?-1:1}function Kp(n,t,e,i,r,s,o,a){const l=n-e*r,h=t-i*r,c=n+e*s,p=t+i*s;let f,u;o?(f=i,u=-e):(f=-i,u=e);const m=l+f,g=h+u,y=c+f,b=p+u;return a.push(m,g),a.push(y,b),2}function Ti(n,t,e,i,r,s,o,a){const l=e-n,h=i-t;let c=Math.atan2(l,h),p=Math.atan2(r-n,s-t);a&&c<p?c+=Math.PI*2:!a&&c>p&&(p+=Math.PI*2);let f=c;const u=p-c,m=Math.abs(u),g=Math.sqrt(l*l+h*h),y=(15*m*Math.sqrt(g)/Math.PI>>0)+1,b=u/y;if(f+=b,a){o.push(n,t),o.push(e,i);for(let T=1,C=f;T<y;T++,C+=b)o.push(n,t),o.push(n+Math.sin(C)*g,t+Math.cos(C)*g);o.push(n,t),o.push(r,s)}else{o.push(e,i),o.push(n,t);for(let T=1,C=f;T<y;T++,C+=b)o.push(n+Math.sin(C)*g,t+Math.cos(C)*g),o.push(n,t);o.push(r,s),o.push(n,t)}return y*2}function u1(n,t,e,i,r,s,o,a,l){const h=h1;if(n.length===0)return;const c=t;let p=c.alignment;if(t.alignment!==.5){let J=c1(n);p=(p-.5)*J+.5}const f=new ue(n[0],n[1]),u=new ue(n[n.length-2],n[n.length-1]),m=i,g=Math.abs(f.x-u.x)<h&&Math.abs(f.y-u.y)<h;if(m){n=n.slice(),g&&(n.pop(),n.pop(),u.set(n[n.length-2],n[n.length-1]));const J=(f.x+u.x)*.5,$=(u.y+f.y)*.5;n.unshift(J,$),n.push(J,$)}const y=r,b=n.length/2;let T=n.length;const C=y.length/2,P=c.width/2,S=P*P,I=c.miterLimit*c.miterLimit;let w=n[0],_=n[1],x=n[2],A=n[3],R=0,M=0,k=-(_-A),B=w-x,O=0,U=0,z=Math.sqrt(k*k+B*B);k/=z,B/=z,k*=P,B*=P;const Q=p,j=(1-Q)*2,H=Q*2;m||(c.cap==="round"?T+=Ti(w-k*(j-H)*.5,_-B*(j-H)*.5,w-k*j,_-B*j,w+k*H,_+B*H,y,!0)+2:c.cap==="square"&&(T+=Kp(w,_,k,B,j,H,!0,y))),y.push(w-k*j,_-B*j),y.push(w+k*H,_+B*H);for(let J=1;J<b-1;++J){w=n[(J-1)*2],_=n[(J-1)*2+1],x=n[J*2],A=n[J*2+1],R=n[(J+1)*2],M=n[(J+1)*2+1],k=-(_-A),B=w-x,z=Math.sqrt(k*k+B*B),k/=z,B/=z,k*=P,B*=P,O=-(A-M),U=x-R,z=Math.sqrt(O*O+U*U),O/=z,U/=z,O*=P,U*=P;const $=x-w,St=_-A,It=x-R,rt=M-A,Kt=$*It+St*rt,Rt=St*It-rt*$,Ne=Rt<0;if(Math.abs(Rt)<.001*Math.abs(Kt)){y.push(x-k*j,A-B*j),y.push(x+k*H,A+B*H),Kt>=0&&(c.join==="round"?T+=Ti(x,A,x-k*j,A-B*j,x-O*j,A-U*j,y,!1)+4:T+=2,y.push(x-O*H,A-U*H),y.push(x+O*j,A+U*j));continue}const te=(-k+w)*(-B+A)-(-k+x)*(-B+_),ee=(-O+R)*(-U+A)-(-O+x)*(-U+M),kt=($*ee-It*te)/Rt,mn=(rt*te-St*ee)/Rt,In=(kt-x)*(kt-x)+(mn-A)*(mn-A),Ue=x+(kt-x)*j,ze=A+(mn-A)*j,Ze=x-(kt-x)*H,je=A-(mn-A)*H,ke=Math.min($*$+St*St,It*It+rt*rt),Rn=Ne?j:H,Wn=ke+Rn*Rn*S;In<=Wn?c.join==="bevel"||In/S>I?(Ne?(y.push(Ue,ze),y.push(x+k*H,A+B*H),y.push(Ue,ze),y.push(x+O*H,A+U*H)):(y.push(x-k*j,A-B*j),y.push(Ze,je),y.push(x-O*j,A-U*j),y.push(Ze,je)),T+=2):c.join==="round"?Ne?(y.push(Ue,ze),y.push(x+k*H,A+B*H),T+=Ti(x,A,x+k*H,A+B*H,x+O*H,A+U*H,y,!0)+4,y.push(Ue,ze),y.push(x+O*H,A+U*H)):(y.push(x-k*j,A-B*j),y.push(Ze,je),T+=Ti(x,A,x-k*j,A-B*j,x-O*j,A-U*j,y,!1)+4,y.push(x-O*j,A-U*j),y.push(Ze,je)):(y.push(Ue,ze),y.push(Ze,je)):(y.push(x-k*j,A-B*j),y.push(x+k*H,A+B*H),c.join==="round"?Ne?T+=Ti(x,A,x+k*H,A+B*H,x+O*H,A+U*H,y,!0)+2:T+=Ti(x,A,x-k*j,A-B*j,x-O*j,A-U*j,y,!1)+2:c.join==="miter"&&In/S<=I&&(Ne?(y.push(Ze,je),y.push(Ze,je)):(y.push(Ue,ze),y.push(Ue,ze)),T+=2),y.push(x-O*j,A-U*j),y.push(x+O*H,A+U*H),T+=2)}w=n[(b-2)*2],_=n[(b-2)*2+1],x=n[(b-1)*2],A=n[(b-1)*2+1],k=-(_-A),B=w-x,z=Math.sqrt(k*k+B*B),k/=z,B/=z,k*=P,B*=P,y.push(x-k*j,A-B*j),y.push(x+k*H,A+B*H),m||(c.cap==="round"?T+=Ti(x-k*(j-H)*.5,A-B*(j-H)*.5,x-k*j,A-B*j,x+k*H,A+B*H,y,!1)+2:c.cap==="square"&&(T+=Kp(x,A,k,B,j,H,!1,y)));const _t=Xp*Xp;for(let J=C;J<T+C-2;++J)w=y[J*2],_=y[J*2+1],x=y[(J+1)*2],A=y[(J+1)*2+1],R=y[(J+2)*2],M=y[(J+2)*2+1],!(Math.abs(w*(A-M)+x*(M-_)+R*(_-A))<_t)&&a.push(J,J+1,J+2)}function $g(n,t,e,i,r,s,o){const a=pb(n,t,2);if(!a)return;for(let h=0;h<a.length;h+=3)s[o++]=a[h]+r,s[o++]=a[h+1]+r,s[o++]=a[h+2]+r;let l=r*i;for(let h=0;h<n.length;h+=2)e[l]=n[h],e[l+1]=n[h+1],l+=i}const d1=[],p1={extension:{type:K.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return t},triangulate(n,t,e,i,r,s){$g(n,d1,t,e,i,r,s)}},f1={extension:{type:K.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,r=e.y,s=e.width,o=e.height;return s>=0&&o>=0&&(t[0]=i,t[1]=r,t[2]=i+s,t[3]=r,t[4]=i+s,t[5]=r+o,t[6]=i,t[7]=r+o),t},triangulate(n,t,e,i,r,s){let o=0;i*=e,t[i+o]=n[0],t[i+o+1]=n[1],o+=e,t[i+o]=n[2],t[i+o+1]=n[3],o+=e,t[i+o]=n[6],t[i+o+1]=n[7],o+=e,t[i+o]=n[4],t[i+o+1]=n[5],o+=e;const a=i/e;r[s++]=a,r[s++]=a+1,r[s++]=a+2,r[s++]=a+1,r[s++]=a+3,r[s++]=a+2}},m1={extension:{type:K.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,t},triangulate(n,t,e,i,r,s){let o=0;i*=e,t[i+o]=n[0],t[i+o+1]=n[1],o+=e,t[i+o]=n[2],t[i+o+1]=n[3],o+=e,t[i+o]=n[4],t[i+o+1]=n[5];const a=i/e;r[s++]=a,r[s++]=a+1,r[s++]=a+2}},ll={};de.handleByMap(K.ShapeBuilder,ll);de.add(f1,p1,m1,Js,a1,l1);const g1=new Gt;function y1(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let r=0;r<n.instructions.length;r++){const s=n.instructions[r];if(s.action==="texture")_1(s.data,i,e);else if(s.action==="fill"||s.action==="stroke"){const o=s.action==="stroke",a=s.data.path.shapePath,l=s.data.style,h=s.data.hole;o&&h&&Qp(h.shapePath,l,null,!0,i,e),Qp(a,l,h,o,i,e)}}}function _1(n,t,e){const{vertices:i,uvs:r,indices:s}=e,o=s.length,a=i.length/2,l=[],h=ll.rectangle,c=g1,p=n.image;c.x=n.dx,c.y=n.dy,c.width=n.dw,c.height=n.dh;const f=n.transform;h.build(c,l),f&&Zg(l,f),h.triangulate(l,i,2,a,s,o);const u=p.uvs;r.push(u.x0,u.y0,u.x1,u.y1,u.x3,u.y3,u.x2,u.y2);const m=An.get(du);m.indexOffset=o,m.indexSize=s.length-o,m.attributeOffset=a,m.attributeSize=i.length/2-a,m.baseColor=n.style,m.alpha=n.alpha,m.texture=p,m.geometryData=e,t.push(m)}function Qp(n,t,e,i,r,s){const{vertices:o,uvs:a,indices:l}=s,h=n.shapePrimitives.length-1;n.shapePrimitives.forEach(({shape:c,transform:p},f)=>{const u=l.length,m=o.length/2,g=[],y=ll[c.type];if(y.build(c,g),p&&Zg(g,p),i){const P=c.closePath??!0;u1(g,t,!1,P,o,2,m,l)}else if(e&&h===f){h!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const P=[],S=g.slice();v1(e.shapePath).forEach(I=>{P.push(S.length/2),S.push(...I)}),$g(S,P,o,2,m,l,u)}else y.triangulate(g,o,2,m,l,u);const b=a.length/2,T=t.texture;if(T!==ot.WHITE){const P=t.matrix;P&&(p&&P.append(p.clone().invert()),i1(o,2,m,a,b,2,o.length/2-m,P))}else r1(a,b,2,o.length/2-m);const C=An.get(du);C.indexOffset=u,C.indexSize=l.length-u,C.attributeOffset=m,C.attributeSize=o.length/2-m,C.baseColor=t.color,C.alpha=t.alpha,C.texture=T,C.geometryData=s,r.push(C)})}function v1(n){if(!n)return[];const t=n.shapePrimitives,e=[];for(let i=0;i<t.length;i++){const r=t[i].shape,s=[];ll[r.type].build(r,s),e.push(s)}return e}class x1{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class b1{constructor(){this.batcher=new Jg,this.instructions=new Jm}init(){this.instructions.reset()}get geometry(){return mt(Qv,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const pu=class ac{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){ac.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??ac.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),y1(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=An.get(b1),{batches:i,geometryData:r}=this._gpuContextHash[t.uid],s=r.vertices.length,o=r.indices.length;for(let c=0;c<i.length;c++)i[c].applyTransform=!1;const a=e.batcher;a.ensureAttributeBuffer(s),a.ensureIndexBuffer(o),a.begin();for(let c=0;c<i.length;c++){const p=i[c];a.add(p)}a.finish(e.instructions);const l=a.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const h=a.batches;for(let c=0;c<h.length;c++){const p=h[c];p.bindGroup=Mg(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new x1;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(An.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{An.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};pu.extension={type:[K.WebGLSystem,K.WebGPUSystem,K.CanvasSystem],name:"graphicsContext"};pu.defaultOptions={bezierSmoothness:.5};let fu=pu;const w1=8,Ko=11920929e-14,A1=1;function ty(n,t,e,i,r,s,o,a,l,h){const c=Math.min(.99,Math.max(0,h??fu.defaultOptions.bezierSmoothness));let p=(A1-c)/1;return p*=p,T1(t,e,i,r,s,o,a,l,n,p),n}function T1(n,t,e,i,r,s,o,a,l,h){lc(n,t,e,i,r,s,o,a,l,h,0),l.push(o,a)}function lc(n,t,e,i,r,s,o,a,l,h,c){if(c>w1)return;const p=(n+e)/2,f=(t+i)/2,u=(e+r)/2,m=(i+s)/2,g=(r+o)/2,y=(s+a)/2,b=(p+u)/2,T=(f+m)/2,C=(u+g)/2,P=(m+y)/2,S=(b+C)/2,I=(T+P)/2;if(c>0){let w=o-n,_=a-t;const x=Math.abs((e-o)*_-(i-a)*w),A=Math.abs((r-o)*_-(s-a)*w);if(x>Ko&&A>Ko){if((x+A)*(x+A)<=h*(w*w+_*_)){l.push(S,I);return}}else if(x>Ko){if(x*x<=h*(w*w+_*_)){l.push(S,I);return}}else if(A>Ko){if(A*A<=h*(w*w+_*_)){l.push(S,I);return}}else if(w=S-(n+o)/2,_=I-(t+a)/2,w*w+_*_<=h){l.push(S,I);return}}lc(n,t,p,f,b,T,S,I,l,h,c+1),lc(S,I,C,P,g,y,o,a,l,h,c+1)}const S1=8,E1=11920929e-14,C1=1;function P1(n,t,e,i,r,s,o,a){const l=Math.min(.99,Math.max(0,a??fu.defaultOptions.bezierSmoothness));let h=(C1-l)/1;return h*=h,I1(t,e,i,r,s,o,n,h),n}function I1(n,t,e,i,r,s,o,a){hc(o,n,t,e,i,r,s,a,0),o.push(r,s)}function hc(n,t,e,i,r,s,o,a,l){if(l>S1)return;const h=(t+i)/2,c=(e+r)/2,p=(i+s)/2,f=(r+o)/2,u=(h+p)/2,m=(c+f)/2;let g=s-t,y=o-e;const b=Math.abs((i-s)*y-(r-o)*g);if(b>E1){if(b*b<=a*(g*g+y*y)){n.push(u,m);return}}else if(g=u-(t+s)/2,y=m-(e+o)/2,g*g+y*y<=a){n.push(u,m);return}hc(n,t,e,h,c,u,m,a,l+1),hc(n,u,m,p,f,s,o,a,l+1)}function ey(n,t,e,i,r,s,o,a){let l=Math.abs(r-s);(!o&&r>s||o&&s>r)&&(l=2*Math.PI-l),a=a||Math.max(6,Math.floor(6*Math.pow(i,1/3)*(l/Math.PI))),a=Math.max(a,3);let h=l/a,c=r;h*=o?-1:1;for(let p=0;p<a+1;p++){const f=Math.cos(c),u=Math.sin(c),m=t+f*i,g=e+u*i;n.push(m,g),c+=h}}function R1(n,t,e,i,r,s){const o=n[n.length-2],a=n[n.length-1]-e,l=o-t,h=r-e,c=i-t,p=Math.abs(a*c-l*h);if(p<1e-8||s===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const f=a*a+l*l,u=h*h+c*c,m=a*h+l*c,g=s*Math.sqrt(f)/p,y=s*Math.sqrt(u)/p,b=g*m/f,T=y*m/u,C=g*c+y*l,P=g*h+y*a,S=l*(y+b),I=a*(y+b),w=c*(g+T),_=h*(g+T),x=Math.atan2(I-P,S-C),A=Math.atan2(_-P,w-C);ey(n,C+t,P+e,s,x,A,l*h>c*a)}const Fs=Math.PI*2,yh={centerX:0,centerY:0,ang1:0,ang2:0},_h=({x:n,y:t},e,i,r,s,o,a,l)=>{n*=e,t*=i;const h=r*n-s*t,c=s*n+r*t;return l.x=h+o,l.y=c+a,l};function k1(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,r=Math.cos(n),s=Math.sin(n),o=Math.cos(n+t),a=Math.sin(n+t);return[{x:r-s*i,y:s+r*i},{x:o+a*i,y:a-o*i},{x:o,y:a}]}const Jp=(n,t,e,i)=>{const r=n*i-t*e<0?-1:1;let s=n*e+t*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},M1=(n,t,e,i,r,s,o,a,l,h,c,p,f)=>{const u=Math.pow(r,2),m=Math.pow(s,2),g=Math.pow(c,2),y=Math.pow(p,2);let b=u*m-u*y-m*g;b<0&&(b=0),b/=u*y+m*g,b=Math.sqrt(b)*(o===a?-1:1);const T=b*r/s*p,C=b*-s/r*c,P=h*T-l*C+(n+e)/2,S=l*T+h*C+(t+i)/2,I=(c-T)/r,w=(p-C)/s,_=(-c-T)/r,x=(-p-C)/s,A=Jp(1,0,I,w);let R=Jp(I,w,_,x);a===0&&R>0&&(R-=Fs),a===1&&R<0&&(R+=Fs),f.centerX=P,f.centerY=S,f.ang1=A,f.ang2=R};function V1(n,t,e,i,r,s,o,a=0,l=0,h=0){if(s===0||o===0)return;const c=Math.sin(a*Fs/360),p=Math.cos(a*Fs/360),f=p*(t-i)/2+c*(e-r)/2,u=-c*(t-i)/2+p*(e-r)/2;if(f===0&&u===0)return;s=Math.abs(s),o=Math.abs(o);const m=Math.pow(f,2)/Math.pow(s,2)+Math.pow(u,2)/Math.pow(o,2);m>1&&(s*=Math.sqrt(m),o*=Math.sqrt(m)),M1(t,e,i,r,s,o,l,h,c,p,f,u,yh);let{ang1:g,ang2:y}=yh;const{centerX:b,centerY:T}=yh;let C=Math.abs(y)/(Fs/4);Math.abs(1-C)<1e-7&&(C=1);const P=Math.max(Math.ceil(C),1);y/=P;let S=n[n.length-2],I=n[n.length-1];const w={x:0,y:0};for(let _=0;_<P;_++){const x=k1(g,y),{x:A,y:R}=_h(x[0],s,o,p,c,b,T,w),{x:M,y:k}=_h(x[1],s,o,p,c,b,T,w),{x:B,y:O}=_h(x[2],s,o,p,c,b,T,w);ty(n,S,I,A,R,M,k,B,O),S=B,I=O,g+=y}}function D1(n,t,e){const i=(o,a)=>{const l=a.x-o.x,h=a.y-o.y,c=Math.sqrt(l*l+h*h),p=l/c,f=h/c;return{len:c,nx:p,ny:f}},r=(o,a)=>{o===0?n.moveTo(a.x,a.y):n.lineTo(a.x,a.y)};let s=t[t.length-1];for(let o=0;o<t.length;o++){const a=t[o%t.length],l=a.radius??e;if(l<=0){r(o,a),s=a;continue}const h=t[(o+1)%t.length],c=i(a,s),p=i(a,h);if(c.len<1e-4||p.len<1e-4){r(o,a),s=a;continue}let f=Math.asin(c.nx*p.ny-c.ny*p.nx),u=1,m=!1;c.nx*p.nx-c.ny*-p.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,u=-1,m=!0):f>0&&(u=-1,m=!0);const g=f/2;let y,b=Math.abs(Math.cos(g)*l/Math.sin(g));b>Math.min(c.len/2,p.len/2)?(b=Math.min(c.len/2,p.len/2),y=Math.abs(b*Math.sin(g)/Math.cos(g))):y=l;const T=a.x+p.nx*b+-p.ny*y*u,C=a.y+p.ny*b+p.nx*y*u,P=Math.atan2(c.ny,c.nx)+Math.PI/2*u,S=Math.atan2(p.ny,p.nx)-Math.PI/2*u;o===0&&n.moveTo(T+Math.cos(P)*y,C+Math.sin(P)*y),n.arc(T,C,y,P,S,m),s=a}}function B1(n,t,e,i){const r=(a,l)=>Math.sqrt((a.x-l.x)**2+(a.y-l.y)**2),s=(a,l,h)=>({x:a.x+(l.x-a.x)*h,y:a.y+(l.y-a.y)*h}),o=t.length;for(let a=0;a<o;a++){const l=t[(a+1)%o],h=l.radius??e;if(h<=0){a===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y);continue}const c=t[a],p=t[(a+2)%o],f=r(c,l);let u;if(f<1e-4)u=l;else{const y=Math.min(f/2,h);u=s(l,c,y/f)}const m=r(p,l);let g;if(m<1e-4)g=l;else{const y=Math.min(m/2,h);g=s(l,p,y/m)}a===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y),n.quadraticCurveTo(l.x,l.y,g.x,g.y,i)}}const O1=new Gt;class F1{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Nn,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,o){this._ensurePoly(!1);const a=this._currentPoly.points;return ey(a,t,e,i,r,s,o),this}arcTo(t,e,i,r,s){this._ensurePoly();const o=this._currentPoly.points;return R1(o,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,o,a){const l=this._currentPoly.points;return V1(l,this._currentPoly.lastX,this._currentPoly.lastY,o,a,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,o,a){this._ensurePoly();const l=this._currentPoly;return ty(this._currentPoly.points,l.lastX,l.lastY,t,e,i,r,s,o,a),this}quadraticCurveTo(t,e,i,r,s){this._ensurePoly();const o=this._currentPoly;return P1(this._currentPoly.points,o.lastX,o.lastY,t,e,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let i=0;i<t.instructions.length;i++){const r=t.instructions[i];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new Gt(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new ol(t,e,i),r),this}poly(t,e,i){const r=new br(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,o){r=Math.max(r|0,3);const a=-1*Math.PI/2+s,l=Math.PI*2/r,h=[];for(let c=0;c<r;c++){const p=c*l+a;h.push(t+i*Math.cos(p),e+i*Math.sin(p))}return this.poly(h,!0,o),this}roundPoly(t,e,i,r,s,o=0,a){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(t,e,i,r,o);const l=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,l);const h=-1*Math.PI/2+o,c=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let f=0;f<r;f++){const u=f*c+h,m=t+i*Math.cos(u),g=e+i*Math.sin(u),y=u+Math.PI+p,b=u-Math.PI-p,T=m+s*Math.cos(y),C=g+s*Math.sin(y),P=m+s*Math.cos(b),S=g+s*Math.sin(b);f===0?this.moveTo(T,C):this.lineTo(T,C),this.quadraticCurveTo(m,g,P,S,a)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?B1(this,t,e,r):D1(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(s===0)return this.rect(t,e,i,r);const o=Math.min(i,r)/2,a=Math.min(o,Math.max(-o,s)),l=t+i,h=e+r,c=a<0?-a:0,p=Math.abs(a);return this.moveTo(t,e+p).arcTo(t+c,e+c,t+p,e,p).lineTo(l-p,e).arcTo(l-c,e+c,l,e+p,p).lineTo(l,h-p).arcTo(l-c,h-c,t+i-p,h,p).lineTo(t+p,h).arcTo(t+c,h-c,t,h-p,p).closePath()}chamferRect(t,e,i,r,s,o){if(s<=0)return this.rect(t,e,i,r);const a=Math.min(s,Math.min(i,r)/2),l=t+i,h=e+r,c=[t+a,e,l-a,e,l,e+a,l,h-a,l-a,h,t+a,h,t,h-a,t,e+a];for(let p=c.length-1;p>=2;p-=2)c[p]===c[p-2]&&c[p-1]===c[p-3]&&c.splice(p-1,2);return this.poly(c,!0,o)}ellipse(t,e,i,r,s){return this.drawShape(new cu(t,e,i,r),s),this}roundRect(t,e,i,r,s,o){return this.drawShape(new al(t,e,i,r,s),o),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new br,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new br,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,r=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const s=e.transform,o=i;i=s.a*i+s.c*r+s.tx,r=s.b*o+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const r=e[i],s=r.shape.getBounds(O1);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}class kr{constructor(t){this.instructions=[],this.uid=Xt("graphicsPath"),this._dirty=!0,typeof t=="string"?Tb(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new F1(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(ue.shared);let l=0,h=0;if(!o||o.action!=="bezierCurveTo")l=a.x,h=a.y;else{l=o.data[2],h=o.data[3];const c=a.x,p=a.y;l=c+(c-l),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,e,i,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(ue.shared);let o=0,a=0;if(!r||r.action!=="quadraticCurveTo")o=s.x,a=s.y;else{o=r.data[0],a=r.data[1];const l=s.x,h=s.y;o=l+(l-o),a=h+(h-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,s){return this.instructions.push({action:"rect",data:[t,e,i,r,s]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,s,o,a){s=s||r/2;const l=-1*Math.PI/2+o,h=i*2,c=Math.PI*2/h,p=[];for(let f=0;f<h;f++){const u=f%2?s:r,m=f*c+l;p.push(t+u*Math.cos(m),e+u*Math.sin(m))}return this.poly(p,!0,a),this}clone(t=!1){const e=new kr;if(!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const r=this.instructions[i];e.instructions.push({action:r.action,data:r.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,r=t.c,s=t.d,o=t.tx,a=t.ty;let l=0,h=0,c=0,p=0,f=0,u=0,m=0,g=0;for(let y=0;y<this.instructions.length;y++){const b=this.instructions[y],T=b.data;switch(b.action){case"moveTo":case"lineTo":l=T[0],h=T[1],T[0]=e*l+r*h+o,T[1]=i*l+s*h+a;break;case"bezierCurveTo":c=T[0],p=T[1],f=T[2],u=T[3],l=T[4],h=T[5],T[0]=e*c+r*p+o,T[1]=i*c+s*p+a,T[2]=e*f+r*u+o,T[3]=i*f+s*u+a,T[4]=e*l+r*h+o,T[5]=i*l+s*h+a;break;case"quadraticCurveTo":c=T[0],p=T[1],l=T[2],h=T[3],T[0]=e*c+r*p+o,T[1]=i*c+s*p+a,T[2]=e*l+r*h+o,T[3]=i*l+s*h+a;break;case"arcToSvg":l=T[5],h=T[6],m=T[0],g=T[1],T[0]=e*m+r*g,T[1]=i*m+s*g,T[5]=e*l+r*h+o,T[6]=i*l+s*h+a;break;case"circle":T[4]=bs(T[3],t);break;case"rect":T[4]=bs(T[4],t);break;case"ellipse":T[8]=bs(T[8],t);break;case"roundRect":T[5]=bs(T[5],t);break;case"addPath":T[0].transform(t);break;case"poly":T[2]=bs(T[2],t);break;default:Lt("unknown transform action",b.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function bs(n,t){return n?n.prepend(t):t.clone()}function L1(n,t){if(typeof n=="string"){const i=document.createElement("div");i.innerHTML=n.trim(),n=i.querySelector("svg")}const e={context:t,path:new kr};return ny(n,e,null,null),t}function ny(n,t,e,i){const r=n.children,{fillStyle:s,strokeStyle:o}=N1(n);s&&e?e={...e,...s}:s&&(e=s),o&&i?i={...i,...o}:o&&(i=o),t.context.fillStyle=e,t.context.strokeStyle=i;let a,l,h,c,p,f,u,m,g,y,b,T,C,P,S,I,w;switch(n.nodeName.toLowerCase()){case"path":P=n.getAttribute("d"),S=new kr(P),t.context.path(S),e&&t.context.fill(),i&&t.context.stroke();break;case"circle":u=ne(n,"cx",0),m=ne(n,"cy",0),g=ne(n,"r",0),t.context.ellipse(u,m,g,g),e&&t.context.fill(),i&&t.context.stroke();break;case"rect":a=ne(n,"x",0),l=ne(n,"y",0),I=ne(n,"width",0),w=ne(n,"height",0),y=ne(n,"rx",0),b=ne(n,"ry",0),y||b?t.context.roundRect(a,l,I,w,y||b):t.context.rect(a,l,I,w),e&&t.context.fill(),i&&t.context.stroke();break;case"ellipse":u=ne(n,"cx",0),m=ne(n,"cy",0),y=ne(n,"rx",0),b=ne(n,"ry",0),t.context.beginPath(),t.context.ellipse(u,m,y,b),e&&t.context.fill(),i&&t.context.stroke();break;case"line":h=ne(n,"x1",0),c=ne(n,"y1",0),p=ne(n,"x2",0),f=ne(n,"y2",0),t.context.beginPath(),t.context.moveTo(h,c),t.context.lineTo(p,f),i&&t.context.stroke();break;case"polygon":C=n.getAttribute("points"),T=C.match(/\d+/g).map(_=>parseInt(_,10)),t.context.poly(T,!0),e&&t.context.fill(),i&&t.context.stroke();break;case"polyline":C=n.getAttribute("points"),T=C.match(/\d+/g).map(_=>parseInt(_,10)),t.context.poly(T,!1),i&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}for(let _=0;_<r.length;_++)ny(r[_],t,e,i)}function ne(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function N1(n){const t=n.getAttribute("style"),e={},i={};let r=!1,s=!1;if(t){const o=t.split(";");for(let a=0;a<o.length;a++){const l=o[a],[h,c]=l.split(":");switch(h){case"stroke":c!=="none"&&(e.color=Ht.shared.setValue(c).toNumber(),s=!0);break;case"stroke-width":e.width=Number(c);break;case"fill":c!=="none"&&(r=!0,i.color=Ht.shared.setValue(c).toNumber());break;case"fill-opacity":i.alpha=Number(c);break;case"stroke-opacity":e.alpha=Number(c);break;case"opacity":i.alpha=Number(c),e.alpha=Number(c);break}}}else{const o=n.getAttribute("stroke");o&&o!=="none"&&(s=!0,e.color=Ht.shared.setValue(o).toNumber(),e.width=ne(n,"stroke-width",1));const a=n.getAttribute("fill");a&&a!=="none"&&(r=!0,i.color=Ht.shared.setValue(a).toNumber())}return{strokeStyle:s?e:null,fillStyle:r?i:null}}function U1(n){return Ht.isColorLike(n)}function Zp(n){return n instanceof sl}function $p(n){return n instanceof Qs}function z1(n,t,e){const i=Ht.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=ot.WHITE,{...e,...n}}function tf(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function ef(n,t,e){return t.buildLinearGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function j1(n,t){var e;const i={...t,...n};if(i.texture){if(i.texture!==ot.WHITE){const o=((e=i.matrix)==null?void 0:e.invert())||new dt;o.translate(i.texture.frame.x,i.texture.frame.y),o.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=o}const s=i.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}const r=Ht.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function Bi(n,t){if(n==null)return null;const e={},i=n;return U1(n)?z1(e,n,t):Zp(n)?tf(e,n,t):$p(n)?ef(e,n,t):i.fill&&Zp(i.fill)?tf(i,i.fill,t):i.fill&&$p(i.fill)?ef(i,i.fill,t):j1(i,t)}function Aa(n,t){const{width:e,alignment:i,miterLimit:r,cap:s,join:o,...a}=t,l=Bi(n,a);return l?{width:e,alignment:i,miterLimit:r,cap:s,join:o,...l}:null}const G1=new ue,nf=new dt,mu=class yn extends me{constructor(){super(...arguments),this.uid=Xt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new kr,this._transform=new dt,this._fillStyle={...yn.defaultFillStyle},this._strokeStyle={...yn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Nn,this._boundsDirty=!0}clone(){const t=new yn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Bi(t,yn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Aa(t,yn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Bi(t,yn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Bi(t,yn.defaultStrokeStyle),this}texture(t,e,i,r,s,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:s||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Ht.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new kr,this}fill(t,e){let i;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(mt(gt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Bi(t,yn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(ue.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Aa(t,yn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,r,s,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,i,r,s,o),this}arcTo(t,e,i,r,s){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}arcToSvg(t,e,i,r,s,o,a){this._tick++;const l=this._transform;return this._activePath.arcToSvg(t,e,i,r,s,l.a*o+l.c*a+l.tx,l.b*o+l.d*a+l.ty),this}bezierCurveTo(t,e,i,r,s,o,a){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*i+l.c*r+l.tx,l.b*i+l.d*r+l.ty,l.a*s+l.c*o+l.tx,l.b*s+l.d*o+l.ty,a),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,r=this._activePath.instructions,s=i.a*t+i.c*e+i.tx,o=i.b*t+i.d*e+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(t,e,i,r,s){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,s){return this._tick++,this._activePath.roundRect(t,e,i,r,s,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,s=0,o){return this._tick++,this._activePath.regularPoly(t,e,i,r,s,o),this}roundPoly(t,e,i,r,s,o){return this._tick++,this._activePath.roundPoly(t,e,i,r,s,o),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,s){return this._tick++,this._activePath.filletRect(t,e,i,r,s),this}chamferRect(t,e,i,r,s,o){return this._tick++,this._activePath.chamferRect(t,e,i,r,s,o),this}star(t,e,i,r,s=0,o=0){return this._tick++,this._activePath.star(t,e,i,r,s,o,this._transform.clone()),this}svg(t){return this._tick++,L1(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,s,o){return t instanceof dt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,r,s,o),this)}transform(t,e,i,r,s,o){return t instanceof dt?(this._transform.append(t),this):(nf.set(t,e,i,r,s,o),this._transform.append(nf),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],r=i.action;if(r==="fill"){const s=i.data;t.addBounds(s.path.bounds)}else if(r==="texture"){const s=i.data;t.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=i.data,o=s.style.width/2,a=s.path.bounds;t.addFrame(a.minX-o,a.minY-o,a.maxX+o,a.maxY+o)}}return t}containsPoint(t){var e;if(!this.bounds.containsPoint(t.x,t.y))return!1;const i=this.instructions;let r=!1;for(let s=0;s<i.length;s++){const o=i[s],a=o.data,l=a.path;if(!o.action||!l)continue;const h=a.style,c=l.shapePath.shapePrimitives;for(let p=0;p<c.length;p++){const f=c[p].shape;if(!h||!f)continue;const u=c[p].transform,m=u?u.applyInverse(t,G1):t;o.action==="fill"?r=f.contains(m.x,m.y):r=f.strokeContains(m.x,m.y,h.width);const g=a.hole;if(g){const y=(e=g.shapePath)==null?void 0:e.shapePrimitives;if(y)for(let b=0;b<y.length;b++)y[b].shape.contains(m.x,m.y)&&(r=!1)}if(r)return!0}}return r}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};mu.defaultFillStyle={color:16777215,alpha:1,texture:ot.WHITE,matrix:null,fill:null};mu.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ot.WHITE,matrix:null,fill:null};let tn=mu;const rf=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function iy(n){const t=[];let e=0;for(let i=0;i<rf.length;i++){const r=`_${rf[i]}`;t[e++]=n[r]}return e=ry(n._fill,t,e),e=H1(n._stroke,t,e),e=q1(n.dropShadow,t,e),t.join("-")}function ry(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function H1(n,t,e){return n&&(e=ry(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function q1(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=Ht.shared.setValue(n.color).toNumber()),e}const gu=class ur extends me{constructor(t={}){super(),W1(t);const e={...ur.defaultTextStyle,...t};for(const i in e){const r=i;this[r]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ur.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ur.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...tn.defaultFillStyle,...t},()=>{this._fill=Bi({...this._originalFill},tn.defaultFillStyle)})),this._fill=Bi(t===0?"black":t,tn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...tn.defaultStrokeStyle,...t},()=>{this._stroke=Aa({...this._originalStroke},tn.defaultStrokeStyle)})),this._stroke=Aa(t,tn.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=iy(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=ur.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ur({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var e,i,r,s;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(e=this._fill)!=null&&e.texture&&this._fill.texture.destroy(o),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(o),(r=this._stroke)!=null&&r.texture&&this._stroke.texture.destroy(o),(s=this._originalStroke)!=null&&s.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,r,s)=>(i[r]=s,e==null||e(r,s),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Ht.isColorLike(t)||t instanceof Qs||t instanceof sl)}};gu.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};gu.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let li=gu;function W1(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=li.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){mt(gt,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Ht.isColorLike(e))i.color=e;else if(e instanceof Qs||e instanceof sl)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){mt(gt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=li.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new Qs(0,0,0,e*1.7),r=t.fillGradientStops.map(s=>Ht.shared.setValue(s).toNumber());r.forEach((s,o)=>{const a=o/(r.length-1);i.addColorStop(a,s)}),n.fill={fill:i}}}class Y1{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=Pt.get().createCanvas();i.width=t,i.height=e;const r=i.getContext("2d");return{canvas:i,context:r}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=jh(t),e=jh(e);const r=(t<<17)+(e<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(t,e)),s}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:r}=e,s=(i<<17)+(r<<1);t.context.clearRect(0,0,i,r),this._canvasPool[s].push(t)}clear(){this._canvasPool={}}}const cc=new Y1,X1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Ta(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!X1.includes(r)&&(r=`"${r}"`),e[i]=r}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const vh={willReadFrequently:!0},fn=class X{static get experimentalLetterSpacingSupported(){let t=X._experimentalLetterSpacingSupported;if(t!==void 0){const e=Pt.get().getCanvasRenderingContext2D().prototype;t=X._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,r,s,o,a,l,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}static measureText(t=" ",e,i=X._canvas,r=e.wordWrap){var s;const o=`${t}:${e.styleKey}`;if(X._measurementCache[o])return X._measurementCache[o];const a=Ta(e),l=X.measureFont(a);l.fontSize===0&&(l.fontSize=e.fontSize,l.ascent=e.fontSize);const h=X.__context;h.font=a;const c=(r?X._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),p=new Array(c.length);let f=0;for(let b=0;b<c.length;b++){const T=X._measureText(c[b],e.letterSpacing,h);p[b]=T,f=Math.max(f,T)}const u=((s=e._stroke)==null?void 0:s.width)||0;let m=f+u;e.dropShadow&&(m+=e.dropShadow.distance);const g=e.lineHeight||l.fontSize;let y=Math.max(g,l.fontSize+u)+(c.length-1)*(g+e.leading);return e.dropShadow&&(y+=e.dropShadow.distance),new X(t,e,m,y,c,p,g+e.leading,f,l)}static _measureText(t,e,i){let r=!1;X.experimentalLetterSpacingSupported&&(X.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const s=i.measureText(t);let o=s.width;const a=-s.actualBoundingBoxLeft;let l=s.actualBoundingBoxRight-a;if(o>0)if(r)o-=e,l-=e;else{const h=(X.graphemeSegmenter(t).length-1)*e;o+=h,l+=h}return Math.max(o,l)}static _wordWrap(t,e,i=X._canvas){const r=i.getContext("2d",vh);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:h,whiteSpace:c}=e,p=X._collapseSpaces(c),f=X._collapseNewlines(c);let u=!p;const m=e.wordWrapWidth+h,g=X._tokenize(t);for(let y=0;y<g.length;y++){let b=g[y];if(X._isNewline(b)){if(!f){a+=X._addLine(o),u=!p,o="",s=0;continue}b=" "}if(p){const C=X.isBreakingSpace(b),P=X.isBreakingSpace(o[o.length-1]);if(C&&P)continue}const T=X._getFromCache(b,h,l,r);if(T>m)if(o!==""&&(a+=X._addLine(o),o="",s=0),X.canBreakWords(b,e.breakWords)){const C=X.wordWrapSplit(b);for(let P=0;P<C.length;P++){let S=C[P],I=S,w=1;for(;C[P+w];){const x=C[P+w];if(!X.canBreakChars(I,x,b,P,e.breakWords))S+=x;else break;I=x,w++}P+=w-1;const _=X._getFromCache(S,h,l,r);_+s>m&&(a+=X._addLine(o),u=!1,o="",s=0),o+=S,s+=_}}else{o.length>0&&(a+=X._addLine(o),o="",s=0);const C=y===g.length-1;a+=X._addLine(b,!C),u=!1,o="",s=0}else T+s>m&&(u=!1,a+=X._addLine(o),o="",s=0),(o.length>0||!X.isBreakingSpace(b)||u)&&(o+=b,s+=T)}return a+=X._addLine(o,!1),a}static _addLine(t,e=!0){return t=X._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,r){let s=i[t];return typeof s!="number"&&(s=X._measureText(t,e,r)+e,i[t]=s),s}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!X.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:X._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:X._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const s=t[r],o=t[r+1];if(X.isBreakingSpace(s,o)||X._isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(t){return X.graphemeSegmenter(t)}static measureFont(t){if(X._fonts[t])return X._fonts[t];const e=X._context;e.font=t;const i=e.measureText(X.METRICS_STRING+X.BASELINE_SYMBOL),r={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return X._fonts[t]=r,r}static clearMetrics(t=""){t?delete X._fonts[t]:X._fonts={}}static get _canvas(){if(!X.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",vh);if(i!=null&&i.measureText)return X.__canvas=e,e;t=Pt.get().createCanvas()}catch{t=Pt.get().createCanvas()}t.width=t.height=10,X.__canvas=t}return X.__canvas}static get _context(){return X.__context||(X.__context=X._canvas.getContext("2d",vh)),X.__context}};fn.METRICS_STRING="|q";fn.BASELINE_SYMBOL="M";fn.BASELINE_MULTIPLIER=1.4;fn.HEIGHT_MULTIPLIER=2;fn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})();fn.experimentalLetterSpacing=!1;fn._fonts={};fn._newlines=[10,13];fn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];fn._measurementCache={};let Sa=fn;function uc(n,t){if(n.texture===ot.WHITE&&!n.fill)return Ht.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof sl){const e=n.fill,i=t.createPattern(e.texture.source.resource,"repeat"),r=e.transform.copyTo(dt.shared);return r.scale(e.texture.frame.width,e.texture.frame.height),i.setTransform(r),i}else if(n.fill instanceof Qs){const e=n.fill;if(e.type==="linear"){const i=t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);return e.gradientStops.forEach(r=>{i.addColorStop(r.offset,Ht.shared.setValue(r.color).toHex())}),i}}}else{const e=t.createPattern(n.texture.source.resource,"repeat"),i=n.matrix.copyTo(dt.shared);return i.scale(n.texture.frame.width,n.texture.frame.height),e.setTransform(i),e}return Lt("FillStyle not recognised",n),"red"}function sy(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,i=n.length;e<i;e++){const r=n[e];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Array.from(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const oy=class ay extends Ig{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...ay.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=ot.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const r=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const s=Ta(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/r):i.fontSize=this.baseRenderedFontSize=r,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=Sa.measureFont(s),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){var e,i;const r=sy(t).filter(y=>!this._currentChars.includes(y)).filter((y,b,T)=>T.indexOf(y)===b);if(!r.length)return;this._currentChars=[...this._currentChars,...r];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:a}=s.canvasAndContext,l=s.texture.source;const h=this._style;let c=this._currentX,p=this._currentY;const f=this.baseRenderedFontSize/this.baseMeasurementFontSize,u=this._padding*f;let m=0,g=!1;for(let y=0;y<r.length;y++){const b=r[y],T=Sa.measureText(b,h,o,!1),C=Math.ceil((h.fontStyle==="italic"?2:1)*T.width);T.lineHeight=T.height;const P=T.width*f,S=T.height*f,I=C+u*2,w=S+u*2;if(g=!1,b!==`
`&&b!=="\r"&&b!=="	"&&b!==" "&&(g=!0,m=Math.ceil(Math.max(w,m))),c+I>this._textureSize&&(p+=m,m=w,c=0,p+m>this._textureSize)){l.update();const x=this._nextPage();o=x.canvasAndContext.canvas,a=x.canvasAndContext.context,l=x.texture.source,p=0}const _=P/f-(((e=h.dropShadow)==null?void 0:e.distance)??0)-(((i=h._stroke)==null?void 0:i.width)??0);if(this.chars[b]={id:b.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:_,kerning:{}},g){this._drawGlyph(a,T,c+u,p+u,f,h);const x=l.width*f,A=l.height*f,R=new Gt(c/x*l.width,p/A*l.height,I/x*l.width,w/A*l.height);this.chars[b].texture=new ot({source:l,frame:R}),c+=Math.ceil(I)}}l.update(),this._currentX=c,this._currentY=p,this._skipKerning&&this._applyKerning(r,a)}get pageTextures(){return mt(gt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let r=0;r<t.length;r++){const s=t[r];for(let o=0;o<this._currentChars.length;o++){const a=this._currentChars[o];let l=i[s];l||(l=i[s]=e.measureText(s).width);let h=i[a];h||(h=i[a]=e.measureText(a).width);let c=e.measureText(s+a).width,p=c-(l+h);p&&(this.chars[s].kerning[a]=p),c=e.measureText(s+a).width,p=c-(l+h),p&&(this.chars[a].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=cc.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new ot({source:new qr({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:e,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=Ta(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const r=e._stroke,s=(r==null?void 0:r.width)??0;if(r&&(t.lineWidth=s,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=uc(r,t)),e._fill&&(t.fillStyle=uc(e._fill,t)),e.dropShadow){const o=e.dropShadow,a=Ht.shared.setValue(o.color).toArray(),l=o.blur*i,h=o.distance*i;t.shadowColor=`rgba(${a[0]*255},${a[1]*255},${a[2]*255},${o.alpha})`,t.shadowBlur=l,t.shadowOffsetX=Math.cos(o.angle)*h,t.shadowOffsetY=Math.sin(o.angle)*h}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,r,s,o){const a=e.text,l=e.fontProperties,h=o._stroke,c=((h==null?void 0:h.width)??0)*s,p=i+c/2,f=r-c/2,u=l.descent*s,m=e.lineHeight*s;o.stroke&&c&&t.strokeText(a,p,f+m-u),o._fill&&t.fillText(a,p,f+m-u)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];cc.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};oy.defaultOptions={textureSize:512,style:new li,mipmap:!0};let sf=oy;function ly(n,t,e,i){const r={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=e.baseLineOffset;let s=r.lines[0],o=null,a=!0;const l={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},h=m=>{const g=s.width;for(let y=0;y<l.index;y++){const b=m.positions[y];s.chars.push(m.chars[y]),s.charPositions.push(b+g)}s.width+=m.width,a=!1,l.width=0,l.index=0,l.chars.length=0},c=()=>{let m=s.chars.length-1;if(i){let g=s.chars[m];for(;g===" ";)s.width-=e.chars[g].xAdvance,g=s.chars[--m]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,r.lines.push(s),r.height+=e.lineHeight},p=e.baseMeasurementFontSize/t.fontSize,f=t.letterSpacing*p,u=t.wordWrapWidth*p;for(let m=0;m<n.length+1;m++){let g;const y=m===n.length;y||(g=n[m]);const b=e.chars[g]||e.chars[" "];if(/(?:\s)/.test(g)||g==="\r"||g===`
`||y){if(!a&&t.wordWrap&&s.width+l.width-f>u?(c(),h(l),y||s.charPositions.push(0)):(l.start=s.width,h(l),y||s.charPositions.push(0)),g==="\r"||g===`
`)s.width!==0&&c();else if(!y){const T=b.xAdvance+(b.kerning[o]||0)+f;s.width+=T,s.spaceWidth=T,s.spacesIndex.push(s.charPositions.length),s.chars.push(g)}}else{const T=b.kerning[o]||0,C=b.xAdvance+T+f;l.positions[l.index++]=l.width+T,l.chars.push(g),l.width+=C}o=g}return c(),t.align==="center"?K1(r):t.align==="right"?Q1(r):t.align==="justify"&&J1(r),r}function K1(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width/2-e.width/2;for(let r=0;r<e.charPositions.length;r++)e.charPositions[r]+=i}}function Q1(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width-e.width;for(let r=0;r<e.charPositions.length;r++)e.charPositions[r]+=i}}function J1(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const i=n.lines[e];let r=0,s=i.spacesIndex[r++],o=0;const a=i.spacesIndex.length,l=(t-i.width)/a;for(let h=0;h<i.charPositions.length;h++)h===s&&(s=i.spacesIndex[r++],o+=l),i.charPositions[h]+=o}}let Qo=0;class Z1{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var i;let r=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)r+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let a=e.styleKey;a=a.substring(0,a.lastIndexOf("-")),r=`${a}-bitmap`,s=!1}if(!Et.has(r)){const a=new sf({style:e,overrideFill:s,overrideSize:!0,...this.defaultOptions});Qo++,Qo>50&&Lt("BitmapText",`You have dynamically created ${Qo} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),a.once("destroy",()=>{Qo--,Et.remove(r)}),Et.set(r,a)}const o=Et.get(r);return(i=o.ensureCharacters)==null||i.call(o,t),o}getLayout(t,e,i=!0){const r=this.getFont(t,e);return ly([...t],e,r,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var e,i,r,s;let o=t[0];typeof o=="string"&&(o={name:o,style:t[1],chars:(e=t[2])==null?void 0:e.chars,resolution:(i=t[2])==null?void 0:i.resolution,padding:(r=t[2])==null?void 0:r.padding,skipKerning:(s=t[2])==null?void 0:s.skipKerning},mt(gt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const a=o==null?void 0:o.name;if(!a)throw new Error("[BitmapFontManager] Property `name` is required.");o={...this.defaultOptions,...o};const l=o.style,h=l instanceof li?l:new li(l),c=h._fill.fill!==null&&h._fill.fill!==void 0,p=new sf({style:h,overrideFill:c,skipKerning:o.skipKerning,padding:o.padding,resolution:o.resolution,overrideSize:!1}),f=sy(o.chars);return p.ensureCharacters(f.join("")),Et.set(`${a}-bitmap`,p),p.once("destroy",()=>Et.remove(`${a}-bitmap`)),p}uninstall(t){const e=`${t}-bitmap`,i=Et.get(e);i&&i.destroy()}}const Ea=new Z1;class hy extends Ig{constructor(t,e){super();const{textures:i,data:r}=t;Object.keys(r.pages).forEach(s=>{const o=r.pages[parseInt(s,10)],a=i[o.id];this.pages.push({texture:a})}),Object.keys(r.chars).forEach(s=>{const o=r.chars[s],{frame:a,source:l}=i[o.page],h=new Gt(o.x+a.x,o.y+a.y,o.width,o.height),c=new ot({source:l,frame:h});this.chars[s]={id:s.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:c}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Ea.install(t)}static uninstall(t){Ea.uninstall(t)}}const xh={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const p in t){const f=t[p].match(/^[a-z]+/gm)[0],u=t[p].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const g in u){const y=u[g].split("="),b=y[0],T=y[1].replace(/"/gm,""),C=parseFloat(T),P=isNaN(C)?T:C;m[b]=P}e[f].push(m)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=e.info,[s]=e.common,[o]=e.distanceField??[];o&&(i.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),i.fontSize=parseInt(r.size,10),i.fontFamily=r.face,i.lineHeight=parseInt(s.lineHeight,10);const a=e.page;for(let p=0;p<a.length;p++)i.pages.push({id:parseInt(a[p].id,10)||0,file:a[p].file});const l={};i.baseLineOffset=i.lineHeight-parseInt(s.base,10);const h=e.char;for(let p=0;p<h.length;p++){const f=h[p],u=parseInt(f.id,10);let m=f.letter??f.char??String.fromCharCode(u);m==="space"&&(m=" "),l[u]=m,i.chars[m]={id:u,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}const c=e.kerning||[];for(let p=0;p<c.length;p++){const f=parseInt(c[p].first,10),u=parseInt(c[p].second,10),m=parseInt(c[p].amount,10);i.chars[l[u]].kerning[l[f]]=m}return i}},of={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],r=n.getElementsByTagName("distanceField")[0];r&&(t.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const s=n.getElementsByTagName("page"),o=n.getElementsByTagName("char"),a=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let h=0;h<s.length;h++)t.pages.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});const l={};t.baseLineOffset=t.lineHeight-parseInt(i.getAttribute("base"),10);for(let h=0;h<o.length;h++){const c=o[h],p=parseInt(c.getAttribute("id"),10);let f=c.getAttribute("letter")??c.getAttribute("char")??String.fromCharCode(p);f==="space"&&(f=" "),l[p]=f,t.chars[f]={id:p,page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xOffset:parseInt(c.getAttribute("xoffset"),10),yOffset:parseInt(c.getAttribute("yoffset"),10),xAdvance:parseInt(c.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<a.length;h++){const c=parseInt(a[h].getAttribute("first"),10),p=parseInt(a[h].getAttribute("second"),10),f=parseInt(a[h].getAttribute("amount"),10);t.chars[l[p]].kerning[l[c]]=f}return t}},af={test(n){return typeof n=="string"&&n.includes("<font>")?of.test(Pt.get().parseXML(n)):!1},parse(n){return of.parse(Pt.get().parseXML(n))}},$1=[".xml",".fnt"],tw={extension:{type:K.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof hy,getCacheableAssets(n,t){const e={};return n.forEach(i=>{e[i]=t,e[`${i}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},ew={extension:{type:K.LoadParser,priority:qn.Normal},name:"loadBitmapFont",test(n){return $1.includes(pe.extname(n).toLowerCase())},async testParse(n){return xh.test(n)||af.test(n)},async parse(n,t,e){const i=xh.test(n)?xh.parse(n):af.parse(n),{src:r}=t,{pages:s}=i,o=[],a=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let c=0;c<s.length;++c){const p=s[c].file;let f=pe.join(pe.dirname(r),p);f=Kh(f,r),o.push({src:f,data:a})}const l=await e.load(o),h=o.map(c=>l[c.src]);return new hy({data:i,textures:h},r)},async load(n,t){return await(await Pt.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(i=>e.unload(i.texture.source._sourceOrigin))),n.destroy()}};class nw{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const iw={extension:{type:K.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof ot),getCacheableAssets:(n,t)=>{const e={};return n.forEach(i=>{t.forEach((r,s)=>{e[i+(s===0?"":s+1)]=r})}),e}};async function cy(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const rw={extension:{type:K.DetectionParser,priority:1},test:async()=>cy("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},lf=["png","jpg","jpeg"],sw={extension:{type:K.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...lf],remove:async n=>n.filter(t=>!lf.includes(t))},ow="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function yu(n){return ow?!1:document.createElement("video").canPlayType(n)!==""}const aw={extension:{type:K.DetectionParser,priority:0},test:async()=>yu("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},lw={extension:{type:K.DetectionParser,priority:0},test:async()=>yu("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},hw={extension:{type:K.DetectionParser,priority:0},test:async()=>yu("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},cw={extension:{type:K.DetectionParser,priority:0},test:async()=>cy("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};class uw{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var r,s;let o=null,a=null;if(e.loadParser&&(a=this._parserHash[e.loadParser],a||Lt(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!a){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&(r=h.test)!=null&&r.call(h,t,e,this)){a=h;break}}if(!a)return Lt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(t,e,this),i.parser=a;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((s=h.testParse)==null?void 0:s.call(h,o,e,this))&&(o=await h.parse(o,e,this)||o,i.parser=h)}return o})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const r={},s=ba(t),o=hn(t,h=>({alias:[h],src:h,data:{}})),a=o.length,l=o.map(async h=>{const c=pe.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),r[h.src]=await this.promiseCache[c].promise,e&&e(++i/a)}catch(p){throw delete this.promiseCache[c],delete r[h.src],new Error(`[Loader.load] Failed to load ${c}.
${p}`)}});return await Promise.all(l),s?r[o[0].src]:r}async unload(t){const e=hn(t,i=>({alias:[i],src:i})).map(async i=>{var r,s;const o=pe.toAbsolute(i.src),a=this.promiseCache[o];if(a){const l=await a.promise;delete this.promiseCache[o],await((s=(r=a.parser)==null?void 0:r.unload)==null?void 0:s.call(r,l,i,this))}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&Lt(`[Assets] loadParser name conflict "${e.name}"`):Lt("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function Yr(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Xr(n,t){const e=n.split("?")[0],i=pe.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const dw=".json",pw="application/json",fw={extension:{type:K.LoadParser,priority:qn.Low},name:"loadJson",test(n){return Yr(n,pw)||Xr(n,dw)},async load(n){return await(await Pt.get().fetch(n)).json()}},mw=".txt",gw="text/plain",yw={name:"loadTxt",extension:{type:K.LoadParser,priority:qn.Low,name:"loadTxt"},test(n){return Yr(n,gw)||Xr(n,mw)},async load(n){return await(await Pt.get().fetch(n)).text()}},_w=["normal","bold","100","200","300","400","500","600","700","800","900"],vw=[".ttf",".otf",".woff",".woff2"],xw=["font/ttf","font/otf","font/woff","font/woff2"],bw=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function ww(n){const t=pe.extname(n),e=pe.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=e.length>0;for(const s of e)if(!s.match(bw)){i=!1;break}let r=e.join(" ");return i||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}const Aw=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Tw(n){return Aw.test(n)?n:encodeURI(n)}const Sw={extension:{type:K.LoadParser,priority:qn.Low},name:"loadWebFont",test(n){return Yr(n,xw)||Xr(n,vw)},async load(n,t){var e,i,r;const s=Pt.get().getFontFaceSet();if(s){const o=[],a=((e=t.data)==null?void 0:e.family)??ww(n),l=((r=(i=t.data)==null?void 0:i.weights)==null?void 0:r.filter(c=>_w.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const p=l[c],f=new FontFace(a,`url(${Tw(n)})`,{...h,weight:p});await f.load(),s.add(f),o.push(f)}return Et.set(`${a}-and-url`,{url:n,fontFaces:o}),o.length===1?o[0]:o}return Lt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>{Et.remove(t.family),Pt.get().getFontFaceSet().delete(t)})}};function _u(n,t=1){var e;const i=(e=Wr.RETINA_PREFIX)==null?void 0:e.exec(n);return i?parseFloat(i[1]):t}function vu(n,t,e){n.label=e,n._sourceOrigin=e;const i=new ot({source:n,label:e}),r=()=>{delete t.promiseCache[e],Et.has(e)&&Et.remove(e)};return i.source.once("destroy",()=>{t.promiseCache[e]&&(Lt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),i.once("destroy",()=>{n.destroyed||(Lt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),i}const Ew=".svg",Cw="image/svg+xml",Pw={extension:{type:K.LoadParser,priority:qn.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Yr(n,Cw)||Xr(n,Ew)},async load(n,t,e){return t.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?Rw(n):Iw(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function Iw(n,t,e,i){var r,s,o;const a=await(await Pt.get().fetch(n)).blob(),l=URL.createObjectURL(a),h=new Image;h.src=l,h.crossOrigin=i,await h.decode(),URL.revokeObjectURL(l);const c=document.createElement("canvas"),p=c.getContext("2d"),f=((r=t.data)==null?void 0:r.resolution)||_u(n),u=((s=t.data)==null?void 0:s.width)??h.width,m=((o=t.data)==null?void 0:o.height)??h.height;c.width=u*f,c.height=m*f,p.drawImage(h,0,0,u*f,m*f);const{parseAsGraphicsContext:g,...y}=t.data,b=new qr({resource:c,alphaMode:"premultiply-alpha-on-upload",resolution:f,...y});return vu(b,e,n)}async function Rw(n){const t=await(await Pt.get().fetch(n)).text(),e=new tn;return e.svg(t),e}const kw=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let wr=null,dc=class{constructor(){wr||(wr=URL.createObjectURL(new Blob([kw],{type:"application/javascript"}))),this.worker=new Worker(wr)}};dc.revokeObjectURL=function(){wr&&(URL.revokeObjectURL(wr),wr=null)};const Mw=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ar=null;class uy{constructor(){Ar||(Ar=URL.createObjectURL(new Blob([Mw],{type:"application/javascript"}))),this.worker=new Worker(Ar)}}uy.revokeObjectURL=function(){Ar&&(URL.revokeObjectURL(Ar),Ar=null)};let hf=0,bh;class Vw{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new dc;e.addEventListener("message",i=>{e.terminate(),dc.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var i;return this._run("loadImageBitmap",[t,(i=e==null?void 0:e.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){bh===void 0&&(bh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<bh&&(this._createdWorkers++,t=new uy().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((r,s)=>{this._queue.push({id:t,arguments:e,resolve:r,reject:s})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[hf]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:hf++,id:i})}}const cf=new Vw,Dw=[".jpeg",".jpg",".png",".webp",".avif"],Bw=["image/jpeg","image/png","image/webp","image/avif"];async function Ow(n,t){var e;const i=await Pt.get().fetch(n);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${i.status} ${i.statusText}`);const r=await i.blob();return((e=t==null?void 0:t.data)==null?void 0:e.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const dy={name:"loadTextures",extension:{type:K.LoadParser,priority:qn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Yr(n,Bw)||Xr(n,Dw)},async load(n,t,e){var i;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await cf.isImageBitmapSupported()?r=await cf.loadImageBitmap(n,t):r=await Ow(n,t):r=await new Promise(o=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=n,r.complete?o(r):r.onload=()=>{o(r)}});const s=new qr({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((i=t.data)==null?void 0:i.resolution)||_u(n),...t.data});return vu(s,e,n)},unload(n){n.destroy(!0)}},py=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Fw=py.map(n=>`video/${n.substring(1)}`);function Lw(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=Uw(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function Nw(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",r),n.load();function i(){s(),t()}function r(o){s(),e(o)}function s(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",r)}})}function Uw(n,t=globalThis.location){if(n.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const zw={name:"loadVideo",extension:{type:K.LoadParser,name:"loadVideo"},test(n){const t=Yr(n,Fw),e=Xr(n,py);return t||e},async load(n,t,e){var i,r;const s={...oa.defaultOptions,resolution:((i=t.data)==null?void 0:i.resolution)||_u(n),alphaMode:((r=t.data)==null?void 0:r.alphaMode)||await og(),...t.data},o=document.createElement("video"),a={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(a).forEach(c=>{const p=a[c];p!==void 0&&o.setAttribute(c,p)}),s.muted===!0&&(o.muted=!0),Lw(o,n,s.crossorigin);const l=document.createElement("source");let h;if(n.startsWith("data:"))h=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const c=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();h=oa.MIME_TYPES[c]||`video/${c}`}return l.src=n,h&&(l.type=h),new Promise(c=>{const p=async()=>{const f=new oa({...s,resource:o});o.removeEventListener("canplay",p),t.data.preload&&await Nw(o),c(vu(f,e,n))};o.addEventListener("canplay",p),o.appendChild(l)})},unload(n){n.destroy(!0)}},fy={extension:{type:K.ResolveParser,name:"resolveTexture"},test:dy.test,parse:n=>{var t;return{resolution:parseFloat(((t=Wr.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:n.split(".").pop(),src:n}}},jw={extension:{type:K.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Wr.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:fy.parse};class Gw{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Wr,this.loader=new uw,this.cache=Et,this._backgroundLoader=new nw(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var e,i;if(this._initialized){Lt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((e=t.texturePreference)==null?void 0:e.resolution)??1,s=typeof r=="number"?[r]:r,o=await this._detectFormats({preferredFormats:(i=t.texturePreference)==null?void 0:i.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=ba(t),r=hn(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(h=>!this.resolver.hasKey(h))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,e);return i?o[r[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const r=this.resolver.resolveBundle(t),s={},o=Object.keys(r);let a=0,l=0;const h=()=>{e==null||e(++a/l)},c=o.map(p=>{const f=r[p];return l+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(u=>{s[p]=u})});return await Promise.all(c),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Et.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Et.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const r=await this.loader.load(i,e);this._backgroundLoader.active=!0;const s={};return i.forEach(o=>{const a=r[o.src],l=[o.src];o.alias&&l.push(...o.alias),l.forEach(h=>{s[h]=a}),Et.set(l,a)}),s}async unload(t){this._initialized||await this.init();const e=hn(t).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=hn(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Et.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,r)=>e.indexOf(i)===r),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const bn=new Gw;de.handleByList(K.LoadParser,bn.loader.parsers).handleByList(K.ResolveParser,bn.resolver.parsers).handleByList(K.CacheParser,bn.cache.parsers).handleByList(K.DetectionParser,bn.detections);de.add(iw,sw,rw,cw,aw,lw,hw,fw,yw,Sw,Pw,dy,zw,ew,tw,fy,jw);const uf={loader:K.LoadParser,resolver:K.ResolveParser,cache:K.CacheParser,detection:K.DetectionParser};de.handle(K.Asset,n=>{const t=n.ref;Object.entries(uf).filter(([e])=>!!t[e]).forEach(([e,i])=>de.add(Object.assign(t[e],{extension:t[e].extension??i})))},n=>{const t=n.ref;Object.keys(uf).filter(e=>!!t[e]).forEach(e=>de.remove(t[e]))});class Jn extends $a{constructor(t){t instanceof tn&&(t={context:t});const{context:e,roundPixels:i,...r}=t||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new tn,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Jn(this._context.clone()):(this._ownedContext=null,new Jn(this._context))}lineStyle(t,e,i){mt(gt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return t&&(r.width=t),e&&(r.color=e),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(t,e){mt(gt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){mt(gt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==tn.defaultStrokeStyle.width||t.color!==tn.defaultStrokeStyle.color||t.alpha!==tn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return mt(gt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return mt(gt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return mt(gt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return mt(gt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return mt(gt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return mt(gt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class Hw{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new dt,this.observer=e,this.position=new Qt(this,0,0),this.scale=new Qt(this,1,1),this.pivot=new Qt(this,0,0),this.skew=new Qt(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),(e=this.observer)==null||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const my=class la extends $a{constructor(...t){let e=t[0]||{};e instanceof ot&&(e={texture:e}),t.length>1&&(mt(gt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),e.width=t[1],e.height=t[2]),e={...la.defaultOptions,...e};const{texture:i,anchor:r,tilePosition:s,tileScale:o,tileRotation:a,width:l,height:h,applyAnchorToTexture:c,roundPixels:p,...f}=e??{};super({label:"TilingSprite",...f}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Qt({_onUpdate:()=>{this.onViewUpdate()}}),this._applyAnchorToTexture=c,this.texture=i,this._width=l??i.width,this._height=h??i.height,this._tileTransform=new Hw({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=s,this.tileScale=o,this.tileRotation=a,this.roundPixels=p??!1}static from(t,e={}){return typeof t=="string"?new la({texture:Et.get(t),...e}):new la({texture:t,...e})}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){typeof t=="number"?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}set texture(t){t||(t=ot.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}setSize(t,e){typeof t=="object"&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}_updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,r=this._height;t.maxX=-e._x*i,t.minX=t.maxX+i,t.maxY=-e._y*r,t.minY=t.maxY+r}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this._width,i=this._height,r=-e*this._anchor._x;let s=0;return t.x>=r&&t.x<=r+e&&(s=-i*this._anchor._y,t.y>=s&&t.y<=s+i)}onViewUpdate(){this._boundsDirty=!0,super.onViewUpdate()}destroy(t=!1){if(super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(e)}this._texture=null}};my.defaultOptions={texture:ot.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let qw=my;class gy extends $a{constructor(t,e){const{text:i,resolution:r,style:s,anchor:o,width:a,height:l,roundPixels:h,...c}=t;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new Qt({_onUpdate:()=>{this.onViewUpdate()}}),o&&(this.anchor=o),this.roundPixels=h??!1,a!==void 0&&(this.width=a),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t=t||{},(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,r=-e*this.anchor.x;let s=0;return t.x>=r&&t.x<=r+e&&(s=-i*this.anchor.y,t.y>=s&&t.y<=s+i)}onViewUpdate(){this._boundsDirty=!0,this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function yy(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(mt(gt,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}class Ww extends gy{constructor(...t){const e=yy(t,"Text");super(e,li),this.renderPipeId="text"}_updateBounds(){const t=this._bounds,e=this._anchor,i=Sa.measureText(this._text,this._style),{width:r,height:s}=i;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}}class Yw extends gy{constructor(...t){var e;const i=yy(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,li),this.renderPipeId="bitmapText"}_updateBounds(){const t=this._bounds,e=this._anchor,i=Ea.measureText(this.text,this._style),r=i.scale,s=i.offsetY*r;let o=i.width*r,a=i.height*r;const l=this._style._stroke;l&&(o+=l.width,a+=l.width),t.minX=-e._x*o,t.maxX=t.minX+o,t.minY=-e._y*(a+s),t.maxY=t.minY+a}set resolution(t){t!==null&&Lt("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}class hl extends ot{static create(t){return new hl({source:new pn(t)})}resize(t,e,i){return this.source.resize(t,e,i),this}}de.add(zv,jv);var _y={},cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.MiniSignal=void 0;const pc=Symbol("SIGNAL");function Xw(n){return typeof n=="object"&&pc in n}class Kw{constructor(){this._symbol=Symbol("MiniSignal"),this._refMap=new WeakMap,this._head=void 0,this._tail=void 0,this._dispatching=!1}hasListeners(){return this._head!=null}dispatch(...t){if(this._dispatching)throw new Error("MiniSignal#dispatch(): Signal already dispatching.");let e=this._head;if(e==null)return!1;for(this._dispatching=!0;e!=null;)e.fn(...t),e=e.next;return this._dispatching=!1,!0}add(t){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return this._createRef(this._addNode({fn:t}))}detach(t){if(!Xw(t))throw new Error("MiniSignal#detach(): First arg must be a MiniSignal listener reference.");if(t[pc]!==this._symbol)throw new Error("MiniSignal#detach(): MiniSignal listener does not belong to this MiniSignal.");const e=this._refMap.get(t);return e?(this._refMap.delete(t),this._disconnectNode(e),this._destroyNode(e),this):this}detachAll(){let t=this._head;if(t==null)return this;for(this._head=this._tail=void 0,this._refMap=new WeakMap;t!=null;)this._destroyNode(t),t=t.next;return this}_destroyNode(t){t.fn=void 0,t.prev=void 0}_disconnectNode(t){t===this._head?(this._head=t.next,t.next==null&&(this._tail=void 0)):t===this._tail&&(this._tail=t.prev,this._tail!=null&&(this._tail.next=void 0)),t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev)}_addNode(t){return this._head==null?(this._head=t,this._tail=t):(this._tail.next=t,t.prev=this._tail,this._tail=t),t}_createRef(t){const e={[pc]:this._symbol};return this._refMap.set(e,t),e}_getRef(t){return this._refMap.get(t)}}cl.MiniSignal=Kw;(function(n){var t=Vi&&Vi.__createBinding||(Object.create?function(i,r,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(r,s);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(i,o,a)}:function(i,r,s,o){o===void 0&&(o=s),i[o]=r[s]}),e=Vi&&Vi.__exportStar||function(i,r){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&t(r,i,s)};Object.defineProperty(n,"__esModule",{value:!0}),e(cl,n)})(_y);const Ca=new Map,Es=(n,t)=>{let e=Ca.get(n);return e||(e=new _y.MiniSignal,Ca.set(n,e)),{name:n,binding:e.add(t)}},Pa=(n,t)=>{const e=Ca.get(n);e&&e.detach(t)},Re=(n,...t)=>{const e=Ca.get(n);e&&e.dispatch(...t)};function Dn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vy(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Xe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Mr={duration:.5,overwrite:!1,delay:0},xu,we,Ct,rn=1e8,wt=1/rn,fc=Math.PI*2,Qw=fc/4,Jw=0,xy=Math.sqrt,Zw=Math.cos,$w=Math.sin,oe=function(n){return typeof n=="string"},Nt=function(n){return typeof n=="function"},Un=function(n){return typeof n=="number"},bu=function(n){return typeof n>"u"},Cn=function(n){return typeof n=="object"},Ve=function(n){return n!==!1},wu=function(){return typeof window<"u"},Jo=function(n){return Nt(n)||oe(n)},by=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ae=Array.isArray,mc=/(?:-?\.?\d|\.)+/gi,wy=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_r=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wh=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ay=/[+-]=-?[.\d]+/,Ty=/[^,'"\[\]\s]+/gi,tA=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,_n,gc,Au,Qe={},Ia={},Sy,Ey=function(n){return(Ia=Yi(n,Qe))&&Fe},Tu=function(n,t){return console.warn("Invalid property",n,"set to",t,"Missing plugin? gsap.registerPlugin()")},Zs=function(n,t){return!t&&console.warn(n)},Cy=function(n,t){return n&&(Qe[n]=t)&&Ia&&(Ia[n]=t)||Qe},$s=function(){return 0},eA={suppressEvents:!0,isStart:!0,kill:!1},ha={suppressEvents:!0,kill:!1},nA={suppressEvents:!0},Su={},ni=[],yc={},Py,qe={},Ah={},df=30,ca=[],Eu="",Cu=function(n){var t=n[0],e,i;if(Cn(t)||Nt(t)||(n=[n]),!(e=(t._gsap||{}).harness)){for(i=ca.length;i--&&!ca[i].targetTest(t););e=ca[i]}for(i=n.length;i--;)n[i]&&(n[i]._gsap||(n[i]._gsap=new Zy(n[i],e)))||n.splice(i,1);return n},Ni=function(n){return n._gsap||Cu(sn(n))[0]._gsap},Iy=function(n,t,e){return(e=n[t])&&Nt(e)?n[t]():bu(e)&&n.getAttribute&&n.getAttribute(t)||e},De=function(n,t){return(n=n.split(",")).forEach(t)||n},zt=function(n){return Math.round(n*1e5)/1e5||0},se=function(n){return Math.round(n*1e7)/1e7||0},Tr=function(n,t){var e=t.charAt(0),i=parseFloat(t.substr(2));return n=parseFloat(n),e==="+"?n+i:e==="-"?n-i:e==="*"?n*i:n/i},iA=function(n,t){for(var e=t.length,i=0;n.indexOf(t[i])<0&&++i<e;);return i<e},Ra=function(){var n=ni.length,t=ni.slice(0),e,i;for(yc={},ni.length=0,e=0;e<n;e++)i=t[e],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Ry=function(n,t,e,i){ni.length&&!we&&Ra(),n.render(t,e,we&&t<0&&(n._initted||n._startAt)),ni.length&&!we&&Ra()},ky=function(n){var t=parseFloat(n);return(t||t===0)&&(n+"").match(Ty).length<2?t:oe(n)?n.trim():n},My=function(n){return n},on=function(n,t){for(var e in t)e in n||(n[e]=t[e]);return n},rA=function(n){return function(t,e){for(var i in e)i in t||i==="duration"&&n||i==="ease"||(t[i]=e[i])}},Yi=function(n,t){for(var e in t)n[e]=t[e];return n},pf=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Cn(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},ka=function(n,t){var e={},i;for(i in n)i in t||(e[i]=n[i]);return e},Ls=function(n){var t=n.parent||Vt,e=n.keyframes?rA(Ae(n.keyframes)):on;if(Ve(n.inherit))for(;t;)e(n,t.vars.defaults),t=t.parent||t._dp;return n},sA=function(n,t){for(var e=n.length,i=e===t.length;i&&e--&&n[e]===t[e];);return e<0},Vy=function(n,t,e,i,r){var s=n[i],o;if(r)for(o=t[r];s&&s[r]>o;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=n[e],n[e]=t),t._next?t._next._prev=t:n[i]=t,t._prev=s,t.parent=t._dp=n,t},ul=function(n,t,e,i){e===void 0&&(e="_first"),i===void 0&&(i="_last");var r=t._prev,s=t._next;r?r._next=s:n[e]===t&&(n[e]=s),s?s._prev=r:n[i]===t&&(n[i]=r),t._next=t._prev=t.parent=null},hi=function(n,t){n.parent&&(!t||n.parent.autoRemoveChildren)&&n.parent.remove&&n.parent.remove(n),n._act=0},Ui=function(n,t){if(n&&(!t||t._end>n._dur||t._start<0))for(var e=n;e;)e._dirty=1,e=e.parent;return n},oA=function(n){for(var t=n.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return n},_c=function(n,t,e,i){return n._startAt&&(we?n._startAt.revert(ha):n.vars.immediateRender&&!n.vars.autoRevert||n._startAt.render(t,!0,i))},aA=function n(t){return!t||t._ts&&n(t.parent)},ff=function(n){return n._repeat?Vr(n._tTime,n=n.duration()+n._rDelay)*n:0},Vr=function(n,t){var e=Math.floor(n/=t);return n&&e===n?e-1:e},Ma=function(n,t){return(n-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},dl=function(n){return n._end=se(n._start+(n._tDur/Math.abs(n._ts||n._rts||wt)||0))},pl=function(n,t){var e=n._dp;return e&&e.smoothChildTiming&&n._ts&&(n._start=se(e._time-(n._ts>0?t/n._ts:((n._dirty?n.totalDuration():n._tDur)-t)/-n._ts)),dl(n),e._dirty||Ui(e,n)),n},Dy=function(n,t){var e;if((t._time||!t._dur&&t._initted||t._start<n._time&&(t._dur||!t.add))&&(e=Ma(n.rawTime(),t),(!t._dur||xo(0,t.totalDuration(),e)-t._tTime>wt)&&t.render(e,!0)),Ui(n,t)._dp&&n._initted&&n._time>=n._dur&&n._ts){if(n._dur<n.duration())for(e=n;e._dp;)e.rawTime()>=0&&e.totalTime(e._tTime),e=e._dp;n._zTime=-wt}},vn=function(n,t,e,i){return t.parent&&hi(t),t._start=se((Un(e)?e:e||n!==Vt?$e(n,e,t):n._time)+t._delay),t._end=se(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Vy(n,t,"_first","_last",n._sort?"_start":0),vc(t)||(n._recent=t),i||Dy(n,t),n._ts<0&&pl(n,n._tTime),n},By=function(n,t){return(Qe.ScrollTrigger||Tu("scrollTrigger",t))&&Qe.ScrollTrigger.create(t,n)},Oy=function(n,t,e,i,r){if(Iu(n,t,r),!n._initted)return 1;if(!e&&n._pt&&!we&&(n._dur&&n.vars.lazy!==!1||!n._dur&&n.vars.lazy)&&Py!==We.frame)return ni.push(n),n._lazy=[r,i],1},lA=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},vc=function(n){var t=n.data;return t==="isFromStart"||t==="isStart"},hA=function(n,t,e,i){var r=n.ratio,s=t<0||!t&&(!n._start&&lA(n)&&!(!n._initted&&vc(n))||(n._ts<0||n._dp._ts<0)&&!vc(n))?0:1,o=n._rDelay,a=0,l,h,c;if(o&&n._repeat&&(a=xo(0,n._tDur,t),h=Vr(a,o),n._yoyo&&h&1&&(s=1-s),h!==Vr(n._tTime,o)&&(r=1-s,n.vars.repeatRefresh&&n._initted&&n.invalidate())),s!==r||we||i||n._zTime===wt||!t&&n._zTime){if(!n._initted&&Oy(n,t,i,e,a))return;for(c=n._zTime,n._zTime=t||(e?wt:0),e||(e=t&&!c),n.ratio=s,n._from&&(s=1-s),n._time=0,n._tTime=a,l=n._pt;l;)l.r(s,l.d),l=l._next;t<0&&_c(n,t,e,!0),n._onUpdate&&!e&&Ye(n,"onUpdate"),a&&n._repeat&&!e&&n.parent&&Ye(n,"onRepeat"),(t>=n._tDur||t<0)&&n.ratio===s&&(s&&hi(n,1),!e&&!we&&(Ye(n,s?"onComplete":"onReverseComplete",!0),n._prom&&n._prom()))}else n._zTime||(n._zTime=t)},cA=function(n,t,e){var i;if(e>t)for(i=n._first;i&&i._start<=e;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=n._last;i&&i._start>=e;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Dr=function(n,t,e,i){var r=n._repeat,s=se(t)||0,o=n._tTime/n._tDur;return o&&!i&&(n._time*=s/n._dur),n._dur=s,n._tDur=r?r<0?1e10:se(s*(r+1)+n._rDelay*r):s,o>0&&!i&&pl(n,n._tTime=n._tDur*o),n.parent&&dl(n),e||Ui(n.parent,n),n},mf=function(n){return n instanceof Ie?Ui(n):Dr(n,n._dur)},uA={_start:0,endTime:$s,totalDuration:$s},$e=function n(t,e,i){var r=t.labels,s=t._recent||uA,o=t.duration()>=rn?s.endTime(!1):t._dur,a,l,h;return oe(e)&&(isNaN(e)||e in r)?(l=e.charAt(0),h=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(a<0?s:i).totalDuration()/100:1)):a<0?(e in r||(r[e]=o),r[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),h&&i&&(l=l/100*(Ae(i)?i[0]:i).totalDuration()),a>1?n(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},Ns=function(n,t,e){var i=Un(t[1]),r=(i?2:1)+(n<2?0:1),s=t[r],o,a;if(i&&(s.duration=t[1]),s.parent=e,n){for(o=s,a=e;a&&!("immediateRender"in o);)o=a.vars.defaults||{},a=Ve(a.vars.inherit)&&a.parent;s.immediateRender=Ve(o.immediateRender),n<2?s.runBackwards=1:s.startAt=t[r-1]}return new Wt(t[0],s,t[r+1])},gi=function(n,t){return n||n===0?t(n):t},xo=function(n,t,e){return e<n?n:e>t?t:e},be=function(n,t){return!oe(n)||!(t=tA.exec(n))?"":t[1]},dA=function(n,t,e){return gi(e,function(i){return xo(n,t,i)})},xc=[].slice,Fy=function(n,t){return n&&Cn(n)&&"length"in n&&(!t&&!n.length||n.length-1 in n&&Cn(n[0]))&&!n.nodeType&&n!==_n},pA=function(n,t,e){return e===void 0&&(e=[]),n.forEach(function(i){var r;return oe(i)&&!t||Fy(i,1)?(r=e).push.apply(r,sn(i)):e.push(i)})||e},sn=function(n,t,e){return Ct&&!t&&Ct.selector?Ct.selector(n):oe(n)&&!e&&(gc||!Br())?xc.call((t||Au).querySelectorAll(n),0):Ae(n)?pA(n,e):Fy(n)?xc.call(n,0):n?[n]:[]},bc=function(n){return n=sn(n)[0]||Zs("Invalid scope")||{},function(t){var e=n.current||n.nativeElement||n;return sn(t,e.querySelectorAll?e:e===n?Zs("Invalid scope")||Au.createElement("div"):n)}},Ly=function(n){return n.sort(function(){return .5-Math.random()})},Ny=function(n){if(Nt(n))return n;var t=Cn(n)?n:{each:n},e=zi(t.ease),i=t.from||0,r=parseFloat(t.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,l=t.axis,h=i,c=i;return oe(i)?h=c={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(h=i[0],c=i[1]),function(p,f,u){var m=(u||t).length,g=s[m],y,b,T,C,P,S,I,w,_;if(!g){if(_=t.grid==="auto"?0:(t.grid||[1,rn])[1],!_){for(I=-rn;I<(I=u[_++].getBoundingClientRect().left)&&_<m;);_<m&&_--}for(g=s[m]=[],y=a?Math.min(_,m)*h-.5:i%_,b=_===rn?0:a?m*c/_-.5:i/_|0,I=0,w=rn,S=0;S<m;S++)T=S%_-y,C=b-(S/_|0),g[S]=P=l?Math.abs(l==="y"?C:T):xy(T*T+C*C),P>I&&(I=P),P<w&&(w=P);i==="random"&&Ly(g),g.max=I-w,g.min=w,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(_>m?m-1:l?l==="y"?m/_:_:Math.max(_,m/_))||0)*(i==="edges"?-1:1),g.b=m<0?r-m:r,g.u=be(t.amount||t.each)||0,e=e&&m<0?Ky(e):e}return m=(g[p]-g.min)/g.max||0,se(g.b+(e?e(m):m)*g.v)+g.u}},wc=function(n){var t=Math.pow(10,((n+"").split(".")[1]||"").length);return function(e){var i=se(Math.round(parseFloat(e)/n)*n*t);return(i-i%1)/t+(Un(e)?0:be(e))}},Uy=function(n,t){var e=Ae(n),i,r;return!e&&Cn(n)&&(i=e=n.radius||rn,n.values?(n=sn(n.values),(r=!Un(n[0]))&&(i*=i)):n=wc(n.increment)),gi(t,e?Nt(n)?function(s){return r=n(s),Math.abs(r-s)<=i?r:s}:function(s){for(var o=parseFloat(r?s.x:s),a=parseFloat(r?s.y:0),l=rn,h=0,c=n.length,p,f;c--;)r?(p=n[c].x-o,f=n[c].y-a,p=p*p+f*f):p=Math.abs(n[c]-o),p<l&&(l=p,h=c);return h=!i||l<=i?n[h]:s,r||h===s||Un(s)?h:h+be(s)}:wc(n))},zy=function(n,t,e,i){return gi(Ae(n)?!t:e===!0?!!(e=0):!i,function(){return Ae(n)?n[~~(Math.random()*n.length)]:(e=e||1e-5)&&(i=e<1?Math.pow(10,(e+"").length-2):1)&&Math.floor(Math.round((n-e/2+Math.random()*(t-n+e*.99))/e)*e*i)/i})},fA=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(i){return t.reduce(function(r,s){return s(r)},i)}},mA=function(n,t){return function(e){return n(parseFloat(e))+(t||be(e))}},gA=function(n,t,e){return Gy(n,t,0,1,e)},jy=function(n,t,e){return gi(e,function(i){return n[~~t(i)]})},yA=function n(t,e,i){var r=e-t;return Ae(t)?jy(t,n(0,t.length),e):gi(i,function(s){return(r+(s-t)%r)%r+t})},_A=function n(t,e,i){var r=e-t,s=r*2;return Ae(t)?jy(t,n(0,t.length-1),e):gi(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},to=function(n){for(var t=0,e="",i,r,s,o;~(i=n.indexOf("random(",t));)s=n.indexOf(")",i),o=n.charAt(i+7)==="[",r=n.substr(i+7,s-i-7).match(o?Ty:mc),e+=n.substr(t,i-t)+zy(o?r:+r[0],o?0:+r[1],+r[2]||1e-5),t=s+1;return e+n.substr(t,n.length-t)},Gy=function(n,t,e,i,r){var s=t-n,o=i-e;return gi(r,function(a){return e+((a-n)/s*o||0)})},vA=function n(t,e,i,r){var s=isNaN(t+e)?0:function(u){return(1-u)*t+u*e};if(!s){var o=oe(t),a={},l,h,c,p,f;if(i===!0&&(r=1)&&(i=null),o)t={p:t},e={p:e};else if(Ae(t)&&!Ae(e)){for(c=[],p=t.length,f=p-2,h=1;h<p;h++)c.push(n(t[h-1],t[h]));p--,s=function(u){u*=p;var m=Math.min(f,~~u);return c[m](u-m)},i=e}else r||(t=Yi(Ae(t)?[]:{},t));if(!c){for(l in e)Pu.call(a,t,l,"get",e[l]);s=function(u){return Mu(u,a)||(o?t.p:t)}}}return gi(i,s)},gf=function(n,t,e){var i=n.labels,r=rn,s,o,a;for(s in i)o=i[s]-t,o<0==!!e&&o&&r>(o=Math.abs(o))&&(a=s,r=o);return a},Ye=function(n,t,e){var i=n.vars,r=i[t],s=Ct,o=n._ctx,a,l,h;if(r)return a=i[t+"Params"],l=i.callbackScope||n,e&&ni.length&&Ra(),o&&(Ct=o),h=a?r.apply(l,a):r.call(l),Ct=s,h},Cs=function(n){return hi(n),n.scrollTrigger&&n.scrollTrigger.kill(!!we),n.progress()<1&&Ye(n,"onInterrupt"),n},vr,Hy=[],qy=function(n){if(n)if(n=!n.name&&n.default||n,wu()||n.headless){var t=n.name,e=Nt(n),i=t&&!e&&n.init?function(){this._props=[]}:n,r={init:$s,render:Mu,add:Pu,kill:BA,modifier:DA,rawVars:0},s={targetTest:0,get:0,getSetter:ku,aliases:{},register:0};if(Br(),n!==i){if(qe[t])return;on(i,on(ka(n,r),s)),Yi(i.prototype,Yi(r,ka(n,s))),qe[i.prop=t]=i,n.targetTest&&(ca.push(i),Su[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Cy(t,i),n.register&&n.register(Fe,i,Be)}else Hy.push(n)},bt=255,Ps={aqua:[0,bt,bt],lime:[0,bt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,bt],navy:[0,0,128],white:[bt,bt,bt],olive:[128,128,0],yellow:[bt,bt,0],orange:[bt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[bt,0,0],pink:[bt,192,203],cyan:[0,bt,bt],transparent:[bt,bt,bt,0]},Th=function(n,t,e){return n+=n<0?1:n>1?-1:0,(n*6<1?t+(e-t)*n*6:n<.5?e:n*3<2?t+(e-t)*(2/3-n)*6:t)*bt+.5|0},Wy=function(n,t,e){var i=n?Un(n)?[n>>16,n>>8&bt,n&bt]:0:Ps.black,r,s,o,a,l,h,c,p,f,u;if(!i){if(n.substr(-1)===","&&(n=n.substr(0,n.length-1)),Ps[n])i=Ps[n];else if(n.charAt(0)==="#"){if(n.length<6&&(r=n.charAt(1),s=n.charAt(2),o=n.charAt(3),n="#"+r+r+s+s+o+o+(n.length===5?n.charAt(4)+n.charAt(4):"")),n.length===9)return i=parseInt(n.substr(1,6),16),[i>>16,i>>8&bt,i&bt,parseInt(n.substr(7),16)/255];n=parseInt(n.substr(1),16),i=[n>>16,n>>8&bt,n&bt]}else if(n.substr(0,3)==="hsl"){if(i=u=n.match(mc),!t)a=+i[0]%360/360,l=+i[1]/100,h=+i[2]/100,s=h<=.5?h*(l+1):h+l-h*l,r=h*2-s,i.length>3&&(i[3]*=1),i[0]=Th(a+1/3,r,s),i[1]=Th(a,r,s),i[2]=Th(a-1/3,r,s);else if(~n.indexOf("="))return i=n.match(wy),e&&i.length<4&&(i[3]=1),i}else i=n.match(mc)||Ps.transparent;i=i.map(Number)}return t&&!u&&(r=i[0]/bt,s=i[1]/bt,o=i[2]/bt,c=Math.max(r,s,o),p=Math.min(r,s,o),h=(c+p)/2,c===p?a=l=0:(f=c-p,l=h>.5?f/(2-c-p):f/(c+p),a=c===r?(s-o)/f+(s<o?6:0):c===s?(o-r)/f+2:(r-s)/f+4,a*=60),i[0]=~~(a+.5),i[1]=~~(l*100+.5),i[2]=~~(h*100+.5)),e&&i.length<4&&(i[3]=1),i},Yy=function(n){var t=[],e=[],i=-1;return n.split(ii).forEach(function(r){var s=r.match(_r)||[];t.push.apply(t,s),e.push(i+=s.length+1)}),t.c=e,t},yf=function(n,t,e){var i="",r=(n+i).match(ii),s=t?"hsla(":"rgba(",o=0,a,l,h,c;if(!r)return n;if(r=r.map(function(p){return(p=Wy(p,t,1))&&s+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),e&&(h=Yy(n),a=e.c,a.join(i)!==h.c.join(i)))for(l=n.replace(ii,"1").split(_r),c=l.length-1;o<c;o++)i+=l[o]+(~a.indexOf(o)?r.shift()||s+"0,0,0,0)":(h.length?h:r.length?r:e).shift());if(!l)for(l=n.split(ii),c=l.length-1;o<c;o++)i+=l[o]+r[o];return i+l[c]},ii=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ps)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),xA=/hsl[a]?\(/,Xy=function(n){var t=n.join(" "),e;if(ii.lastIndex=0,ii.test(t))return e=xA.test(t),n[1]=yf(n[1],e),n[0]=yf(n[0],e,Yy(n[1])),!0},eo,We=function(){var n=Date.now,t=500,e=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,h,c,p,f,u,m=function g(y){var b=n()-r,T=y===!0,C,P,S,I;if((b>t||b<0)&&(i+=b-e),r+=b,S=r-i,C=S-o,(C>0||T)&&(I=++p.frame,f=S-p.time*1e3,p.time=S=S/1e3,o+=C+(C>=s?4:s-C),P=1),T||(l=h(g)),P)for(u=0;u<a.length;u++)a[u](S,f,I,y)};return p={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){Sy&&(!gc&&wu()&&(_n=gc=window,Au=_n.document||{},Qe.gsap=Fe,(_n.gsapVersions||(_n.gsapVersions=[])).push(Fe.version),Ey(Ia||_n.GreenSockGlobals||!_n.gsap&&_n||{}),Hy.forEach(qy)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&p.sleep(),h=c||function(g){return setTimeout(g,o-p.time*1e3+1|0)},eo=1,m(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),eo=0,h=$s},lagSmoothing:function(g,y){t=g||1/0,e=Math.min(y||33,t)},fps:function(g){s=1e3/(g||240),o=p.time*1e3+s},add:function(g,y,b){var T=y?function(C,P,S,I){g(C,P,S,I),p.remove(T)}:g;return p.remove(g),a[b?"unshift":"push"](T),Br(),T},remove:function(g,y){~(y=a.indexOf(g))&&a.splice(y,1)&&u>=y&&u--},_listeners:a},p}(),Br=function(){return!eo&&We.wake()},ht={},bA=/^[\d.\-M][\d.\-,\s]/,wA=/["']/g,AA=function(n){for(var t={},e=n.substr(1,n.length-3).split(":"),i=e[0],r=1,s=e.length,o,a,l;r<s;r++)a=e[r],o=r!==s-1?a.lastIndexOf(","):a.length,l=a.substr(0,o),t[i]=isNaN(l)?l.replace(wA,"").trim():+l,i=a.substr(o+1).trim();return t},TA=function(n){var t=n.indexOf("(")+1,e=n.indexOf(")"),i=n.indexOf("(",t);return n.substring(t,~i&&i<e?n.indexOf(")",e+1):e)},SA=function(n){var t=(n+"").split("("),e=ht[t[0]];return e&&t.length>1&&e.config?e.config.apply(null,~n.indexOf("{")?[AA(t[1])]:TA(n).split(",").map(ky)):ht._CE&&bA.test(n)?ht._CE("",n):e},Ky=function(n){return function(t){return 1-n(1-t)}},Qy=function n(t,e){for(var i=t._first,r;i;)i instanceof Ie?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},zi=function(n,t){return n&&(Nt(n)?n:ht[n]||SA(n))||t},Qi=function(n,t,e,i){e===void 0&&(e=function(o){return 1-t(1-o)}),i===void 0&&(i=function(o){return o<.5?t(o*2)/2:1-t((1-o)*2)/2});var r={easeIn:t,easeOut:e,easeInOut:i},s;return De(n,function(o){ht[o]=Qe[o]=r,ht[s=o.toLowerCase()]=e;for(var a in r)ht[s+(a==="easeIn"?".in":a==="easeOut"?".out":".inOut")]=ht[o+"."+a]=r[a]}),r},Jy=function(n){return function(t){return t<.5?(1-n(1-t*2))/2:.5+n((t-.5)*2)/2}},Sh=function n(t,e,i){var r=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/fc*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*$w((h-o)*s)+1},l=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:Jy(a);return s=fc/s,l.config=function(h,c){return n(t,h,c)},l},Eh=function n(t,e){e===void 0&&(e=1.70158);var i=function(s){return s?--s*s*((e+1)*s+e)+1:0},r=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:Jy(i);return r.config=function(s){return n(t,s)},r};De("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;Qi(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});ht.Linear.easeNone=ht.none=ht.Linear.easeIn;Qi("Elastic",Sh("in"),Sh("out"),Sh());(function(n,t){var e=1/t,i=2*e,r=2.5*e,s=function(o){return o<e?n*o*o:o<i?n*Math.pow(o-1.5/t,2)+.75:o<r?n*(o-=2.25/t)*o+.9375:n*Math.pow(o-2.625/t,2)+.984375};Qi("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Qi("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Qi("Circ",function(n){return-(xy(1-n*n)-1)});Qi("Sine",function(n){return n===1?1:-Zw(n*Qw)+1});Qi("Back",Eh("in"),Eh("out"),Eh());ht.SteppedEase=ht.steps=Qe.SteppedEase={config:function(n,t){n===void 0&&(n=1);var e=1/n,i=n+(t?0:1),r=t?1:0,s=1-wt;return function(o){return((i*xo(0,s,o)|0)+r)*e}}};Mr.ease=ht["quad.out"];De("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Eu+=n+","+n+"Params,"});var Zy=function(n,t){this.id=Jw++,n._gsap=this,this.target=n,this.harness=t,this.get=t?t.get:Iy,this.set=t?t.getSetter:ku},no=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Dr(this,+e.duration,1,1),this.data=e.data,Ct&&(this._ctx=Ct,Ct.data.push(this)),eo||We.wake()}var t=n.prototype;return t.delay=function(e){return e||e===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Dr(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,i){if(Br(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(pl(this,e),!r._dp||r.parent||Dy(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&vn(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===wt||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Ry(this,e,i)),this},t.time=function(e,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+ff(this))%(this._dur+this._rDelay)||(e?this._dur:0),i):this._time},t.totalProgress=function(e,i){return arguments.length?this.totalTime(this.totalDuration()*e,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-e:e)+ff(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*r,i):this._repeat?Vr(this._tTime,r)+1:1},t.timeScale=function(e,i){if(!arguments.length)return this._rts===-wt?0:this._rts;if(this._rts===e)return this;var r=this.parent&&this._ts?Ma(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-wt?0:this._rts,this.totalTime(xo(-Math.abs(this._delay),this._tDur,r),i!==!1),dl(this),oA(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Br(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==wt&&(this._tTime-=wt)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&vn(i,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Ve(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var i=this.parent||this._dp;return i?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ma(i.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){e===void 0&&(e=nA);var i=we;return we=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),this.data!=="nested"&&e.kill!==!1&&this.kill(),we=i,this},t.globalTime=function(e){for(var i=this,r=arguments.length?e:i.rawTime();i;)r=i._start+r/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(e):r},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,mf(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var i=this._time;return this._rDelay=e,mf(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,i){return this.totalTime($e(this,e),Ve(i))},t.restart=function(e,i){return this.play().totalTime(e?-this._delay:0,Ve(i))},t.play=function(e,i){return e!=null&&this.seek(e,i),this.reversed(!1).paused(!1)},t.reverse=function(e,i){return e!=null&&this.seek(e||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(e,i){return e!=null&&this.seek(e,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-wt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-wt,this},t.isActive=function(){var e=this.parent||this._dp,i=this._start,r;return!!(!e||this._ts&&this._initted&&e.isActive()&&(r=e.rawTime(!0))>=i&&r<this.endTime(!0)-wt)},t.eventCallback=function(e,i,r){var s=this.vars;return arguments.length>1?(i?(s[e]=i,r&&(s[e+"Params"]=r),e==="onUpdate"&&(this._onUpdate=i)):delete s[e],this):s[e]},t.then=function(e){var i=this;return new Promise(function(r){var s=Nt(e)?e:My,o=function(){var a=i.then;i.then=null,Nt(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=a),r(s),i.then=a};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},t.kill=function(){Cs(this)},n}();on(no.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-wt,_prom:0,_ps:!1,_rts:1});var Ie=function(n){vy(t,n);function t(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ve(i.sortChildren),Vt&&vn(i.parent||Vt,Dn(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&By(Dn(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(i,r,s){return Ns(0,arguments,this),this},e.from=function(i,r,s){return Ns(1,arguments,this),this},e.fromTo=function(i,r,s,o){return Ns(2,arguments,this),this},e.set=function(i,r,s){return r.duration=0,r.parent=this,Ls(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Wt(i,r,$e(this,s),1),this},e.call=function(i,r,s){return vn(this,Wt.delayedCall(0,i,r),s)},e.staggerTo=function(i,r,s,o,a,l,h){return s.duration=r,s.stagger=s.stagger||o,s.onComplete=l,s.onCompleteParams=h,s.parent=this,new Wt(i,s,$e(this,a)),this},e.staggerFrom=function(i,r,s,o,a,l,h){return s.runBackwards=1,Ls(s).immediateRender=Ve(s.immediateRender),this.staggerTo(i,r,s,o,a,l,h)},e.staggerFromTo=function(i,r,s,o,a,l,h,c){return o.startAt=s,Ls(o).immediateRender=Ve(o.immediateRender),this.staggerTo(i,r,o,a,l,h,c)},e.render=function(i,r,s){var o=this._time,a=this._dirty?this.totalDuration():this._tDur,l=this._dur,h=i<=0?0:se(i),c=this._zTime<0!=i<0&&(this._initted||!l),p,f,u,m,g,y,b,T,C,P,S,I;if(this!==Vt&&h>a&&i>=0&&(h=a),h!==this._tTime||s||c){if(o!==this._time&&l&&(h+=this._time-o,i+=this._time-o),p=h,C=this._start,T=this._ts,y=!T,c&&(l||(o=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(S=this._yoyo,g=l+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,r,s);if(p=se(h%g),h===a?(m=this._repeat,p=l):(m=~~(h/g),m&&m===h/g&&(p=l,m--),p>l&&(p=l)),P=Vr(this._tTime,g),!o&&this._tTime&&P!==m&&this._tTime-P*g-this._dur<=0&&(P=m),S&&m&1&&(p=l-p,I=1),m!==P&&!this._lock){var w=S&&P&1,_=w===(S&&m&1);if(m<P&&(w=!w),o=w?0:h%l?l:h,this._lock=1,this.render(o||(I?0:se(m*g)),r,!l)._lock=0,this._tTime=h,!r&&this.parent&&Ye(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),o&&o!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,a=this._tDur,_&&(this._lock=2,o=w?l:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Qy(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=cA(this,se(o),se(p)),b&&(h-=p-(p=b._start))),this._tTime=h,this._time=p,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&p&&!r&&!m&&(Ye(this,"onStart"),this._tTime!==h))return this;if(p>=o&&i>=0)for(f=this._first;f;){if(u=f._next,(f._act||p>=f._start)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,r,s);if(f.render(f._ts>0?(p-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(p-f._start)*f._ts,r,s),p!==this._time||!this._ts&&!y){b=0,u&&(h+=this._zTime=-wt);break}}f=u}else{f=this._last;for(var x=i<0?i:p;f;){if(u=f._prev,(f._act||x<=f._end)&&f._ts&&b!==f){if(f.parent!==this)return this.render(i,r,s);if(f.render(f._ts>0?(x-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(x-f._start)*f._ts,r,s||we&&(f._initted||f._startAt)),p!==this._time||!this._ts&&!y){b=0,u&&(h+=this._zTime=x?-wt:wt);break}}f=u}}if(b&&!r&&(this.pause(),b.render(p>=o?0:-wt)._zTime=p>=o?1:-1,this._ts))return this._start=C,dl(this),this.render(i,r,s);this._onUpdate&&!r&&Ye(this,"onUpdate",!0),(h===a&&this._tTime>=this.totalDuration()||!h&&o)&&(C===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((i||!l)&&(h===a&&this._ts>0||!h&&this._ts<0)&&hi(this,1),!r&&!(i<0&&!o)&&(h||o||!a)&&(Ye(this,h===a&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<a&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(i,r){var s=this;if(Un(r)||(r=$e(this,r,i)),!(i instanceof no)){if(Ae(i))return i.forEach(function(o){return s.add(o,r)}),this;if(oe(i))return this.addLabel(i,r);if(Nt(i))i=Wt.delayedCall(0,i);else return this}return this!==i?vn(this,i,r):this},e.getChildren=function(i,r,s,o){i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=-rn);for(var a=[],l=this._first;l;)l._start>=o&&(l instanceof Wt?r&&a.push(l):(s&&a.push(l),i&&a.push.apply(a,l.getChildren(!0,r,s)))),l=l._next;return a},e.getById=function(i){for(var r=this.getChildren(1,1,1),s=r.length;s--;)if(r[s].vars.id===i)return r[s]},e.remove=function(i){return oe(i)?this.removeLabel(i):Nt(i)?this.killTweensOf(i):(ul(this,i),i===this._recent&&(this._recent=this._last),Ui(this))},e.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=se(We.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},e.addLabel=function(i,r){return this.labels[i]=$e(this,r),this},e.removeLabel=function(i){return delete this.labels[i],this},e.addPause=function(i,r,s){var o=Wt.delayedCall(0,r||$s,s);return o.data="isPause",this._hasPause=1,vn(this,o,$e(this,i))},e.removePause=function(i){var r=this._first;for(i=$e(this,i);r;)r._start===i&&r.data==="isPause"&&hi(r),r=r._next},e.killTweensOf=function(i,r,s){for(var o=this.getTweensOf(i,s),a=o.length;a--;)Zn!==o[a]&&o[a].kill(i,r);return this},e.getTweensOf=function(i,r){for(var s=[],o=sn(i),a=this._first,l=Un(r),h;a;)a instanceof Wt?iA(a._targets,o)&&(l?(!Zn||a._initted&&a._ts)&&a.globalTime(0)<=r&&a.globalTime(a.totalDuration())>r:!r||a.isActive())&&s.push(a):(h=a.getTweensOf(o,r)).length&&s.push.apply(s,h),a=a._next;return s},e.tweenTo=function(i,r){r=r||{};var s=this,o=$e(s,i),a=r,l=a.startAt,h=a.onStart,c=a.onStartParams,p=a.immediateRender,f,u=Wt.to(s,on({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:r.duration||Math.abs((o-(l&&"time"in l?l.time:s._time))/s.timeScale())||wt,onStart:function(){if(s.pause(),!f){var m=r.duration||Math.abs((o-(l&&"time"in l?l.time:s._time))/s.timeScale());u._dur!==m&&Dr(u,m,0,1).render(u._time,!0,!0),f=1}h&&h.apply(u,c||[])}},r));return p?u.render(0):u},e.tweenFromTo=function(i,r,s){return this.tweenTo(r,on({startAt:{time:$e(this,i)}},s))},e.recent=function(){return this._recent},e.nextLabel=function(i){return i===void 0&&(i=this._time),gf(this,$e(this,i))},e.previousLabel=function(i){return i===void 0&&(i=this._time),gf(this,$e(this,i),1)},e.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+wt)},e.shiftChildren=function(i,r,s){s===void 0&&(s=0);for(var o=this._first,a=this.labels,l;o;)o._start>=s&&(o._start+=i,o._end+=i),o=o._next;if(r)for(l in a)a[l]>=s&&(a[l]+=i);return Ui(this)},e.invalidate=function(i){var r=this._first;for(this._lock=0;r;)r.invalidate(i),r=r._next;return n.prototype.invalidate.call(this,i)},e.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,s;r;)s=r._next,this.remove(r),r=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Ui(this)},e.totalDuration=function(i){var r=0,s=this,o=s._last,a=rn,l,h,c;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(c=s.parent;o;)l=o._prev,o._dirty&&o.totalDuration(),h=o._start,h>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,vn(s,o,h-o._delay,1)._lock=0):a=h,h<0&&o._ts&&(r-=h,(!c&&!s._dp||c&&c.smoothChildTiming)&&(s._start+=h/s._ts,s._time-=h,s._tTime-=h),s.shiftChildren(-h,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=l;Dr(s,s===Vt&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(Vt._ts&&(Ry(Vt,Ma(i,Vt)),Py=We.frame),We.frame>=df){df+=Xe.autoSleep||120;var r=Vt._first;if((!r||!r._ts)&&Xe.autoSleep&&We._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||We.sleep()}}},t}(no);on(Ie.prototype,{_lock:0,_hasPause:0,_forcing:0});var EA=function(n,t,e,i,r,s,o){var a=new Be(this._pt,n,t,0,1,r_,null,r),l=0,h=0,c,p,f,u,m,g,y,b;for(a.b=e,a.e=i,e+="",i+="",(y=~i.indexOf("random("))&&(i=to(i)),s&&(b=[e,i],s(b,n,t),e=b[0],i=b[1]),p=e.match(wh)||[];c=wh.exec(i);)u=c[0],m=i.substring(l,c.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),u!==p[h++]&&(g=parseFloat(p[h-1])||0,a._pt={_next:a._pt,p:m||h===1?m:",",s:g,c:u.charAt(1)==="="?Tr(g,u)-g:parseFloat(u)-g,m:f&&f<4?Math.round:0},l=wh.lastIndex);return a.c=l<i.length?i.substring(l,i.length):"",a.fp=o,(Ay.test(i)||y)&&(a.e=0),this._pt=a,a},Pu=function(n,t,e,i,r,s,o,a,l,h){Nt(i)&&(i=i(r||0,n,s));var c=n[t],p=e!=="get"?e:Nt(c)?l?n[t.indexOf("set")||!Nt(n["get"+t.substr(3)])?t:"get"+t.substr(3)](l):n[t]():c,f=Nt(c)?l?kA:n_:Ru,u;if(oe(i)&&(~i.indexOf("random(")&&(i=to(i)),i.charAt(1)==="="&&(u=Tr(p,i)+(be(p)||0),(u||u===0)&&(i=u))),!h||p!==i||Ac)return!isNaN(p*i)&&i!==""?(u=new Be(this._pt,n,t,+p||0,i-(p||0),typeof c=="boolean"?VA:i_,0,f),l&&(u.fp=l),o&&u.modifier(o,this,n),this._pt=u):(!c&&!(t in n)&&Tu(t,i),EA.call(this,n,t,p,i,f,a||Xe.stringFilter,l))},CA=function(n,t,e,i,r){if(Nt(n)&&(n=Us(n,r,t,e,i)),!Cn(n)||n.style&&n.nodeType||Ae(n)||by(n))return oe(n)?Us(n,r,t,e,i):n;var s={},o;for(o in n)s[o]=Us(n[o],r,t,e,i);return s},$y=function(n,t,e,i,r,s){var o,a,l,h;if(qe[n]&&(o=new qe[n]).init(r,o.rawVars?t[n]:CA(t[n],i,r,s,e),e,i,s)!==!1&&(e._pt=a=new Be(e._pt,r,n,0,1,o.render,o,0,o.priority),e!==vr))for(l=e._ptLookup[e._targets.indexOf(r)],h=o._props.length;h--;)l[o._props[h]]=a;return o},Zn,Ac,Iu=function n(t,e,i){var r=t.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,h=r.onUpdate,c=r.runBackwards,p=r.yoyoEase,f=r.keyframes,u=r.autoRevert,m=t._dur,g=t._startAt,y=t._targets,b=t.parent,T=b&&b.data==="nested"?b.vars.targets:y,C=t._overwrite==="auto"&&!xu,P=t.timeline,S,I,w,_,x,A,R,M,k,B,O,U,z;if(P&&(!f||!s)&&(s="none"),t._ease=zi(s,Mr.ease),t._yEase=p?Ky(zi(p===!0?s:p,Mr.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!P&&!!r.runBackwards,!P||f&&!r.stagger){if(M=y[0]?Ni(y[0]).harness:0,U=M&&r[M.prop],S=ka(r,Su),g&&(g._zTime<0&&g.progress(1),e<0&&c&&a&&!u?g.render(-1,!0):g.revert(c&&m?ha:eA),g._lazy=0),o){if(hi(t._startAt=Wt.set(y,on({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!g&&Ve(l),startAt:null,delay:0,onUpdate:h&&function(){return Ye(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(we||!a&&!u)&&t._startAt.revert(ha),a&&m&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(c&&m&&!g){if(e&&(a=!1),w=on({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Ve(l),immediateRender:a,stagger:0,parent:b},S),U&&(w[M.prop]=U),hi(t._startAt=Wt.set(y,w)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(we?t._startAt.revert(ha):t._startAt.render(-1,!0)),t._zTime=e,!a)n(t._startAt,wt,wt);else if(!e)return}for(t._pt=t._ptCache=0,l=m&&Ve(l)||l&&!m,I=0;I<y.length;I++){if(x=y[I],R=x._gsap||Cu(y)[I]._gsap,t._ptLookup[I]=B={},yc[R.id]&&ni.length&&Ra(),O=T===y?I:T.indexOf(x),M&&(k=new M).init(x,U||S,t,O,T)!==!1&&(t._pt=_=new Be(t._pt,x,k.name,0,1,k.render,k,0,k.priority),k._props.forEach(function(Q){B[Q]=_}),k.priority&&(A=1)),!M||U)for(w in S)qe[w]&&(k=$y(w,S,t,O,x,T))?k.priority&&(A=1):B[w]=_=Pu.call(t,x,w,"get",S[w],O,T,0,r.stringFilter);t._op&&t._op[I]&&t.kill(x,t._op[I]),C&&t._pt&&(Zn=t,Vt.killTweensOf(x,B,t.globalTime(e)),z=!t.parent,Zn=0),t._pt&&l&&(yc[R.id]=1)}A&&s_(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!z,f&&e<=0&&P.render(rn,!0,!0)},PA=function(n,t,e,i,r,s,o,a){var l=(n._pt&&n._ptCache||(n._ptCache={}))[t],h,c,p,f;if(!l)for(l=n._ptCache[t]=[],p=n._ptLookup,f=n._targets.length;f--;){if(h=p[f][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return Ac=1,n.vars[t]="+=0",Iu(n,o),Ac=0,a?Zs(t+" not eligible for reset"):1;l.push(h)}for(f=l.length;f--;)c=l[f],h=c._pt||c,h.s=(i||i===0)&&!r?i:h.s+(i||0)+s*h.c,h.c=e-h.s,c.e&&(c.e=zt(e)+be(c.e)),c.b&&(c.b=h.s+be(c.b))},IA=function(n,t){var e=n[0]?Ni(n[0]).harness:0,i=e&&e.aliases,r,s,o,a;if(!i)return t;r=Yi({},t);for(s in i)if(s in r)for(a=i[s].split(","),o=a.length;o--;)r[a[o]]=r[s];return r},RA=function(n,t,e,i){var r=t.ease||i||"power1.inOut",s,o;if(Ae(t))o=e[n]||(e[n]=[]),t.forEach(function(a,l){return o.push({t:l/(t.length-1)*100,v:a,e:r})});else for(s in t)o=e[s]||(e[s]=[]),s==="ease"||o.push({t:parseFloat(n),v:t[s],e:r})},Us=function(n,t,e,i,r){return Nt(n)?n.call(t,e,i,r):oe(n)&&~n.indexOf("random(")?to(n):n},t_=Eu+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",e_={};De(t_+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return e_[n]=1});var Wt=function(n){vy(t,n);function t(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Ls(r))||this;var l=a.vars,h=l.duration,c=l.delay,p=l.immediateRender,f=l.stagger,u=l.overwrite,m=l.keyframes,g=l.defaults,y=l.scrollTrigger,b=l.yoyoEase,T=r.parent||Vt,C=(Ae(i)||by(i)?Un(i[0]):"length"in r)?[i]:sn(i),P,S,I,w,_,x,A,R;if(a._targets=C.length?Cu(C):Zs("GSAP target "+i+" not found. https://gsap.com",!Xe.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=u,m||f||Jo(h)||Jo(c)){if(r=a.vars,P=a.timeline=new Ie({data:"nested",defaults:g||{},targets:T&&T.data==="nested"?T.vars.targets:C}),P.kill(),P.parent=P._dp=Dn(a),P._start=0,f||Jo(h)||Jo(c)){if(w=C.length,A=f&&Ny(f),Cn(f))for(_ in f)~t_.indexOf(_)&&(R||(R={}),R[_]=f[_]);for(S=0;S<w;S++)I=ka(r,e_),I.stagger=0,b&&(I.yoyoEase=b),R&&Yi(I,R),x=C[S],I.duration=+Us(h,Dn(a),S,x,C),I.delay=(+Us(c,Dn(a),S,x,C)||0)-a._delay,!f&&w===1&&I.delay&&(a._delay=c=I.delay,a._start+=c,I.delay=0),P.to(x,I,A?A(S,x,C):0),P._ease=ht.none;P.duration()?h=c=0:a.timeline=0}else if(m){Ls(on(P.vars.defaults,{ease:"none"})),P._ease=zi(m.ease||r.ease||"none");var M=0,k,B,O;if(Ae(m))m.forEach(function(U){return P.to(C,U,">")}),P.duration();else{I={};for(_ in m)_==="ease"||_==="easeEach"||RA(_,m[_],I,m.easeEach);for(_ in I)for(k=I[_].sort(function(U,z){return U.t-z.t}),M=0,S=0;S<k.length;S++)B=k[S],O={ease:B.e,duration:(B.t-(S?k[S-1].t:0))/100*h},O[_]=B.v,P.to(C,O,M),M+=O.duration;P.duration()<h&&P.to({},{duration:h-P.duration()})}}h||a.duration(h=P.duration())}else a.timeline=0;return u===!0&&!xu&&(Zn=Dn(a),Vt.killTweensOf(C),Zn=0),vn(T,Dn(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(p||!h&&!m&&a._start===se(T._time)&&Ve(p)&&aA(Dn(a))&&T.data!=="nested")&&(a._tTime=-wt,a.render(Math.max(0,-c)||0)),y&&By(Dn(a),y),a}var e=t.prototype;return e.render=function(i,r,s){var o=this._time,a=this._tDur,l=this._dur,h=i<0,c=i>a-wt&&!h?a:i<wt?0:i,p,f,u,m,g,y,b,T,C;if(!l)hA(this,i,r,s);else if(c!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(p=c,T=this.timeline,this._repeat){if(m=l+this._rDelay,this._repeat<-1&&h)return this.totalTime(m*100+i,r,s);if(p=se(c%m),c===a?(u=this._repeat,p=l):(u=~~(c/m),u&&u===se(c/m)&&(p=l,u--),p>l&&(p=l)),y=this._yoyo&&u&1,y&&(C=this._yEase,p=l-p),g=Vr(this._tTime,m),p===o&&!s&&this._initted&&u===g)return this._tTime=c,this;u!==g&&(T&&this._yEase&&Qy(T,y),this.vars.repeatRefresh&&!y&&!this._lock&&this._time!==m&&this._initted&&(this._lock=s=1,this.render(se(m*u),!0).invalidate()._lock=0))}if(!this._initted){if(Oy(this,h?i:p,s,r,c))return this._tTime=0,this;if(o!==this._time&&!(s&&this.vars.repeatRefresh&&u!==g))return this;if(l!==this._dur)return this.render(i,r,s)}if(this._tTime=c,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(C||this._ease)(p/l),this._from&&(this.ratio=b=1-b),p&&!o&&!r&&!u&&(Ye(this,"onStart"),this._tTime!==c))return this;for(f=this._pt;f;)f.r(b,f.d),f=f._next;T&&T.render(i<0?i:T._dur*T._ease(p/this._dur),r,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(h&&_c(this,i,r,s),Ye(this,"onUpdate")),this._repeat&&u!==g&&this.vars.onRepeat&&!r&&this.parent&&Ye(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(h&&!this._onUpdate&&_c(this,i,!0,!0),(i||!l)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&hi(this,1),!r&&!(h&&!o)&&(c||o||y)&&(Ye(this,c===a?"onComplete":"onReverseComplete",!0),this._prom&&!(c<a&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},e.resetTo=function(i,r,s,o,a){eo||We.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Iu(this,l),h=this._ease(l/this._dur),PA(this,i,r,s,o,h,l,a)?this.resetTo(i,r,s,o,1):(pl(this,0),this.parent||Vy(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Cs(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,Zn&&Zn.vars.overwrite!==!0)._first||Cs(this),this.parent&&s!==this.timeline.totalDuration()&&Dr(this,this._dur*this.timeline._tDur/s,0,1),this}var o=this._targets,a=i?sn(i):o,l=this._ptLookup,h=this._pt,c,p,f,u,m,g,y;if((!r||r==="all")&&sA(o,a))return r==="all"&&(this._pt=0),Cs(this);for(c=this._op=this._op||[],r!=="all"&&(oe(r)&&(m={},De(r,function(b){return m[b]=1}),r=m),r=IA(o,r)),y=o.length;y--;)if(~a.indexOf(o[y])){p=l[y],r==="all"?(c[y]=r,u=p,f={}):(f=c[y]=c[y]||{},u=r);for(m in u)g=p&&p[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&ul(this,g,"_pt"),delete p[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&h&&Cs(this),this},t.to=function(i,r){return new t(i,r,arguments[2])},t.from=function(i,r){return Ns(1,arguments)},t.delayedCall=function(i,r,s,o){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:o})},t.fromTo=function(i,r,s){return Ns(2,arguments)},t.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(i,r)},t.killTweensOf=function(i,r,s){return Vt.killTweensOf(i,r,s)},t}(no);on(Wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});De("staggerTo,staggerFrom,staggerFromTo",function(n){Wt[n]=function(){var t=new Ie,e=xc.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var Ru=function(n,t,e){return n[t]=e},n_=function(n,t,e){return n[t](e)},kA=function(n,t,e,i){return n[t](i.fp,e)},MA=function(n,t,e){return n.setAttribute(t,e)},ku=function(n,t){return Nt(n[t])?n_:bu(n[t])&&n.setAttribute?MA:Ru},i_=function(n,t){return t.set(t.t,t.p,Math.round((t.s+t.c*n)*1e6)/1e6,t)},VA=function(n,t){return t.set(t.t,t.p,!!(t.s+t.c*n),t)},r_=function(n,t){var e=t._pt,i="";if(!n&&t.b)i=t.b;else if(n===1&&t.e)i=t.e;else{for(;e;)i=e.p+(e.m?e.m(e.s+e.c*n):Math.round((e.s+e.c*n)*1e4)/1e4)+i,e=e._next;i+=t.c}t.set(t.t,t.p,i,t)},Mu=function(n,t){for(var e=t._pt;e;)e.r(n,e.d),e=e._next},DA=function(n,t,e,i){for(var r=this._pt,s;r;)s=r._next,r.p===i&&r.modifier(n,t,e),r=s},BA=function(n){for(var t=this._pt,e,i;t;)i=t._next,t.p===n&&!t.op||t.op===n?ul(this,t,"_pt"):t.dep||(e=1),t=i;return!e},OA=function(n,t,e,i){i.mSet(n,t,i.m.call(i.tween,e,i.mt),i)},s_=function(n){for(var t=n._pt,e,i,r,s;t;){for(e=t._next,i=r;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:s)?t._prev._next=t:r=t,(t._next=i)?i._prev=t:s=t,t=e}n._pt=r},Be=function(){function n(e,i,r,s,o,a,l,h,c){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||i_,this.d=l||this,this.set=h||Ru,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(e,i,r){this.mSet=this.mSet||this.set,this.set=OA,this.m=e,this.mt=r,this.tween=i},n}();De(Eu+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Su[n]=1});Qe.TweenMax=Qe.TweenLite=Wt;Qe.TimelineLite=Qe.TimelineMax=Ie;Vt=new Ie({sortChildren:!1,defaults:Mr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Xe.stringFilter=Xy;var ji=[],ua={},FA=[],_f=0,LA=0,Ch=function(n){return(ua[n]||FA).map(function(t){return t()})},Tc=function(){var n=Date.now(),t=[];n-_f>2&&(Ch("matchMediaInit"),ji.forEach(function(e){var i=e.queries,r=e.conditions,s,o,a,l;for(o in i)s=_n.matchMedia(i[o]).matches,s&&(a=1),s!==r[o]&&(r[o]=s,l=1);l&&(e.revert(),a&&t.push(e))}),Ch("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(i){return e.add(null,i)})}),_f=n,Ch("matchMedia"))},o_=function(){function n(e,i){this.selector=i&&bc(i),this.data=[],this._r=[],this.isReverted=!1,this.id=LA++,e&&this.add(e)}var t=n.prototype;return t.add=function(e,i,r){Nt(e)&&(r=i,i=e,e=Nt);var s=this,o=function(){var a=Ct,l=s.selector,h;return a&&a!==s&&a.data.push(s),r&&(s.selector=bc(r)),Ct=s,h=i.apply(s,arguments),Nt(h)&&s._r.push(h),Ct=a,s.selector=l,s.isReverted=!1,h};return s.last=o,e===Nt?o(s,function(a){return s.add(null,a)}):e?s[e]=o:o},t.ignore=function(e){var i=Ct;Ct=null,e(this),Ct=i},t.getTweens=function(){var e=[];return this.data.forEach(function(i){return i instanceof n?e.push.apply(e,i.getTweens()):i instanceof Wt&&!(i.parent&&i.parent.data==="nested")&&e.push(i)}),e},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,i){var r=this;if(e?function(){for(var o=r.getTweens(),a=r.data.length,l;a--;)l=r.data[a],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}));for(o.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,c){return c.g-h.g||-1/0}).forEach(function(h){return h.t.revert(e)}),a=r.data.length;a--;)l=r.data[a],l instanceof Ie?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof Wt)&&l.revert&&l.revert(e);r._r.forEach(function(h){return h(e,r)}),r.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var s=ji.length;s--;)ji[s].id===this.id&&ji.splice(s,1)},t.revert=function(e){this.kill(e||{})},n}(),NA=function(){function n(e){this.contexts=[],this.scope=e,Ct&&Ct.data.push(this)}var t=n.prototype;return t.add=function(e,i,r){Cn(e)||(e={matches:e});var s=new o_(0,r||this.scope),o=s.conditions={},a,l,h;Ct&&!s.selector&&(s.selector=Ct.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=e;for(l in e)l==="all"?h=1:(a=_n.matchMedia(e[l]),a&&(ji.indexOf(s)<0&&ji.push(s),(o[l]=a.matches)&&(h=1),a.addListener?a.addListener(Tc):a.addEventListener("change",Tc)));return h&&i(s,function(c){return s.add(null,c)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(i){return i.kill(e,!0)})},n}(),Va={registerPlugin:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t.forEach(function(i){return qy(i)})},timeline:function(n){return new Ie(n)},getTweensOf:function(n,t){return Vt.getTweensOf(n,t)},getProperty:function(n,t,e,i){oe(n)&&(n=sn(n)[0]);var r=Ni(n||{}).get,s=e?My:ky;return e==="native"&&(e=""),n&&(t?s((qe[t]&&qe[t].get||r)(n,t,e,i)):function(o,a,l){return s((qe[o]&&qe[o].get||r)(n,o,a,l))})},quickSetter:function(n,t,e){if(n=sn(n),n.length>1){var i=n.map(function(h){return Fe.quickSetter(h,t,e)}),r=i.length;return function(h){for(var c=r;c--;)i[c](h)}}n=n[0]||{};var s=qe[t],o=Ni(n),a=o.harness&&(o.harness.aliases||{})[t]||t,l=s?function(h){var c=new s;vr._pt=0,c.init(n,e?h+e:h,vr,0,[n]),c.render(1,c),vr._pt&&Mu(1,vr)}:o.set(n,a);return s?l:function(h){return l(n,a,e?h+e:h,o,1)}},quickTo:function(n,t,e){var i,r=Fe.to(n,Yi((i={},i[t]="+=0.1",i.paused=!0,i),e||{})),s=function(o,a,l){return r.resetTo(t,o,a,l)};return s.tween=r,s},isTweening:function(n){return Vt.getTweensOf(n,!0).length>0},defaults:function(n){return n&&n.ease&&(n.ease=zi(n.ease,Mr.ease)),pf(Mr,n||{})},config:function(n){return pf(Xe,n||{})},registerEffect:function(n){var t=n.name,e=n.effect,i=n.plugins,r=n.defaults,s=n.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!qe[o]&&!Qe[o]&&Zs(t+" effect requires "+o+" plugin.")}),Ah[t]=function(o,a,l){return e(sn(o),on(a||{},r),l)},s&&(Ie.prototype[t]=function(o,a,l){return this.add(Ah[t](o,Cn(a)?a:(l=a)&&{},this),l)})},registerEase:function(n,t){ht[n]=zi(t)},parseEase:function(n,t){return arguments.length?zi(n,t):ht},getById:function(n){return Vt.getById(n)},exportRoot:function(n,t){n===void 0&&(n={});var e=new Ie(n),i,r;for(e.smoothChildTiming=Ve(n.smoothChildTiming),Vt.remove(e),e._dp=0,e._time=e._tTime=Vt._time,i=Vt._first;i;)r=i._next,(t||!(!i._dur&&i instanceof Wt&&i.vars.onComplete===i._targets[0]))&&vn(e,i,i._start-i._delay),i=r;return vn(Vt,e,0),e},context:function(n,t){return n?new o_(n,t):Ct},matchMedia:function(n){return new NA(n)},matchMediaRefresh:function(){return ji.forEach(function(n){var t=n.conditions,e,i;for(i in t)t[i]&&(t[i]=!1,e=1);e&&n.revert()})||Tc()},addEventListener:function(n,t){var e=ua[n]||(ua[n]=[]);~e.indexOf(t)||e.push(t)},removeEventListener:function(n,t){var e=ua[n],i=e&&e.indexOf(t);i>=0&&e.splice(i,1)},utils:{wrap:yA,wrapYoyo:_A,distribute:Ny,random:zy,snap:Uy,normalize:gA,getUnit:be,clamp:dA,splitColor:Wy,toArray:sn,selector:bc,mapRange:Gy,pipe:fA,unitize:mA,interpolate:vA,shuffle:Ly},install:Ey,effects:Ah,ticker:We,updateRoot:Ie.updateRoot,plugins:qe,globalTimeline:Vt,core:{PropTween:Be,globals:Cy,Tween:Wt,Timeline:Ie,Animation:no,getCache:Ni,_removeLinkedListItem:ul,reverting:function(){return we},context:function(n){return n&&Ct&&(Ct.data.push(n),n._ctx=Ct),Ct},suppressOverwrites:function(n){return xu=n}}};De("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Va[n]=Wt[n]});We.add(Ie.updateRoot);vr=Va.to({},{duration:0});var UA=function(n,t){for(var e=n._pt;e&&e.p!==t&&e.op!==t&&e.fp!==t;)e=e._next;return e},zA=function(n,t){var e=n._targets,i,r,s;for(i in t)for(r=e.length;r--;)s=n._ptLookup[r][i],s&&(s=s.d)&&(s._pt&&(s=UA(s,i)),s&&s.modifier&&s.modifier(t[i],n,e[r],i))},Ph=function(n,t){return{name:n,rawVars:1,init:function(e,i,r){r._onInit=function(s){var o,a;if(oe(i)&&(o={},De(i,function(l){return o[l]=1}),i=o),t){o={};for(a in i)o[a]=t(i[a]);i=o}zA(s,i)}}}},Fe=Va.registerPlugin({name:"attr",init:function(n,t,e,i,r){var s,o,a;this.tween=e;for(s in t)a=n.getAttribute(s)||"",o=this.add(n,"setAttribute",(a||0)+"",t[s],i,r,0,0,s),o.op=s,o.b=a,this._props.push(s)},render:function(n,t){for(var e=t._pt;e;)we?e.set(e.t,e.p,e.b,e):e.r(n,e.d),e=e._next}},{name:"endArray",init:function(n,t){for(var e=t.length;e--;)this.add(n,e,n[e]||0,t[e],0,0,0,0,0,1)}},Ph("roundProps",wc),Ph("modifiers"),Ph("snap",Uy))||Va;Wt.version=Ie.version=Fe.version="3.12.5";Sy=1;wu()&&Br();ht.Power0;ht.Power1;ht.Power2;ht.Power3;ht.Power4;ht.Linear;ht.Quad;ht.Cubic;ht.Quart;ht.Quint;ht.Strong;ht.Elastic;ht.Back;ht.SteppedEase;ht.Bounce;ht.Sine;ht.Expo;ht.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var vf,$n,Sr,Vu,Oi,xf,Du,jA=function(){return typeof window<"u"},zn={},ki=180/Math.PI,Er=Math.PI/180,cr=Math.atan2,bf=1e8,Bu=/([A-Z])/g,GA=/(left|right|width|margin|padding|x)/i,HA=/[\s,\(]\S/,wn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Sc=function(n,t){return t.set(t.t,t.p,Math.round((t.s+t.c*n)*1e4)/1e4+t.u,t)},qA=function(n,t){return t.set(t.t,t.p,n===1?t.e:Math.round((t.s+t.c*n)*1e4)/1e4+t.u,t)},WA=function(n,t){return t.set(t.t,t.p,n?Math.round((t.s+t.c*n)*1e4)/1e4+t.u:t.b,t)},YA=function(n,t){var e=t.s+t.c*n;t.set(t.t,t.p,~~(e+(e<0?-.5:.5))+t.u,t)},a_=function(n,t){return t.set(t.t,t.p,n?t.e:t.b,t)},l_=function(n,t){return t.set(t.t,t.p,n!==1?t.b:t.e,t)},XA=function(n,t,e){return n.style[t]=e},KA=function(n,t,e){return n.style.setProperty(t,e)},QA=function(n,t,e){return n._gsap[t]=e},JA=function(n,t,e){return n._gsap.scaleX=n._gsap.scaleY=e},ZA=function(n,t,e,i,r){var s=n._gsap;s.scaleX=s.scaleY=e,s.renderTransform(r,s)},$A=function(n,t,e,i,r){var s=n._gsap;s[t]=e,s.renderTransform(r,s)},Bt="transform",Oe=Bt+"Origin",tT=function n(t,e){var i=this,r=this.target,s=r.style,o=r._gsap;if(t in zn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=wn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Bn(r,a)}):this.tfm[t]=o.x?o[t]:Bn(r,t),t===Oe&&(this.tfm.zOrigin=o.zOrigin);else return wn.transform.split(",").forEach(function(a){return n.call(i,a,e)});if(this.props.indexOf(Bt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Oe,e,"")),t=Bt}(s||e)&&this.props.push(t,e,s[t])},h_=function(n){n.translate&&(n.removeProperty("translate"),n.removeProperty("scale"),n.removeProperty("rotate"))},eT=function(){var n=this.props,t=this.target,e=t.style,i=t._gsap,r,s;for(r=0;r<n.length;r+=3)n[r+1]?t[n[r]]=n[r+2]:n[r+2]?e[n[r]]=n[r+2]:e.removeProperty(n[r].substr(0,2)==="--"?n[r]:n[r].replace(Bu,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=Du(),(!r||!r.isStart)&&!e[Bt]&&(h_(e),i.zOrigin&&e[Oe]&&(e[Oe]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},c_=function(n,t){var e={target:n,props:[],revert:eT,save:tT};return n._gsap||Fe.core.getCache(n),t&&t.split(",").forEach(function(i){return e.save(i)}),e},u_,Ec=function(n,t){var e=$n.createElementNS?$n.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),n):$n.createElement(n);return e&&e.style?e:$n.createElement(n)},Tn=function n(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Bu,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&n(t,Or(e)||e,1)||""},wf="O,Moz,ms,Ms,Webkit".split(","),Or=function(n,t,e){var i=t||Oi,r=i.style,s=5;if(n in r&&!e)return n;for(n=n.charAt(0).toUpperCase()+n.substr(1);s--&&!(wf[s]+n in r););return s<0?null:(s===3?"ms":s>=0?wf[s]:"")+n},Cc=function(){jA()&&window.document&&(vf=window,$n=vf.document,Sr=$n.documentElement,Oi=Ec("div")||{style:{}},Ec("div"),Bt=Or(Bt),Oe=Bt+"Origin",Oi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u_=!!Or("perspective"),Du=Fe.core.reverting,Vu=1)},Ih=function n(t){var e=Ec("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Sr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Sr.removeChild(e),this.style.cssText=s,o},Af=function(n,t){for(var e=t.length;e--;)if(n.hasAttribute(t[e]))return n.getAttribute(t[e])},d_=function(n){var t;try{t=n.getBBox()}catch{t=Ih.call(n,!0)}return t&&(t.width||t.height)||n.getBBox===Ih||(t=Ih.call(n,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Af(n,["x","cx","x1"])||0,y:+Af(n,["y","cy","y1"])||0,width:0,height:0}:t},p_=function(n){return!!(n.getCTM&&(!n.parentNode||n.ownerSVGElement)&&d_(n))},Xi=function(n,t){if(t){var e=n.style,i;t in zn&&t!==Oe&&(t=Bt),e.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),e.removeProperty(i==="--"?t:t.replace(Bu,"-$1").toLowerCase())):e.removeAttribute(t)}},ti=function(n,t,e,i,r,s){var o=new Be(n._pt,t,e,0,1,s?l_:a_);return n._pt=o,o.b=i,o.e=r,n._props.push(e),o},Tf={deg:1,rad:1,turn:1},nT={grid:1,flex:1},ci=function n(t,e,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Oi.style,l=GA.test(e),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),p=100,f=r==="px",u=r==="%",m,g,y,b;if(r===o||!s||Tf[r]||Tf[o])return s;if(o!=="px"&&!f&&(s=n(t,e,i,"px")),b=t.getCTM&&p_(t),(u||o==="%")&&(zn[e]||~e.indexOf("adius")))return m=b?t.getBBox()[l?"width":"height"]:t[c],zt(u?s/m*p:s/100*m);if(a[l?"width":"height"]=p+(f?o:r),g=~e.indexOf("adius")||r==="em"&&t.appendChild&&!h?t:t.parentNode,b&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===$n||!g.appendChild)&&(g=$n.body),y=g._gsap,y&&u&&y.width&&l&&y.time===We.time&&!y.uncache)return zt(s/y.width*p);if(u&&(e==="height"||e==="width")){var T=t.style[e];t.style[e]=p+r,m=t[c],T?t.style[e]=T:Xi(t,e)}else(u||o==="%")&&!nT[Tn(g,"display")]&&(a.position=Tn(t,"position")),g===t&&(a.position="static"),g.appendChild(Oi),m=Oi[c],g.removeChild(Oi),a.position="absolute";return l&&u&&(y=Ni(g),y.time=We.time,y.width=g[c]),zt(f?m*s/p:m&&s?p/m*s:0)},Bn=function(n,t,e,i){var r;return Vu||Cc(),t in wn&&t!=="transform"&&(t=wn[t],~t.indexOf(",")&&(t=t.split(",")[0])),zn[t]&&t!=="transform"?(r=ro(n,i),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:Ba(Tn(n,Oe))+" "+r.zOrigin+"px"):(r=n.style[t],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=Da[t]&&Da[t](n,t,e)||Tn(n,t)||Iy(n,t)||(t==="opacity"?1:0))),e&&!~(r+"").trim().indexOf(" ")?ci(n,t,r,e)+e:r},iT=function(n,t,e,i){if(!e||e==="none"){var r=Or(t,n,1),s=r&&Tn(n,r,1);s&&s!==e?(t=r,e=s):t==="borderColor"&&(e=Tn(n,"borderTopColor"))}var o=new Be(this._pt,n.style,t,0,1,r_),a=0,l=0,h,c,p,f,u,m,g,y,b,T,C,P;if(o.b=e,o.e=i,e+="",i+="",i==="auto"&&(m=n.style[t],n.style[t]=i,i=Tn(n,t)||i,m?n.style[t]=m:Xi(n,t)),h=[e,i],Xy(h),e=h[0],i=h[1],p=e.match(_r)||[],P=i.match(_r)||[],P.length){for(;c=_r.exec(i);)g=c[0],b=i.substring(a,c.index),u?u=(u+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(u=1),g!==(m=p[l++]||"")&&(f=parseFloat(m)||0,C=m.substr((f+"").length),g.charAt(1)==="="&&(g=Tr(f,g)+C),y=parseFloat(g),T=g.substr((y+"").length),a=_r.lastIndex-T.length,T||(T=T||Xe.units[t]||C,a===i.length&&(i+=T,o.e+=T)),C!==T&&(f=ci(n,t,m,T)||0),o._pt={_next:o._pt,p:b||l===1?b:",",s:f,c:y-f,m:u&&u<4||t==="zIndex"?Math.round:0});o.c=a<i.length?i.substring(a,i.length):""}else o.r=t==="display"&&i==="none"?l_:a_;return Ay.test(i)&&(o.e=0),this._pt=o,o},Sf={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},rT=function(n){var t=n.split(" "),e=t[0],i=t[1]||"50%";return(e==="top"||e==="bottom"||i==="left"||i==="right")&&(n=e,e=i,i=n),t[0]=Sf[e]||e,t[1]=Sf[i]||i,t.join(" ")},sT=function(n,t){if(t.tween&&t.tween._time===t.tween._dur){var e=t.t,i=e.style,r=t.u,s=e._gsap,o,a,l;if(r==="all"||r===!0)i.cssText="",a=1;else for(r=r.split(","),l=r.length;--l>-1;)o=r[l],zn[o]&&(a=1,o=o==="transformOrigin"?Oe:Bt),Xi(e,o);a&&(Xi(e,Bt),s&&(s.svg&&e.removeAttribute("transform"),ro(e,1),s.uncache=1,h_(i)))}},Da={clearProps:function(n,t,e,i,r){if(r.data!=="isFromStart"){var s=n._pt=new Be(n._pt,t,e,0,0,sT);return s.u=i,s.pr=-10,s.tween=r,n._props.push(e),1}}},io=[1,0,0,1,0,0],f_={},m_=function(n){return n==="matrix(1, 0, 0, 1, 0, 0)"||n==="none"||!n},Ef=function(n){var t=Tn(n,Bt);return m_(t)?io:t.substr(7).match(wy).map(zt)},Ou=function(n,t){var e=n._gsap||Ni(n),i=n.style,r=Ef(n),s,o,a,l;return e.svg&&n.getAttribute("transform")?(a=n.transform.baseVal.consolidate().matrix,r=[a.a,a.b,a.c,a.d,a.e,a.f],r.join(",")==="1,0,0,1,0,0"?io:r):(r===io&&!n.offsetParent&&n!==Sr&&!e.svg&&(a=i.display,i.display="block",s=n.parentNode,(!s||!n.offsetParent)&&(l=1,o=n.nextElementSibling,Sr.appendChild(n)),r=Ef(n),a?i.display=a:Xi(n,"display"),l&&(o?s.insertBefore(n,o):s?s.appendChild(n):Sr.removeChild(n))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Pc=function(n,t,e,i,r,s){var o=n._gsap,a=r||Ou(n,!0),l=o.xOrigin||0,h=o.yOrigin||0,c=o.xOffset||0,p=o.yOffset||0,f=a[0],u=a[1],m=a[2],g=a[3],y=a[4],b=a[5],T=t.split(" "),C=parseFloat(T[0])||0,P=parseFloat(T[1])||0,S,I,w,_;e?a!==io&&(I=f*g-u*m)&&(w=C*(g/I)+P*(-m/I)+(m*b-g*y)/I,_=C*(-u/I)+P*(f/I)-(f*b-u*y)/I,C=w,P=_):(S=d_(n),C=S.x+(~T[0].indexOf("%")?C/100*S.width:C),P=S.y+(~(T[1]||T[0]).indexOf("%")?P/100*S.height:P)),i||i!==!1&&o.smooth?(y=C-l,b=P-h,o.xOffset=c+(y*f+b*m)-y,o.yOffset=p+(y*u+b*g)-b):o.xOffset=o.yOffset=0,o.xOrigin=C,o.yOrigin=P,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!e,n.style[Oe]="0px 0px",s&&(ti(s,o,"xOrigin",l,C),ti(s,o,"yOrigin",h,P),ti(s,o,"xOffset",c,o.xOffset),ti(s,o,"yOffset",p,o.yOffset)),n.setAttribute("data-svg-origin",C+" "+P)},ro=function(n,t){var e=n._gsap||new Zy(n);if("x"in e&&!t&&!e.uncache)return e;var i=n.style,r=e.scaleX<0,s="px",o="deg",a=getComputedStyle(n),l=Tn(n,Oe)||"0",h,c,p,f,u,m,g,y,b,T,C,P,S,I,w,_,x,A,R,M,k,B,O,U,z,Q,j,H,_t,J,$,St;return h=c=p=m=g=y=b=T=C=0,f=u=1,e.svg=!!(n.getCTM&&p_(n)),a.translate&&((a.translate!=="none"||a.scale!=="none"||a.rotate!=="none")&&(i[Bt]=(a.translate!=="none"?"translate3d("+(a.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(a.rotate!=="none"?"rotate("+a.rotate+") ":"")+(a.scale!=="none"?"scale("+a.scale.split(" ").join(",")+") ":"")+(a[Bt]!=="none"?a[Bt]:"")),i.scale=i.rotate=i.translate="none"),I=Ou(n,e.svg),e.svg&&(e.uncache?(z=n.getBBox(),l=e.xOrigin-z.x+"px "+(e.yOrigin-z.y)+"px",U=""):U=!t&&n.getAttribute("data-svg-origin"),Pc(n,U||l,!!U||e.originIsAbsolute,e.smooth!==!1,I)),P=e.xOrigin||0,S=e.yOrigin||0,I!==io&&(A=I[0],R=I[1],M=I[2],k=I[3],h=B=I[4],c=O=I[5],I.length===6?(f=Math.sqrt(A*A+R*R),u=Math.sqrt(k*k+M*M),m=A||R?cr(R,A)*ki:0,b=M||k?cr(M,k)*ki+m:0,b&&(u*=Math.abs(Math.cos(b*Er))),e.svg&&(h-=P-(P*A+S*M),c-=S-(P*R+S*k))):(St=I[6],J=I[7],j=I[8],H=I[9],_t=I[10],$=I[11],h=I[12],c=I[13],p=I[14],w=cr(St,_t),g=w*ki,w&&(_=Math.cos(-w),x=Math.sin(-w),U=B*_+j*x,z=O*_+H*x,Q=St*_+_t*x,j=B*-x+j*_,H=O*-x+H*_,_t=St*-x+_t*_,$=J*-x+$*_,B=U,O=z,St=Q),w=cr(-M,_t),y=w*ki,w&&(_=Math.cos(-w),x=Math.sin(-w),U=A*_-j*x,z=R*_-H*x,Q=M*_-_t*x,$=k*x+$*_,A=U,R=z,M=Q),w=cr(R,A),m=w*ki,w&&(_=Math.cos(w),x=Math.sin(w),U=A*_+R*x,z=B*_+O*x,R=R*_-A*x,O=O*_-B*x,A=U,B=z),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,y=180-y),f=zt(Math.sqrt(A*A+R*R+M*M)),u=zt(Math.sqrt(O*O+St*St)),w=cr(B,O),b=Math.abs(w)>2e-4?w*ki:0,C=$?1/($<0?-$:$):0),e.svg&&(U=n.getAttribute("transform"),e.forceCSS=n.setAttribute("transform","")||!m_(Tn(n,Bt)),U&&n.setAttribute("transform",U))),Math.abs(b)>90&&Math.abs(b)<270&&(r?(f*=-1,b+=m<=0?180:-180,m+=m<=0?180:-180):(u*=-1,b+=b<=0?180:-180)),t=t||e.uncache,e.x=h-((e.xPercent=h&&(!t&&e.xPercent||(Math.round(n.offsetWidth/2)===Math.round(-h)?-50:0)))?n.offsetWidth*e.xPercent/100:0)+s,e.y=c-((e.yPercent=c&&(!t&&e.yPercent||(Math.round(n.offsetHeight/2)===Math.round(-c)?-50:0)))?n.offsetHeight*e.yPercent/100:0)+s,e.z=p+s,e.scaleX=zt(f),e.scaleY=zt(u),e.rotation=zt(m)+o,e.rotationX=zt(g)+o,e.rotationY=zt(y)+o,e.skewX=b+o,e.skewY=T+o,e.transformPerspective=C+s,(e.zOrigin=parseFloat(l.split(" ")[2])||!t&&e.zOrigin||0)&&(i[Oe]=Ba(l)),e.xOffset=e.yOffset=0,e.force3D=Xe.force3D,e.renderTransform=e.svg?aT:u_?g_:oT,e.uncache=0,e},Ba=function(n){return(n=n.split(" "))[0]+" "+n[1]},Rh=function(n,t,e){var i=be(t);return zt(parseFloat(t)+parseFloat(ci(n,"x",e+"px",i)))+i},oT=function(n,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,g_(n,t)},Si="0deg",ws="0px",Ei=") ",g_=function(n,t){var e=t||this,i=e.xPercent,r=e.yPercent,s=e.x,o=e.y,a=e.z,l=e.rotation,h=e.rotationY,c=e.rotationX,p=e.skewX,f=e.skewY,u=e.scaleX,m=e.scaleY,g=e.transformPerspective,y=e.force3D,b=e.target,T=e.zOrigin,C="",P=y==="auto"&&n&&n!==1||y===!0;if(T&&(c!==Si||h!==Si)){var S=parseFloat(h)*Er,I=Math.sin(S),w=Math.cos(S),_;S=parseFloat(c)*Er,_=Math.cos(S),s=Rh(b,s,I*_*-T),o=Rh(b,o,-Math.sin(S)*-T),a=Rh(b,a,w*_*-T+T)}g!==ws&&(C+="perspective("+g+Ei),(i||r)&&(C+="translate("+i+"%, "+r+"%) "),(P||s!==ws||o!==ws||a!==ws)&&(C+=a!==ws||P?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Ei),l!==Si&&(C+="rotate("+l+Ei),h!==Si&&(C+="rotateY("+h+Ei),c!==Si&&(C+="rotateX("+c+Ei),(p!==Si||f!==Si)&&(C+="skew("+p+", "+f+Ei),(u!==1||m!==1)&&(C+="scale("+u+", "+m+Ei),b.style[Bt]=C||"translate(0, 0)"},aT=function(n,t){var e=t||this,i=e.xPercent,r=e.yPercent,s=e.x,o=e.y,a=e.rotation,l=e.skewX,h=e.skewY,c=e.scaleX,p=e.scaleY,f=e.target,u=e.xOrigin,m=e.yOrigin,g=e.xOffset,y=e.yOffset,b=e.forceCSS,T=parseFloat(s),C=parseFloat(o),P,S,I,w,_;a=parseFloat(a),l=parseFloat(l),h=parseFloat(h),h&&(h=parseFloat(h),l+=h,a+=h),a||l?(a*=Er,l*=Er,P=Math.cos(a)*c,S=Math.sin(a)*c,I=Math.sin(a-l)*-p,w=Math.cos(a-l)*p,l&&(h*=Er,_=Math.tan(l-h),_=Math.sqrt(1+_*_),I*=_,w*=_,h&&(_=Math.tan(h),_=Math.sqrt(1+_*_),P*=_,S*=_)),P=zt(P),S=zt(S),I=zt(I),w=zt(w)):(P=c,w=p,S=I=0),(T&&!~(s+"").indexOf("px")||C&&!~(o+"").indexOf("px"))&&(T=ci(f,"x",s,"px"),C=ci(f,"y",o,"px")),(u||m||g||y)&&(T=zt(T+u-(u*P+m*I)+g),C=zt(C+m-(u*S+m*w)+y)),(i||r)&&(_=f.getBBox(),T=zt(T+i/100*_.width),C=zt(C+r/100*_.height)),_="matrix("+P+","+S+","+I+","+w+","+T+","+C+")",f.setAttribute("transform",_),b&&(f.style[Bt]=_)},lT=function(n,t,e,i,r){var s=360,o=oe(r),a=parseFloat(r)*(o&&~r.indexOf("rad")?ki:1),l=a-i,h=i+l+"deg",c,p;return o&&(c=r.split("_")[1],c==="short"&&(l%=s,l!==l%(s/2)&&(l+=l<0?s:-s)),c==="cw"&&l<0?l=(l+s*bf)%s-~~(l/s)*s:c==="ccw"&&l>0&&(l=(l-s*bf)%s-~~(l/s)*s)),n._pt=p=new Be(n._pt,t,e,i,l,qA),p.e=h,p.u="deg",n._props.push(e),p},Cf=function(n,t){for(var e in t)n[e]=t[e];return n},hT=function(n,t,e){var i=Cf({},e._gsap),r="perspective,force3D,transformOrigin,svgOrigin",s=e.style,o,a,l,h,c,p,f,u;i.svg?(l=e.getAttribute("transform"),e.setAttribute("transform",""),s[Bt]=t,o=ro(e,1),Xi(e,Bt),e.setAttribute("transform",l)):(l=getComputedStyle(e)[Bt],s[Bt]=t,o=ro(e,1),s[Bt]=l);for(a in zn)l=i[a],h=o[a],l!==h&&r.indexOf(a)<0&&(f=be(l),u=be(h),c=f!==u?ci(e,a,l,u):parseFloat(l),p=parseFloat(h),n._pt=new Be(n._pt,o,a,c,p-c,Sc),n._pt.u=u||0,n._props.push(a));Cf(o,i)};De("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",r="Bottom",s="Left",o=(t<3?[e,i,r,s]:[e+s,e+i,r+i,r+s]).map(function(a){return t<2?n+a:"border"+a+n});Da[t>1?"border"+n:n]=function(a,l,h,c,p){var f,u;if(arguments.length<4)return f=o.map(function(m){return Bn(a,m,h)}),u=f.join(" "),u.split(f[0]).length===5?f[0]:u;f=(c+"").split(" "),u={},o.forEach(function(m,g){return u[m]=f[g]=f[g]||f[(g-1)/2|0]}),a.init(l,u,p)}});var y_={name:"css",register:Cc,targetTest:function(n){return n.style&&n.nodeType},init:function(n,t,e,i,r){var s=this._props,o=n.style,a=e.vars.startAt,l,h,c,p,f,u,m,g,y,b,T,C,P,S,I,w;Vu||Cc(),this.styles=this.styles||c_(n),w=this.styles.props,this.tween=e;for(m in t)if(m!=="autoRound"&&(h=t[m],!(qe[m]&&$y(m,t,e,i,n,r)))){if(f=typeof h,u=Da[m],f==="function"&&(h=h.call(e,i,n,r),f=typeof h),f==="string"&&~h.indexOf("random(")&&(h=to(h)),u)u(this,n,m,h,e)&&(I=1);else if(m.substr(0,2)==="--")l=(getComputedStyle(n).getPropertyValue(m)+"").trim(),h+="",ii.lastIndex=0,ii.test(l)||(g=be(l),y=be(h)),y?g!==y&&(l=ci(n,m,l,y)+y):g&&(h+=g),this.add(o,"setProperty",l,h,i,r,0,0,m),s.push(m),w.push(m,0,o[m]);else if(f!=="undefined"){if(a&&m in a?(l=typeof a[m]=="function"?a[m].call(e,i,n,r):a[m],oe(l)&&~l.indexOf("random(")&&(l=to(l)),be(l+"")||l==="auto"||(l+=Xe.units[m]||be(Bn(n,m))||""),(l+"").charAt(1)==="="&&(l=Bn(n,m))):l=Bn(n,m),p=parseFloat(l),b=f==="string"&&h.charAt(1)==="="&&h.substr(0,2),b&&(h=h.substr(2)),c=parseFloat(h),m in wn&&(m==="autoAlpha"&&(p===1&&Bn(n,"visibility")==="hidden"&&c&&(p=0),w.push("visibility",0,o.visibility),ti(this,o,"visibility",p?"inherit":"hidden",c?"inherit":"hidden",!c)),m!=="scale"&&m!=="transform"&&(m=wn[m],~m.indexOf(",")&&(m=m.split(",")[0]))),T=m in zn,T){if(this.styles.save(m),C||(P=n._gsap,P.renderTransform&&!t.parseTransform||ro(n,t.parseTransform),S=t.smoothOrigin!==!1&&P.smooth,C=this._pt=new Be(this._pt,o,Bt,0,1,P.renderTransform,P,0,-1),C.dep=1),m==="scale")this._pt=new Be(this._pt,P,"scaleY",P.scaleY,(b?Tr(P.scaleY,b+c):c)-P.scaleY||0,Sc),this._pt.u=0,s.push("scaleY",m),m+="X";else if(m==="transformOrigin"){w.push(Oe,0,o[Oe]),h=rT(h),P.svg?Pc(n,h,0,S,0,this):(y=parseFloat(h.split(" ")[2])||0,y!==P.zOrigin&&ti(this,P,"zOrigin",P.zOrigin,y),ti(this,o,m,Ba(l),Ba(h)));continue}else if(m==="svgOrigin"){Pc(n,h,1,S,0,this);continue}else if(m in f_){lT(this,P,m,p,b?Tr(p,b+h):h);continue}else if(m==="smoothOrigin"){ti(this,P,"smooth",P.smooth,h);continue}else if(m==="force3D"){P[m]=h;continue}else if(m==="transform"){hT(this,h,n);continue}}else m in o||(m=Or(m)||m);if(T||(c||c===0)&&(p||p===0)&&!HA.test(h)&&m in o)g=(l+"").substr((p+"").length),c||(c=0),y=be(h)||(m in Xe.units?Xe.units[m]:g),g!==y&&(p=ci(n,m,l,y)),this._pt=new Be(this._pt,T?P:o,m,p,(b?Tr(p,b+c):c)-p,!T&&(y==="px"||m==="zIndex")&&t.autoRound!==!1?YA:Sc),this._pt.u=y||0,g!==y&&y!=="%"&&(this._pt.b=l,this._pt.r=WA);else if(m in o)iT.call(this,n,m,l,b?b+h:h);else if(m in n)this.add(n,m,l||n[m],b?b+h:h,i,r);else if(m!=="parseTransform"){Tu(m,h);continue}T||(m in o?w.push(m,0,o[m]):w.push(m,1,l||n[m])),s.push(m)}}I&&s_(this)},render:function(n,t){if(t.tween._time||!Du())for(var e=t._pt;e;)e.r(n,e.d),e=e._next;else t.styles.revert()},get:Bn,aliases:wn,getSetter:function(n,t,e){var i=wn[t];return i&&i.indexOf(",")<0&&(t=i),t in zn&&t!==Oe&&(n._gsap.x||Bn(n,"x"))?e&&xf===e?t==="scale"?JA:QA:(xf=e||{})&&(t==="scale"?ZA:$A):n.style&&!bu(n.style[t])?XA:~t.indexOf("-")?KA:ku(n,t)},core:{_removeProperty:Xi,_getMatrix:Ou}};Fe.utils.checkPrefix=Or;Fe.core.getStyleSaver=c_;(function(n,t,e,i){var r=De(n+","+t+","+e,function(s){zn[s]=1});De(t,function(s){Xe.units[s]="deg",f_[s]=1}),wn[r[13]]=n+","+t,De(i,function(s){var o=s.split(":");wn[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");De("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Xe.units[n]="px"});Fe.registerPlugin(y_);var Is=Fe.registerPlugin(y_)||Fe;Is.core.Tween;class Kr{constructor(t){Pe(this,"_options"),Pe(this,"_tween",null),this._options=t}get options(){return this._options}get name(){return this._options.name}start(t){return new Promise(e=>{this._tween=Is.fromTo(t,this.options.from,{...this.options.to,onComplete:()=>e(),duration:this.options.duration,repeat:this.options.repeat,yoyo:this.options.revert,ease:this.options.ease,delay:this.options.delay,repeatDelay:this.options.repeatDelay}),this._tween.play()})}stop(){var t;(t=this._tween)==null||t.kill()}pause(){var t;(t=this._tween)==null||t.pause()}resume(){var t;(t=this._tween)==null||t.resume()}finish(){var t;(t=this._tween)==null||t.progress(1)}static initEngine(){Is.ticker.remove(Is.updateRoot)}static updateEngine(t){this._rootTimeMs+=t,Is.updateRoot(this._rootTimeMs/1e3)}}Pe(Kr,"_rootTimeMs",0);var __={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(n,t){(function(e,i){n.exports=i()})(Vi,function(){return function(e){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=i,r.d=function(s,o,a){r.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:a})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,o){if(o&1&&(s=r(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)r.d(a,l,(function(h){return s[h]}).bind(null,l));return a},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=20)}([function(e,i){var r={};e.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(o,a){var l,h;typeof a=="boolean"?(l=2,h=a):(l=1,h=!0);for(var c=l;c<arguments.length;c++){var p=arguments[c];if(p)for(var f in p)h&&p[f]&&p[f].constructor===Object&&(!o[f]||o[f].constructor===Object)?(o[f]=o[f]||{},r.extend(o[f],h,p[f])):o[f]=p[f]}return o},r.clone=function(o,a){return r.extend({},a,o)},r.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var l in o)a.push(l);return a},r.values=function(o){var a=[];if(Object.keys){for(var l=Object.keys(o),h=0;h<l.length;h++)a.push(o[l[h]]);return a}for(var c in o)a.push(o[c]);return a},r.get=function(o,a,l,h){a=a.split(".").slice(l,h);for(var c=0;c<a.length;c+=1)o=o[a[c]];return o},r.set=function(o,a,l,h,c){var p=a.split(".").slice(h,c);return r.get(o,a,0,-1)[p[p.length-1]]=l,l},r.shuffle=function(o){for(var a=o.length-1;a>0;a--){var l=Math.floor(r.random()*(a+1)),h=o[a];o[a]=o[l],o[l]=h}return o},r.choose=function(o){return o[Math.floor(r.random()*o.length)]},r.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},r.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},r.isFunction=function(o){return typeof o=="function"},r.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},r.isString=function(o){return toString.call(o)==="[object String]"},r.clamp=function(o,a,l){return o<a?a:o>l?l:o},r.sign=function(o){return o<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+s()*(a-o)};var s=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[o]||(r.warn(o),r._warnedOnce[o]=!0)},r.deprecated=function(o,a,l){o[a]=r.chain(function(){r.warnOnce(" deprecated ",l)},o[a])},r.nextId=function(){return r._nextId++},r.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var l=0;l<o.length;l++)if(o[l]===a)return l;return-1},r.map=function(o,a){if(o.map)return o.map(a);for(var l=[],h=0;h<o.length;h+=1)l.push(a(o[h]));return l},r.topologicalSort=function(o){var a=[],l=[],h=[];for(var c in o)!l[c]&&!h[c]&&r._topologicalSort(c,l,h,o,a);return a},r._topologicalSort=function(o,a,l,h,c){var p=h[o]||[];l[o]=!0;for(var f=0;f<p.length;f+=1){var u=p[f];l[u]||a[u]||r._topologicalSort(u,a,l,h,c)}l[o]=!1,a[o]=!0,c.push(o)},r.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var l=arguments[a];l._chained?o.push.apply(o,l._chained):o.push(l)}var h=function(){for(var c,p=new Array(arguments.length),f=0,u=arguments.length;f<u;f++)p[f]=arguments[f];for(f=0;f<o.length;f+=1){var m=o[f].apply(c,p);typeof m<"u"&&(c=m)}return c};return h._chained=o,h},r.chainPathBefore=function(o,a,l){return r.set(o,a,r.chain(l,r.get(o,a)))},r.chainPathAfter=function(o,a,l){return r.set(o,a,r.chain(r.get(o,a),l))},r.setDecomp=function(o){r._decomp=o},r.getDecomp=function(){var o=r._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof Vi<"u"&&(o=Vi.decomp)}catch{o=null}return o}}()},function(e,i){var r={};e.exports=r,function(){r.create=function(s){var o={min:{x:0,y:0},max:{x:0,y:0}};return s&&r.update(o,s),o},r.update=function(s,o,a){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<o.length;l++){var h=o[l];h.x>s.max.x&&(s.max.x=h.x),h.x<s.min.x&&(s.min.x=h.x),h.y>s.max.y&&(s.max.y=h.y),h.y<s.min.y&&(s.min.y=h.y)}a&&(a.x>0?s.max.x+=a.x:s.min.x+=a.x,a.y>0?s.max.y+=a.y:s.min.y+=a.y)},r.contains=function(s,o){return o.x>=s.min.x&&o.x<=s.max.x&&o.y>=s.min.y&&o.y<=s.max.y},r.overlaps=function(s,o){return s.min.x<=o.max.x&&s.max.x>=o.min.x&&s.max.y>=o.min.y&&s.min.y<=o.max.y},r.translate=function(s,o){s.min.x+=o.x,s.max.x+=o.x,s.min.y+=o.y,s.max.y+=o.y},r.shift=function(s,o){var a=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=o.x,s.max.x=o.x+a,s.min.y=o.y,s.max.y=o.y+l}}()},function(e,i){var r={};e.exports=r,function(){r.create=function(s,o){return{x:s||0,y:o||0}},r.clone=function(s){return{x:s.x,y:s.y}},r.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},r.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},r.rotate=function(s,o,a){var l=Math.cos(o),h=Math.sin(o);a||(a={});var c=s.x*l-s.y*h;return a.y=s.x*h+s.y*l,a.x=c,a},r.rotateAbout=function(s,o,a,l){var h=Math.cos(o),c=Math.sin(o);l||(l={});var p=a.x+((s.x-a.x)*h-(s.y-a.y)*c);return l.y=a.y+((s.x-a.x)*c+(s.y-a.y)*h),l.x=p,l},r.normalise=function(s){var o=r.magnitude(s);return o===0?{x:0,y:0}:{x:s.x/o,y:s.y/o}},r.dot=function(s,o){return s.x*o.x+s.y*o.y},r.cross=function(s,o){return s.x*o.y-s.y*o.x},r.cross3=function(s,o,a){return(o.x-s.x)*(a.y-s.y)-(o.y-s.y)*(a.x-s.x)},r.add=function(s,o,a){return a||(a={}),a.x=s.x+o.x,a.y=s.y+o.y,a},r.sub=function(s,o,a){return a||(a={}),a.x=s.x-o.x,a.y=s.y-o.y,a},r.mult=function(s,o){return{x:s.x*o,y:s.y*o}},r.div=function(s,o){return{x:s.x/o,y:s.y/o}},r.perp=function(s,o){return o=o===!0?-1:1,{x:o*-s.y,y:o*s.x}},r.neg=function(s){return{x:-s.x,y:-s.y}},r.angle=function(s,o){return Math.atan2(o.y-s.y,o.x-s.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(e,i,r){var s={};e.exports=s;var o=r(2),a=r(0);(function(){s.create=function(l,h){for(var c=[],p=0;p<l.length;p++){var f=l[p],u={x:f.x,y:f.y,index:p,body:h,isInternal:!1};c.push(u)}return c},s.fromPath=function(l,h){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,p=[];return l.replace(c,function(f,u,m){p.push({x:parseFloat(u),y:parseFloat(m)})}),s.create(p,h)},s.centre=function(l){for(var h=s.area(l,!0),c={x:0,y:0},p,f,u,m=0;m<l.length;m++)u=(m+1)%l.length,p=o.cross(l[m],l[u]),f=o.mult(o.add(l[m],l[u]),p),c=o.add(c,f);return o.div(c,6*h)},s.mean=function(l){for(var h={x:0,y:0},c=0;c<l.length;c++)h.x+=l[c].x,h.y+=l[c].y;return o.div(h,l.length)},s.area=function(l,h){for(var c=0,p=l.length-1,f=0;f<l.length;f++)c+=(l[p].x-l[f].x)*(l[p].y+l[f].y),p=f;return h?c/2:Math.abs(c)/2},s.inertia=function(l,h){for(var c=0,p=0,f=l,u,m,g=0;g<f.length;g++)m=(g+1)%f.length,u=Math.abs(o.cross(f[m],f[g])),c+=u*(o.dot(f[m],f[m])+o.dot(f[m],f[g])+o.dot(f[g],f[g])),p+=u;return h/6*(c/p)},s.translate=function(l,h,c){c=typeof c<"u"?c:1;var p=l.length,f=h.x*c,u=h.y*c,m;for(m=0;m<p;m++)l[m].x+=f,l[m].y+=u;return l},s.rotate=function(l,h,c){if(h!==0){var p=Math.cos(h),f=Math.sin(h),u=c.x,m=c.y,g=l.length,y,b,T,C;for(C=0;C<g;C++)y=l[C],b=y.x-u,T=y.y-m,y.x=u+(b*p-T*f),y.y=m+(b*f+T*p);return l}},s.contains=function(l,h){for(var c=h.x,p=h.y,f=l.length,u=l[f-1],m,g=0;g<f;g++){if(m=l[g],(c-u.x)*(m.y-u.y)+(p-u.y)*(u.x-m.x)>0)return!1;u=m}return!0},s.scale=function(l,h,c,p){if(h===1&&c===1)return l;p=p||s.centre(l);for(var f,u,m=0;m<l.length;m++)f=l[m],u=o.sub(f,p),l[m].x=p.x+u.x*h,l[m].y=p.y+u.y*c;return l},s.chamfer=function(l,h,c,p,f){typeof h=="number"?h=[h]:h=h||[8],c=typeof c<"u"?c:-1,p=p||2,f=f||14;for(var u=[],m=0;m<l.length;m++){var g=l[m-1>=0?m-1:l.length-1],y=l[m],b=l[(m+1)%l.length],T=h[m<h.length?m:h.length-1];if(T===0){u.push(y);continue}var C=o.normalise({x:y.y-g.y,y:g.x-y.x}),P=o.normalise({x:b.y-y.y,y:y.x-b.x}),S=Math.sqrt(2*Math.pow(T,2)),I=o.mult(a.clone(C),T),w=o.normalise(o.mult(o.add(C,P),.5)),_=o.sub(y,o.mult(w,S)),x=c;c===-1&&(x=Math.pow(T,.32)*1.75),x=a.clamp(x,p,f),x%2===1&&(x+=1);for(var A=Math.acos(o.dot(C,P)),R=A/x,M=0;M<x;M++)u.push(o.add(o.rotate(I,R*M),_))}return u},s.clockwiseSort=function(l){var h=s.mean(l);return l.sort(function(c,p){return o.angle(h,c)-o.angle(h,p)}),l},s.isConvex=function(l){var h=0,c=l.length,p,f,u,m;if(c<3)return null;for(p=0;p<c;p++)if(f=(p+1)%c,u=(p+2)%c,m=(l[f].x-l[p].x)*(l[u].y-l[f].y),m-=(l[f].y-l[p].y)*(l[u].x-l[f].x),m<0?h|=1:m>0&&(h|=2),h===3)return!1;return h!==0?!0:null},s.hull=function(l){var h=[],c=[],p,f;for(l=l.slice(0),l.sort(function(u,m){var g=u.x-m.x;return g!==0?g:u.y-m.y}),f=0;f<l.length;f+=1){for(p=l[f];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],p)<=0;)c.pop();c.push(p)}for(f=l.length-1;f>=0;f-=1){for(p=l[f];h.length>=2&&o.cross3(h[h.length-2],h[h.length-1],p)<=0;)h.pop();h.push(p)}return h.pop(),c.pop(),h.concat(c)}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(2),l=r(7),h=r(0),c=r(1),p=r(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(u){var m={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},g=h.extend(m,u);return f(g,u),g},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var f=function(u,m){m=m||{},s.set(u,{bounds:u.bounds||c.create(u.vertices),positionPrev:u.positionPrev||a.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),o.rotate(u.vertices,u.angle,u.position),p.rotate(u.axes,u.angle),c.update(u.bounds,u.vertices,u.velocity),s.set(u,{axes:m.axes||u.axes,area:m.area||u.area,mass:m.mass||u.mass,inertia:m.inertia||u.inertia});var g=u.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),y=u.isStatic?"#555":"#ccc",b=u.isStatic&&u.render.fillStyle===null?1:0;u.render.fillStyle=u.render.fillStyle||g,u.render.strokeStyle=u.render.strokeStyle||y,u.render.lineWidth=u.render.lineWidth||b,u.render.sprite.xOffset+=-(u.bounds.min.x-u.position.x)/(u.bounds.max.x-u.bounds.min.x),u.render.sprite.yOffset+=-(u.bounds.min.y-u.position.y)/(u.bounds.max.y-u.bounds.min.y)};s.set=function(u,m,g){var y;typeof m=="string"&&(y=m,m={},m[y]=g);for(y in m)if(Object.prototype.hasOwnProperty.call(m,y))switch(g=m[y],y){case"isStatic":s.setStatic(u,g);break;case"isSleeping":l.set(u,g);break;case"mass":s.setMass(u,g);break;case"density":s.setDensity(u,g);break;case"inertia":s.setInertia(u,g);break;case"vertices":s.setVertices(u,g);break;case"position":s.setPosition(u,g);break;case"angle":s.setAngle(u,g);break;case"velocity":s.setVelocity(u,g);break;case"angularVelocity":s.setAngularVelocity(u,g);break;case"speed":s.setSpeed(u,g);break;case"angularSpeed":s.setAngularSpeed(u,g);break;case"parts":s.setParts(u,g);break;case"centre":s.setCentre(u,g);break;default:u[y]=g}},s.setStatic=function(u,m){for(var g=0;g<u.parts.length;g++){var y=u.parts[g];m?(y.isStatic||(y._original={restitution:y.restitution,friction:y.friction,mass:y.mass,inertia:y.inertia,density:y.density,inverseMass:y.inverseMass,inverseInertia:y.inverseInertia}),y.restitution=0,y.friction=1,y.mass=y.inertia=y.density=1/0,y.inverseMass=y.inverseInertia=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.angularVelocity=0,y.speed=0,y.angularSpeed=0,y.motion=0):y._original&&(y.restitution=y._original.restitution,y.friction=y._original.friction,y.mass=y._original.mass,y.inertia=y._original.inertia,y.density=y._original.density,y.inverseMass=y._original.inverseMass,y.inverseInertia=y._original.inverseInertia,y._original=null),y.isStatic=m}},s.setMass=function(u,m){var g=u.inertia/(u.mass/6);u.inertia=g*(m/6),u.inverseInertia=1/u.inertia,u.mass=m,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,m){s.setMass(u,m*u.area),u.density=m},s.setInertia=function(u,m){u.inertia=m,u.inverseInertia=1/u.inertia},s.setVertices=function(u,m){m[0].body===u?u.vertices=m:u.vertices=o.create(m,u),u.axes=p.fromVertices(u.vertices),u.area=o.area(u.vertices),s.setMass(u,u.density*u.area);var g=o.centre(u.vertices);o.translate(u.vertices,g,-1),s.setInertia(u,s._inertiaScale*o.inertia(u.vertices,u.mass)),o.translate(u.vertices,u.position),c.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,m,g){var y;for(m=m.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,y=0;y<m.length;y++){var b=m[y];b!==u&&(b.parent=u,u.parts.push(b))}if(u.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var T=[];for(y=0;y<m.length;y++)T=T.concat(m[y].vertices);o.clockwiseSort(T);var C=o.hull(T),P=o.centre(C);s.setVertices(u,C),o.translate(u.vertices,P)}var S=s._totalProperties(u);u.area=S.area,u.parent=u,u.position.x=S.centre.x,u.position.y=S.centre.y,u.positionPrev.x=S.centre.x,u.positionPrev.y=S.centre.y,s.setMass(u,S.mass),s.setInertia(u,S.inertia),s.setPosition(u,S.centre)}},s.setCentre=function(u,m,g){g?(u.positionPrev.x+=m.x,u.positionPrev.y+=m.y,u.position.x+=m.x,u.position.y+=m.y):(u.positionPrev.x=m.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=m.y-(u.position.y-u.positionPrev.y),u.position.x=m.x,u.position.y=m.y)},s.setPosition=function(u,m,g){var y=a.sub(m,u.position);g?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=y.x,u.velocity.y=y.y,u.speed=a.magnitude(y)):(u.positionPrev.x+=y.x,u.positionPrev.y+=y.y);for(var b=0;b<u.parts.length;b++){var T=u.parts[b];T.position.x+=y.x,T.position.y+=y.y,o.translate(T.vertices,y),c.update(T.bounds,T.vertices,u.velocity)}},s.setAngle=function(u,m,g){var y=m-u.angle;g?(u.anglePrev=u.angle,u.angularVelocity=y,u.angularSpeed=Math.abs(y)):u.anglePrev+=y;for(var b=0;b<u.parts.length;b++){var T=u.parts[b];T.angle+=y,o.rotate(T.vertices,y,u.position),p.rotate(T.axes,y),c.update(T.bounds,T.vertices,u.velocity),b>0&&a.rotateAbout(T.position,y,u.position,T.position)}},s.setVelocity=function(u,m){var g=u.deltaTime/s._baseDelta;u.positionPrev.x=u.position.x-m.x*g,u.positionPrev.y=u.position.y-m.y*g,u.velocity.x=(u.position.x-u.positionPrev.x)/g,u.velocity.y=(u.position.y-u.positionPrev.y)/g,u.speed=a.magnitude(u.velocity)},s.getVelocity=function(u){var m=s._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*m,y:(u.position.y-u.positionPrev.y)*m}},s.getSpeed=function(u){return a.magnitude(s.getVelocity(u))},s.setSpeed=function(u,m){s.setVelocity(u,a.mult(a.normalise(s.getVelocity(u)),m))},s.setAngularVelocity=function(u,m){var g=u.deltaTime/s._baseDelta;u.anglePrev=u.angle-m*g,u.angularVelocity=(u.angle-u.anglePrev)/g,u.angularSpeed=Math.abs(u.angularVelocity)},s.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*s._baseDelta/u.deltaTime},s.getAngularSpeed=function(u){return Math.abs(s.getAngularVelocity(u))},s.setAngularSpeed=function(u,m){s.setAngularVelocity(u,h.sign(s.getAngularVelocity(u))*m)},s.translate=function(u,m,g){s.setPosition(u,a.add(u.position,m),g)},s.rotate=function(u,m,g,y){if(!g)s.setAngle(u,u.angle+m,y);else{var b=Math.cos(m),T=Math.sin(m),C=u.position.x-g.x,P=u.position.y-g.y;s.setPosition(u,{x:g.x+(C*b-P*T),y:g.y+(C*T+P*b)},y),s.setAngle(u,u.angle+m,y)}},s.scale=function(u,m,g,y){var b=0,T=0;y=y||u.position;for(var C=0;C<u.parts.length;C++){var P=u.parts[C];o.scale(P.vertices,m,g,y),P.axes=p.fromVertices(P.vertices),P.area=o.area(P.vertices),s.setMass(P,u.density*P.area),o.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),s.setInertia(P,s._inertiaScale*o.inertia(P.vertices,P.mass)),o.translate(P.vertices,{x:P.position.x,y:P.position.y}),C>0&&(b+=P.area,T+=P.inertia),P.position.x=y.x+(P.position.x-y.x)*m,P.position.y=y.y+(P.position.y-y.y)*g,c.update(P.bounds,P.vertices,u.velocity)}u.parts.length>1&&(u.area=b,u.isStatic||(s.setMass(u,u.density*b),s.setInertia(u,T))),u.circleRadius&&(m===g?u.circleRadius*=m:u.circleRadius=null)},s.update=function(u,m){m=(typeof m<"u"?m:1e3/60)*u.timeScale;var g=m*m,y=s._timeCorrection?m/(u.deltaTime||m):1,b=1-u.frictionAir*(m/h._baseDelta),T=(u.position.x-u.positionPrev.x)*y,C=(u.position.y-u.positionPrev.y)*y;u.velocity.x=T*b+u.force.x/u.mass*g,u.velocity.y=C*b+u.force.y/u.mass*g,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=m,u.angularVelocity=(u.angle-u.anglePrev)*b*y+u.torque/u.inertia*g,u.anglePrev=u.angle,u.angle+=u.angularVelocity;for(var P=0;P<u.parts.length;P++){var S=u.parts[P];o.translate(S.vertices,u.velocity),P>0&&(S.position.x+=u.velocity.x,S.position.y+=u.velocity.y),u.angularVelocity!==0&&(o.rotate(S.vertices,u.angularVelocity,u.position),p.rotate(S.axes,u.angularVelocity),P>0&&a.rotateAbout(S.position,u.angularVelocity,u.position,S.position)),c.update(S.bounds,S.vertices,u.velocity)}},s.updateVelocities=function(u){var m=s._baseDelta/u.deltaTime,g=u.velocity;g.x=(u.position.x-u.positionPrev.x)*m,g.y=(u.position.y-u.positionPrev.y)*m,u.speed=Math.sqrt(g.x*g.x+g.y*g.y),u.angularVelocity=(u.angle-u.anglePrev)*m,u.angularSpeed=Math.abs(u.angularVelocity)},s.applyForce=function(u,m,g){var y={x:m.x-u.position.x,y:m.y-u.position.y};u.force.x+=g.x,u.force.y+=g.y,u.torque+=y.x*g.y-y.y*g.x},s._totalProperties=function(u){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=u.parts.length===1?0:1;g<u.parts.length;g++){var y=u.parts[g],b=y.mass!==1/0?y.mass:1;m.mass+=b,m.area+=y.area,m.inertia+=y.inertia,m.centre=a.add(m.centre,a.mult(y.position,b))}return m.centre=a.div(m.centre,m.mass),m}})()},function(e,i,r){var s={};e.exports=s;var o=r(0);(function(){s.on=function(a,l,h){for(var c=l.split(" "),p,f=0;f<c.length;f++)p=c[f],a.events=a.events||{},a.events[p]=a.events[p]||[],a.events[p].push(h);return h},s.off=function(a,l,h){if(!l){a.events={};return}typeof l=="function"&&(h=l,l=o.keys(a.events).join(" "));for(var c=l.split(" "),p=0;p<c.length;p++){var f=a.events[c[p]],u=[];if(h&&f)for(var m=0;m<f.length;m++)f[m]!==h&&u.push(f[m]);a.events[c[p]]=u}},s.trigger=function(a,l,h){var c,p,f,u,m=a.events;if(m&&o.keys(m).length>0){h||(h={}),c=l.split(" ");for(var g=0;g<c.length;g++)if(p=c[g],f=m[p],f){u=o.clone(h,!1),u.name=p,u.source=a;for(var y=0;y<f.length;y++)f[y].apply(a,[u])}}}})()},function(e,i,r){var s={};e.exports=s;var o=r(5),a=r(0),l=r(1),h=r(4);(function(){s.create=function(c){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},s.setModified=function(c,p,f,u){if(c.isModified=p,p&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),f&&c.parent&&s.setModified(c.parent,p,f,u),u)for(var m=0;m<c.composites.length;m++){var g=c.composites[m];s.setModified(g,p,f,u)}},s.add=function(c,p){var f=[].concat(p);o.trigger(c,"beforeAdd",{object:p});for(var u=0;u<f.length;u++){var m=f[u];switch(m.type){case"body":if(m.parent!==m){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(c,m);break;case"constraint":s.addConstraint(c,m);break;case"composite":s.addComposite(c,m);break;case"mouseConstraint":s.addConstraint(c,m.constraint);break}}return o.trigger(c,"afterAdd",{object:p}),c},s.remove=function(c,p,f){var u=[].concat(p);o.trigger(c,"beforeRemove",{object:p});for(var m=0;m<u.length;m++){var g=u[m];switch(g.type){case"body":s.removeBody(c,g,f);break;case"constraint":s.removeConstraint(c,g,f);break;case"composite":s.removeComposite(c,g,f);break;case"mouseConstraint":s.removeConstraint(c,g.constraint);break}}return o.trigger(c,"afterRemove",{object:p}),c},s.addComposite=function(c,p){return c.composites.push(p),p.parent=c,s.setModified(c,!0,!0,!1),c},s.removeComposite=function(c,p,f){var u=a.indexOf(c.composites,p);if(u!==-1){var m=s.allBodies(p);s.removeCompositeAt(c,u);for(var g=0;g<m.length;g++)m[g].sleepCounter=0}if(f)for(var g=0;g<c.composites.length;g++)s.removeComposite(c.composites[g],p,!0);return c},s.removeCompositeAt=function(c,p){return c.composites.splice(p,1),s.setModified(c,!0,!0,!1),c},s.addBody=function(c,p){return c.bodies.push(p),s.setModified(c,!0,!0,!1),c},s.removeBody=function(c,p,f){var u=a.indexOf(c.bodies,p);if(u!==-1&&(s.removeBodyAt(c,u),p.sleepCounter=0),f)for(var m=0;m<c.composites.length;m++)s.removeBody(c.composites[m],p,!0);return c},s.removeBodyAt=function(c,p){return c.bodies.splice(p,1),s.setModified(c,!0,!0,!1),c},s.addConstraint=function(c,p){return c.constraints.push(p),s.setModified(c,!0,!0,!1),c},s.removeConstraint=function(c,p,f){var u=a.indexOf(c.constraints,p);if(u!==-1&&s.removeConstraintAt(c,u),f)for(var m=0;m<c.composites.length;m++)s.removeConstraint(c.composites[m],p,!0);return c},s.removeConstraintAt=function(c,p){return c.constraints.splice(p,1),s.setModified(c,!0,!0,!1),c},s.clear=function(c,p,f){if(f)for(var u=0;u<c.composites.length;u++)s.clear(c.composites[u],p,!0);return p?c.bodies=c.bodies.filter(function(m){return m.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,s.setModified(c,!0,!0,!1),c},s.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var p=[].concat(c.bodies),f=0;f<c.composites.length;f++)p=p.concat(s.allBodies(c.composites[f]));return c.cache&&(c.cache.allBodies=p),p},s.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var p=[].concat(c.constraints),f=0;f<c.composites.length;f++)p=p.concat(s.allConstraints(c.composites[f]));return c.cache&&(c.cache.allConstraints=p),p},s.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var p=[].concat(c.composites),f=0;f<c.composites.length;f++)p=p.concat(s.allComposites(c.composites[f]));return c.cache&&(c.cache.allComposites=p),p},s.get=function(c,p,f){var u,m;switch(f){case"body":u=s.allBodies(c);break;case"constraint":u=s.allConstraints(c);break;case"composite":u=s.allComposites(c).concat(c);break}return u?(m=u.filter(function(g){return g.id.toString()===p.toString()}),m.length===0?null:m[0]):null},s.move=function(c,p,f){return s.remove(c,p),s.add(f,p),c},s.rebase=function(c){for(var p=s.allBodies(c).concat(s.allConstraints(c)).concat(s.allComposites(c)),f=0;f<p.length;f++)p[f].id=a.nextId();return c},s.translate=function(c,p,f){for(var u=f?s.allBodies(c):c.bodies,m=0;m<u.length;m++)h.translate(u[m],p);return c},s.rotate=function(c,p,f,u){for(var m=Math.cos(p),g=Math.sin(p),y=u?s.allBodies(c):c.bodies,b=0;b<y.length;b++){var T=y[b],C=T.position.x-f.x,P=T.position.y-f.y;h.setPosition(T,{x:f.x+(C*m-P*g),y:f.y+(C*g+P*m)}),h.rotate(T,p)}return c},s.scale=function(c,p,f,u,m){for(var g=m?s.allBodies(c):c.bodies,y=0;y<g.length;y++){var b=g[y],T=b.position.x-u.x,C=b.position.y-u.y;h.setPosition(b,{x:u.x+T*p,y:u.y+C*f}),h.scale(b,p,f)}return c},s.bounds=function(c){for(var p=s.allBodies(c),f=[],u=0;u<p.length;u+=1){var m=p[u];f.push(m.bounds.min,m.bounds.max)}return l.create(f)}})()},function(e,i,r){var s={};e.exports=s;var o=r(4),a=r(5),l=r(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(h,c){for(var p=c/l._baseDelta,f=s._motionSleepThreshold,u=0;u<h.length;u++){var m=h[u],g=o.getSpeed(m),y=o.getAngularSpeed(m),b=g*g+y*y;if(m.force.x!==0||m.force.y!==0){s.set(m,!1);continue}var T=Math.min(m.motion,b),C=Math.max(m.motion,b);m.motion=s._minBias*T+(1-s._minBias)*C,m.sleepThreshold>0&&m.motion<f?(m.sleepCounter+=1,m.sleepCounter>=m.sleepThreshold/p&&s.set(m,!0)):m.sleepCounter>0&&(m.sleepCounter-=1)}},s.afterCollisions=function(h){for(var c=s._motionSleepThreshold,p=0;p<h.length;p++){var f=h[p];if(f.isActive){var u=f.collision,m=u.bodyA.parent,g=u.bodyB.parent;if(!(m.isSleeping&&g.isSleeping||m.isStatic||g.isStatic)&&(m.isSleeping||g.isSleeping)){var y=m.isSleeping&&!m.isStatic?m:g,b=y===m?g:m;!y.isStatic&&b.motion>c&&s.set(y,!1)}}}},s.set=function(h,c){var p=h.isSleeping;c?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,p||a.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,p&&a.trigger(h,"sleepEnd"))}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(9);(function(){var l=[],h={overlap:0,axis:null},c={overlap:0,axis:null};s.create=function(p,f){return{pair:null,collided:!1,bodyA:p,bodyB:f,parentA:p.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},s.collides=function(p,f,u){if(s._overlapAxes(h,p.vertices,f.vertices,p.axes),h.overlap<=0||(s._overlapAxes(c,f.vertices,p.vertices,f.axes),c.overlap<=0))return null;var m=u&&u.table[a.id(p,f)],g;m?g=m.collision:(g=s.create(p,f),g.collided=!0,g.bodyA=p.id<f.id?p:f,g.bodyB=p.id<f.id?f:p,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),p=g.bodyA,f=g.bodyB;var y;h.overlap<c.overlap?y=h:y=c;var b=g.normal,T=g.tangent,C=g.penetration,P=g.supports,S=y.overlap,I=y.axis,w=I.x,_=I.y,x=f.position.x-p.position.x,A=f.position.y-p.position.y;w*x+_*A>=0&&(w=-w,_=-_),b.x=w,b.y=_,T.x=-_,T.y=w,C.x=w*S,C.y=_*S,g.depth=S;var R=s._findSupports(p,f,b,1),M=0;if(o.contains(p.vertices,R[0])&&(P[M++]=R[0]),o.contains(p.vertices,R[1])&&(P[M++]=R[1]),M<2){var k=s._findSupports(f,p,b,-1);o.contains(f.vertices,k[0])&&(P[M++]=k[0]),M<2&&o.contains(f.vertices,k[1])&&(P[M++]=k[1])}return M===0&&(P[M++]=R[0]),g.supportCount=M,g},s._overlapAxes=function(p,f,u,m){var g=f.length,y=u.length,b=f[0].x,T=f[0].y,C=u[0].x,P=u[0].y,S=m.length,I=Number.MAX_VALUE,w=0,_,x,A,R,M,k;for(M=0;M<S;M++){var B=m[M],O=B.x,U=B.y,z=b*O+T*U,Q=C*O+P*U,j=z,H=Q;for(k=1;k<g;k+=1)R=f[k].x*O+f[k].y*U,R>j?j=R:R<z&&(z=R);for(k=1;k<y;k+=1)R=u[k].x*O+u[k].y*U,R>H?H=R:R<Q&&(Q=R);if(x=j-Q,A=H-z,_=x<A?x:A,_<I&&(I=_,w=M,_<=0))break}p.axis=m[w],p.overlap=I},s._findSupports=function(p,f,u,m){var g=f.vertices,y=g.length,b=p.position.x,T=p.position.y,C=u.x*m,P=u.y*m,S=g[0],I=S,w=C*(b-I.x)+P*(T-I.y),_,x,A;for(A=1;A<y;A+=1)I=g[A],x=C*(b-I.x)+P*(T-I.y),x<w&&(w=x,S=I);return _=g[(y+S.index-1)%y],w=C*(b-_.x)+P*(T-_.y),I=g[(S.index+1)%y],C*(b-I.x)+P*(T-I.y)<w?(l[0]=S,l[1]=I,l):(l[0]=S,l[1]=_,l)}})()},function(e,i,r){var s={};e.exports=s;var o=r(16);(function(){s.create=function(a,l){var h=a.bodyA,c=a.bodyB,p={id:s.id(h,c),bodyA:h,bodyB:c,collision:a,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||c.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(p,a,l),p},s.update=function(a,l,h){var c=l.supports,p=l.supportCount,f=a.contacts,u=l.parentA,m=l.parentB;a.isActive=!0,a.timeUpdated=h,a.collision=l,a.separation=l.depth,a.inverseMass=u.inverseMass+m.inverseMass,a.friction=u.friction<m.friction?u.friction:m.friction,a.frictionStatic=u.frictionStatic>m.frictionStatic?u.frictionStatic:m.frictionStatic,a.restitution=u.restitution>m.restitution?u.restitution:m.restitution,a.slop=u.slop>m.slop?u.slop:m.slop,a.contactCount=p,l.pair=a;var g=c[0],y=f[0],b=c[1],T=f[1];(T.vertex===g||y.vertex===b)&&(f[1]=y,f[0]=y=T,T=f[1]),y.vertex=g,T.vertex=b},s.setActive=function(a,l,h){l?(a.isActive=!0,a.timeUpdated=h):(a.isActive=!1,a.contactCount=0)},s.id=function(a,l){return a.id<l.id?a.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+a.id.toString(36)}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(2),l=r(7),h=r(1),c=r(11),p=r(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(f){var u=f;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var m=u.bodyA?a.add(u.bodyA.position,u.pointA):u.pointA,g=u.bodyB?a.add(u.bodyB.position,u.pointB):u.pointB,y=a.magnitude(a.sub(m,g));u.length=typeof u.length<"u"?u.length:y,u.id=u.id||p.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var b={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return u.length===0&&u.stiffness>.1?(b.type="pin",b.anchors=!1):u.stiffness<.9&&(b.type="spring"),u.render=p.extend(b,u.render),u},s.preSolveAll=function(f){for(var u=0;u<f.length;u+=1){var m=f[u],g=m.constraintImpulse;m.isStatic||g.x===0&&g.y===0&&g.angle===0||(m.position.x+=g.x,m.position.y+=g.y,m.angle+=g.angle)}},s.solveAll=function(f,u){for(var m=p.clamp(u/p._baseDelta,0,1),g=0;g<f.length;g+=1){var y=f[g],b=!y.bodyA||y.bodyA&&y.bodyA.isStatic,T=!y.bodyB||y.bodyB&&y.bodyB.isStatic;(b||T)&&s.solve(f[g],m)}for(g=0;g<f.length;g+=1)y=f[g],b=!y.bodyA||y.bodyA&&y.bodyA.isStatic,T=!y.bodyB||y.bodyB&&y.bodyB.isStatic,!b&&!T&&s.solve(f[g],m)},s.solve=function(f,u){var m=f.bodyA,g=f.bodyB,y=f.pointA,b=f.pointB;if(!(!m&&!g)){m&&!m.isStatic&&(a.rotate(y,m.angle-f.angleA,y),f.angleA=m.angle),g&&!g.isStatic&&(a.rotate(b,g.angle-f.angleB,b),f.angleB=g.angle);var T=y,C=b;if(m&&(T=a.add(m.position,y)),g&&(C=a.add(g.position,b)),!(!T||!C)){var P=a.sub(T,C),S=a.magnitude(P);S<s._minLength&&(S=s._minLength);var I=(S-f.length)/S,w=f.stiffness>=1||f.length===0,_=w?f.stiffness*u:f.stiffness*u*u,x=f.damping*u,A=a.mult(P,I*_),R=(m?m.inverseMass:0)+(g?g.inverseMass:0),M=(m?m.inverseInertia:0)+(g?g.inverseInertia:0),k=R+M,B,O,U,z,Q;if(x>0){var j=a.create();U=a.div(P,S),Q=a.sub(g&&a.sub(g.position,g.positionPrev)||j,m&&a.sub(m.position,m.positionPrev)||j),z=a.dot(U,Q)}m&&!m.isStatic&&(O=m.inverseMass/R,m.constraintImpulse.x-=A.x*O,m.constraintImpulse.y-=A.y*O,m.position.x-=A.x*O,m.position.y-=A.y*O,x>0&&(m.positionPrev.x-=x*U.x*z*O,m.positionPrev.y-=x*U.y*z*O),B=a.cross(y,A)/k*s._torqueDampen*m.inverseInertia*(1-f.angularStiffness),m.constraintImpulse.angle-=B,m.angle-=B),g&&!g.isStatic&&(O=g.inverseMass/R,g.constraintImpulse.x+=A.x*O,g.constraintImpulse.y+=A.y*O,g.position.x+=A.x*O,g.position.y+=A.y*O,x>0&&(g.positionPrev.x+=x*U.x*z*O,g.positionPrev.y+=x*U.y*z*O),B=a.cross(b,A)/k*s._torqueDampen*g.inverseInertia*(1-f.angularStiffness),g.constraintImpulse.angle+=B,g.angle+=B)}}},s.postSolveAll=function(f){for(var u=0;u<f.length;u++){var m=f[u],g=m.constraintImpulse;if(!(m.isStatic||g.x===0&&g.y===0&&g.angle===0)){l.set(m,!1);for(var y=0;y<m.parts.length;y++){var b=m.parts[y];o.translate(b.vertices,g),y>0&&(b.position.x+=g.x,b.position.y+=g.y),g.angle!==0&&(o.rotate(b.vertices,g.angle,m.position),c.rotate(b.axes,g.angle),y>0&&a.rotateAbout(b.position,g.angle,m.position,b.position)),h.update(b.bounds,b.vertices,m.velocity)}g.angle*=s._warming,g.x*=s._warming,g.y*=s._warming}}},s.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},s.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},s.currentLength=function(f){var u=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),m=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),g=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),b=u-g,T=m-y;return Math.sqrt(b*b+T*T)}})()},function(e,i,r){var s={};e.exports=s;var o=r(2),a=r(0);(function(){s.fromVertices=function(l){for(var h={},c=0;c<l.length;c++){var p=(c+1)%l.length,f=o.normalise({x:l[p].y-l[c].y,y:l[c].x-l[p].x}),u=f.y===0?1/0:f.x/f.y;u=u.toFixed(3).toString(),h[u]=f}return a.values(h)},s.rotate=function(l,h){if(h!==0)for(var c=Math.cos(h),p=Math.sin(h),f=0;f<l.length;f++){var u=l[f],m;m=u.x*c-u.y*p,u.y=u.x*p+u.y*c,u.x=m}}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(0),l=r(4),h=r(1),c=r(2);(function(){s.rectangle=function(p,f,u,m,g){g=g||{};var y={label:"Rectangle Body",position:{x:p,y:f},vertices:o.fromPath("L 0 0 L "+u+" 0 L "+u+" "+m+" L 0 "+m)};if(g.chamfer){var b=g.chamfer;y.vertices=o.chamfer(y.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete g.chamfer}return l.create(a.extend({},y,g))},s.trapezoid=function(p,f,u,m,g,y){y=y||{},g>=1&&a.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var b=(1-g*2)*u,T=u*g,C=T+b,P=C+T,S;g<.5?S="L 0 0 L "+T+" "+-m+" L "+C+" "+-m+" L "+P+" 0":S="L 0 0 L "+C+" "+-m+" L "+P+" 0";var I={label:"Trapezoid Body",position:{x:p,y:f},vertices:o.fromPath(S)};if(y.chamfer){var w=y.chamfer;I.vertices=o.chamfer(I.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete y.chamfer}return l.create(a.extend({},I,y))},s.circle=function(p,f,u,m,g){m=m||{};var y={label:"Circle Body",circleRadius:u};g=g||25;var b=Math.ceil(Math.max(10,Math.min(g,u)));return b%2===1&&(b+=1),s.polygon(p,f,b,u,a.extend({},y,m))},s.polygon=function(p,f,u,m,g){if(g=g||{},u<3)return s.circle(p,f,m,g);for(var y=2*Math.PI/u,b="",T=y*.5,C=0;C<u;C+=1){var P=T+C*y,S=Math.cos(P)*m,I=Math.sin(P)*m;b+="L "+S.toFixed(3)+" "+I.toFixed(3)+" "}var w={label:"Polygon Body",position:{x:p,y:f},vertices:o.fromPath(b)};if(g.chamfer){var _=g.chamfer;w.vertices=o.chamfer(w.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete g.chamfer}return l.create(a.extend({},w,g))},s.fromVertices=function(p,f,u,m,g,y,b,T){var C=a.getDecomp(),P,S,I,w,_,x,A,R,M,k,B;for(P=!!(C&&C.quickDecomp),m=m||{},I=[],g=typeof g<"u"?g:!1,y=typeof y<"u"?y:.01,b=typeof b<"u"?b:10,T=typeof T<"u"?T:.01,a.isArray(u[0])||(u=[u]),k=0;k<u.length;k+=1)if(x=u[k],w=o.isConvex(x),_=!w,_&&!P&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),w||!P)w?x=o.clockwiseSort(x):x=o.hull(x),I.push({position:{x:p,y:f},vertices:x});else{var O=x.map(function(rt){return[rt.x,rt.y]});C.makeCCW(O),y!==!1&&C.removeCollinearPoints(O,y),T!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(O,T);var U=C.quickDecomp(O);for(A=0;A<U.length;A++){var z=U[A],Q=z.map(function(rt){return{x:rt[0],y:rt[1]}});b>0&&o.area(Q)<b||I.push({position:o.centre(Q),vertices:Q})}}for(A=0;A<I.length;A++)I[A]=l.create(a.extend(I[A],m));if(g){var j=5;for(A=0;A<I.length;A++){var H=I[A];for(R=A+1;R<I.length;R++){var _t=I[R];if(h.overlaps(H.bounds,_t.bounds)){var J=H.vertices,$=_t.vertices;for(M=0;M<H.vertices.length;M++)for(B=0;B<_t.vertices.length;B++){var St=c.magnitudeSquared(c.sub(J[(M+1)%J.length],$[B])),It=c.magnitudeSquared(c.sub(J[M],$[(B+1)%$.length]));St<j&&It<j&&(J[M].isInternal=!0,$[B].isInternal=!0)}}}}}return I.length>1?(S=l.create(a.extend({parts:I.slice(0)},m)),l.setPosition(S,{x:p,y:f}),S):I[0]}})()},function(e,i,r){var s={};e.exports=s;var o=r(0),a=r(8);(function(){s.create=function(l){var h={bodies:[],collisions:[],pairs:null};return o.extend(h,l)},s.setBodies=function(l,h){l.bodies=h.slice(0)},s.clear=function(l){l.bodies=[],l.collisions=[]},s.collisions=function(l){var h=l.pairs,c=l.bodies,p=c.length,f=s.canCollide,u=a.collides,m=l.collisions,g=0,y,b;for(c.sort(s._compareBoundsX),y=0;y<p;y++){var T=c[y],C=T.bounds,P=T.bounds.max.x,S=T.bounds.max.y,I=T.bounds.min.y,w=T.isStatic||T.isSleeping,_=T.parts.length,x=_===1;for(b=y+1;b<p;b++){var A=c[b],R=A.bounds;if(R.min.x>P)break;if(!(S<R.min.y||I>R.max.y)&&!(w&&(A.isStatic||A.isSleeping))&&f(T.collisionFilter,A.collisionFilter)){var M=A.parts.length;if(x&&M===1){var k=u(T,A,h);k&&(m[g++]=k)}else for(var B=_>1?1:0,O=M>1?1:0,U=B;U<_;U++)for(var z=T.parts[U],C=z.bounds,Q=O;Q<M;Q++){var j=A.parts[Q],R=j.bounds;if(!(C.min.x>R.max.x||C.max.x<R.min.x||C.max.y<R.min.y||C.min.y>R.max.y)){var k=u(z,j,h);k&&(m[g++]=k)}}}}}return m.length!==g&&(m.length=g),m},s.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},s._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()},function(e,i,r){var s={};e.exports=s;var o=r(0);(function(){s.create=function(a){var l={};return a||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=a||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(h){var c=s._getRelativeMousePosition(h,l.element,l.pixelRatio),p=h.changedTouches;p&&(l.button=0,h.preventDefault()),l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=h},l.mousedown=function(h){var c=s._getRelativeMousePosition(h,l.element,l.pixelRatio),p=h.changedTouches;p?(l.button=0,h.preventDefault()):l.button=h.button,l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=h},l.mouseup=function(h){var c=s._getRelativeMousePosition(h,l.element,l.pixelRatio),p=h.changedTouches;p&&h.preventDefault(),l.button=-1,l.absolute.x=c.x,l.absolute.y=c.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=h},l.mousewheel=function(h){l.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault(),l.sourceEvents.mousewheel=h},s.setElement(l,l.element),l},s.setElement=function(a,l){a.element=l,l.addEventListener("mousemove",a.mousemove,{passive:!0}),l.addEventListener("mousedown",a.mousedown,{passive:!0}),l.addEventListener("mouseup",a.mouseup,{passive:!0}),l.addEventListener("wheel",a.mousewheel,{passive:!1}),l.addEventListener("touchmove",a.mousemove,{passive:!1}),l.addEventListener("touchstart",a.mousedown,{passive:!1}),l.addEventListener("touchend",a.mouseup,{passive:!1})},s.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},s.setOffset=function(a,l){a.offset.x=l.x,a.offset.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s.setScale=function(a,l){a.scale.x=l.x,a.scale.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s._getRelativeMousePosition=function(a,l,h){var c=l.getBoundingClientRect(),p=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:p.scrollLeft,u=window.pageYOffset!==void 0?window.pageYOffset:p.scrollTop,m=a.changedTouches,g,y;return m?(g=m[0].pageX-c.left-f,y=m[0].pageY-c.top-u):(g=a.pageX-c.left-f,y=a.pageY-c.top-u),{x:g/(l.clientWidth/(l.width||l.clientWidth)*h),y:y/(l.clientHeight/(l.height||l.clientHeight)*h)}}})()},function(e,i,r){var s={};e.exports=s;var o=r(0);(function(){s._registry={},s.register=function(a){if(s.isPlugin(a)||o.warn("Plugin.register:",s.toString(a),"does not implement all required fields."),a.name in s._registry){var l=s._registry[a.name],h=s.versionParse(a.version).number,c=s.versionParse(l.version).number;h>c?(o.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(a)),s._registry[a.name]=a):h<c?o.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(a)):a!==l&&o.warn("Plugin.register:",s.toString(a),"is already registered to different plugin object")}else s._registry[a.name]=a;return a},s.resolve=function(a){return s._registry[s.dependencyParse(a).name]},s.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},s.isPlugin=function(a){return a&&a.name&&a.version&&a.install},s.isUsed=function(a,l){return a.used.indexOf(l)>-1},s.isFor=function(a,l){var h=a.for&&s.dependencyParse(a.for);return!a.for||l.name===h.name&&s.versionSatisfies(l.version,h.range)},s.use=function(a,l){if(a.uses=(a.uses||[]).concat(l||[]),a.uses.length===0){o.warn("Plugin.use:",s.toString(a),"does not specify any dependencies to install.");return}for(var h=s.dependencies(a),c=o.topologicalSort(h),p=[],f=0;f<c.length;f+=1)if(c[f]!==a.name){var u=s.resolve(c[f]);if(!u){p.push(" "+c[f]);continue}s.isUsed(a,u.name)||(s.isFor(u,a)||(o.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(a)+"."),u._warned=!0),u.install?u.install(a):(o.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(p.push(" "+s.toString(u)),delete u._warned):p.push(" "+s.toString(u)),a.used.push(u.name))}p.length>0&&o.info(p.join("  "))},s.dependencies=function(a,l){var h=s.dependencyParse(a),c=h.name;if(l=l||{},!(c in l)){a=s.resolve(a)||a,l[c]=o.map(a.uses||[],function(f){s.isPlugin(f)&&s.register(f);var u=s.dependencyParse(f),m=s.resolve(f);return m&&!s.versionSatisfies(m.version,u.range)?(o.warn("Plugin.dependencies:",s.toString(m),"does not satisfy",s.toString(u),"used by",s.toString(h)+"."),m._warned=!0,a._warned=!0):m||(o.warn("Plugin.dependencies:",s.toString(f),"used by",s.toString(h),"could not be resolved."),a._warned=!0),u.name});for(var p=0;p<l[c].length;p+=1)s.dependencies(l[c][p],l);return l}},s.dependencyParse=function(a){if(o.isString(a)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},s.versionParse=function(a){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var h=l.exec(a),c=Number(h[4]),p=Number(h[5]),f=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:a,operator:h[1]||h[2]||"",major:c,minor:p,patch:f,parts:[c,p,f],prerelease:h[7],number:c*1e8+p*1e4+f}},s.versionSatisfies=function(a,l){l=l||"*";var h=s.versionParse(l),c=s.versionParse(a);if(h.isRange){if(h.operator==="*"||a==="*")return!0;if(h.operator===">")return c.number>h.number;if(h.operator===">=")return c.number>=h.number;if(h.operator==="~")return c.major===h.major&&c.minor===h.minor&&c.patch>=h.patch;if(h.operator==="^")return h.major>0?c.major===h.major&&c.number>=h.number:h.minor>0?c.minor===h.minor&&c.patch>=h.patch:c.patch===h.patch}return a===l||a==="*"}})()},function(e,i){var r={};e.exports=r,function(){r.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(e,i,r){var s={};e.exports=s;var o=r(7),a=r(18),l=r(13),h=r(19),c=r(5),p=r(6),f=r(10),u=r(0),m=r(4);(function(){s._deltaMax=1e3/60,s.create=function(g){g=g||{};var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},b=u.extend(y,g);return b.world=g.world||p.create({label:"World"}),b.pairs=g.pairs||h.create(),b.detector=g.detector||l.create(),b.detector.pairs=b.pairs,b.grid={buckets:[]},b.world.gravity=b.gravity,b.broadphase=b.grid,b.metrics={},b},s.update=function(g,y){var b=u.now(),T=g.world,C=g.detector,P=g.pairs,S=g.timing,I=S.timestamp,w;y>s._deltaMax&&u.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",s._deltaMax.toFixed(3),"ms."),y=typeof y<"u"?y:u._baseDelta,y*=S.timeScale,S.timestamp+=y,S.lastDelta=y;var _={timestamp:S.timestamp,delta:y};c.trigger(g,"beforeUpdate",_);var x=p.allBodies(T),A=p.allConstraints(T);for(T.isModified&&(l.setBodies(C,x),p.setModified(T,!1,!1,!0)),g.enableSleeping&&o.update(x,y),s._bodiesApplyGravity(x,g.gravity),y>0&&s._bodiesUpdate(x,y),c.trigger(g,"beforeSolve",_),f.preSolveAll(x),w=0;w<g.constraintIterations;w++)f.solveAll(A,y);f.postSolveAll(x);var R=l.collisions(C);h.update(P,R,I),g.enableSleeping&&o.afterCollisions(P.list),P.collisionStart.length>0&&c.trigger(g,"collisionStart",{pairs:P.collisionStart,timestamp:S.timestamp,delta:y});var M=u.clamp(20/g.positionIterations,0,1);for(a.preSolvePosition(P.list),w=0;w<g.positionIterations;w++)a.solvePosition(P.list,y,M);for(a.postSolvePosition(x),f.preSolveAll(x),w=0;w<g.constraintIterations;w++)f.solveAll(A,y);for(f.postSolveAll(x),a.preSolveVelocity(P.list),w=0;w<g.velocityIterations;w++)a.solveVelocity(P.list,y);return s._bodiesUpdateVelocities(x),P.collisionActive.length>0&&c.trigger(g,"collisionActive",{pairs:P.collisionActive,timestamp:S.timestamp,delta:y}),P.collisionEnd.length>0&&c.trigger(g,"collisionEnd",{pairs:P.collisionEnd,timestamp:S.timestamp,delta:y}),s._bodiesClearForces(x),c.trigger(g,"afterUpdate",_),g.timing.lastElapsed=u.now()-b,g},s.merge=function(g,y){if(u.extend(g,y),y.world){g.world=y.world,s.clear(g);for(var b=p.allBodies(g.world),T=0;T<b.length;T++){var C=b[T];o.set(C,!1),C.id=u.nextId()}}},s.clear=function(g){h.clear(g.pairs),l.clear(g.detector)},s._bodiesClearForces=function(g){for(var y=g.length,b=0;b<y;b++){var T=g[b];T.force.x=0,T.force.y=0,T.torque=0}},s._bodiesApplyGravity=function(g,y){var b=typeof y.scale<"u"?y.scale:.001,T=g.length;if(!(y.x===0&&y.y===0||b===0))for(var C=0;C<T;C++){var P=g[C];P.isStatic||P.isSleeping||(P.force.y+=P.mass*y.y*b,P.force.x+=P.mass*y.x*b)}},s._bodiesUpdate=function(g,y){for(var b=g.length,T=0;T<b;T++){var C=g[T];C.isStatic||C.isSleeping||m.update(C,y)}},s._bodiesUpdateVelocities=function(g){for(var y=g.length,b=0;b<y;b++)m.updateVelocities(g[b])}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(0),l=r(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(h){var c,p,f,u=h.length;for(c=0;c<u;c++)p=h[c],p.isActive&&(f=p.contactCount,p.collision.parentA.totalContacts+=f,p.collision.parentB.totalContacts+=f)},s.solvePosition=function(h,c,p){var f,u,m,g,y,b,T,C,P=s._positionDampen*(p||1),S=a.clamp(c/a._baseDelta,0,1),I=h.length;for(f=0;f<I;f++)u=h[f],!(!u.isActive||u.isSensor)&&(m=u.collision,g=m.parentA,y=m.parentB,b=m.normal,u.separation=m.depth+b.x*(y.positionImpulse.x-g.positionImpulse.x)+b.y*(y.positionImpulse.y-g.positionImpulse.y));for(f=0;f<I;f++)u=h[f],!(!u.isActive||u.isSensor)&&(m=u.collision,g=m.parentA,y=m.parentB,b=m.normal,C=u.separation-u.slop*S,(g.isStatic||y.isStatic)&&(C*=2),g.isStatic||g.isSleeping||(T=P/g.totalContacts,g.positionImpulse.x+=b.x*C*T,g.positionImpulse.y+=b.y*C*T),y.isStatic||y.isSleeping||(T=P/y.totalContacts,y.positionImpulse.x-=b.x*C*T,y.positionImpulse.y-=b.y*C*T))},s.postSolvePosition=function(h){for(var c=s._positionWarming,p=h.length,f=o.translate,u=l.update,m=0;m<p;m++){var g=h[m],y=g.positionImpulse,b=y.x,T=y.y,C=g.velocity;if(g.totalContacts=0,b!==0||T!==0){for(var P=0;P<g.parts.length;P++){var S=g.parts[P];f(S.vertices,y),u(S.bounds,S.vertices,C),S.position.x+=b,S.position.y+=T}g.positionPrev.x+=b,g.positionPrev.y+=T,b*C.x+T*C.y<0?(y.x=0,y.y=0):(y.x*=c,y.y*=c)}}},s.preSolveVelocity=function(h){var c=h.length,p,f;for(p=0;p<c;p++){var u=h[p];if(!(!u.isActive||u.isSensor)){var m=u.contacts,g=u.contactCount,y=u.collision,b=y.parentA,T=y.parentB,C=y.normal,P=y.tangent;for(f=0;f<g;f++){var S=m[f],I=S.vertex,w=S.normalImpulse,_=S.tangentImpulse;if(w!==0||_!==0){var x=C.x*w+P.x*_,A=C.y*w+P.y*_;b.isStatic||b.isSleeping||(b.positionPrev.x+=x*b.inverseMass,b.positionPrev.y+=A*b.inverseMass,b.anglePrev+=b.inverseInertia*((I.x-b.position.x)*A-(I.y-b.position.y)*x)),T.isStatic||T.isSleeping||(T.positionPrev.x-=x*T.inverseMass,T.positionPrev.y-=A*T.inverseMass,T.anglePrev-=T.inverseInertia*((I.x-T.position.x)*A-(I.y-T.position.y)*x))}}}}},s.solveVelocity=function(h,c){var p=c/a._baseDelta,f=p*p,u=f*p,m=-s._restingThresh*p,g=s._restingThreshTangent,y=s._frictionNormalMultiplier*p,b=s._frictionMaxStatic,T=h.length,C,P,S,I;for(S=0;S<T;S++){var w=h[S];if(!(!w.isActive||w.isSensor)){var _=w.collision,x=_.parentA,A=_.parentB,R=_.normal.x,M=_.normal.y,k=_.tangent.x,B=_.tangent.y,O=w.inverseMass,U=w.friction*w.frictionStatic*y,z=w.contacts,Q=w.contactCount,j=1/Q,H=x.position.x-x.positionPrev.x,_t=x.position.y-x.positionPrev.y,J=x.angle-x.anglePrev,$=A.position.x-A.positionPrev.x,St=A.position.y-A.positionPrev.y,It=A.angle-A.anglePrev;for(I=0;I<Q;I++){var rt=z[I],Kt=rt.vertex,Rt=Kt.x-x.position.x,Ne=Kt.y-x.position.y,te=Kt.x-A.position.x,ee=Kt.y-A.position.y,kt=H-Ne*J,mn=_t+Rt*J,In=$-ee*It,Ue=St+te*It,ze=kt-In,Ze=mn-Ue,je=R*ze+M*Ze,ke=k*ze+B*Ze,Rn=w.separation+je,Wn=Math.min(Rn,1);Wn=Rn<0?0:Wn;var So=Wn*U;ke<-So||ke>So?(P=ke>0?ke:-ke,C=w.friction*(ke>0?1:-1)*u,C<-P?C=-P:C>P&&(C=P)):(C=ke,P=b);var nr=Rt*M-Ne*R,ir=te*M-ee*R,is=j/(O+x.inverseInertia*nr*nr+A.inverseInertia*ir*ir),Ut=(1+w.restitution)*je*is;if(C*=is,je<m)rt.normalImpulse=0;else{var ae=rt.normalImpulse;rt.normalImpulse+=Ut,rt.normalImpulse>0&&(rt.normalImpulse=0),Ut=rt.normalImpulse-ae}if(ke<-g||ke>g)rt.tangentImpulse=0;else{var rr=rt.tangentImpulse;rt.tangentImpulse+=C,rt.tangentImpulse<-P&&(rt.tangentImpulse=-P),rt.tangentImpulse>P&&(rt.tangentImpulse=P),C=rt.tangentImpulse-rr}var _i=R*Ut+k*C,vi=M*Ut+B*C;x.isStatic||x.isSleeping||(x.positionPrev.x+=_i*x.inverseMass,x.positionPrev.y+=vi*x.inverseMass,x.anglePrev+=(Rt*vi-Ne*_i)*x.inverseInertia),A.isStatic||A.isSleeping||(A.positionPrev.x-=_i*A.inverseMass,A.positionPrev.y-=vi*A.inverseMass,A.anglePrev-=(te*vi-ee*_i)*A.inverseInertia)}}}}})()},function(e,i,r){var s={};e.exports=s;var o=r(9),a=r(0);(function(){s.create=function(l){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,h,c){var p=o.update,f=o.create,u=o.setActive,m=l.table,g=l.list,y=g.length,b=y,T=l.collisionStart,C=l.collisionEnd,P=l.collisionActive,S=h.length,I=0,w=0,_=0,x,A,R;for(R=0;R<S;R++)x=h[R],A=x.pair,A?(A.isActive&&(P[_++]=A),p(A,x,c)):(A=f(x,c),m[A.id]=A,T[I++]=A,g[b++]=A);for(b=0,y=g.length,R=0;R<y;R++)A=g[R],A.timeUpdated>=c?g[b++]=A:(u(A,!1,c),A.collision.bodyA.sleepCounter>0&&A.collision.bodyB.sleepCounter>0?g[b++]=A:(C[w++]=A,delete m[A.id]));g.length!==b&&(g.length=b),T.length!==I&&(T.length=I),C.length!==w&&(C.length=w),P.length!==_&&(P.length=_)},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(e,i,r){var s=e.exports=r(21);s.Axes=r(11),s.Bodies=r(12),s.Body=r(4),s.Bounds=r(1),s.Collision=r(8),s.Common=r(0),s.Composite=r(6),s.Composites=r(22),s.Constraint=r(10),s.Contact=r(16),s.Detector=r(13),s.Engine=r(17),s.Events=r(5),s.Grid=r(23),s.Mouse=r(14),s.MouseConstraint=r(24),s.Pair=r(9),s.Pairs=r(19),s.Plugin=r(15),s.Query=r(25),s.Render=r(26),s.Resolver=r(18),s.Runner=r(27),s.SAT=r(28),s.Sleeping=r(7),s.Svg=r(29),s.Vector=r(2),s.Vertices=r(3),s.World=r(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(e,i,r){var s={};e.exports=s;var o=r(15),a=r(0);(function(){s.name="matter-js",s.version="0.20.0",s.uses=[],s.used=[],s.use=function(){o.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,h){return l=l.replace(/^Matter./,""),a.chainPathBefore(s,l,h)},s.after=function(l,h){return l=l.replace(/^Matter./,""),a.chainPathAfter(s,l,h)}})()},function(e,i,r){var s={};e.exports=s;var o=r(6),a=r(10),l=r(0),h=r(4),c=r(12),p=l.deprecated;(function(){s.stack=function(f,u,m,g,y,b,T){for(var C=o.create({label:"Stack"}),P=f,S=u,I,w=0,_=0;_<g;_++){for(var x=0,A=0;A<m;A++){var R=T(P,S,A,_,I,w);if(R){var M=R.bounds.max.y-R.bounds.min.y,k=R.bounds.max.x-R.bounds.min.x;M>x&&(x=M),h.translate(R,{x:k*.5,y:M*.5}),P=R.bounds.max.x+y,o.addBody(C,R),I=R,w+=1}else P+=y}S+=x+b,P=f}return C},s.chain=function(f,u,m,g,y,b){for(var T=f.bodies,C=1;C<T.length;C++){var P=T[C-1],S=T[C],I=P.bounds.max.y-P.bounds.min.y,w=P.bounds.max.x-P.bounds.min.x,_=S.bounds.max.y-S.bounds.min.y,x=S.bounds.max.x-S.bounds.min.x,A={bodyA:P,pointA:{x:w*u,y:I*m},bodyB:S,pointB:{x:x*g,y:_*y}},R=l.extend(A,b);o.addConstraint(f,a.create(R))}return f.label+=" Chain",f},s.mesh=function(f,u,m,g,y){var b=f.bodies,T,C,P,S,I;for(T=0;T<m;T++){for(C=1;C<u;C++)P=b[C-1+T*u],S=b[C+T*u],o.addConstraint(f,a.create(l.extend({bodyA:P,bodyB:S},y)));if(T>0)for(C=0;C<u;C++)P=b[C+(T-1)*u],S=b[C+T*u],o.addConstraint(f,a.create(l.extend({bodyA:P,bodyB:S},y))),g&&C>0&&(I=b[C-1+(T-1)*u],o.addConstraint(f,a.create(l.extend({bodyA:I,bodyB:S},y)))),g&&C<u-1&&(I=b[C+1+(T-1)*u],o.addConstraint(f,a.create(l.extend({bodyA:I,bodyB:S},y))))}return f.label+=" Mesh",f},s.pyramid=function(f,u,m,g,y,b,T){return s.stack(f,u,m,g,y,b,function(C,P,S,I,w,_){var x=Math.min(g,Math.ceil(m/2)),A=w?w.bounds.max.x-w.bounds.min.x:0;if(!(I>x)){I=x-I;var R=I,M=m-1-I;if(!(S<R||S>M)){_===1&&h.translate(w,{x:(S+(m%2===1?1:-1))*A,y:0});var k=w?S*A:0;return T(f+k+S*y,P,S,I,w,_)}}})},s.newtonsCradle=function(f,u,m,g,y){for(var b=o.create({label:"Newtons Cradle"}),T=0;T<m;T++){var C=1.9,P=c.circle(f+T*(g*C),u+y,g,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=a.create({pointA:{x:f+T*(g*C),y:u},bodyB:P});o.addBody(b,P),o.addConstraint(b,S)}return b},p(s,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),s.car=function(f,u,m,g,y){var b=h.nextGroup(!0),T=20,C=-m*.5+T,P=m*.5-T,S=0,I=o.create({label:"Car"}),w=c.rectangle(f,u,m,g,{collisionFilter:{group:b},chamfer:{radius:g*.5},density:2e-4}),_=c.circle(f+C,u+S,y,{collisionFilter:{group:b},friction:.8}),x=c.circle(f+P,u+S,y,{collisionFilter:{group:b},friction:.8}),A=a.create({bodyB:w,pointB:{x:C,y:S},bodyA:_,stiffness:1,length:0}),R=a.create({bodyB:w,pointB:{x:P,y:S},bodyA:x,stiffness:1,length:0});return o.addBody(I,w),o.addBody(I,_),o.addBody(I,x),o.addConstraint(I,A),o.addConstraint(I,R),I},p(s,"car","Composites.car  moved to car example"),s.softBody=function(f,u,m,g,y,b,T,C,P,S){P=l.extend({inertia:1/0},P),S=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var I=s.stack(f,u,m,g,y,b,function(w,_){return c.circle(w,_,C,P)});return s.mesh(I,m,g,T,S),I.label="Soft Body",I},p(s,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(e,i,r){var s={};e.exports=s;var o=r(9),a=r(0),l=a.deprecated;(function(){s.create=function(h){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(c,h)},s.update=function(h,c,p,f){var u,m,g,y=p.world,b=h.buckets,T,C,P=!1;for(u=0;u<c.length;u++){var S=c[u];if(!(S.isSleeping&&!f)&&!(y.bounds&&(S.bounds.max.x<y.bounds.min.x||S.bounds.min.x>y.bounds.max.x||S.bounds.max.y<y.bounds.min.y||S.bounds.min.y>y.bounds.max.y))){var I=s._getRegion(h,S);if(!S.region||I.id!==S.region.id||f){(!S.region||f)&&(S.region=I);var w=s._regionUnion(I,S.region);for(m=w.startCol;m<=w.endCol;m++)for(g=w.startRow;g<=w.endRow;g++){C=s._getBucketId(m,g),T=b[C];var _=m>=I.startCol&&m<=I.endCol&&g>=I.startRow&&g<=I.endRow,x=m>=S.region.startCol&&m<=S.region.endCol&&g>=S.region.startRow&&g<=S.region.endRow;!_&&x&&x&&T&&s._bucketRemoveBody(h,T,S),(S.region===I||_&&!x||f)&&(T||(T=s._createBucket(b,C)),s._bucketAddBody(h,T,S))}S.region=I,P=!0}}}P&&(h.pairsList=s._createActivePairsList(h))},l(s,"update","Grid.update  replaced by Matter.Detector"),s.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},l(s,"clear","Grid.clear  replaced by Matter.Detector"),s._regionUnion=function(h,c){var p=Math.min(h.startCol,c.startCol),f=Math.max(h.endCol,c.endCol),u=Math.min(h.startRow,c.startRow),m=Math.max(h.endRow,c.endRow);return s._createRegion(p,f,u,m)},s._getRegion=function(h,c){var p=c.bounds,f=Math.floor(p.min.x/h.bucketWidth),u=Math.floor(p.max.x/h.bucketWidth),m=Math.floor(p.min.y/h.bucketHeight),g=Math.floor(p.max.y/h.bucketHeight);return s._createRegion(f,u,m,g)},s._createRegion=function(h,c,p,f){return{id:h+","+c+","+p+","+f,startCol:h,endCol:c,startRow:p,endRow:f}},s._getBucketId=function(h,c){return"C"+h+"R"+c},s._createBucket=function(h,c){var p=h[c]=[];return p},s._bucketAddBody=function(h,c,p){var f=h.pairs,u=o.id,m=c.length,g;for(g=0;g<m;g++){var y=c[g];if(!(p.id===y.id||p.isStatic&&y.isStatic)){var b=u(p,y),T=f[b];T?T[2]+=1:f[b]=[p,y,1]}}c.push(p)},s._bucketRemoveBody=function(h,c,p){var f=h.pairs,u=o.id,m;c.splice(a.indexOf(c,p),1);var g=c.length;for(m=0;m<g;m++){var y=f[u(p,c[m])];y&&(y[2]-=1)}},s._createActivePairsList=function(h){var c,p=h.pairs,f=a.keys(p),u=f.length,m=[],g;for(g=0;g<u;g++)c=p[f[g]],c[2]>0?m.push(c):delete p[f[g]];return m}})()},function(e,i,r){var s={};e.exports=s;var o=r(3),a=r(7),l=r(14),h=r(5),c=r(13),p=r(10),f=r(6),u=r(0),m=r(1);(function(){s.create=function(g,y){var b=(g?g.mouse:null)||(y?y.mouse:null);b||(g&&g.render&&g.render.canvas?b=l.create(g.render.canvas):y&&y.element?b=l.create(y.element):(b=l.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var T=p.create({label:"Mouse Constraint",pointA:b.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:b,element:null,body:null,constraint:T,collisionFilter:{category:1,mask:4294967295,group:0}},P=u.extend(C,y);return h.on(g,"beforeUpdate",function(){var S=f.allBodies(g.world);s.update(P,S),s._triggerEvents(P)}),P},s.update=function(g,y){var b=g.mouse,T=g.constraint,C=g.body;if(b.button===0){if(T.bodyB)a.set(T.bodyB,!1),T.pointA=b.position;else for(var P=0;P<y.length;P++)if(C=y[P],m.contains(C.bounds,b.position)&&c.canCollide(C.collisionFilter,g.collisionFilter))for(var S=C.parts.length>1?1:0;S<C.parts.length;S++){var I=C.parts[S];if(o.contains(I.vertices,b.position)){T.pointA=b.position,T.bodyB=g.body=C,T.pointB={x:b.position.x-C.position.x,y:b.position.y-C.position.y},T.angleB=C.angle,a.set(C,!1),h.trigger(g,"startdrag",{mouse:b,body:C});break}}}else T.bodyB=g.body=null,T.pointB=null,C&&h.trigger(g,"enddrag",{mouse:b,body:C})},s._triggerEvents=function(g){var y=g.mouse,b=y.sourceEvents;b.mousemove&&h.trigger(g,"mousemove",{mouse:y}),b.mousedown&&h.trigger(g,"mousedown",{mouse:y}),b.mouseup&&h.trigger(g,"mouseup",{mouse:y}),l.clearSourceEvents(y)}})()},function(e,i,r){var s={};e.exports=s;var o=r(2),a=r(8),l=r(1),h=r(12),c=r(3);(function(){s.collides=function(p,f){for(var u=[],m=f.length,g=p.bounds,y=a.collides,b=l.overlaps,T=0;T<m;T++){var C=f[T],P=C.parts.length,S=P===1?0:1;if(b(C.bounds,g))for(var I=S;I<P;I++){var w=C.parts[I];if(b(w.bounds,g)){var _=y(w,p);if(_){u.push(_);break}}}}return u},s.ray=function(p,f,u,m){m=m||1e-100;for(var g=o.angle(f,u),y=o.magnitude(o.sub(f,u)),b=(u.x+f.x)*.5,T=(u.y+f.y)*.5,C=h.rectangle(b,T,y,m,{angle:g}),P=s.collides(C,p),S=0;S<P.length;S+=1){var I=P[S];I.body=I.bodyB=I.bodyA}return P},s.region=function(p,f,u){for(var m=[],g=0;g<p.length;g++){var y=p[g],b=l.overlaps(y.bounds,f);(b&&!u||!b&&u)&&m.push(y)}return m},s.point=function(p,f){for(var u=[],m=0;m<p.length;m++){var g=p[m];if(l.contains(g.bounds,f))for(var y=g.parts.length===1?0:1;y<g.parts.length;y++){var b=g.parts[y];if(l.contains(b.bounds,f)&&c.contains(b.vertices,f)){u.push(g);break}}}return u}})()},function(e,i,r){var s={};e.exports=s;var o=r(4),a=r(0),l=r(6),h=r(1),c=r(5),p=r(2),f=r(14);(function(){var u,m;typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(a.now())},1e3/60)},m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(S){var I={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},w=a.extend(I,S);return w.canvas&&(w.canvas.width=w.options.width||w.canvas.width,w.canvas.height=w.options.height||w.canvas.height),w.mouse=S.mouse,w.engine=S.engine,w.canvas=w.canvas||b(w.options.width,w.options.height),w.context=w.canvas.getContext("2d"),w.textures={},w.bounds=w.bounds||{min:{x:0,y:0},max:{x:w.canvas.width,y:w.canvas.height}},w.controller=s,w.options.showBroadphase=!1,w.options.pixelRatio!==1&&s.setPixelRatio(w,w.options.pixelRatio),a.isElement(w.element)&&w.element.appendChild(w.canvas),w},s.run=function(S){(function I(w){S.frameRequestId=u(I),g(S,w),s.world(S,w),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&s.stats(S,S.context,w),(S.options.showPerformance||S.options.showDebug)&&s.performance(S,S.context,w),S.context.setTransform(1,0,0,1,0,0)})()},s.stop=function(S){m(S.frameRequestId)},s.setPixelRatio=function(S,I){var w=S.options,_=S.canvas;I==="auto"&&(I=T(_)),w.pixelRatio=I,_.setAttribute("data-pixel-ratio",I),_.width=w.width*I,_.height=w.height*I,_.style.width=w.width+"px",_.style.height=w.height+"px"},s.setSize=function(S,I,w){S.options.width=I,S.options.height=w,S.bounds.max.x=S.bounds.min.x+I,S.bounds.max.y=S.bounds.min.y+w,S.options.pixelRatio!==1?s.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=I,S.canvas.height=w)},s.lookAt=function(S,I,w,_){_=typeof _<"u"?_:!0,I=a.isArray(I)?I:[I],w=w||{x:0,y:0};for(var x={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},A=0;A<I.length;A+=1){var R=I[A],M=R.bounds?R.bounds.min:R.min||R.position||R,k=R.bounds?R.bounds.max:R.max||R.position||R;M&&k&&(M.x<x.min.x&&(x.min.x=M.x),k.x>x.max.x&&(x.max.x=k.x),M.y<x.min.y&&(x.min.y=M.y),k.y>x.max.y&&(x.max.y=k.y))}var B=x.max.x-x.min.x+2*w.x,O=x.max.y-x.min.y+2*w.y,U=S.canvas.height,z=S.canvas.width,Q=z/U,j=B/O,H=1,_t=1;j>Q?_t=j/Q:H=Q/j,S.options.hasBounds=!0,S.bounds.min.x=x.min.x,S.bounds.max.x=x.min.x+B*H,S.bounds.min.y=x.min.y,S.bounds.max.y=x.min.y+O*_t,_&&(S.bounds.min.x+=B*.5-B*H*.5,S.bounds.max.x+=B*.5-B*H*.5,S.bounds.min.y+=O*.5-O*_t*.5,S.bounds.max.y+=O*.5-O*_t*.5),S.bounds.min.x-=w.x,S.bounds.max.x-=w.x,S.bounds.min.y-=w.y,S.bounds.max.y-=w.y,S.mouse&&(f.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),f.setOffset(S.mouse,S.bounds.min))},s.startViewTransform=function(S){var I=S.bounds.max.x-S.bounds.min.x,w=S.bounds.max.y-S.bounds.min.y,_=I/S.options.width,x=w/S.options.height;S.context.setTransform(S.options.pixelRatio/_,0,0,S.options.pixelRatio/x,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},s.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},s.world=function(S,I){var w=a.now(),_=S.engine,x=_.world,A=S.canvas,R=S.context,M=S.options,k=S.timing,B=l.allBodies(x),O=l.allConstraints(x),U=M.wireframes?M.wireframeBackground:M.background,z=[],Q=[],j,H={timestamp:_.timing.timestamp};if(c.trigger(S,"beforeRender",H),S.currentBackground!==U&&P(S,U),R.globalCompositeOperation="source-in",R.fillStyle="transparent",R.fillRect(0,0,A.width,A.height),R.globalCompositeOperation="source-over",M.hasBounds){for(j=0;j<B.length;j++){var _t=B[j];h.overlaps(_t.bounds,S.bounds)&&z.push(_t)}for(j=0;j<O.length;j++){var J=O[j],$=J.bodyA,St=J.bodyB,It=J.pointA,rt=J.pointB;$&&(It=p.add($.position,J.pointA)),St&&(rt=p.add(St.position,J.pointB)),!(!It||!rt)&&(h.contains(S.bounds,It)||h.contains(S.bounds,rt))&&Q.push(J)}s.startViewTransform(S),S.mouse&&(f.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),f.setOffset(S.mouse,S.bounds.min))}else Q=O,z=B,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!M.wireframes||_.enableSleeping&&M.showSleeping?s.bodies(S,z,R):(M.showConvexHulls&&s.bodyConvexHulls(S,z,R),s.bodyWireframes(S,z,R)),M.showBounds&&s.bodyBounds(S,z,R),(M.showAxes||M.showAngleIndicator)&&s.bodyAxes(S,z,R),M.showPositions&&s.bodyPositions(S,z,R),M.showVelocity&&s.bodyVelocity(S,z,R),M.showIds&&s.bodyIds(S,z,R),M.showSeparations&&s.separations(S,_.pairs.list,R),M.showCollisions&&s.collisions(S,_.pairs.list,R),M.showVertexNumbers&&s.vertexNumbers(S,z,R),M.showMousePosition&&s.mousePosition(S,S.mouse,R),s.constraints(Q,R),M.hasBounds&&s.endViewTransform(S),c.trigger(S,"afterRender",H),k.lastElapsed=a.now()-w},s.stats=function(S,I,w){for(var _=S.engine,x=_.world,A=l.allBodies(x),R=0,M=55,k=44,B=0,O=0,U=0;U<A.length;U+=1)R+=A[U].parts.length;var z={Part:R,Body:A.length,Cons:l.allConstraints(x).length,Comp:l.allComposites(x).length,Pair:_.pairs.list.length};I.fillStyle="#0e0f19",I.fillRect(B,O,M*5.5,k),I.font="12px Arial",I.textBaseline="top",I.textAlign="right";for(var Q in z){var j=z[Q];I.fillStyle="#aaa",I.fillText(Q,B+M,O+8),I.fillStyle="#eee",I.fillText(j,B+M,O+26),B+=M}},s.performance=function(S,I){var w=S.engine,_=S.timing,x=_.deltaHistory,A=_.elapsedHistory,R=_.timestampElapsedHistory,M=_.engineDeltaHistory,k=_.engineUpdatesHistory,B=_.engineElapsedHistory,O=w.timing.lastUpdatesPerFrame,U=w.timing.lastDelta,z=y(x),Q=y(A),j=y(M),H=y(k),_t=y(B),J=y(R),$=J/z||0,St=Math.round(z/U),It=1e3/z||0,rt=4,Kt=12,Rt=60,Ne=34,te=10,ee=69;I.fillStyle="#0e0f19",I.fillRect(0,50,Kt*5+Rt*6+22,Ne),s.status(I,te,ee,Rt,rt,x.length,Math.round(It)+" fps",It/s._goodFps,function(kt){return x[kt]/z-1}),s.status(I,te+Kt+Rt,ee,Rt,rt,M.length,U.toFixed(2)+" dt",s._goodDelta/U,function(kt){return M[kt]/j-1}),s.status(I,te+(Kt+Rt)*2,ee,Rt,rt,k.length,O+" upf",Math.pow(a.clamp(H/St||1,0,1),4),function(kt){return k[kt]/H-1}),s.status(I,te+(Kt+Rt)*3,ee,Rt,rt,B.length,_t.toFixed(2)+" ut",1-O*_t/s._goodFps,function(kt){return B[kt]/_t-1}),s.status(I,te+(Kt+Rt)*4,ee,Rt,rt,A.length,Q.toFixed(2)+" rt",1-Q/s._goodFps,function(kt){return A[kt]/Q-1}),s.status(I,te+(Kt+Rt)*5,ee,Rt,rt,R.length,$.toFixed(2)+" x",$*$*$,function(kt){return(R[kt]/x[kt]/$||0)-1})},s.status=function(S,I,w,_,x,A,R,M,k){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(I,w+7,_,1),S.beginPath(),S.moveTo(I,w+7-x*a.clamp(.4*k(0),-2,2));for(var B=0;B<_;B+=1)S.lineTo(I+B,w+7-(B<A?x*a.clamp(.4*k(B),-2,2):0));S.stroke(),S.fillStyle="hsl("+a.clamp(25+95*M,0,120)+",100%,60%)",S.fillRect(I,w-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(R,I+_,w-5)},s.constraints=function(S,I){for(var w=I,_=0;_<S.length;_++){var x=S[_];if(!(!x.render.visible||!x.pointA||!x.pointB)){var A=x.bodyA,R=x.bodyB,M,k;if(A?M=p.add(A.position,x.pointA):M=x.pointA,x.render.type==="pin")w.beginPath(),w.arc(M.x,M.y,3,0,2*Math.PI),w.closePath();else{if(R?k=p.add(R.position,x.pointB):k=x.pointB,w.beginPath(),w.moveTo(M.x,M.y),x.render.type==="spring")for(var B=p.sub(k,M),O=p.perp(p.normalise(B)),U=Math.ceil(a.clamp(x.length/5,12,20)),z,Q=1;Q<U;Q+=1)z=Q%2===0?1:-1,w.lineTo(M.x+B.x*(Q/U)+O.x*z*4,M.y+B.y*(Q/U)+O.y*z*4);w.lineTo(k.x,k.y)}x.render.lineWidth&&(w.lineWidth=x.render.lineWidth,w.strokeStyle=x.render.strokeStyle,w.stroke()),x.render.anchors&&(w.fillStyle=x.render.strokeStyle,w.beginPath(),w.arc(M.x,M.y,3,0,2*Math.PI),w.arc(k.x,k.y,3,0,2*Math.PI),w.closePath(),w.fill())}}},s.bodies=function(S,I,w){var _=w;S.engine;var x=S.options,A=x.showInternalEdges||!x.wireframes,R,M,k,B;for(k=0;k<I.length;k++)if(R=I[k],!!R.render.visible){for(B=R.parts.length>1?1:0;B<R.parts.length;B++)if(M=R.parts[B],!!M.render.visible){if(x.showSleeping&&R.isSleeping?_.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(_.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!x.wireframes){var O=M.render.sprite,U=C(S,O.texture);_.translate(M.position.x,M.position.y),_.rotate(M.angle),_.drawImage(U,U.width*-O.xOffset*O.xScale,U.height*-O.yOffset*O.yScale,U.width*O.xScale,U.height*O.yScale),_.rotate(-M.angle),_.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)_.beginPath(),_.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{_.beginPath(),_.moveTo(M.vertices[0].x,M.vertices[0].y);for(var z=1;z<M.vertices.length;z++)!M.vertices[z-1].isInternal||A?_.lineTo(M.vertices[z].x,M.vertices[z].y):_.moveTo(M.vertices[z].x,M.vertices[z].y),M.vertices[z].isInternal&&!A&&_.moveTo(M.vertices[(z+1)%M.vertices.length].x,M.vertices[(z+1)%M.vertices.length].y);_.lineTo(M.vertices[0].x,M.vertices[0].y),_.closePath()}x.wireframes?(_.lineWidth=1,_.strokeStyle=S.options.wireframeStrokeStyle,_.stroke()):(_.fillStyle=M.render.fillStyle,M.render.lineWidth&&(_.lineWidth=M.render.lineWidth,_.strokeStyle=M.render.strokeStyle,_.stroke()),_.fill())}_.globalAlpha=1}}},s.bodyWireframes=function(S,I,w){var _=w,x=S.options.showInternalEdges,A,R,M,k,B;for(_.beginPath(),M=0;M<I.length;M++)if(A=I[M],!!A.render.visible)for(B=A.parts.length>1?1:0;B<A.parts.length;B++){for(R=A.parts[B],_.moveTo(R.vertices[0].x,R.vertices[0].y),k=1;k<R.vertices.length;k++)!R.vertices[k-1].isInternal||x?_.lineTo(R.vertices[k].x,R.vertices[k].y):_.moveTo(R.vertices[k].x,R.vertices[k].y),R.vertices[k].isInternal&&!x&&_.moveTo(R.vertices[(k+1)%R.vertices.length].x,R.vertices[(k+1)%R.vertices.length].y);_.lineTo(R.vertices[0].x,R.vertices[0].y)}_.lineWidth=1,_.strokeStyle=S.options.wireframeStrokeStyle,_.stroke()},s.bodyConvexHulls=function(S,I,w){var _=w,x,A,R;for(_.beginPath(),A=0;A<I.length;A++)if(x=I[A],!(!x.render.visible||x.parts.length===1)){for(_.moveTo(x.vertices[0].x,x.vertices[0].y),R=1;R<x.vertices.length;R++)_.lineTo(x.vertices[R].x,x.vertices[R].y);_.lineTo(x.vertices[0].x,x.vertices[0].y)}_.lineWidth=1,_.strokeStyle="rgba(255,255,255,0.2)",_.stroke()},s.vertexNumbers=function(S,I,w){var _=w,x,A,R;for(x=0;x<I.length;x++){var M=I[x].parts;for(R=M.length>1?1:0;R<M.length;R++){var k=M[R];for(A=0;A<k.vertices.length;A++)_.fillStyle="rgba(255,255,255,0.2)",_.fillText(x+"_"+A,k.position.x+(k.vertices[A].x-k.position.x)*.8,k.position.y+(k.vertices[A].y-k.position.y)*.8)}}},s.mousePosition=function(S,I,w){var _=w;_.fillStyle="rgba(255,255,255,0.8)",_.fillText(I.position.x+"  "+I.position.y,I.position.x+5,I.position.y-5)},s.bodyBounds=function(S,I,w){var _=w;S.engine;var x=S.options;_.beginPath();for(var A=0;A<I.length;A++){var R=I[A];if(R.render.visible)for(var M=I[A].parts,k=M.length>1?1:0;k<M.length;k++){var B=M[k];_.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}x.wireframes?_.strokeStyle="rgba(255,255,255,0.08)":_.strokeStyle="rgba(0,0,0,0.1)",_.lineWidth=1,_.stroke()},s.bodyAxes=function(S,I,w){var _=w;S.engine;var x=S.options,A,R,M,k;for(_.beginPath(),R=0;R<I.length;R++){var B=I[R],O=B.parts;if(B.render.visible)if(x.showAxes)for(M=O.length>1?1:0;M<O.length;M++)for(A=O[M],k=0;k<A.axes.length;k++){var U=A.axes[k];_.moveTo(A.position.x,A.position.y),_.lineTo(A.position.x+U.x*20,A.position.y+U.y*20)}else for(M=O.length>1?1:0;M<O.length;M++)for(A=O[M],k=0;k<A.axes.length;k++)_.moveTo(A.position.x,A.position.y),_.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}x.wireframes?(_.strokeStyle="indianred",_.lineWidth=1):(_.strokeStyle="rgba(255, 255, 255, 0.4)",_.globalCompositeOperation="overlay",_.lineWidth=2),_.stroke(),_.globalCompositeOperation="source-over"},s.bodyPositions=function(S,I,w){var _=w;S.engine;var x=S.options,A,R,M,k;for(_.beginPath(),M=0;M<I.length;M++)if(A=I[M],!!A.render.visible)for(k=0;k<A.parts.length;k++)R=A.parts[k],_.arc(R.position.x,R.position.y,3,0,2*Math.PI,!1),_.closePath();for(x.wireframes?_.fillStyle="indianred":_.fillStyle="rgba(0,0,0,0.5)",_.fill(),_.beginPath(),M=0;M<I.length;M++)A=I[M],A.render.visible&&(_.arc(A.positionPrev.x,A.positionPrev.y,2,0,2*Math.PI,!1),_.closePath());_.fillStyle="rgba(255,165,0,0.8)",_.fill()},s.bodyVelocity=function(S,I,w){var _=w;_.beginPath();for(var x=0;x<I.length;x++){var A=I[x];if(A.render.visible){var R=o.getVelocity(A);_.moveTo(A.position.x,A.position.y),_.lineTo(A.position.x+R.x,A.position.y+R.y)}}_.lineWidth=3,_.strokeStyle="cornflowerblue",_.stroke()},s.bodyIds=function(S,I,w){var _=w,x,A;for(x=0;x<I.length;x++)if(I[x].render.visible){var R=I[x].parts;for(A=R.length>1?1:0;A<R.length;A++){var M=R[A];_.font="12px Arial",_.fillStyle="rgba(255,255,255,0.5)",_.fillText(M.id,M.position.x+10,M.position.y-10)}}},s.collisions=function(S,I,w){var _=w,x=S.options,A,R,M,k;for(_.beginPath(),M=0;M<I.length;M++)if(A=I[M],!!A.isActive)for(R=A.collision,k=0;k<A.contactCount;k++){var B=A.contacts[k],O=B.vertex;_.rect(O.x-1.5,O.y-1.5,3.5,3.5)}for(x.wireframes?_.fillStyle="rgba(255,255,255,0.7)":_.fillStyle="orange",_.fill(),_.beginPath(),M=0;M<I.length;M++)if(A=I[M],!!A.isActive&&(R=A.collision,A.contactCount>0)){var U=A.contacts[0].vertex.x,z=A.contacts[0].vertex.y;A.contactCount===2&&(U=(A.contacts[0].vertex.x+A.contacts[1].vertex.x)/2,z=(A.contacts[0].vertex.y+A.contacts[1].vertex.y)/2),R.bodyB===R.supports[0].body||R.bodyA.isStatic===!0?_.moveTo(U-R.normal.x*8,z-R.normal.y*8):_.moveTo(U+R.normal.x*8,z+R.normal.y*8),_.lineTo(U,z)}x.wireframes?_.strokeStyle="rgba(255,165,0,0.7)":_.strokeStyle="orange",_.lineWidth=1,_.stroke()},s.separations=function(S,I,w){var _=w,x=S.options,A,R,M,k,B;for(_.beginPath(),B=0;B<I.length;B++)if(A=I[B],!!A.isActive){R=A.collision,M=R.bodyA,k=R.bodyB;var O=1;!k.isStatic&&!M.isStatic&&(O=.5),k.isStatic&&(O=0),_.moveTo(k.position.x,k.position.y),_.lineTo(k.position.x-R.penetration.x*O,k.position.y-R.penetration.y*O),O=1,!k.isStatic&&!M.isStatic&&(O=.5),M.isStatic&&(O=0),_.moveTo(M.position.x,M.position.y),_.lineTo(M.position.x+R.penetration.x*O,M.position.y+R.penetration.y*O)}x.wireframes?_.strokeStyle="rgba(255,165,0,0.5)":_.strokeStyle="orange",_.stroke()},s.inspector=function(S,I){S.engine;var w=S.selected,_=S.render,x=_.options,A;if(x.hasBounds){var R=_.bounds.max.x-_.bounds.min.x,M=_.bounds.max.y-_.bounds.min.y,k=R/_.options.width,B=M/_.options.height;I.scale(1/k,1/B),I.translate(-_.bounds.min.x,-_.bounds.min.y)}for(var O=0;O<w.length;O++){var U=w[O].data;switch(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.9)",I.setLineDash([1,2]),U.type){case"body":A=U.bounds,I.beginPath(),I.rect(Math.floor(A.min.x-3),Math.floor(A.min.y-3),Math.floor(A.max.x-A.min.x+6),Math.floor(A.max.y-A.min.y+6)),I.closePath(),I.stroke();break;case"constraint":var z=U.pointA;U.bodyA&&(z=U.pointB),I.beginPath(),I.arc(z.x,z.y,10,0,2*Math.PI),I.closePath(),I.stroke();break}I.setLineDash([]),I.translate(-.5,-.5)}S.selectStart!==null&&(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.6)",I.fillStyle="rgba(255,165,0,0.1)",A=S.selectBounds,I.beginPath(),I.rect(Math.floor(A.min.x),Math.floor(A.min.y),Math.floor(A.max.x-A.min.x),Math.floor(A.max.y-A.min.y)),I.closePath(),I.stroke(),I.fill(),I.translate(-.5,-.5)),x.hasBounds&&I.setTransform(1,0,0,1,0,0)};var g=function(S,I){var w=S.engine,_=S.timing,x=_.historySize,A=w.timing.timestamp;_.delta=I-_.lastTime||s._goodDelta,_.lastTime=I,_.timestampElapsed=A-_.lastTimestamp||0,_.lastTimestamp=A,_.deltaHistory.unshift(_.delta),_.deltaHistory.length=Math.min(_.deltaHistory.length,x),_.engineDeltaHistory.unshift(w.timing.lastDelta),_.engineDeltaHistory.length=Math.min(_.engineDeltaHistory.length,x),_.timestampElapsedHistory.unshift(_.timestampElapsed),_.timestampElapsedHistory.length=Math.min(_.timestampElapsedHistory.length,x),_.engineUpdatesHistory.unshift(w.timing.lastUpdatesPerFrame),_.engineUpdatesHistory.length=Math.min(_.engineUpdatesHistory.length,x),_.engineElapsedHistory.unshift(w.timing.lastElapsed),_.engineElapsedHistory.length=Math.min(_.engineElapsedHistory.length,x),_.elapsedHistory.unshift(_.lastElapsed),_.elapsedHistory.length=Math.min(_.elapsedHistory.length,x)},y=function(S){for(var I=0,w=0;w<S.length;w+=1)I+=S[w];return I/S.length||0},b=function(S,I){var w=document.createElement("canvas");return w.width=S,w.height=I,w.oncontextmenu=function(){return!1},w.onselectstart=function(){return!1},w},T=function(S){var I=S.getContext("2d"),w=window.devicePixelRatio||1,_=I.webkitBackingStorePixelRatio||I.mozBackingStorePixelRatio||I.msBackingStorePixelRatio||I.oBackingStorePixelRatio||I.backingStorePixelRatio||1;return w/_},C=function(S,I){var w=S.textures[I];return w||(w=S.textures[I]=new Image,w.src=I,w)},P=function(S,I){var w=I;/(jpg|gif|png)$/.test(I)&&(w="url("+I+")"),S.canvas.style.background=w,S.canvas.style.backgroundSize="contain",S.currentBackground=I}})()},function(e,i,r){var s={};e.exports=s;var o=r(5),a=r(17),l=r(0);(function(){s._maxFrameDelta=1e3/15,s._frameDeltaFallback=1e3/60,s._timeBufferMargin=1.5,s._elapsedNextEstimate=1,s._smoothingLowerBound=.1,s._smoothingUpperBound=.9,s.create=function(c){var p={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=l.extend(p,c);return f.fps=0,f},s.run=function(c,p){return c.timeBuffer=s._frameDeltaFallback,function f(u){c.frameRequestId=s._onNextFrame(c,f),u&&c.enabled&&s.tick(c,p,u)}(),c},s.tick=function(c,p,f){var u=l.now(),m=c.delta,g=0,y=f-c.timeLastTick;if((!y||!c.timeLastTick||y>Math.max(s._maxFrameDelta,c.maxFrameTime))&&(y=c.frameDelta||s._frameDeltaFallback),c.frameDeltaSmoothing){c.frameDeltaHistory.push(y),c.frameDeltaHistory=c.frameDeltaHistory.slice(-c.frameDeltaHistorySize);var b=c.frameDeltaHistory.slice(0).sort(),T=c.frameDeltaHistory.slice(b.length*s._smoothingLowerBound,b.length*s._smoothingUpperBound),C=h(T);y=C||y}c.frameDeltaSnapping&&(y=1e3/Math.round(1e3/y)),c.frameDelta=y,c.timeLastTick=f,c.timeBuffer+=c.frameDelta,c.timeBuffer=l.clamp(c.timeBuffer,0,c.frameDelta+m*s._timeBufferMargin),c.lastUpdatesDeferred=0;var P=c.maxUpdates||Math.ceil(c.maxFrameTime/m),S={timestamp:p.timing.timestamp};o.trigger(c,"beforeTick",S),o.trigger(c,"tick",S);for(var I=l.now();m>0&&c.timeBuffer>=m*s._timeBufferMargin;){o.trigger(c,"beforeUpdate",S),a.update(p,m),o.trigger(c,"afterUpdate",S),c.timeBuffer-=m,g+=1;var w=l.now()-u,_=l.now()-I,x=w+s._elapsedNextEstimate*_/g;if(g>=P||x>c.maxFrameTime){c.lastUpdatesDeferred=Math.round(Math.max(0,c.timeBuffer/m-s._timeBufferMargin));break}}p.timing.lastUpdatesPerFrame=g,o.trigger(c,"afterTick",S),c.frameDeltaHistory.length>=100&&(c.lastUpdatesDeferred&&Math.round(c.frameDelta/m)>P?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):c.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof c.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(c.deltaMin||c.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),c.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},s.stop=function(c){s._cancelNextFrame(c)},s._onNextFrame=function(c,p){if(typeof window<"u"&&window.requestAnimationFrame)c.frameRequestId=window.requestAnimationFrame(p);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return c.frameRequestId},s._cancelNextFrame=function(c){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(c.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(c){for(var p=0,f=c.length,u=0;u<f;u+=1)p+=c[u];return p/f||0}})()},function(e,i,r){var s={};e.exports=s;var o=r(8),a=r(0),l=a.deprecated;(function(){s.collides=function(h,c){return o.collides(h,c)},l(s,"collides","SAT.collides  replaced by Collision.collides")})()},function(e,i,r){var s={};e.exports=s,r(1);var o=r(0);(function(){s.pathToVertices=function(a,l){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,c,p,f,u,m,g,y,b,T,C=[],P,S,I=0,w=0,_=0;l=l||15;var x=function(R,M,k){var B=k%2===1&&k>1;if(!b||R!=b.x||M!=b.y){b&&B?(P=b.x,S=b.y):(P=0,S=0);var O={x:P+R,y:S+M};(B||!b)&&(b=O),C.push(O),w=P+R,_=S+M}},A=function(R){var M=R.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":w=R.x,_=R.y;break;case"H":w=R.x;break;case"V":_=R.y;break}x(w,_,R.pathSegType)}};for(s._svgPathToAbsolute(a),p=a.getTotalLength(),m=[],h=0;h<a.pathSegList.numberOfItems;h+=1)m.push(a.pathSegList.getItem(h));for(g=m.concat();I<p;){if(T=a.getPathSegAtLength(I),u=m[T],u!=y){for(;g.length&&g[0]!=u;)A(g.shift());y=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=a.getPointAtLength(I),x(f.x,f.y,0);break}I+=l}for(h=0,c=g.length;h<c;++h)A(g[h]);return C},s._svgPathToAbsolute=function(a){for(var l,h,c,p,f,u,m=a.pathSegList,g=0,y=0,b=m.numberOfItems,T=0;T<b;++T){var C=m.getItem(T),P=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(P))"x"in C&&(g=C.x),"y"in C&&(y=C.y);else switch("x1"in C&&(c=g+C.x1),"x2"in C&&(f=g+C.x2),"y1"in C&&(p=y+C.y1),"y2"in C&&(u=y+C.y2),"x"in C&&(g+=C.x),"y"in C&&(y+=C.y),P){case"m":m.replaceItem(a.createSVGPathSegMovetoAbs(g,y),T);break;case"l":m.replaceItem(a.createSVGPathSegLinetoAbs(g,y),T);break;case"h":m.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(g),T);break;case"v":m.replaceItem(a.createSVGPathSegLinetoVerticalAbs(y),T);break;case"c":m.replaceItem(a.createSVGPathSegCurvetoCubicAbs(g,y,c,p,f,u),T);break;case"s":m.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(g,y,f,u),T);break;case"q":m.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(g,y,c,p),T);break;case"t":m.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(g,y),T);break;case"a":m.replaceItem(a.createSVGPathSegArcAbs(g,y,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),T);break;case"z":case"Z":g=l,y=h;break}(P=="M"||P=="m")&&(l=g,h=y)}}})()},function(e,i,r){var s={};e.exports=s;var o=r(6);r(0),function(){s.create=o.create,s.add=o.add,s.remove=o.remove,s.clear=o.clear,s.addComposite=o.addComposite,s.addBody=o.addBody,s.addConstraint=o.addConstraint}()}])})})(__);var cn=__.exports;let Fi;const xr=new Map,da=new Map,Fu=new Map;let Zo=0;const cT=()=>{Fi=cn.Engine.create(),cn.Events.on(Fi,"collisionStart",n=>{n.pairs.forEach(t=>{var e,i;const{bodyA:r,bodyB:s}=t,o=xr.get(r.label),a=xr.get(s.label);if(!o||!a)return;const l=[o,a].find(c=>c.surface),h=[o,a].find(c=>!c.surface);h&&(l?da.set(h.target.matterBody.label,Math.floor(Rf(l).y1)):((e=o.onCollision)==null||e.call(o,a.target),(i=a.onCollision)==null||i.call(a,o.target)))})}),cn.Events.on(Fi,"collisionEnd",n=>{n.pairs.forEach(t=>{const{bodyA:e,bodyB:i}=t,r=xr.get(e.label),s=xr.get(i.label);if(!r||!s)return;const o=[r,s].find(l=>l.surface),a=[r,s].find(l=>!l.surface);a&&o&&da.delete(a.target.matterBody.label)})}),cn.Events.on(Fi,"afterUpdate",()=>{Fu.forEach(n=>{var t;if(!n.target.matterBody)return;const e=Rf(n),i=(da.get(n.target.matterBody.label)??-1/0)>=Math.floor(e.y2);(t=n.onUpdatePosition)==null||t.call(n,e.x1,e.y1,i)})})},uT=n=>{cn.Engine.update(Fi,n)},fl=n=>{if(n.rectangle)n.target.matterBody=cn.Bodies.rectangle(n.rectangle.x+n.rectangle.width/2,n.rectangle.y+n.rectangle.height/2,n.rectangle.width,n.rectangle.height,If(n));else if(n.circle)n.target.matterBody=cn.Bodies.circle(n.circle.x,n.circle.y,n.circle.radius,If(n));else throw new Error("No body specification provided");xr.set(n.target.matterBody.label,n),n.onUpdatePosition&&Fu.set(n.target.matterBody.label,n),cn.Composite.add(Fi.world,n.target.matterBody),n.movement&&Lu(n.target,n.movement)},dT=n=>{n.matterBody&&(cn.Composite.remove(Fi.world,n.matterBody),xr.delete(n.matterBody.label),da.delete(n.matterBody.label),Fu.delete(n.matterBody.label))},Lu=(n,t)=>{n.matterBody&&t.linearMovement&&cn.Body.setVelocity(n.matterBody,t.linearMovement.velocity)},Pf=(n,t,e)=>{n.matterBody&&cn.Body.setPosition(n.matterBody,{x:n.matterBody.position.x+t,y:n.matterBody.position.y+e})},If=n=>{var t;return Zo++,n.surface?{isStatic:!0,label:Zo.toString(),inertia:1/0,inverseInertia:0,restitution:0}:(t=n.movement)!=null&&t.linearMovement?{friction:0,frictionAir:0,frictionStatic:0,inertia:1/0,inverseInertia:0,restitution:0,label:Zo.toString()}:{isStatic:!0,friction:0,frictionAir:0,frictionStatic:0,restitution:0,isSensor:!0,label:Zo.toString()}},Rf=n=>n.target.matterBody?n.rectangle?{x1:n.target.matterBody.position.x-n.rectangle.width/2,y1:n.target.matterBody.position.y-n.rectangle.height/2,x2:n.target.matterBody.position.x+n.rectangle.width/2,y2:n.target.matterBody.position.y+n.rectangle.height/2}:n.circle?{x1:n.target.matterBody.position.x-n.circle.radius,y1:n.target.matterBody.position.y-n.circle.radius,x2:n.target.matterBody.position.x+n.circle.radius,y2:n.target.matterBody.position.y+n.circle.radius}:{x1:0,y1:0,x2:0,y2:0}:{x1:0,y1:0,x2:0,y2:0};class ml{constructor(t,e){Pe(this,"_props"),Pe(this,"_object"),Pe(this,"_parent",null),Pe(this,"_bindings",[]),Pe(this,"_animations",[]),this._props=e,this._object=t,this.hitArea=this.props.hitArea,this._createEvents(),this._setOrientationProperties(),this._positionToScreen(),(this.props.animations??[]).forEach(i=>this.animate(i))}_registerToSignal(t,e){this._bindings.push(Es(t,e.bind(this)))}_unregisterFromSignal(t){for(let e=0;e<this._bindings.length;e++)this._bindings[e].name===t&&(Pa(t,this._bindings[e].binding),this._bindings.splice(e,1),e--)}get props(){return this._props}get object(){return this._object}get x(){return this.object.x}set x(t){this.object.x=t}get y(){return this.object.y}set y(t){this.object.y=t}get position(){return this.object.position}set position(t){this.object.position=t}get globalPosition(){return this.object.toGlobal({x:0,y:0})}set scale(t){this.object.scale=t}get scale(){return this.object.scale}get scaleX(){return this.object.scale.x}set scaleX(t){this.object.scale.x=t}get scaleY(){return this.object.scale.y}set scaleY(t){this.object.scale.y=t}get width(){return this.object.width}set width(t){this.object.width=t}get height(){return this.object.height}set height(t){this.object.height=t}get alpha(){return this.object.alpha}set alpha(t){this.object.alpha=t}get visible(){return this.object.visible}set visible(t){this.object.visible=t}get label(){return this.object.label}get parent(){return this._parent}set parent(t){this._parent=t}get interactive(){return this.object.interactive??!1}set interactive(t){this.object.interactive=t}get rotation(){return this.object.rotation}set rotation(t){this.object.rotation=t}get tint(){return this.object.tint}set tint(t){this.object.tint=t}get zIndex(){return this.object.zIndex}set zIndex(t){this.object.zIndex=t}set hitArea(t){t!=null&&t.circle?this.object.hitArea=new ol(t.circle.x,t.circle.y,t.circle.radius):t!=null&&t.roundedRectangle?this.object.hitArea=new al(t.roundedRectangle.x,t.roundedRectangle.y,t.roundedRectangle.width,t.roundedRectangle.height,t.roundedRectangle.borderRadius):t!=null&&t.rectangle?this.object.hitArea=new Gt(t.rectangle.x,t.rectangle.y,t.rectangle.width,t.rectangle.height):t!=null&&t.polygon?this.object.hitArea=new br(t.polygon.points):this.object.hitArea=null}animate(t){return this._createAnimation(this,t)}getAnimation(t){return this._animations.find(e=>e.name===t)}stopAnimations(){this._animations.forEach(t=>t.stop()),this._animations=[]}finishAnimations(){this._animations.forEach(t=>t.finish())}delay(t){return this._createAnimation({x:0},{from:{x:0},to:{x:1},duration:t})}destroy(){if(this.parent){this.parent.removeComponent(this);return}dT(this),this._bindings.forEach(({name:t,binding:e})=>Pa(t,e)),this._bindings=[],this.stopAnimations(),this.parent=null,this.object.destroy()}_positionToScreen(){var t,e,i,r;this.props.horizontalAlignment==="center"?this.x=st.screen.width/2+(((t=this.props.margin)==null?void 0:t.x)??0):this.props.horizontalAlignment==="right"&&(this.x=st.screen.width+(((e=this.props.margin)==null?void 0:e.x)??0)),this.props.verticalAlignment==="center"?this.y=st.screen.height/2+(((i=this.props.margin)==null?void 0:i.y)??0):this.props.verticalAlignment==="bottom"&&(this.y=st.screen.height+(((r=this.props.margin)==null?void 0:r.y)??0))}_setOrientationProperties(){if(!this.props.landscape&&!this.props.portrait)return;const t=this.props[st.screen.orientation];for(const e in t)this[e]=t[e]}async _createAnimation(t,e){const i=new Kr(e);this._animations.push(i),await i.start(t);const r=this._animations.indexOf(i);this._animations.splice(r,1)}_createEvents(){var t,e,i;const r=[this.props.horizontalAlignment||this.props.verticalAlignment?this._positionToScreen.bind(this):null,this.props.onResize,(t=this._onResize)==null?void 0:t.bind(this)].filter(Boolean);r.length>0&&this._registerToSignal(W.signals.onResize,()=>{r.forEach(a=>a(this))});const s=[this.props.landscape||this.props.portrait?this._setOrientationProperties.bind(this):null,this.props.onOrientationChange,(e=this._onOrientationChange)==null?void 0:e.bind(this)].filter(Boolean);s.length>0&&this._registerToSignal(W.signals.onOrientationChange,()=>{s.forEach(a=>a(this))});const o=[this.props.onTick,(i=this._onTick)==null?void 0:i.bind(this)].filter(Boolean);o.length>0&&this._registerToSignal(W.signals.onTick,()=>{o.forEach(a=>a(this))}),(this._onClick||this.props.onClick)&&this.object.on("pointerdown",a=>{var l,h,c;a.stopImmediatePropagation(),(h=(l=this.props).onClick)==null||h.call(l,this),(c=this._onClick)==null||c.call(this)}),(this._onPointerUp||this.props.onPointerUp)&&this.object.on("pointerup",a=>{var l,h,c;a.stopImmediatePropagation(),(h=(l=this.props).onPointerUp)==null||h.call(l,this),(c=this._onPointerUp)==null||c.call(this)}),(this._onPointerEnter||this.props.onPointerEnter)&&this.object.on("pointerenter",a=>{var l,h,c;a.stopImmediatePropagation(),(h=(l=this.props).onPointerEnter)==null||h.call(l,this),(c=this._onPointerEnter)==null||c.call(this)}),(this._onPointerOut||this.props.onPointerOut)&&this.object.on("pointerout",a=>{var l,h,c;a.stopImmediatePropagation(),(h=(l=this.props).onPointerOut)==null||h.call(l,this),(c=this._onPointerOut)==null||c.call(this)})}}let zs;const Fn=new Map,pT=()=>{zs=bn.get("audio/sounds.mp3");const n=bn.get("audio/sounds.json");zs.muted=st.muted,zs.addSprites(n)},Ji=async(n,t={})=>{const{loop:e=!1,volume:i=1}=t,r=await zs.play({sprite:n,loop:e,volume:i,complete:()=>Fn.delete(n)});Fn.set(n,r)},Nu=async(n,t)=>{const{fromVolume:e=.1,toVolume:i=1,fadeDuration:r,loop:s=!1}=t;await Ji(n,{loop:s,volume:i}),await new Kr({duration:r,from:{volume:e},to:{volume:i}}).start(Fn.get(n))},fT=n=>{var t,e;(t=Fn.get(n))==null||t.stop(),(e=Fn.get(n))==null||e.destroy(),Fn.delete(n)},Uu=async(n,t)=>{const e=Fn.get(n);if(!e)return;const{fadeDuration:i}=t;await new Kr({duration:i,from:{volume:e.volume},to:{volume:0}}).start(e),fT(n)},mT=n=>{zs.muted=n},gT=()=>{for(const[n,t]of Fn)t.paused=!0},yT=()=>{for(const[n,t]of Fn)t.paused=!1},gl=n=>({label:n.label,position:n.position,anchor:n.anchor,scale:n.scale,rotation:n.rotation,width:n.width,height:n.height,alpha:n.alpha,interactive:n.interactive,cursor:n.cursor,visible:n.visible,tint:n.tint,zIndex:n.zIndex});let v_;const kf=new Map,_T=n=>{v_=n},vT=n=>{let t;if(n.rectangle)t=new Jn().rect(n.rectangle.x,n.rectangle.y,n.rectangle.width,n.rectangle.height);else if(n.roundedRectangle)t=new Jn().roundRect(n.roundedRectangle.x,n.roundedRectangle.y,n.roundedRectangle.width,n.roundedRectangle.height,n.roundedRectangle.borderRadius);else if(n.circle)t=new Jn().circle(n.circle.x,n.circle.y,n.circle.radius);else if(n.polygon)t=new Jn().poly(n.polygon.points);else throw new Error("Invalid shape type");return t=t.fill(n.fillColor),n.strokeColor!=null&&(t=t.stroke({color:n.strokeColor,width:n.strokeWidth??0})),t},Oa=n=>{const t=JSON.stringify(n);let e=kf.get(t);if(e)return e;if(typeof n=="string")return ot.from(n);const i=vT(n);return e=hl.create({width:i.width,height:i.height}),v_.render({container:i,target:e}),kf.set(t,e),e};class Le extends ml{constructor(t){super(new qi({...gl(t),texture:Oa(t.resource)}),t)}get anchor(){return this.object.anchor}set anchor(t){this.object.anchor=t}get originalWidth(){return this.object.texture.width}get originalHeight(){return this.object.texture.height}set texture(t){this.object.texture=Oa(t)}}class yl extends Le{constructor(t){super(t),Pe(this,"_pointerOver",!1),Pe(this,"_enabled",!0)}get props(){return super.props}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(this._enabled=t,this._setCurrentTexture())}get pointerOver(){return this._pointerOver}_onPointerEnter(){this._pointerOver=!0,this._setCurrentTexture()}_onPointerOut(){this._pointerOver=!1,this._setCurrentTexture()}async _onClick(){Ji(W.sounds.click),this.texture=this.enabled?this.props.resource:this.props.disabledResource,await this.delay(.1),this._setCurrentTexture()}_setCurrentTexture(){this.enabled?this.pointerOver?this.texture=this.props.hoverResource:this.texture=this.props.resource:this.texture=this.props.disabledResource}}class Je extends ml{constructor(t){super(new Te({...gl(t),sortableChildren:t.sortableChildren}),t),Pe(this,"_components",[]),this.addComponents(t.components??[])}get components(){return this._components}get sortableChildren(){return this.object.sortableChildren}set sortableChildren(t){this.object.sortableChildren=t}addComponent(t){return this.components.push(t),this.object.addChild(t.object),t.parent=this,t}addComponents(t){t.forEach(e=>this.addComponent(e))}getComponent(t){return this.components.find(e=>e.label===t)}removeComponent(t){const e=this.components.indexOf(t);e>=0&&(this.components[e].parent=null,this.components[e].destroy(),this.components.splice(e,1))}removeComponents(){this.components.forEach(t=>{t.parent=null,t.destroy()}),this._components=[]}destroy(){this.removeComponents(),super.destroy()}_positionToScreen(){var t,e,i,r;this.props.horizontalAlignment==="center"?this.x=(st.screen.width-(this.props.width??0))/2+(((t=this.props.margin)==null?void 0:t.x)??0):this.props.horizontalAlignment==="right"&&(this.x=st.screen.width-(this.props.width??0)+(((e=this.props.margin)==null?void 0:e.x)??0)),this.props.verticalAlignment==="center"?this.y=(st.screen.height-(this.props.height??0))/2+(((i=this.props.margin)==null?void 0:i.y)??0):this.props.verticalAlignment==="bottom"&&(this.y=st.screen.height-(this.props.height??0)+(((r=this.props.margin)==null?void 0:r.y)??0))}}class x_ extends yl{constructor(t){super(t)}get props(){return super.props}async _onClick(){super._onClick(),window.location.href=this.props.url}}class so extends ml{constructor(t){super(new qw({...gl(t),texture:Oa(t.resource),anchor:typeof t.anchor=="number"?{x:t.anchor,y:t.anchor}:t.anchor}),t)}get anchor(){return this.object.anchor}set anchor(t){this.object.anchor=t}get originalWidth(){return this.object.texture.width}get originalHeight(){return this.object.texture.height}get tileScale(){return this.object.tileScale}set tileScale(t){this.object.tileScale=t}get tilePosition(){return this.object.tilePosition}set tilePosition(t){this.object.tilePosition=t}set texture(t){this.object.texture=Oa(t)}}class b_ extends so{constructor(t){super(t),this._onResize()}_onResize(){this.width=st.screen.width,this.height=st.screen.height;const t=st.screen.height/this.originalHeight;this.tileScale={x:t,y:t}}}class w_ extends b_{_onTick(){this.tilePosition.x--}}class Jt extends ml{constructor(t){const e={...gl(t),text:t.text,style:{fontFamily:t.fontFamily,fontSize:t.fontSize,fill:t.textColor,lineHeight:t.lineHeight,wordWrap:t.wordWrap,wordWrapWidth:t.wordWrapWidth,align:t.align,fontWeight:t.fontWeight??"normal",fontStyle:t.fontStyle??"normal",letterSpacing:t.letterSpacing??0,stroke:t.strokeColor&&{color:t.strokeColor,width:t.strokeWidth}}};super(t.bitmap?new Yw(e):new Ww(e),t)}get anchor(){return this.object.anchor}set anchor(t){this.object.anchor=t}get fontSize(){return this.object.style.fontSize}set fontSize(t){this.object.style.fontSize=t}get wordWrapWidth(){return this.object.style.wordWrapWidth}set wordWrapWidth(t){this.object.style.wordWrapWidth=t}get fontWeight(){return this.object.style.fontWeight}set fontWeight(t){this.object.style.fontWeight=t}get fontStyle(){return this.object.style.fontStyle}set fontStyle(t){this.object.style.fontStyle=t}get align(){return this.object.style.align}set align(t){this.object.style.align=t}get text(){return this.object.text}set text(t){this.object.text=t}}class xT extends yl{constructor(t){super(t),Pe(this,"_originalProps"),this._originalProps=structuredClone(t),this._setResources()}get props(){return super.props}async _onClick(){localStorage.setItem("muted",st.muted?"false":"true"),st.muted=!st.muted,mT(st.muted),this._setResources(),super._onClick()}_setResources(){st.muted?(this.props.resource=this._originalProps.mutedResource,this.props.hoverResource=this._originalProps.mutedHoverResource,this.props.disabledResource=this._originalProps.mutedDisabledResource):(this.props.resource=this._originalProps.resource,this.props.hoverResource=this._originalProps.hoverResource,this.props.disabledResource=this._originalProps.disabledResource),this._setCurrentTexture()}}class bT extends Je{constructor(t){super({...t,interactive:!0,cursor:"text"}),Pe(this,"_input",null),Pe(this,"_inputEventAbort",null),Pe(this,"_text","");const{height:e}=this.addComponent(new Le({label:"bg",resource:this.props.background})),i=this.addComponent(new Jt({label:"text",position:{x:this.props.padding??0,y:e/2},anchor:{x:0,y:.5},text:this.props.text??"",fontFamily:this.props.fontFamily,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight,textColor:this.props.textColor,strokeColor:this.props.strokeColor,strokeWidth:this.props.strokeWidth,letterSpacing:this.props.letterSpacing}));this.addComponent(new Le({label:"caret",position:{x:i.x+i.width+2,y:e/2},anchor:{x:0,y:.5},visible:!1,resource:{rectangle:{x:0,y:0,width:2,height:e-(this.props.padding??0)*2},fillColor:this.props.textColor},animations:[{from:{alpha:1},to:{alpha:0},duration:.4,repeat:-1,revert:!0}]})),this._text=this.props.text??""}get props(){return super.props}get text(){return this._text}set text(t){var e,i;if(this._text===t)return;this._text=t;const r=this.getComponent("text");r.text=this._text;const s=this.getComponent("caret");s.x=r.x+r.width+2,(i=(e=this.props).onChange)==null||i.call(e,this._text),this._onChange&&this._onChange(this._text)}destroy(){this._removeInput(),super.destroy()}_onClick(){this._createInput(),setTimeout(()=>{this._input&&(this._input.focus(),this.getComponent("caret").visible=!0,setTimeout(()=>{this._input&&(this._input.style.left="-9999px")},100))},100)}_createInput(){if(this._input)return;const t=W.gameContainer.querySelector("canvas");if(!t)return;const{x:e,y:i}=this.globalPosition,{width:r,height:s}=this.getComponent("bg"),o=parseFloat(t.style.top),a=parseFloat(t.style.left),l=t.width,h=t.height,c=parseFloat(t.style.width),p=parseFloat(t.style.height),f=c/l,u=p/h,m=o+i*u,g=a+e*f,y=s*u,b=r*f;this._input=document.createElement("input"),this._input.type="text",this._input.value=this.text,this._input.style.position="fixed",this._input.style.top=`${m}px`,this._input.style.left=`${g}px`,this._input.style.width=`${b}px`,this._input.style.height=`${y}px`,this._input.style.opacity="0",W.gameContainer.appendChild(this._input),this._inputEventAbort=new AbortController,this._input.addEventListener("change",this._updateText.bind(this),{signal:this._inputEventAbort.signal}),this._input.addEventListener("keyup",this._updateText.bind(this),{signal:this._inputEventAbort.signal}),this._input.addEventListener("input",this._updateText.bind(this),{signal:this._inputEventAbort.signal}),this._input.addEventListener("blur",this._blur.bind(this),{signal:this._inputEventAbort.signal})}_blur(){this._removeInput(),this.getComponent("caret").visible=!1}_updateText(){if(!this._input)return;const t=this._input.value.substring(0,this.props.maxLength??this._input.value.length);this._input.value=t,this.text=t}_removeInput(){var t;this._input&&((t=this._inputEventAbort)==null||t.abort(),this._input.remove(),this._input=null,this._inputEventAbort=null)}}class Qr extends Je{constructor(t="Scene"){super({label:t})}async init(){}}class wT extends Qr{async init(){this.addComponent(new Jt({label:"loading-text",text:W.loadingScene.text,anchor:{x:.5,y:.5},fontFamily:W.loadingScene.fontFamily,fontSize:W.loadingScene.fontSize,textColor:W.loadingScene.textColor,horizontalAlignment:"center",verticalAlignment:"center"}))}}const zu=(n,t,e=500,i=1e3)=>{let r=null,s=!1;return{start:()=>{r!=null&&clearTimeout(r),r=setTimeout(()=>{s=!0,r=null,n()},e)},cancel:()=>{r!=null&&(clearTimeout(r),r=null),s?r=setTimeout(()=>{s=!1,r=null,t()},i):t()}}},AT=(n,t,e,i)=>{const r=n.clientWidth,s=n.clientHeight;if(r<s){const f=e;e=i,i=f}const o=Math.min(r/e,s/i),a=Math.floor(o*e),l=Math.floor(o*i),h=(r-a)/2,c=(s-l)/2;t.style.width=`${a}px`,t.style.height=`${l}px`,t.style.left=`${h}px`,t.style.top=`${c}px`,t.width=e,t.height=i;const p=e<i?"portrait":"landscape";return{width:e,height:i,orientation:p}};let A_;function TT(n){return A_=n,n}function oo(){return A_}class Ic{static setParamValue(t,e){if(t.setValueAtTime){const i=oo().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e}}class ST extends me{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let ET=0;const Rc=class extends me{constructor(n){super(),this.id=ET++,this.init(n)}set(n,t){if(this[n]===void 0)throw new Error(`Property with name ${n} does not exist.`);switch(n){case"speed":this.speed=t;break;case"volume":this.volume=t;break;case"paused":this.paused=t;break;case"loop":this.loop=t;break;case"muted":this.muted=t;break}return this}get progress(){const{currentTime:n}=this._source;return n/this._duration}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(n){this._playing=!1,this._duration=n.source.duration;const t=this._source=n.source.cloneNode(!1);t.src=n.parent.url,t.onplay=this._onPlay.bind(this),t.onpause=this._onPause.bind(this),n.context.on("refresh",this.refresh,this),n.context.on("refreshPaused",this.refreshPaused,this),this._media=n}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(n){console.warn("HTML Audio does not support filters")}refresh(){const n=this._media.context,t=this._media.parent;this._source.loop=this._loop||t.loop;const e=n.volume*(n.muted?0:1),i=t.volume*(t.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*e*i,this._source.playbackRate=this._speed*n.speed*t.speed}refreshPaused(){const n=this._media.context,t=this._media.parent,e=this._paused||t.paused||n.paused;e!==this._pausedReal&&(this._pausedReal=e,e?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",e))}play(n){const{start:t,end:e,speed:i,loop:r,volume:s,muted:o}=n;e&&console.assert(e>t,"End time is before start time"),this._speed=i,this._volume=s,this._loop=!!r,this._muted=o,this.refresh(),this.loop&&e!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=t,this._end=e||this._duration,this._start=Math.max(0,this._start-Rc.PADDING),this._end=Math.min(this._end+Rc.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=t,this._source.onloadedmetadata=null,this.emit("progress",t/this._duration,this._duration),xn.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){xn.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){xn.shared.remove(this._onUpdate,this),this.removeAllListeners();const n=this._source;n&&(n.onended=null,n.onplay=null,n.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let T_=Rc;T_.PADDING=.1;class CT extends me{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new T_(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){const e=this._source,i=this.parent;if(e.readyState===4){i.isLoaded=!0;const l=i.autoPlayStart();t&&setTimeout(()=>{t(null,i,l)},0);return}if(!i.url){t(new Error("sound.url or sound.source must be set"));return}e.src=i.url;const r=()=>{a(),i.isLoaded=!0;const l=i.autoPlayStart();t&&t(null,i,l)},s=()=>{a(),t&&t(new Error("Sound loading has been aborted"))},o=()=>{a();const l=`Failed to load audio element (code: ${e.error.code})`;t?t(new Error(l)):console.error(l)},a=()=>{e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",s),e.removeEventListener("error",o)};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",s,!1),e.addEventListener("error",o,!1),e.load()}}class PT{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const Fa=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],IT=["audio/mpeg","audio/ogg"],La={};function RT(n){const t={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},e=document.createElement("audio"),i={},r=/^no$/;Fa.forEach(s=>{const o=e.canPlayType(`audio/${s}`).replace(r,""),a=t[s]?e.canPlayType(t[s]).replace(r,""):"";i[s]=!!o||!!a}),Object.assign(La,i)}RT();let kT=0;class MT extends me{constructor(t){super(),this.id=kT++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){var e;this._filters&&((e=this._filters)==null||e.filter(i=>i).forEach(i=>i.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=t!=null&&t.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),s=this._volume*(this._muted?0:1);Ic.setParamValue(this._gain.gain,s*r*i),Ic.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}applyFilters(){var t;if((t=this._filters)!=null&&t.length){this._source.disconnect();let e=this._source;this._filters.forEach(i=>{e.connect(i.destination),e=i}),e.connect(this._gain)}}refreshPaused(){const t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))}play(t){const{start:e,end:i,speed:r,loop:s,volume:o,muted:a,filters:l}=t;i&&console.assert(i>e,"End time is before start time"),this._paused=!1;const{source:h,gain:c}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=c,this._speed=r,this._volume=o,this._loop=!!s,this._muted=a,this._filters=l,this.refresh();const p=this._source.buffer.duration;this._duration=p,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){xn.shared.remove(this._updateListener,this),t&&xn.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(t=this._filters)==null||t.forEach(e=>e.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(t=!1){if(this._source){const e=this._now(),i=e-this._lastUpdate;if(i>0||t){const r=this._source.playbackRate.value;this._elapsed+=i*r,this._lastUpdate=e;const s=this._duration;let o;if(this._source.loopStart){const a=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%a)/s}else o=this._elapsed%s/s;this._progress=o,this.emit("progress",this._progress,s)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class S_{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach(e=>{e&&e.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach(i=>{e===null?this._input.connect(i.destination):e.connect(i.destination),e=i}),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const E_=class extends S_{constructor(n){const t=n.audioContext,e=t.createBufferSource(),i=t.createGain(),r=t.createAnalyser();e.connect(r),r.connect(i),i.connect(n.destination),super(r,i),this.context=n,this.bufferSource=e,this.gain=i,this.analyser=r}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(E_.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const n=this.bufferSource,t=this.context.audioContext.createBufferSource();t.buffer=n.buffer,Ic.setParamValue(t.playbackRate,n.playbackRate.value),t.loop=n.loop;const e=this.context.audioContext.createGain();return t.connect(e),e.connect(this.destination),{source:t,gain:e}}get bufferSize(){return this.script.bufferSize}};let C_=E_;C_.BUFFER_SIZE=0;class VT{init(t){this.parent=t,this._nodes=new C_(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new MT(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){const e=this.parent.url,i=await Pt.get().fetch(e);this._decode(await i.arrayBuffer(),t)}_decode(t,e){const i=(r,s)=>{if(r)e&&e(r);else{this.parent.isLoaded=!0,this.buffer=s;const o=this.parent.autoPlayStart();e&&e(null,this.parent,o)}};t instanceof AudioBuffer?i(null,t):this.parent.context.decode(t,i)}}const dr=class{static from(n){let t={};typeof n=="string"?t.url=n:n instanceof ArrayBuffer||n instanceof AudioBuffer||n instanceof HTMLAudioElement?t.source=n:Array.isArray(n)?t.url=n:t=n,t={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...t},Object.freeze(t);const e=oo().useLegacy?new CT:new VT;return new dr(e,t)}constructor(n,t){this.media=n,this.options=t,this._instances=[],this._sprites={},this.media.init(this);const e=t.complete;this._autoPlayOptions=e?{complete:e}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=t.autoPlay,this.singleInstance=t.singleInstance,this.preload=t.preload||this.autoPlay,this.url=Array.isArray(t.url)?this.preferUrl(t.url):t.url,this.speed=t.speed,this.volume=t.volume,this.loop=t.loop,t.sprites&&this.addSprites(t.sprites),this.preload&&this._preload(t.loaded)}preferUrl(n){const[t]=n.map(e=>({url:e,ext:pe.extname(e).slice(1)})).filter(({ext:e})=>La[e]).sort((e,i)=>Fa.indexOf(e.ext)-Fa.indexOf(i.ext));if(!t)throw new Error("No supported file type found");return t.url}get context(){return oo().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get filters(){return this.media.filters}set filters(n){this.media.filters=n}addSprites(n,t){if(typeof n=="object"){const i={};for(const r in n)i[r]=this.addSprites(r,n[r]);return i}console.assert(!this._sprites[n],`Alias ${n} is already taken`);const e=new PT(this,t);return this._sprites[n]=e,e}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(n){if(n){const t=this._sprites[n];t!==void 0&&(t.destroy(),delete this._sprites[n])}else for(const t in this._sprites)this.removeSprites(t);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let n=this._instances.length-1;n>=0;n--)this._instances[n].stop();return this}play(n,t){let e;if(typeof n=="string"?e={sprite:n,loop:this.loop,complete:t}:typeof n=="function"?(e={},e.complete=n):e=n,e={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...e||{}},e.sprite){const r=e.sprite;console.assert(!!this._sprites[r],`Alias ${r} is not available`);const s=this._sprites[r];e.start=s.start+(e.start||0),e.end=s.end,e.speed=s.speed||1,e.loop=s.loop||e.loop,delete e.sprite}if(e.offset&&(e.start=e.offset),!this.isLoaded)return this._preloadQueue?new Promise(r=>{this._preloadQueue.push(()=>{r(this.play(e))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=e,new Promise((r,s)=>{this._preload((o,a,l)=>{this._preloadQueue.forEach(h=>h()),this._preloadQueue=null,o?s(o):(e.loaded&&e.loaded(o,a,l),r(l))})}));(this.singleInstance||e.singleInstance)&&this._removeInstances();const i=this._createInstance();return this._instances.push(i),this.isPlaying=!0,i.once("end",()=>{e.complete&&e.complete(this),this._onComplete(i)}),i.once("stop",()=>{this._onComplete(i)}),i.play(e),i}refresh(){const n=this._instances.length;for(let t=0;t<n;t++)this._instances[t].refresh()}refreshPaused(){const n=this._instances.length;for(let t=0;t<n;t++)this._instances[t].refreshPaused()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}_preload(n){this.media.load(n)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let n;return this.autoPlay&&(n=this.play(this._autoPlayOptions)),n}_removeInstances(){for(let n=this._instances.length-1;n>=0;n--)this._poolInstance(this._instances[n]);this._instances.length=0}_onComplete(n){if(this._instances){const t=this._instances.indexOf(n);t>-1&&this._instances.splice(t,1),this.isPlaying=this._instances.length>0}this._poolInstance(n)}_createInstance(){if(dr._pool.length>0){const n=dr._pool.pop();return n.init(this.media),n}return this.media.create()}_poolInstance(n){n.destroy(),dr._pool.indexOf(n)<0&&dr._pool.push(n)}};let Na=dr;Na._pool=[];class ao extends S_{constructor(){const t=window,e=new ao.AudioContext,i=e.createDynamicsCompressor(),r=e.createAnalyser();r.connect(i),i.connect(e.destination),super(r,i),this.autoPause=!0,this._ctx=e,this._offlineCtx=new ao.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,e.sampleRate)):44100),this.compressor=i,this.analyser=r,this.events=new me,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=e.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const t=this._ctx.state;(t==="suspended"||t==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),t.context.state==="suspended"&&t.context.resume()}static get AudioContext(){const t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){const t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();const t=this._ctx;typeof t.close<"u"&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&this._ctx.state==="running"?this._ctx.suspend():!t&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,e){const i=s=>{e(new Error((s==null?void 0:s.message)||"Unable to decode file"))},r=this._offlineCtx.decodeAudioData(t,s=>{e(null,s)},i);r&&r.catch(i)}}class DT{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new ao),this._htmlAudioContext=new ST,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return ao.AudioContext!==null}add(t,e){if(typeof t=="object"){const s={};for(const o in t){const a=this._getOptions(t[o],e);s[o]=this.add(o,a)}return s}if(console.assert(!this._sounds[t],`Sound with alias ${t} already exists.`),e instanceof Na)return this._sounds[t]=e,e;const i=this._getOptions(e),r=Na.from(i);return this._sounds[t]=r,r}_getOptions(t,e){let i;return typeof t=="string"?i={url:t}:Array.isArray(t)?i={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?i={source:t}:i=t,i={...i,...e||{}},i}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t,e=!1){const i=!!this._sounds[t];return e&&console.assert(i,`No sound matching alias '${t}'.`),i}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){const i=this.find(t);return e!==void 0&&(i.volume=e),i.volume}speed(t,e){const i=this.find(t);return e!==void 0&&(i.speed=e),i.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}const Mf=n=>{var t;const e=n.src;let i=(t=n==null?void 0:n.alias)==null?void 0:t[0];return(!i||n.src===i)&&(i=pe.basename(e,pe.extname(e))),i},BT={extension:K.Asset,detection:{test:async()=>!0,add:async n=>[...n,...Fa.filter(t=>La[t])],remove:async n=>n.filter(t=>n.includes(t))},loader:{name:"sound",extension:{type:[K.LoadParser],priority:qn.High},test(n){const t=pe.extname(n).slice(1);return!!La[t]||IT.some(e=>n.startsWith(`data:${e}`))},async load(n,t){const e=await new Promise((i,r)=>Na.from({...t.data,url:n,preload:!0,loaded(s,o){var a,l;s?r(s):i(o),(l=(a=t.data)==null?void 0:a.loaded)==null||l.call(a,s,o)}}));return oo().add(Mf(t),e),e},async unload(n,t){oo().remove(Mf(t))}}};de.add(BT);TT(new DT);class OT extends Qr{constructor(){super("Pause"),this.visible=!1,this.zIndex=1e3}async init(){this.addComponent(new Le({label:"overlay",resource:{fillColor:W.pauseScene.overlayColor,rectangle:{x:0,y:0,width:W.screen.width,height:W.screen.width}},alpha:W.pauseScene.overlayAlpha})),this.addComponent(new Jt({label:"title",text:W.pauseScene.title,fontFamily:W.pauseScene.fontFamily,fontSize:W.pauseScene.titleFontSize,textColor:W.pauseScene.textColor,anchor:{x:.5,y:.5},horizontalAlignment:"center",verticalAlignment:"center",margin:{x:0,y:-50}})),this.addComponent(new Jt({label:"subtitle",text:W.pauseScene.subTitle,fontFamily:W.pauseScene.fontFamily,fontSize:W.pauseScene.subTitleFontSize,textColor:W.pauseScene.textColor,anchor:{x:.5,y:.5},horizontalAlignment:"center",verticalAlignment:"center",margin:{x:0,y:50}}))}}let Ee,Rs=!1,js;const P_=()=>W.screen.width*1/W.screen.aspectRatio,Vf=()=>{const{width:n,height:t,orientation:e}=AT(W.gameContainer,Ee.canvas,W.screen.width,P_());(n!==st.screen.width||t!==st.screen.height)&&(st.screen.width=n,st.screen.height=t,Ee.renderer.resize(n,t),Re(W.signals.onResize));const i=st.screen.orientation!==e;st.screen.orientation=e,i&&Re(W.signals.onOrientationChange)},FT=()=>{const{start:n}=zu(()=>{Vf()},()=>{},100);new ResizeObserver(()=>{n()}).observe(W.gameContainer),Vf()},LT=()=>{let n=0,t=0,e=0;W.debug&&setInterval(()=>{console.log(t===0?0:Math.floor(e/t)),t=0,e=0},1e3),Ee.ticker.maxFPS=W.maxFPS,Ee.ticker.add(i=>{if(W.debug&&(e+=Math.floor(i.FPS),t++),!Rs)for(n+=i.deltaMS;n>=W.tickIntervalMillis;)Re(W.signals.onTick),Kr.updateEngine(W.tickIntervalMillis),uT(W.tickIntervalMillis),n-=W.tickIntervalMillis})},NT=()=>{let n=!1;const{start:t,cancel:e}=zu(()=>{Ee.stage.eventMode="passive"},()=>{},100,0),i=()=>{Rs&&(Rs=!1,js.visible=!1,yT(),t())},r=()=>{Rs||!n||(Rs=!0,js.visible=!0,Ee.stage.eventMode="none",gT(),e())};window.addEventListener("focus",()=>{n=!0},{once:!0}),document.addEventListener("click",()=>{n=!0,i()}),window.addEventListener("blur",()=>{r()}),document.addEventListener("visibilitychange",()=>{document.hidden&&r()})},ks=async n=>{st.scene&&(st.scene.destroy(),Ee.stage.removeChild(st.scene.object)),st.scene=n,Ee.stage.addChild(st.scene.object),await n.init()},UT=async()=>{W.gameContainer.style.backgroundColor=W.colors.backgroundColor,Ee=new Pg,await Ee.init({backgroundColor:W.colors.backgroundColor,width:W.screen.width,height:P_()}),W.debug&&(globalThis.__PIXI_APP__=Ee),W.gameContainer.appendChild(Ee.canvas),Ee.canvas.style.position="absolute",_T(Ee.renderer),js=new OT,await js.init(),Ee.stage.addChild(js.object),ks(new wT),FT(),cT(),Kr.initEngine(),LT(),NT(),await Promise.all([new Promise(n=>setTimeout(n,W.loadingScene.keepAliveTimeMS)),(async()=>{await bn.init({basePath:W.assets.basePath,manifest:W.assets.manifest}),bn.addBundle("extra",W.assets.extra),await Promise.all([bn.loadBundle("default"),bn.loadBundle("extra")]),pT()})()]),Re(W.signals.destroyLoadingScene)},Qn=(n,t)=>Math.floor(Math.random()*(t-n)+n),tt={sounds:{mainLoop:"main-loop",menuLoop:"menu-loop",gameOver:"game-over",coin:"coin",playerHit:"player-hit"},signals:{goToIntro:"goToIntro",goToGame:"goToGame",chooseCharacter:"chooseCharacter",loseLifePoints:"loseLifePoints",gameOver:"gameOver",moveScreen:"moveScreen",updateScore:"updateScore"},lifePoints:3,creditsUrl:"",privacyPolicyUrl:"",fireBaseApiKey:"",fireBaseAuthDomain:"",fireBaseProjectId:"",fireBaseStorageBucket:"",fireBaseMessagingSenderId:"",fireBaseAppId:""};class zT extends Jt{constructor(){super({label:"cta",text:"Click to play",fontFamily:"PressStart2P",fontSize:24,textColor:13421772,anchor:{x:.5,y:.5},alpha:0,horizontalAlignment:"center",verticalAlignment:"center",animations:[{from:{alpha:0},to:{alpha:1},duration:.5,repeat:-1,revert:!0,delay:1.5}]})}}class jT extends Jt{constructor(){super({label:"logo",text:"COUPLES RUN",textColor:16763904,fontSize:128,fontFamily:"Lobster",anchor:{x:.5,y:0},position:{x:0,y:50},strokeColor:16711680,strokeWidth:7,alpha:0,horizontalAlignment:"center",landscape:{fontSize:128},portrait:{fontSize:86},animations:[{duration:1,from:{alpha:0,y:0},to:{alpha:1,y:50},ease:"back.out(2)"}]})}_onOrientationChange(){this.finishAnimations()}}const GT=8,HT=5;class qT extends Le{constructor(){super({label:"moving-boy",resource:"boy/run/boy-run-1.png",anchor:{x:0,y:1},position:{x:130,y:0},scale:2,verticalAlignment:"bottom",margin:{x:0,y:-55}});vt(this,"_runSprite",0);vt(this,"_moveFrame",0)}_onTick(){this._moveFrame++,this._moveFrame%HT===0&&(this._moveFrame=0,this._runSprite=(this._runSprite+1)%GT,this.texture=`boy/run/boy-run-${this._runSprite+1}.png`)}}const WT=8,YT=5;class XT extends Le{constructor(){super({label:"moving-girl",resource:"girl/run/girl-run-1.png",anchor:{x:0,y:1},position:{x:200,y:0},scale:2,verticalAlignment:"bottom",margin:{x:0,y:-55}});vt(this,"_runSprite",0);vt(this,"_moveFrame",0)}_onTick(){this._moveFrame++,this._moveFrame%YT===0&&(this._moveFrame=0,this._runSprite=(this._runSprite+1)%WT,this.texture=`girl/run/girl-run-${this._runSprite+1}.png`)}}const KT=2;class QT extends Je{constructor(){super({label:"moving-platform",components:[new so({label:"moving-platform-top",resource:"platform-top.png",onTick:t=>(t.tilePosition.x--,1)}),new so({label:"moving-platform-middle",resource:"platform-middle.png",onTick:t=>{t.tilePosition.x--}})]}),this._onResize()}_onResize(){const t=this.getComponent("moving-platform-top"),e=this.getComponent("moving-platform-middle");e.width=st.screen.width,e.height=e.originalHeight*KT,e.position.y=st.screen.height-e.height,t.width=st.screen.width,t.position.y=st.screen.height-e.height-t.height}}class JT extends x_{constructor(){super({label:"credits-button",url:tt.creditsUrl,resource:"credits-button.png",hoverResource:"credits-button-hover.png",disabledResource:"credits-button.png",interactive:!0,cursor:"pointer",position:{x:155,y:24},alpha:0,anchor:.5,scale:0,animations:[{from:{alpha:0,scaleX:0,scaleY:0},to:{alpha:1,scaleX:1,scaleY:1},duration:.5,delay:1.7}]})}}class ZT extends xT{constructor(){super({label:"volume-button",resource:"volume-on.png",hoverResource:"volume-on-hover.png",disabledResource:"volume-on.png",mutedResource:"volume-off.png",mutedHoverResource:"volume-off-hover.png",mutedDisabledResource:"volume-off.png",interactive:!0,cursor:"pointer",alpha:0,position:{x:24,y:24},scale:0,anchor:.5,animations:[{from:{alpha:0,scaleX:0,scaleY:0},to:{alpha:1,scaleX:1,scaleY:1},duration:.5,delay:1.5}]})}}class $T extends Je{constructor(){super({label:"settings",horizontalAlignment:"center",verticalAlignment:"bottom",width:230,height:48,margin:{x:0,y:-200},components:[new ZT,new JT]})}}class tS extends Qr{constructor(){super(...arguments);vt(this,"_canContinue",!1)}async init(){this.interactive=!0,this.addComponent(new w_({label:"city-bg",resource:"city-bg.png"})),this.addComponent(new QT),this.addComponent(new XT),this.addComponent(new qT),this.addComponent(new jT),this.addComponent(new zT),this.addComponent(new $T),Nu(tt.sounds.mainLoop,{loop:!0,toVolume:.3,fadeDuration:.5}),this.delay(2).then(()=>{this._canContinue=!0})}async _onClick(){this._canContinue&&(this.interactive=!1,await Promise.all([Ji(W.sounds.click),Uu(tt.sounds.mainLoop,{fadeDuration:2}),this.animate({from:{alpha:1},to:{alpha:0},duration:2})]),Re(tt.signals.goToIntro))}}const eS="data:font/woff2;base64,d09GMgABAAAAAIRoABEAAAABkwgAAIQFAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGiwbiRYcjV4GYACFFAiBRgmabREICoXHdIT/XguFHgABNgIkA4o4BCAFhDwHi1MMgTxbKWtxgG3TGubdDkBctrpsONi28EF38Ff0BRCw6EDtdqAI1N2fZf//JyYTOewS/bsm2hpg27xPqdJGRsXM1jNH9qW11l7z2hBmi33BSIQZqFHp1GOsuSNRo4bOa8zTOxto98XQefm0o5rLjftPbGVOrNisIDpvOcSiSZ9T2Giqx8lH4G1Dbufkm1M76AmHcMnwy8sR+JGt+spZQTPM7xeXl8WeFNPS9H+bGvI6XaIXv7HQtnkGrYo9RffDO013HjkPg47KrwLKsTk1kpVuPfke4LbuNjYiRSysiY2NjdiNn2Wh8lHVfDRvFhbkQY4WyRkF8CPyK8///37/m2ufW39GtGSaxzeIeCNBpkJkEE1KIBMyzbtHr6wBWJspcNDHcRHNVcF1cNQRR6V0iQiYKGAkThGzZ/XCZbn5E7ehv+kCC//5Nv/ftdFcAgQLEYJYIE6c+Ln6JDWxyaD9s1Hr0z8s/89zsvv+gKMMh51sYNNAOQu4nzWNHtCUyaQIqNFojMJ7IGpK00xmi78djocts58x4KZJZ15Egjvsf+pKKwCk5is/uJYdoAOHtHQIUlC69W2ZSXnpUmbUVU9HkK393oD3lxThM6a6Quc1O93OTwH4VGwydwpQniRVfaz5QQHBgm3+NUiETCoSiphMmQkztXK5hN7VUTIXSs4o9iNR6K/AeBAKYUB4lENKfCUAc5Y7tswyZxmdI3xd4VV1yc0agtg0V4e5rzIfYsGCKURUy1WPye5JEmRQv2Ai/UZeIEwuDkAyPde8eUr9/7n1hi7v+9oSmP/hm/sLL39CxVfdi65h1wM+44h4YGDEM+SFVHylq2576vc2tcs8hMYfxUi4VsQmuLSW09aufyZ/7p6Ibb6q6aH+IcZEdHHNEpvaIUJ3FUK8cIDc3/n//03L33sfuPeWPARGNaFacoNC3J4KgUOa0oC78pU4ee9Tqx7YVzXLEqiyqjQygaYndl4LSG0CrX3X2zLqgOKv0JEP5Wb/hgoVRKyyQg08NjGDYNW0vmqnf7h8BoMxuTY8/y37Zd+t1z2R1B8ZQhBukCEJiVBopruH+jU1RYpxgmmJ/AeHQ6KSI2+2WciVqFVujeSvtVf7dj/LOAAUOsJF6BhzENi3d5m5TfHul2DvlwJETpRsZw7K7AKqoKqiqlhoV9X/v9dZbe8TYAt31xlcrumhPInOVEfcYS8ExtWzSsuQtpN36L379aT/v77gSwJbwqGEcQCcJJwwdulHC+kjwMY4VeqUbVd29emmoE1Vge0KVJqQs90xhNW4d7WcbUibZW+nZzWL7Sx22zm9nPFlPzEfJODEVcu1aBUwcmv837Kf9hfsGMtrKUaKGDFa2uOt+Xdz8Od6aqIwldHdva/XKalSWiAdAhK9/b2T1N7/ia4HFLwKSUjW3f/+mp9o0HewvplvoTskuUoVFGQNJDupM4s5reUBfXfHMYTBTgokx9I8gADsvr8AAgQi6mgRiUkMRCDYsIFRR4eEAHiybECeOZehhaD7zzAduHzCiHKQYQEAk4kRKJxoQ8TCdoB30bg3rg8rh6R2mu8VIaZSWrZc2E0ACKShlJyH6FtCVDLiYItRBOgBQByom25QFAGaNzcMORkR7KZFA3Zo1sKWtwf2dpWwe6P7J+Y0GsAFcIoj7GPHxU0IyNEZADpWEjt2WP5uxIIdrg0IoAuEicGCWlDHAcHlgABtZv75A5rtPLLBBnHLaqAQyH9pJeQCwKHWc8ebZ/2mRarXbD1EdU4R3XgCJxB1dFhBzlziATuBc8tmiro5Cw+BwU4P4o213XRDY5Q3GdWlWf75r1JVBuCZfyifTdok5Uz/vyEcZf7Lo2xJeWJi6btzlhhHS41A+ugngCbNeDp0EKB97G++9JyvbeNbG/neF/xsG1wf28EnEp+5MKB86TO+Eglon7uRHwjUdryIUFUUxkSM5yzKEAmvUlOFuNLOClkVddHMT04oOMiEX8G1psSmSuZcME5MUO1P4VbaVunPSl9X+nNbf6PaX5+mNXWt5k7V0ZVmRZRaryKFqmLjgAR7J9BJG3yoYZbajhKCADQsUPjVdiZGBJghQAxVlNJFitV5oeb+E/sa0/Cg4MGGgxA2PDGvYieN8CAQR7xdrayb7QgRvMOUJhJQHR5U2x7Xt5G5JpC4T5rH619FCAdACAsL+Jg5eQFtvCCZ3wJSgVu5FzkQ2+A5AX3yUiID5Wesdsvqd+ZZea+PpxhIuBrZIddcuuERlKYGhxk5JtaQTcKGY0OamDWHhhQRK/YNWYQs2Y0kCViwDYSt+WStecx/plxSTnevTA+dy0G6n/fGWoXmjfbmC/uDccbIQB38VIO+0xf6aME7ABBXOcpWntLwR7JgAAf+GKKIt9pty9YvxmSFhmsOTV/qJQsTPrNWIsPbz9Iv+IZWrLib4KQvRB6thrHvJ5EYCpNNMdU0080w0yyzzTHXPPMtsNAiiy2x1DLLrbDSKk8989wLL73y2htvvTN9kEa1vda5NKxf5CEBPXy9DOdF6uAk9XJJQQ4Z6eehvvoHUYgJ7w1B+JlESeyCVGY/H2WuH9bqZaIsDxk8e0E8/8ziReppbNG6uR4F/6ZcH33Z60/P0TCr+FnvHW3pybQCUogWI0WaDJny5NPqoqdeWvf3N8Agg+nt/zHcCOOMt95G2+x30CHHXHLNw3r8xiaGbLwB5W2M+ZqS5CQk1ICzCCp9d8oSk+j0kMIXSUaE4wnCJI8RxnmEoEMQoD084kE8xt9H6b0c9G7jHb2ttz7F4sCSBM/Nlru2TdO7gTw4yfX2+XEobpIFrUkJXNVL7qI6nOQKMr6c+iUXwiRber54zrqeLZ450tONp/SkOWE50ON6jJ5be0n1qB7xh9n5Z0J6RfrpJkeKGGpBfHlQsHOgNe9+hOH2JcMcWravgwja0j+Vay9SX5PsWSfj7HbaI7vQsvNirmFlwvi+ZXit48UdLuj24jbQrWGLU2rJxsN6m1k0myxWN5j12Z11MVqyFE8cypXXNF2tUAFh/N0QK/L7JiiHDlUYLsO6UeonLYtpoedLUViCKDFEdFiXaK31+c4i945b1qiW1Tru1WYs2Qg0FmSD727JijcyJHy0Bx+POnlZggLEvekGIB3GxWtUcQEAZSKEWQGmnPrOiYUrQPEgZ0sDyB/5C/BJf/2/YwTAhCEJ1neXIeFM1kyRNMFWsgssv3V+wk1iwmVS58LcmnfzYSHJIrmk83EZI2ccGAXjxgQyaiaBRtABXimkCguTCTTPyvCntuVr/XP+rkAuknN3c8aasfv2VEz4nzH2bwAOAgCTCwDQeVudWklUgc4jAcN/YHhneP6FNnwy7N9YNho2Ej5PnztAAABhALQ+AHyadSbNeL9rAn5rSK0BaI9duOFlMXKRB3Vx0hwhdISEphDoHlroOuODRUBIXJ8JK9ZfLfxSMpw4c+HGl78AKoGChFOLoBFVBNSHg6EJw2TPxUBakqsJoot1yr03McbYUPr/HpsUhcEJR8+gtEUefDAhRBZBLAnwPmJUBoiq2BIUJqP/iY9X+BqS4J8PkahRrZYJFoXGw8bFJ2JBypyMA1t27Em4UnLnwZtnFF7CBAsRKpKfoeLFiJUoToIkqXJkypKthy666ibdQEUGG6JEYS6KjTbCSKNMUGYiH6XaqTAIvVCJm1B1XQ9EW9jZJPiFZ05yiX859tSrl7S19Nts0yv/N7JTe1RlQmWDObR3Zqcz1z6b2NXgI2cCvunYy/Bn730h5mS6R4EpAV+1bUc0vgt9dhzS/ovFRqJ0vk/xqxYch72GqmSHHq9IpYBvAs/cWgdl8KYACSLfL8AJ1YRPNQj2y3opmmj32pC8VeDZzX21ipWM3yB8YebjYebkG60v1s5RQp4MNUrVEVNytOIVCj7tRX2Kn4R3UNCfeCTnypbuYGd5Nz1agmMo6AFfssAdCsKCVDToH4yHXSPrKT13RZU5VwcHcn01Br5gV7e9AC/UJggcaoKIGQvRGEjGSKUcKCkgCCtWVCcxMyTV3DMlXW15GGLSnAS/UYnDoDh/9N+FS9XJHIKdtX5Ghjln2SlHYPMW5GRJtNtWabIokJGvg+MVJCarE0yAlQFc1mc8NIchbhpHFspnXxW9XUFlaXVwmHewz7eiezVkXW4otE1D1RQ8zK05UzFgk+PYnSCwp3ZMA9Xs9sCrASUcl2AMDQLPHFqX30wzrUBWQLBgA1StMN7rzVreWyVZuYaiUZokLufxE0GzArqAEnI0jKVVP2WMcdBj5EtEH1igJQSjPHaddgV1iGlAC57iDwgtY7iAoccXbBKOLfcA2onXCph6fNaOz58QUjURu7qlE4zmIjO2caDUoOVcYTIcm6T1iD4KNGICzz1PJdcfApv4CWV5Ut8oftK5N6UKOHXVB9JBQ7dWlBqZp5oWU3mPTMCaWyAA13XSut9j66+WPml7wcJgQ22oxqBpICaGPCjdsq4JtLOtiT9I1qkJ/pbL+66AoxPsvEBbJ1qDSznoUB66VIAeFaFPJfCoDAPaAJ8+HBtp5jwQUjK+YJlKUHhzKPXq8ZmcshudGyflYXR5rQOdoTvXCAmIIGKIBCKFyCByiCFEAVFCKqenmqprFGZ9PSxPTd4bzWpkNPCpn46aa8xyzBqmZKGJugvX4CkOAxw+F6/k0nGo2junklr3XhaGRSOJeti2z52D5rJsFq8+vdL0hvTRtc5gA28vDXI0FpQ9FO4mADz7wANpJdpu3pSNpoq61CXwHAboFm11ebsqsEtmgaLq3dF7nTg1ekilcYD0DpGj8ZMuz5lAdkU+yY42Zn0naHijoa2vW2vAhYlGgReWZH5S1H7EB+Srcc5EVazh5RCl0tQyCMYg44QfhJEJ2azd4GbHI7nB2eN9Z0JrRwMUU3QDd9odCrhFRR/e8JPPCBx8zeARauvbNQZJog9tuviJAxNBsNwJA5LRQOcTU6QBCzv11JA5iAYERytigchh1U0Qh2AdkjgHbvYYPDPsBJxTjjwEKRITLcznauB6+imChirQAc2Q1qBylrOCIMv1pypfsSVVrCTvikQpJJxtlPjQa/RLBKxAQ08Xakrk6125jBnzwkD0X0foFtdfve1XzVQyWL9eu9m0M3LOWapcmebCyTPVb992Ts7kZ3qm0U/yo0adZ9b9SeOQx4gq/xpirJOtAwEl5hqeI3B9U7aszw9QWiw2HQb4fhuVPGA6/UWnRoEN2Hw93yG6HkzdoSHscSsekMpXYspRhNdFqHNGgm+H+i6muCk4wotP3sntW15dx90duB5zbxq1eb/ig06gXSO2FPiYD+5f4T4e3DZTSZ2YBqbUz+iruRGoON/XkbnHCBJMR1EMiloDoBkUPSFIxDAoZg2AZfB6m3ucAGIZR1HcOgBPUfwhAiRQlLAOIFJsx/aIN0kqJK0ByAxKnhAkURiUsgagMuhrSsRpQ5y2xOmAOB1ySkfE6ZhTOiHu6pR7lNSV57vY9iNCHc0Q2/MSzwTS8OIyQC3LGLqKIeu9FGGQTRTBNopo7yAfsW+N5BBDjjFc78oaTpGGc6ThEmm4tkBuMeQewz1QjuQZRfKKInlHkXxaIN8Y8otxx1/+YlnEV7PDpr2TGfwq1OX82qfnhwtA2AV3vrWX3VIAxEtA3Kqon9W0H0NEe+LEdw4vIv8VYtbO5yOFLZE9HtgKAiuzctFAvG33WuwFK82gj+GRUjg7sAY6RrTwg8lmuHzdktuhlsX0OtZLoZ9mu83lwiq35NhS69KWWCmJ3UW74JjdWib61YWhBSv1nQzCoF5+Bk9zYWhbW0CgN7IcbbbZPSQqKx047dY2yQt6b1RH5BCD4NiqNSQg67lyZs1tK+5TX/SjKkZXj3kdkxb68CKa9POw1UI+l83FFIsYwNZFrsjG93pBbtzVolSjSERARFGqkM9QxlYUVZSoKKBRAQnI9e5zwn+qba3sqKykBcQ+ILpfTdaVjBAEFIgAgKp7AdpIQCGvMPAxjbJRRhNA7AO2J9KuyNKLNdkkoT3tZXLmpdikpmgCple1Owgl6WZAKG1JUbVyUaUlnSp4HBYJ8cRiqOrWH4eBT3vJmGKDGr0Kf2wGp1qwVyWrlua/GVlzKkcrmbaSNjyUTMzhlENt+R3Hlt9IPsqPMgy4yz0FeXnigvUYU2hLU9IWM4Zneerbb2Mb2gPrMOq337P+TZNBIn2+dTc9yXS3xlgz5KKtpy9jyFeuWN6okZnLgww1x4xR7+4W+Mc8npXnHucvvVaiWwRa8NQi7ylvMctTh+AwpZCouEgI8QAiQooojl03mSQVEXETZp0iZo4z2GQoDYfSE5R1ahu8DeTeb1mp6adkzlNKU1NLylIGcKgoDsYjkY0SZEg2ppEf3rB4r0drZ9d0fLZq9u92PJpEjpCEQFjLhEAiew9C5SrTxXWbhVoT8j9DFML18QXB1CVvJjozBqsbyKASlFndpS5eRzWDq0zl6Ldgw2clypV7nyGAh+QXrA9N3eB/wisSmdZBjXRvd8a2d0ra7k/Rcg9JrKDIwJLC7kDhxoK9uiSV5b35p+gB1rUgc2KqalynNr3ln2T6wEbPsW7hUIcRwPpMVrmeiVLgBu2G35boOg1hP1MVGWQnD0TwzseBHmOiYKepqVTlH9DC5LJNUtA7UU89myT7g1nkROKg8jRe35VSzy/QoybNr/UjjXrbo+PTkJ5OPb3k8KNFpAxKm8+N8CYxh/NCG5ggTQBESArnT5jrszng8Ss53nc/krEPEVdN7XbSBFpugRrfdZv5sq0pcGjz2MzQ/sxt7gymDrMNpxSknrGNnGcsplKVLG+R9ld+NtU6AiQ1UD9Ukt0E3lOdKlULuqZHIy44/vLV6bN4F48cagEHViqZs8pjGGzgr4O+iOVVbfEmMVdRbkgv1EFOv2+qlM1E+YGW723NLOgLsLCP6p6bqJgglbap4XH78H0FWv3Cb0ZUFr13xrriyiyukauJe2fgtKcs9bZSg4LHZ4tKldTHbEiQveRWyYBQs6r5TdYDfCO4KDpz1GjpMkkkvp4NzabUk5NWaK4O1F2lwvzpeYjTg88rm6BxKG28mhple29q4/uiNhDYHW5x5LeyO9BWmFaOIWKQCJnfZOjkVGfbd2NbBmDQuXnxvtVTucLuFsOIMPynFYRXleSACF+UutoIARVYz5llY0JwegsA3jK9x/+2tIvP9QWvUD03sEV2eq4BR5/EF5nqUwsU6hMg2kE0h/T1U83dvQb5tChJgVqiSivNaJHAip7bV2/V1UKQhEZQopZlfaUNuQZaLXKmtIFKFJ3qSQB1h3Br5ZAQnMwuPsVASgRkuTsgJr0ZyuRJII7IsorGOdsOVJNcbd/N7HnXVVl0tuftTaEfVArsqKc/eyVHkH350xkk7peCxPeTA/tVZcCiu21hxn5miSRxi1l+r5W9ZZ3WWxzIVaZxkHqnvJ9jmVqG8Iq3DcKCth3RKLJki1GKlu1E7xF62QuzAQSwAo1jY9/Vyfr4FOyAwgVIyC/RwbFraiO5r/cIxPz+2MZqCzoywibtu7VmAvvF5Sduf7SMtDW3Ih3XBBt1/kqLKIgpJtG+OBPPCk7bwuGVBQadBoHgqEMoS4mZkiHJafDNBVVHzWdnjGT3MLEkzfF5UNvIAQ34Ngs49aoEZ06pmeiaA2EGMRPcRUOGpJE03wvHuFWn4Y14O0kcJuVDZBtOM7ZiClmmfgro4G+E0C+87uJyW2mHIMdagUAutXg1zZnmsZAbrUCI1FJcqI7flK4tfeB1OVMsGFWCeQBbyI6ZoYWubxeQElq+mqMopxGlHTxoWeSo1jhJMFzJZsv4jl4jRJqWOCIjOwoc2LtinC81rXSvdNUtwqSlRZL8le/nvyJ1s2EW9my+1aupzuzDCpqpWxhnZR9fareR1I9I1KWDidCHSthrmpKdPqA4/Z9NNuOGLd5+n1kK4E6eIHAOdP1YTxgJ/Xo2Ytb+i/XMXq5LztMRbXbOH/NRrdzvlFPHl3OCBtIQODm2rwqygs0FtCGeIVUtbwjRDp3KW7VVd0DDe4YUiBzXLzZBcoG1fjUtuNaxuQBbhoz0uKVuFzmPARvoC47dQLK1HWQoQbEsPc/YjXrVegl+kIuTKpG/uHZx9cRt6SINxaoqtqyWJf2eiMpeRgiWHeCkHMZYl9CpeY6BdyPOQjmDKqb44e1+hqonWVNmrHC4TF/lUG11vnu7i8fkcJCEAmudwC43ZP12AkEUbpShrR5AFIc0wgrk7b3NQfJ7ZFbrvo4zZ9k2VRYr0Ins1ds3XVp6JW9VAjF51IyFIwI1Ho0hVIKiYuLFfnB9xGJoMr6zioITzvrVHLdZJWPTzBoKGtmgIQouZtu7n/rQDwlp42YbIyErqg7WVjCgaSxhWiXJoe/TrJyomm2QxdVlnBuM96tghhpCM6x7G2MJSPu4kA/oZjrRXhY9HYgP2MHW7fjJN5ZvrWweqcHhiIxsYtQODalaO8SuLbIO2/un8+TWeTHyUZ6wzYRqniY++lYiQa/r8tTT0OfDkX6+rDgaObfMYMFy4N+B/y11OOjZc6KmGtbUOOEF3ELQZNhmnrHKklDJcFgvrW42yrdueOt3+3lbO9azw3c6oVsRg2yaTxCGq+70oGhGqWZBwauqiFA9c4NoGUpXreanClVc6ARUkokBresDXLhtYOokOadguPtpDcZYidTkJKP1khT4ej4X9a51S2iLFC2uuNbn9CNfJFlnEKKu1uJt9tG2cGjSVSRKJFjMv2VXOEhSdINHPs3k5tsElgi7+Ho4VIqBCiYzxW/glPVRuOBKSZy9w4GAYR8lzwwy3vY/um/+MOrad12tB5qX7knmd7tCTGyZ4S11uv2nws3GtL7oBSRh5pt123xCujXZsblnonhSL5FVt4OJnnerxpp2VX3i75eJnhKaKdh8mhGtqCjEo0TlPzNl3Bhsm8UWmkvuHssgse9ddv+9troU0Gaef+afrD+F6IlO3rCRcQGksIvO5PQQ7IZLYrtjZYMUi0SFlp8NcybdOkMCUxS8HXD4iEORHx/zAliFEIwH+tx+For7kpa+M9ArVWwS2QFukhwkvtf27jYsajyAy/SGSNjRkcbgtdOetDs4MTOcG7O9mEZMHTrEt3FjvWij8ZDCPLLbWLX5EisD+Q3/4ZZJIcbpajCu1bhrEdGzH+Qvx7Aat35jq+goszsNXUXG5ibN22fC8WunGznmf2FcviKRy1Bet+w1fUfoKuH0fkjnpCgV2MxyOin/CtHNcVsXxLy6nnIhbiSXXv6Sc86aRL0FmWlyJtCxHuy1fX3rD7d/6SLCtt84H2a/0dzrnVkhhawhVXNWQvT2lSi8kRd+wxJRJ3XNEPuiMEynXcJgnz22UhEbbTZNWWxXBb0kUjYbtc8USguZU1hoTHy5vCxr8gUPNtgpA130VfzH86WlOp3bbbHb0teZBmM4liEAzbVFnmzSYTf03M5j2QSbDIxg1dBTekFOk83VR9nKgJaY9vdq7LmeUzEeX+qGTs30Y2Hz9+uo3TYH/ewsSrYO8inBeXXwTMrFBTH3Vx6FEtXcFXz1BQy76IKBJo0kbMfu2hqp9X6YaJonsakJsP5xwO4toqs79SkkoFrUyv1ESNk3eBIPY3eH77jJzZrFZ073EVmemBb7m3tRzrTgY3+Lt00SQd7JkfRhpvO3n0GwTqO5M7ofNvUhnH8z+2J/12ieJuDvzb+ZB8bWE2Frm7S22duvwNYVie5nL3yw87agtu/SI2zD9CXdrlCPzTX4dcBAHAxmCJ3QMw9sGg9I878doqp9zp+UHTaqZ10uzQh9v6SYDnPmRb9LEEGNfHRhhs0CvVAguQuv4WJr+c8nUgNpL+MrkUwMpx1RJRJEOum157ephtlBRvP54s3Etk6TeRGXiVVlmkpRY37cWzMlDRpH+aw1aftSBgOOnTwLhzXI0Y1BPLlSTtjgtNtWSxAUj7BuxoA7J0EdHYxjnbARG3cz6ucIWdIX2I3pGwVTt0V0zmi8B9cne4PIMMHF8GqE3MZ3OZLTjiFeCuhiFq4D+QRhv54IaeBYCfYPtPmP6e4hGr2mzcffS5RoVcW2SyuBcVLp0K4c8NfSsNYWGq76EsHvyHuXzmsaSVIYca+fqdLnnVruzR//dAFkJzg03K631YcPVrm1rM0nDdn3WnRSqhmcTjoVbiS6hSuBUNzJ4CThWIW9J3oeMSzf6uUM+UACyHorYXlYLjey3BXyFr/R1/pt2sgTPk2xTd68i312Alae06QMk2+BpiRX3y0HUC8s7yaxEsmoetJbQvaGuYyGj91FklXom6nFyiJwBUyjDCA0B1EXWWav+aUNm8j+D8RgZ7nB6VVRXSWFtiy/ct9R+4settdQ0VLvAGTxh0fs6zX7vzshKkVAs3zZXgHZRdS7ujijUDA9Ggf9rtQkCbfy2Mct0rW/6qKsYsIGrm9iYNYWInLCpwlWEYQwnSCuhLIj3Lxx87u+iWYBV8N28KbprIocIOOZeFaox7UnqrXUJB9pDvxxMOIYmc43xWsEbBVVMd4eBxLI4+5xdfzlLdUXExOt3M8StVJK6jYaCsGP160wegQe+hjmqLRJBJcqzbNYorW0LijSqVVYDav+73QE0AO3vLsVc1tNH0sIMe0g5S2gTRHxMzwXcegcnqblIX9Lv1jTPdlQDNi1dvdY658KSGzMY9WAI3+vmOZkQOccFhrV2n3nNKCEhQnLc90zIkHw7T6hRKHMBE39yPMrz6pIz7249DTOOPjs4vMSyPmnqnzklx3iVY+TfNCE94Xq+hyTbP5jvqvqWSGie6eTMzS5uzZ67xrJNeENLqp4f6bBILLzgah1KUe14DK+4D0GNKMrjYeGtyjKIZEON7J4WwOsgzcHVTu5DBOlLTQw6ElQOpXxQMzDOoPyKeNDIen/qf3oaCvNpSeqEPARliIkwmQ4aSSmFxx5hrmnJjwH6dTN/JM4GVDj5G0jhwDuhRkRMBWaI3aIwnmBJv3BDLxbvwPAWnm5NExUy47j1x7gsG0AuJ/S4c98iHEOoTpLjSIcAZckXqvIiA8cFLz3mVMTeyQXZZlc3F11W3bOHNQ6NqrwE84H7xT3BEU9sm8QHjw5ttEMzreTB2fVE6+G9/MGuLUczNViIqq1Rq3Fsp7kdqOkuyHjqkD8plqu380NdlZqXq4vc1mqNEw+Rr26qDjVW2E/SL/a64/rOfStqH1BsZ71OFrSQtXjVfO59aEVzA6EFOPqsyLm4U6aClKRK2RSSPeI9ic31GU2bJvoB0B2B3SY1TOM2gsgtaUCLA+G3DKFNKI9KFoWaksIZZm1LM2kYMgPSksnazogmEyLyXczEybQbxavSmqO06o7D7s94uKoKkZZjophmre4mqegPlglksFc6IBwCKw6deQULlJQngMuzRybYXlJWg2r4hI58B2+/+hphw2FrVdf4/bvvWiUlyIKdve3kuNNGCAGZ4b4cqesMUlgcO0XSRIM4Zp8dbr6rtxlpwkDW9Qbnt24Xbwk7msgU5Cs7fNdR1H2D/u6zu+2//ew882D9e+zcQ2Gf8W43fiRlq3r14FF2tthYixsNTLRqVZIjrKog327J1nsmGETBGyGgNPBkDRw/qmGrtUCo++hvgG8cSRsMAb8AonFYcnWIFEJ+zll4MyeVMHcth/HXFW6H8mKTtsiN/1jyKeovbndnIA1DtrAGp+tbL/oRI5vp/Hybph9chaWdJGU5N3q5YIpbK59DX5cDkajKGikGIUWITeTw0wxClVfX2hEyn6mz+e244tnK7EXnfAblbvhg5QmciaeeIFFcZCpR7nvlMNh52HIQjit2m3FZ6O32/YzKOLN+8uZYNq9lL50oRI9MnIEzyzzWYBmHA1nnGZ7HccP1bo0Ip3vB319yPL9T/+v44TPCUggEZ+WRRCjQ1IGz+5NxUc2WZDqRhhY/zcd993aRunrrRD7RtHTn6CVDa4qM14XJu+0vfXQPgqBfIo8G+zmBEyxJU+yQVMs9APIM7BIUGfqy8eQU3rHhrvGIbzvw+l6AcNB5+nURnWTzFbjoX0XIs0Wmko7ZhxBSz6HZ+XwxOkvLygDaiV7qKjAfas7vrJhWaXlz22HOpw5ehMHRKXakadxmGtEaf6Y6tsyl9hrSioWayvXFKbW0UUjD77+/jABHh+xFxMXiwKBKFCw+Ra1rCqkqGGAwZSI/rEcV6QRAdGIxFaV4Ik49rO2et+oNsFJnDJjkP9eRZEr2+xsVRlrHDxDUj3JAXvx6MCu3kbXd30rbY3of6XtAQbETkn8ahwi+sMLsTsl8ydxisxB/r1iE8x/UZHSoTTUOGnfhchcEl1F+26Hnwjsc/3SN2pbUZyQW+yScZekpvT87weKRFFcolFrvfok7rt4jAo2icG9ROBmUTqKQGjjslPciWX8xMcC0RLZjkp6+q7S3GJ06ty98IDFahbxDtQvX0CEbf0ZTqm9PwEiJ3+5UANRW35deIiTdrqJNfE3hHc3xomr17Xl8daHhpyG4fiiZjU3b7K2Iput4Xipk/l6BT3JB2bdXh9vX+9rG1sYbP8w4FDTtZ/R6P8jIA+vnEvAZxKJViwF977wu7BpF4OnylTzGl21+admykvTi+w6zjgZEn8EswyDJxJV1WX66Rwn35Mo8zcgl7QssnkJE80rg5tezBgwtjovR6wArtOyxpfKYzt+H/O2jR/OWNbTvQa0rdYH4Us9G5VXPvQ6NMw50tjbewzrjz8SouILy9CYbDy+lEi8CTTvfjpJnLyFaGpeWrMFGTpb2XbRJR1kG/Ei+AAIsN2JCeIJZsd9KgcP7wykcQgX18InSuKahs0Jmd7tdAY/dLl0Mr1Xwalgg9PxW0AkJ56yHo0MmTix7R4/rL3uzZE5eQvV2dbVUlEKMsLvXvwhTo82JSc897aPjfXquzOdsGy0c3rRYVqiqV2Ei9M96P0WijDCr9IvLp7PEBkkCIvAT+LE10+cqtrr4Js/OHNgg46cQxUl1kXYZKms1RifzGun54jkp0TSWzLxDemU7ogT6W9Mp38bWp2jyeue8DhoNXDgt8Cxih/HtFffvToKub73uq//r0NGhKXMTvzsqu6m3JLSvtLqR8Ay2+B1+MJ3fl/R9KzhWf4y4qc64+yoTbsmGCL9rf/3PiAvvzJL+33n9jR85nnfLuEdt+wSXliwSvN5sQbqaBG7BzWeZjdmU4iIwTXX91xwl/fUDbdXex/vnepMxg/KnwsrliJksIcNb0x2W1gqnfPkgYqTCwtarKaayAX/kuy2qF+q9plHCxwQkpKTXZSqftA67kPJRv6CO3tVzhobakOIAMrSL2k5aSsB1U9Jzm6i3sjR3R3eVJQANEu637UsY8+4ZfF6fyNJGbXCsSHxjKV43oQ/aS9cWJAmZSULXc4TF9X+7HdK0Xc2QkfHq+eXaomOIYi9L96o7FrzAlo5uNhKeSv5X9c4xOJ+7nMm1smS1U5N50hfk+jcQm+lVBSQ6S1dg54MQDJ2LP9zYbeqSoMeXaDKLbafQjaMQxA11YDamhSUN2Uc9cjY/U/FaU5Bo1yldO5K6Sn4tB7Uf/sDQVornmPBCQgFOpEt0lt/ruqGV5qDtS9949MNHZzwP4lhlEPvvhTSQDe+ItcqHDcolNkMzxbBr5EMvZTqY/Cq5Ob+5JylHKGNw1cGcdk/05XPJ93O0wn5HLFHwqVan9Apf+VJvuBzxBypySLji1OTgrKAVKL0l/J1KQVOHXucTK9NDKKI6SQmk8tMNAE648g+vs5S3pnk7GBPxmYVBXTaHweDM+alSCdZrPteTZw/ODowNroglRTk878unUyH5zdbhNuVj8X6itbD1kJyWscHwMR8Tz37g+IPVhd8QFi/bbJDSBqf2x9wz0UBr1eFnyQNgozEQT8s2JpF/zZUmi00V3UcsRfAJzhTsnuUzfzE1zRhhWQdZcogWa2Xk2fsZ/pyatWU3S+7LaKJznkyoj4FFxbihoZqwodKBbsNCKnaYST9e8CCdtf7zcDTLrLs42ILbHZsqKClL7I4/9kU8/rS67H1eqc9D+nViv2g6X3LDDl4a6dkfmxePZIpzm99HzujdLzIcO2UXjzVT20aul0Z/+f7L8+uirOwq/W58PCjILwDjmlEsvQaZWbgEPYnHdu2KuIICJ+ERA8g0X/vplVu/Z/TnepQvdNcn8LqQkTsGbOmahI4LOzgeTa1eolLzua57lpEwqwC4Aj/YZwCxtTmUpaKRO/BFrZ452qyW07LsBf/y3NTqF9yGTwqb4FfJPPPbik1sItDvpybOP3zabPOw88cY0W5W1746vP2ijpF0XH+7pdg2j19XbpQhRoZKf8HQl+ukwEtOBpLQ/N/2c7rADalLdDmLqM+d3GIXxDYmcsvkq8xKT7EQZfmEU+mza1UnIRFS7/A8x6flpHrzuzpQAW7/5LZFhv4TBsDPgmkGboTfO/tyAa6C6KFV5i4z0BvgTqA1aDGV1W9GIfwfzqmArceNEu2ddYVZRRIXYRGKfMsKt5WIXvDieFJZSZAistvlk23tweTKUzK54gEzDE05HMgPqmQtlIhBNNlLuEn5Npze5ZsWB8+2czGhBgH9gZpKxtIWMtl8MIirl87TPC/cUgjxr4BoEQ4du1ZdvKJVSxO1kabWBgoiFkOEDxaSowSBfITRWuyk3MDSgY/O/Z2TDOdbG4nnGgmQo9nEPJHavF3ClDd1sQ9ot+pXuTjh7HKnu9EAUcWftj0F1Q63dGeV1ug0AYrFSdx0S0W6Z08lp3FQlFNPUCvVilww7ZZhjHAkyxkhaMQDSljs2ANG9nAIlKwXZgKN37jG+Mcmbck8zlnzcR17SpIfoldzT++0yFIfBgAlAKCNa8CeezljkYMpKDQpgYFQO57+jX02GaQpX/+T74yx2SBn6KblUM8YfjusaIHC5s1bHQgx78DaCW6Qg0+bX5Q9EesQPx+iQt/syK3kCKMg4AWhjkAhU4Am9gFb4wzwsRUdOM5o25sbGYcIn2FMIrPKnFxluu99xOgMDhehWVTawockg1DrO9JpB8WeLrZHKmJfzAZ1faAzsh1oEQ4DrSXn5Qml1JLS42w7w3wUJJkRQOUn42lIyHEIL142DzHhnLTAF8IR50l+UA60pa6p2yETWOolEXsXkzgz4WPOLjnf/ILd4ur/h2YZoB7GAY19dA8/+BxGsH5t4/Oo0wuVQJeypE5rQKogAoiFYn/Gd+b5Mi/urH4zopfwDK5XgwT7NIDaYyPVvW5zpMjR5XbDhoxX8sptEPqzFdXIJMF/lz4K2crmIbF0TEYGQ4jw0jIHLW5LcCJ4+KxS8+H54jK52O7mdYAMF2WlsZh+X7lSiQxlZy3SYFiXTmcGA2l38IFiTU03ek3yae72vP6pxYTI0npZOaKD3PZFRHZ+uFyu1qb9Q8lr2OayvoD9B+UpM6nDYkFPpw+aVoP+yYJ5gCfiOsLjyUeUsZKaTbsCB2rSMEJMSj8wYp8xObuXymnFBi3tWRZOWSNTZNdEZuSbd/Uk+3w3L2heSJM9rF68IduL5YkmCsdzMKRXRdWIBeiF90SvUMc9s+TbfjKdVwHsDoDLZYdbU5bFjwtObW4v0JpDlSIaQwI718ySk++GJrIy1jXnCU08/59k8rjeN9auSwLBfYXhK7vAvvvbZfURPthdgi8TY5SQjnJJbhhPptEXCh2IsfiHWijQm9P8yZO1dRn64zi5xsoAocmC9stSxWB7V+oEK34D1q+HYfoSWHRJq0qJbNAt60uYCGc6Id7JROkBh9rwBwUQhVfarksF/DdpwK6aUdfEbJzbOO99lz4tFtTkn8aSFv4f0l/GJ+PfYCrIxKdBFwOGf5IzM2JhF0t8XaNefQAPfUlkfRTNt2sXIPyj0PC+mImnBiE5rflbK09IPowDcsJ82CE+PSoBjrCo6ipRkBWQ2C51GtEtXwrbl3T6uwkozhRpemKrFDVKYRcb4CvZaxAxmxY3vkemMFxykS0APn/rHR8AUXCAJ9CZYC8K4Y3UDgbxoskCUlqI+FGxyGk7cltyVrO1pGlqAnpvDgWHtt77gvHJQzNbcnhe+AOBkNmX0nD9K7s7weYU9ZPoRz/MiTngVUzTGaDhkjWubVSqKtG1za06FRJSGvG17xhbDEkMs/TxN+pgqZFJvAhyDkC6SN6tvr9vrX5GSljeyhem//7PwTCr0flqRklSkByKjBrdMZ275f4uvrFcVA4rxbkZmOHGy/lygQWb6TzKMuE/jgUlYdClePQX1C5SQFPWqQ5/zZmxLahlNf5FAsHqxHH459+cJYgcOPJQXefMltalGQr4oUWSeFoGFJge4YuNFCoXOm7leq3lxTY6eiQPfHol3DIXhjsgZe8+MXe8D8hUI64f0sU6Bs0PAuO/LieGrWETrKSPruATZnddBYxJzk3QJciEH/ow35ZNrC5+HP0P6IawqL+Aoe8uoJhYejFXEQfEaUmYwzESfT4+iK4j9X55B9xmBWjSX5/RsGtXVqov5MPjeD8amGRqRrsmw3o8fWMRTVx3DfF1AvyJLNhhS0nq85+9xa4j5Cwa1S+pSXWdRgh7xUQ0n4dF/3ZSAKnVV+9GLmg30mPbX4cFwmwEHB3D2T1SYvrW3gJv8SRQ/4bnBX4jiUhvwp64q8HyVcBsL4ycJ3g26LjZb/7khYWeDFyP8XxwSUDeG7on9JOLEwyPrtq8NOLQXEz8dsBKEzFozrLbtyF0VO/IONaREmYaAaQfvHM0j0d7fmtkcvT4LPE6W1gQFC3utyldWVp22Iy26mMi4RICCkpj7rcEEc00sQP6zrJICfuinaJqNXubBK/kW2VOB0nRmdrOdWoYyi8GpT2/Gw2x1Ep4EZlJlG2pWJ+jwJ6BBJ9msgmueAOBpNn9XDMyE69JNRSgMIPzN5yfzwpz9gYY1vL1N8WjjLd6Y91NjSjYX+LjGLewsiSlfNItrKsAqOaCSQslsucuj6+Mi3rqHEKkkK+vEs9JUxYTTj+QJiKiQqx6Kjw/5BEIUNgqHV6BsL2bIc171dKvUvBxyRYPWc86QvWV1tjDLbsZgH3LQx11ueP4jjN4Bi9MiCj9tb2VrHv9Mbbe31tY+sAdGofC9Y3SP/moupO47bh94+N9JAL4latGVuzMS+0MqvWSLnF2bL9JQKqi2wFGTIYv5Mw9bAalgnDX+lT7g4DxJVe6N5rNtiy5mhNCm4XUaZPpCE8olsj3WONbuUhbPbP/dxYLocekEYoVavpX8YLEq9y5dAA52GXOlgbLFaUYSm50Zx2HJOtO2eNWLVhbcSkMTZ9bAHdaCjxo7XsulTJoIuQ6FM5lexTWAkbfAFa/VrcxpHvSvDBqHxAsak8gA8zK1e1Fub4C2KJ+SmvsKgHmd1gpqsv1SYuGxiBHY+UCyL28kooMoB99dsamuTTAy4Cx6W5WfnoZ5f7baovEKn+ZgF2ujjbiWftgtMNKPSk66V72tvzKvkJLOcXlyr7k/5WSJPzAoUhg3DU10iygC7Q17j8/VfP9XUumSg/3v70oCPlKTjY5/s3qG7D3KGgNviaojH2+3Hf5qcBCt3pBunujo4Kf1m7EQkuLlEO2HYudYLr8iFnKggPXKLm/njXuc+hQ2F+nOGDzr0EGQsXjqpwSUuxK7WlZHK76cIlAtnS5EdWW1+qh6FNcOw46vTGCcDRL0bFOrAUt72onB1fW9WNpACZdjK5Ta2hOaIg+iOhQg43YiDBQqeK3vUE4N05R9kPZ8bBUlbBqtaDPKsr7kHoQ+XxKVFXMzalZ80wPoHkwJcEEsCZQzMJvTG34sLaz+t3oKBfXsrovClZzP7bTCisjUN39WSnOMuFevZtMhqJgyTGRyyydyiutx+U4mvzNYy23trnW5IRnRva0wmVS8uWzCqU4QPvZbNq2KO/vwXQdp5/jAA/HrcgMr+zseeQqTBLCjxAOTVy7trYs7jvnpqIsERB1zSV/1aKNcG2YAOmmgopd3Z5RO4LK7GhigtEuvSclwOCU0XO47y2Nr+E0bLPTq1myYQHfSyRmfsa06cKhvJ0MtJ9rFR+8OeUW9ECM7YsBxcZS93mGP39z4T6COeNNcKzNEJiNEuI/QZNApD4gYa9jK9bxvSI280L/OnI05j13jR3fLvgeok3MXl4LsWsrfofhCLPaYIdPaTC+2hEyXcCUrloPfeTS0TyKmEWaJHvt7wPxAk0OdheOcO0XCe5908fm3gTyj0cWJOlt8HPES6OKp6OCt9fX26uk4uXyRZ2QJvGAgXa7FhDSHs5BEcW/ChhdvCBHbur+j6yNyy8sytiqPHZtLD3xT5vNzfz9zknuZ2j/dtWZP5+M9rNaplLShpd3X7W7Pi/7sOFy6MyW2+DV72cECiinFlzNYDdtYZldLcw0Nw3o6eIsXqW1oUplS/GIQ2Y+EcQPVMUpVRdLLtjyK23kGW7oveY/gQH0NLqyxCbS8mRRmb8GVGbYK9c7hUvsLv4wlSENGwLYwh/gZbo/Dlx/wXYFI7pR4RffCyLidXRw35nR1i+bk2FW+vo/V8Vu0M3vNZFwexUqcQGaR5xah4mnpN/1ohSlpXlKp28jwT5mYbna+7e/SslP2uazf4NCwczBS9xd8PWxNh1nB+42J+hb8M+AOD6E7EsKcACcvSjZXaNMxe3b9G259DAFmLUpsnRtsoSHlG7oe5D7du/JzJhz+5bqAkY+6HCzOR5p4/TLWj57Ri2bV8PZkuyzQ6PyDGMljvUjgOcZ5C+RdtCY3DtalRwzYsa/6EEO2Zo7N8IkZCzPdGFSZ7mH/JzWc5jvbIxvrSj/E/EQpTUjiJJ85fuvP+jsNthVy/SbzosgCTIqN2rDF3NvccTqe1pKvNanoVOH4be/di1Ljn1M4IHaBqKE3ROLbbgHLY58XTMV/rmQjAklpRNGuDkIlk+BaE2L/HOen9Sw/00P+PYznkNP1qYu1nd+U2baunP+pt5sFfATxrvKG2FmaIoEThNy9HefZvhZQt0qsq8W6H4AJ1KgchR4ba1H7OlBiOIdJargjehAg3GQn2IBAKCsIhlk9/rWZun4FCfZWsrn699h2n5jXYoGfnz7cb0bfO8i2FnMH3V0N/B1KGUHfh/aJ+Y0f6ihdTqu0O+d/UMUXAgOPvA3Q9Y51TyEzm871MRI23z5wDJFKDvB6bQmhgoJSBhKyxrYf7PAtovMfZHnmDGHd+PB+Rky/q6nbhbOogw+XFHKJBzMolzrS/giZZJc7+l93Y8nlTywPL+9kEhEwjgtCLpqai7fxq2JIzAgUhPuXwFyLIb/Q+LKecnEVi/rcMLTeSlss6GosKgsPBw0pHrUN5ZFWcbS0hcsx8M00LtNDp5V9rH+wR5Gfl6eGxMzDcniyBoOsiGRuihKJxO9SgBuAIY0xZzBkrJbn45C2W6NmBH6qNyhppXpP++ZVVxQUFffZ3xr4kDjUmO1LWih01anB/Ly1wnf1izwcDdVJd/Sd6C8/F3/D4mocbsn3XMoxW5YZkINtunNqYtN3v4eRIlVU+nXCaT9zjD4hsghGEBW+DOF+ozqwrSZbIcr9Ug0gvdVusdElJeIrgLxnyxknQTRbH8QFk5FNZnLtFr3CrTerKXxSFQidM0t1xtqNDDPW4dw0OlLaFRD1CQLKqeQVjFTJSZgjRVUiqDrWdKzMUG0iNNhlJjae13+o3fgd+d5Xyw0vEFrfNrtGEizAIo62y6kYXvs+ASQfRET2dje3UIPBqOMscM+GZ1gsfc46RXmJolYUGnRWt1qdTrly2at5GispenmJUOidTNvevqrI+V5/gxsBhJXTJi/tayccYpHT7Jn1ebn2Lp6jeleRrDirpXLs/9aefSAoNHLWZMEBKOB/+NByOmUCxPunpDXC4Rl8JXmFNzfQ7rYLvPInBbSHkK2Tu0xun13u7+UKlOkZzU46lS2zAHIFBEPNoh2A/DfVlNfJ8odWrU8NaZ/86iFR5oKILnF3mSct3LlBNaCZhMqV61hkVxcDSWina1TVciUGQoLTkVhZxDPA9PpPSX8NXSVApPxyxa79UC6RxqnkjHSWVQmATVkM4q5EtTxAuiXJlCbOBIckKqPcIkHnxNPQtMgK2s7upMl2+MAR+xfPWs3dXb53TkBpctHc78cfPS3KXtSYUZfXZSNzFfLE0hHoJNOqU9uTaFSulwOGQ9QbuiPdGO6bAwP05ACRz4Ng0nAsL9DKDcAsE+C0uMJXeueMi38zEECKQDEv/FnpDhrGjIRhjiQhVN9CObJdPXuA+cuQEDtZbEo63EwgTcNH4Be3t8IpShp5YkQvv+gqCOYim8rLKQTO7HgWj+d/SDVPx4JlOYOhmF16tYjdPQWDAhPoLpSWeTAlPplM98ufpo66uG1Jc8Sg4eqC2U1CIQPRCchM0WvQhb9S8V5QInZEGJVSGNEPhBOM0sEfKv08mQrWHln9IoRyxUVt3tP91ZUZH0zLZzud3M2boZxNj1S3D4FVRUaC/THENGJ8zrSwKxOK0MeAd5XfYMhqgEQAywTLE3GPxEVxxYQGula1lztjjjrA1y9EAbk9kOGNnHMBMfGzjCCN4D/c9618EntMXEHv/hh+NxMXfnOFcnSFSS+ZaWmWhXKCL7/t7zszH4h7/ZDB2LTAf/0ZVIp/ektBWeX2Fxpzuf2xGpP+1AduYBXfm0C/ZFGugGKveBygsoSy+nnHJQTw2IQCEaDvbz4H575r8VqAoE1jUcdpRtE3IIRNKHFPSWrDBCIZi4hsaXOYMcVUrQrmOQdKR1t8RUC9cQ/fhtbsQ53T03huTCb9rnGdkOPZOs0+66bqCauGo+xtEcdoVjE3H4RNIlCnprVhihAUKsZfBkzgJ2knnLs8qax5bHj5cy4mBPyMpXF9t5azF7MdoPlfL7RurJA3nyiV3zbq0cl+BEYxOsWCgBQXyHQPlnsR4wQp9I0To4DeK78J7YzaL1lrlGHHzm2qdxdgIn5JdtOLH8juguojdm0/UIGXNLcYi912bjTBUBRw0uY0mwIV7fnEVYTzx9lD4+mfD+s8/31cWcrK0793kS/8z2nWHfF3GUn75I+nXK92Frb/aTmfM1kjvuxI7zxucD+bS93thw483DhMPpxaTuPVcjDadyCxFAvkIYAcDdafeuGTI3Iprc8P+2a/nnqCO7FyQSu/1Z/rW25X9PTvO7flc0xUgs7B9p5bWmc+HY0WdN11Zewv5N1oaHu8wtsRGHF9c3/0IJGThCGYGhy009ATzRAhtcvOn19Ey+3ccXCLkOdMGaETtF5KfOD6b5px5UmnedQ9Fg4ro6qidAkARIetOfkQR4ZROE65LogZh2Ebb/qqHI6dQN1WYZYlANYmTN0fZXLt9v6qXus6Y7bbfEklsjqW2rReLcNnHZlxLRV2XislyJpKftUspmNnv2R8OwQx1EIXVy+fOKCiDRnag1VjZpLNhuEbbPGZMVNCepnULSCxdbwKRsNxkY0EX50mypROEv5mtC4MViRMUBg1Xyn4H/GQ4CjNzb5luMtI5n8r8fyw2C6dD/PDY9j2NiJ0SP3q6FYEqgikA/vPyTjz8Qq+9/fAW+o47qxN8JSWlNSWkK7m9zfawj+jQfq1GZxWsGfdaJH3a/TxI6VXryjsAdjNQOHelh23cyLhR8HCRtA2e0FvvkBomAVkgC9WV3nQbBHsWJsUOkbWs+XokfK3j1gPJZI5R4QfcEgf+y+t6Z1cUfF8TphpHrLuzJrJisMNy4MPhx/8mHDtzqqdKdT5wjJGzjrknwrMGt8PVjrAd5xvFrfRWKLk9dm/1HaWlZ2aZufnl5u19RWjJaVuL2DP/hzM2r3lahBnZ99bh7UvHBenhdA6RsOTE5bur7ptN5MBd024hvf3j43IPshX2G3x2wqg6IzqEhlkfpwC+Rxn3/6sFhV4nmG/Ahu3njSY1r0FcoNtclz8pED2ygZPeULm8Z6ar95FJPY83y1lpH8lCRT07qx0ltavqESCVtTnVy47s+jHREJB4NewCKG4iBSvW0CqXHlWJN37wk91hB0JvuV1fy/zv9BMpwSKpRQu3bh0uEF/dHI7mkTAYbc2x8JIbi7g5DRKb5+4csqflL8v1yQVWamxf2ZDNHpsorUSSZMt3JrBrz3xN0DRp7BYn+F2ugiaSm38Nm/SZBkVii5HFS+Unpk/CWwkbi4dIkIPlv1dnQxc1lP10JeVra/z3BGududOiUrQ0Oj7/Mm47r7PXl+bpgy1z1ee/uht/g/5wL5RRbM5hLpCVSt0xqYmPY4TeEdGY6l75TqBTa/5toZfEV1oe2BIXaU0CT8v00JTUZD38WSYchLmOZ+RxMVfx80sE5llodzAnNbCwu+18ok3RqOSdy8jEHgXamRKssu+p/cdaZdM1mi66l1mjQ1xr1zRaLvsVXrcyWSwqTkiSFA6Sy+H2VMq+BRbew2AyDkc58aJBsfOi//QmalcdNrGEihvdc9OootLxPPBT/gkZdM3TxFpGTch2HiZmf0XX/6nwH+w4KeQonyqrRtV39jRQrW0zEkbCSwusR6D0ZkMgmSD/rOuf6x0P79Yf5tO846K2araxBxlLkc3fLsCqJXmhXCDkVikRKicGUuIzX4MWPxccbsMZkBESPUXzzNPgkCNmu4HrQG/wqSAAYaD+tSKvmKtvn5ZA/zHpV0TGN6vlyYsUrrBoqarxuvwOiN+mAdj3xvCiwBwwfSgA3I0hHN0fnYhJ3Uii7Pm1PGv21mb3a0jcoMudjorq3HNwdh+RhMCE4hjT9IGJXKxwlfHLiN7zjoRUQ/X0dBH4GDCqCoLrEirXvUHNQEFIxHqt9j2L+9JqcZV9MMUJO/6FvQRmMFiIdSiFVUugf0EHUuA9jgFBwzAexirdXqT+9fjzyru+AAa5ATyHYk5BSMlxcP6kez7/jbWDdHMiTRQj/4jYCLqZNFAf2Em+9GEE0lIHBObWXdvO/0xjIXQ3/qKQ2DeYJBvYfZU3VSgi1iwuOTFs5+8I3NFcItFE+Qhu7fJv0TWnfr+UcKRjrBGtqY10Kr9G4Gb6hIOaMbF7VLVD4B8BZlacASL+zFSSQzPqThcX/T4tH0feSv0VC+Zd2aYogue3KUhPZEM3iiFnb59/a52nzZwLiM6hmkCfqh9JJvwoqqfrMnsqt9rDIpXL2lBePMjHVS90BcAld0PBIH9kZm9U2FkbaHwszbqDxl+fGfh59ax6Xk6vLYpfwTYqX9+dgeeOTbTR9KlvstQfdaERY//bv+cI3WAyCgz4F4XGNABJGbE8T4otwDTWsfjWU6QdAidLSaOPZ7m+jGdPE6Ufrye/0MmXWOAHD1fuGgldYKcspKVmuCWSukYqnCZ2L8hpIWHVXZgjxJ+HTHPzMtjz42MNtbAsk7lDlyy+N57g/sZjno2h6DpHJI8aKeZmyWmpVqWAeVtpZPmVR2ZUUVvXdfZvylGfVFwHBZYs9Ora5pV1+9uzEJ79xy8pt9HOZQfTqUaem1XYdMbPOWMCx1hundOVbF7VtWFi9Z6gs6SbLm0CXddl+97idj7U5FMsn8fESkCa6O/1+VFu5RqxfXIACvBiYxVkfnLi5oV1++vTIJ9c33HhZ0zsC7GkxVtaRxRiyWQN5mtHZNnRu8wj98349dRaLfT8oPhKH17OoWGiozJK4lTuQeIWgK8DjKmnFrqgUVUO6tqfC8T4H3aRyfzFIB24KsNxPtrGb0Ngj5d/X+uF1Dvm8UQFVMqFOllpoPNG17vZ2yV0bhVne3ObdKnwg/tLeuduGoy2aa7iq1a0UhDyMTGgH9qeC1cT6TeYAOOG4unIegg45S5d7vBVlXX1hX3pxE039eFRSsiZJzcAHCS9YGs/h1j2etEgA5CEp5UXl3MoJRONdmPqG5DtmZS+I+N4oX2moq6wQxBhjj12OqIU2Bk4EjtQcSM2vmCluIsFPwkSbkDAAzO6w+eC5vwgV7MtGIOtm5uVu7KCbf3Vl1SDaL0KKJDeA0/10GzsJrXz+mU2sqb4PEhs5hrSUPcQsqal+6mtivQQcBU4MhKIRdmxsX9PJNawiTS/y3uxV4z5mrGqKtweeus7bR6zkFZcyvpUStP7c423UC5qSNBJUON1S8KKMPeln8JIDzO8gYwgiXhTXQPBYwhpN44NlSHNEECemN1S+zSCJMAG3XhZVOFlyMsQLOuvA1nLHqGhD0dqLBlhA9VjCGttdPsUkvy/FJefieZB2iHq6V9Pwmnkuwqi8wmJa1I2rnbKvPppFwuiHSr3u0iQebjER14CkZlJziDJfGJR8OVywMosjv4KnFojaCjW7mm/2Bo48mO9BdzyBxBElXnxxq6S/KCMz7rIlkeFdJxU2SJmBnWKcd4gm9Tn8FTod31RDnrKuvr91SGizcbV3Kn/67Bj4E41Wxpx7wgY6a0YHRy7tPqUOVa0vTEH+AlKdmcsR/gqD6tJQZN4r3nffPbGLdo2BVxKNh0AZ9iY100SmBiBnCmVHoiqn9e3s16QzmVFlBvBu8HZGBju9C7JEvrlhJN6b3OWqf0AKRt8R52IlX9SSoAv+lkCSe3I+uOFhPmIKiXVE7gr6ptFYc55FpBCC+UXUp8U2n3KZUbzAZmbWfEWzJWvZMTAUG1HHpvbVFNkUoAHyBbIbB9aoCjZ94pdVbsGYRUSw3s9MkVWp4gNcCHE0IVzxxiKfJsmywGwRLgkalXnqKhBne7gxA7uCRChCakBY5BwZqBeD/3kkepbL5HZ7Kupj4KGY9WemEUmVCCSIkLIwga9CUpLczDjeKK4lWRvlCwXI2cxsyLrqDGadGCpw3kFMNhGrJHOTa9ZO5orwfNz/XbnhwWT3tx9HgvLXL3N6u3Rkc7JxUWjTubA6orKH5dEIHkz3oJKhUHZRSVJWrUBoXXfzheiwMwlzwFFp4LCXLaRB9mGveQcDyMCLbjAqME7GHZUT9o6i+kGu4B1upQikP/2t5MMax+4hxhjlDgwQ/3S0q8u1w9jvEvnZYIZPYyeDwvW3rCjdEnCBEORIOijwD6fmy8hFkpGCRNVF8jdRDzED6mJHybz+Ulf4jrQqVljGEBG1VH0B9YbUPvAmw7Q2wAVf4R7ABsCp/lzoAl6wXcRRhFHqSl1BcBGiKRCcxPvKkBZoeUWqJSkgqKGG+ogQOdaoegyPYcsgWQ7D4VesW0kBoX9GJF7P8do5EuQVnltXX9fHtRudkEHv0KB+In5myT/ZB7ge4Wqox9MkBpktnFbDwq+xjbkcWIkqjvdYuAQkEhWZJr1XvjR+K5aseWO0ATLCJiNVBwnq4LWXkWsmG2sQ+J+5vxDjye4r1kr2ZBeUeGjc+5FSlP76iEu+iVAfhFPILGixI1HCyxRIi4OQZZPoVmdbrJlZ0i9l9DDtJkF9e43MBarFsWsbA0th12LjQ4MG9v0j2nmfvmOWe8mWu8sRi5f1X1Uh9hLdlRUerhBrAyh7t7xL2sq2JrBOccGX4QsGIeMWindFv8E7TFP/7ioVkWEp9vo+uBuiZVjkTx6v26zWdX3Fqjyvvqbk9ytt/M2Ixtl3xwYTWWK3KUQqXxWwBcGdt004zfnSfb6eh+fl5HUvP7dWt42XFYASvEhGeYxI/qwT5bmccwnmPWZPTBDJ/GIQhRGAZ3RRvOAzey2OYzkDyk84krYUTN9TAlWv+XpNnlZ1XzM3StBFnYpVUOU3QJUF1m8oZ5YoZnpzQ9iofpPJ1N8ArghlwrVVaxOL1tX2ppkxz+b39+CWZzfb9qjZbJkZnQ2/lM4Odv6B0cJQKOZn0993HFWNvIV9vsQ+5xX2VtvbW0dVkfPxk/qCoOYZ6ZmiYj959ZWkbvvkXQDv+ev5y/PT7ZpESkkDcb14div2gPgO4ekwNNoXtoEPQ1gukIVCdINmuwj16r9m8oxlJYge8G2JAGMMvKqo8E0XotqfiLUuzlWV6VxzTHGmA39Rfq1z7h+y1Y8fckd9mQvtWxrRQ3OjTwRf3PUaYPSpKOX/EWpTtVMiMYgsFaooBnG9QQ+uBNfX68sTww84dxGtw44Kr7s1jmtPRepvE/mZtVQhCHK+s8Bpak8cSgAGsAgwip9w3FBDsNHPSUrQ758UAlHWiYMC3EEFtVv+L5dyW6KTEWxQ2cXKr3FCxU0f/IB6CC0IM3uLLPJWSUAeztCMNiNUXjr1grPLkTY2nOYjsj8xn4/uv4/vY71XCOW249yeCGS/0AKLccy3m4NjAEQILcSdQ3cVjv1PydgvXmJejD0Ea7aRv+yTncVFfyoTEMc63+TrlymxIOb6gu2WiJ8Th8Qp+dl5yAYsc0VyRmctFsUtdVsNIt/hmH/7fvNOjq33Q6nborcCsZig879+c4TAdx01UV8lJ0HoL+ZRJs7hOGu9EHnt8iLjdMFW2+q/p43o76cVaNBOGKz1g4kldhkdnx5w0N/8m7jg7T7ZTLEkLtg17it4sTPvCS80lwMrdv7GWUgkVtXde4yffOPvRPh9B/XLN1gSjWg3upppTtVRgYsYf9lzFJR9pMR+czkHvYM5BDErJqcV+awEgVtb7FOz7rcAuNgvXVa0i39WlQrsUwJtiFuXgUNAl5QjfCcAfkMhlpvNAKyPnKPtQkyxZRR1VdYqoJjOf2XDKtgSIppUb5i4Rc5DMutHd2kzSGF/edDvXFVJwKfSNHonBgHs7g+VlFoiFYrRcTJCqqkqDNjVDetGxGQGpXcBIofOlWCtxWhmS9RWcpmAcyLm0tD1UZXwQBBODy2QSn4iIERlf0jG7Vl1T9W5xIs2gzT213Tjp7MuQBDYUdVrSFt2Dw/9te2vUrORxE2USjGOjyWcmpb9gJLmAeeBiD2P0PI00Km1HKLBCcRDYFfMFtsSOCfyj/ZE3VT7uf1Rn5vafzu89bLc8GA5D6dgCSTepcMe6nZLpY+5USbpeMp052O/qOLo4q7XLVrGV5Wj2eCYxdVWxj9Ra8V4skZS07I/UNa84LwQcbUTdHk60KnryhANTsAfCrsRtsSXwDmRnwcm6w3NbO59MbdjO3uvevclIHjRao/Eftxbp3/LdM91edFmkBn7yyP4uN98yF12Jaee7xmJwQAWd5zdUqse8VYnxy0xNYrxZI2kpmV/oKx5wboWP/kAM6ezc6fZrA7R4AT8obAbYUvFEjgn8o97y3g/OMqvxP3L/vl6TvrkeT0fu6YG7fuBaftrgfBUQj76JDYXY3TzF7vLqGvWtYjJHlpJs0vm5zkRnVKXk9RvnP5N052KOc/wA3LD/+Jg+q6M7S1z4xgK0LetsJsntCLy26/cecd5J2LyCLMaZ7aoAqev5DYrhOiuP/g20u5593Q5bZ/bx6XZsHVWqyL/0J5jrr0V2+0Wnf5t0x3eU4J3DAvITJs6PTgv5bpu9UMDBxd6em9IaSnrXevRC1sMalr2P+ox7znvB1Gu/YY5NHCemMYlrtUTzKrPGK95ds5k6OyNgnbKGlPhAOMbkNWvNCWoX+uX2yUd0v4GOG6KUBaki042SRufPumb2y6l3h0F1b3DU6o970eG10OYiHPcIPme596tQdMxGycdPDsfM1J1b9yyt1eGbmsJv7g7a53GXCzvAKjJHYAv87wPjX0gXsTRoj6DDfLBTy4+fV+vBKfX0wu7LN/X96snFRaxhEiZYzc+Gm8tU2Af4ExSjlHdRWYcnGMCt31pEpghL5KYGGg9LPej7WciRc9JBclF6kNk986FpfYi2AL+6FYIwgzVpxgDA3HL1YciFN3j6j0+4LKmFnI5vSMXqMplmM8TO0xsgZf3nrFj53oFa64Y9Sk8ZqxpipvZ7biR/cT+47sdV1yOr0YHYaQnur2TCBzeS1na4CypEoMLhhir6L8raJQibYg783kLqqaqIGBWJ6wTkTibgiAGf2HwAqz7MGC9rQR5mKPt02mJRXPg4WfimbS0kAjCrD8SFvtsl2zjaKFe7h7J9LBwiwXXckyJGQYBzJEYo3hfFgKs6oJ1IRJnYxCE2E9/UFAfBmT1pdC5o1jAYX+7kBmMTFxX85CCV8AZPEXTlCRoyXG4FkEaINx77h4lZZGTDlx/GxuYrPvWzhTMLXwqKiyqjQB7plgtZt8nhiw6yoGBn6OHHFTpvwjPrXrx098rf/koWeZGwfE8PGOqGjybj+sP3CxARRopomMcDmczfz5Y1LPX1Su/ANu9e+V8FxMZJadJhyhdjC2fLUOjRxNxpqcTQxdFd6u1ZkNVzxerfyTn5JSQcSfj+3bjisfmxlc8p9RuFMbcGrfN8unn2pAZQxRxWlxHY4J4VNUkQmhKCN3HvkIl26LFu2PHx6WQzw28HxnVxR2G8OQQR7cKDga5DSv4ZM/Y3xUe+pS/4Gu9LDBKqGPWqZvYApEJLzs5BhnnUodXXZSaGhMO6qxOzpIYkROi/ZwVpcqaYL869El0rhACDG73UGFJ5+eGoRC5cMmXwvhyOjraDEKOVYLxg5UorAZkk3KGIBPJOA5Z7AJy2UUpyDIenfJjqPP4+iJLt4JPclc9aQEOhDhBA21nVCICwzgKgA3LwmgiU5SdStC7GU3wNsXSWC74J+HxgjEPapfzOv8FsfK5heZJ6rYJe57rxKocVM8gC9A0vpMYJ0EVj7LLeRXztvgyXYQ7r1c8SZraoi72r9Bt347KtcZFiWCp7eIf/FATrnT8QNq0nvXw2hDIQbmTWsntXfalavwnR2/puradtHbaXPcvTdOyF9nl9fIyPjffz8flnLikbqNrSr4lNjtIGscCXifS4IGJ6uGQ5hHC4mCWr+Or47i1rqZs5c7ayJ5x4w4q0c9dOs2utU1ge3JHLJhONN2Pt7G5mxmM/UJI5ijBCzLQIG1p9xr13QQ/aJzbWM4Xx1NU3y3tHnmfBmz1lRDC+hBD5FatQumOpNDZIVPgqI3ftM64X239FsWXGiMS0lHQIGOoY6vfbcCzbeR6lPLPUZ/BY6L0FA0U1EcoQjgUBcttpnBTGrO2E+cv4Bp5eQrNn6QRuqrXEpaFn8ReJSInIuvo1VchfWipyg5bq1GKz5CN/KMSBauoEWIfDX9tskbX25AvQ+GjOm0w9emx4qOJMrFBcWYnRQ/QK39MSfRceDtDhYS8v8Ort+qnyzybq2PbWt0XJ8q19RlAheTEJjFJ6ubgK6An6FbounVL9pFVW7FRCwXPZR759usv79epa1xtQb25Vid0DdZrtAOhAq4Ex5Ps6AMusp8VE+/pEHTKrVUlcdF2cDY7enw2sZa2OAkkFTQFv1AFyW1aZu9kLCwm8fwc7rPWgP88PNuFaYY+tRvT77Y39rwZZMmNBw+sZBQjnW4j7jFDoAKe5FAwm5MPxcnZ2avqpd04c7H75bth6a1zakO9vpJaok4lb2+nTQmqriWHymPRzUL6PosWbHF7v5JTcrQbXX2vjz3AW/6YJrG5HEO/PUulXz6rQmjZ3cUHgddjQaz0SmehQ4OLIiMIr8s+g8lccy4dYXERM/B4ykkxOl83wQ6KOC6g0PE+zoUROO8CxRHjjHELuTB7OynZF4mjKgA+mEVNpciWXJv5BAWck5nAiSsL+EDvVRu2i4e05vxeq+YN6vAPV+Mh9ckLGumzeAVMTbEstsNdWrfLjlqUa7rOVYsX+Csc7uNbpIAkQQyjBYHzQ1BH671gW2nExY20bKJdOhqb7UHDy4qO/081mp8ACOZsfnu/rhc4wrF1JEWSSKdw/dDqUTIa36Jc/UyvRUL2QpHA6OaLIpeRbWSdCYR+vtdlH8Fgrmgem03vBm2a0rNgV6MKDjfeQpejcEjWO6RZL3C2JDYoy/XVZQtrf6EtvMBr5RxktaUZHKx3g7pMGxdi7xAmUzyuRNqHsIy8Hr8VS1iAqh2QgxH6QSOltHlel30A4Vyw1h7AvKVaTgpkHSJsZtKGWIHIj3lSw39QsJEHyVrK40ErGQJpmM0PUy+9M9APllU9llR4l6y0o+HCOHM5Hx9kuvIAu/f1fpa9SdpYJF10bDHdD7exDOMPy9ifJ77Wz+JCnPwDVS+Nt8rnrM6tQp5ZUGy1RZBiAbTpEf5dCcBD/+u55NFNXUe0yJ6AcE4WA4xd5HsQK/VECpuT9U+iEqKKp4zGuOY/SsuUNnlWZGWZJwnmY9FDrcczEvfD+/ih+AmSE3wvIO7Tuoz9Ucbcik+BV/PKpFxktkhp9CxKy6PqI+Dr2CPlG32tpiO43FoSRePq7YzFXRrU6jmU7qfk3T9u1/PRRtIurlyDfGukfuMebRKbC3u61QXygUc5pEnygMXIQGjOTUBxRNBm4+NvZw0RZAiR8JBz2RNqgW5TwHGf4N5vzCNzm+7piwPOAMojlE4e/r9CxOeY+cUTEiIwptGlsXuHE4vapUcRV+cwz6KedylPlhRYLoRsEjMCi3Mt761VAu/LwqOcumfdi6SPK+C7i77J4lyAgVF9KXiBwRwTS1RWDVZJkCI0wpsnCXqkwZMSiq4JgcLOiv1SAHvPY8nWfbqoWizsiQyROzOi+oTGr4aK5AsreQFWt7nlIxkaUYxD8qwlay1ba3yi0+o6P/Hz+Et78z8OHzEUnWDC4dX8Yh2w5I+k9WH1RkZ93ExPOGnN2PRNrJPuESnu0Ye311fB27vbW/ea/Dr0t+upq60qvbnpzUBi334GwL/4JIQfb5mYC8sAbtMjxGKj4Ww1Ddo4Uy8eUVsGxJO3GgZuOExxwLJ+vPOk0Dcu7UOMPkJMJSgxSUpTNO9d39YU9A3kc8e58X2zAMSTlI9IUPS4/f3I/njvQJEBvBTDCkYoi9F7Ft05YSknylf03XTjQbjoOVqAAad9U0u6nZRaDQQddmCOBWMqbU0nBQRwHbLOvAM2ydRiOwnykRFL9to6ceXn5vvqWBv/zfBGxZQLZDqVgZScUpj3oaRBuURZqU01mWsWVTH8EgeUOX0MMgCcTqn1cMUfEH2faNLQYG8QiONyIem4O+TNmo+2+Zc1BX3CZi5oFpMV12jOICcYjPJaV4xNe+pwPi635TYVE1HYT4VHCjj4RoL6fNQdl8AN4iLfkTacNCS76PsOZXTTMyswLzbewljn3ROxjSRoov19Pwd3O1UW/rPw9P6WtS1mf9Nsq7oKCxGPCdgbDwnR0hSCs7DSbbEtC6RQkdHVhsjsRkehTVfrkwIBsI5YJ46zAo8QCxyTCSv+je+XdZYRlMv6ktnMVAfSR8/BevHvoMV1YOg2Q2qZUH/BKx6IJ9bz30QeyxN8G4RR0iNiZk/mGGAYHyJXw7BA3HfqTOAOHvSSdJEUOJJJUoRqhcXH8eW2tBp1YxHxOsWJacQIi8UUF/yj8FCuwE4W/CFS/FuO1IKNkE05OVoTD8YHm58kVeY86U6tWyUo3Gi6uVckPJv2bH9r+uZ5u25Lx0keBjT50l4IkfExgRvqvh7IWr0krZZPCyM7uYXaUAkQjn3VpIXm3AEdHDZuQ3Fr8uSp8EAzQsg6UXNZPOdcaZYoMBT3N84GPT2thTOAmtoxdwG+vZTnm+27rAzUB8FgeDiicJc8SQ/13+nHeZMMLFCPE7sGcy7hEDJx4fv02wbZraedNvezg4s2WPPpGxcDWWkm4VyQ4s3uFgH0bHp3IU/4NUa8/M18S+a85PExYaJ5tj78Uz/erDspZvZMYe7eclKcLNRFLonxgcxaH4O+XKaukdMHnrdh7t7bTfn0JbGqVM6xgEzKOMnSRVQ/IPXsEbtYQAjJVnsuoTrs5ovzIdLXXRqwn1KL2Q2IaS6tnFwtBvMzHhO70vgkpH+iFiPJ7h8rZPaTUgASxMvAYca9jim9LOYTTtFeEoqWzc5g3tUFvxfee5hUNnyMO9toqk8yEmFPRpCQP3CDCfE2XAvgT8uspq52UlCA1ynrVCR9mwVBGPFu+QvzAox9SeifeBFj4QJzxG7A/KPMduYtJdk60QEJWzJJVrveLXC/UU4QllQ3is61pPlY67htyvzRZqqmVeO3UlXZVdoTmJ4TkfJIj5SNErXktC1qhsG1wHbG27byM1gXGG1DzJWFBbyBhNhC167rbrVonm4y3yV2Jr54nrGz7qsNKiOJM8pX+P/jZ60R/M/29Fe2nGO3chjTcStHRpgtjjb6mS27NnGUbOXurs4u8qKHDx+5wcPRNWw9SWqnUo5trRxdIVSDL5VnhNIFIJkHT0GYZ6ykms3m3TXCkjkrvZvmZgAD9I/79RxzHmmNUK52x9DfdLxvbAHFeosqB0hhkdYeNPgJyytaFTwfwFEEWCpGPDnVQbiprawvKdQFu5FTRGlk1BZ7SavPheAFeObXR7exUQg8DJtVyQmZsF+eNalZKvhxMa4k7s4HVBpFHBf5t7gsIslp6GOS1N0hCNOSFA+3zXsy503puq24qh7VXWAcokKoPg02nlvVfqDjJ+c6oT/uX/Ym8nuCHDI1X3hW9plXZBYW8hj//NIIidMeBdF1JQLTGgKo2JFoTBSb3hZecYvkNrlSzS7Wbnlote7ZRi8rtsaUABkN3RdaP6ZQEkWAOBFdQ8MD3Gffqm1pbYW4KQuwm+YnUHhRD5i+jcqFM4bSbhDCl+PzmjFLHyEoUMYvpIV2lSpMwStgvJVzSi/MdMMTfIrltIfNavvqicwVnXoiFM7bfkNMLAl6vIRxihBp2ErsdWA68pOqKkCdqzPHUiSOed6Xi1b2nCOymfL4sRskh0d8iNlPEXxHiIwz046+JZU968jbvASgwn0UiX8SJxrqtz+eYvbpXYaAcRlHU3ALh6YGyJ0I5R3tfwJ2JPgjifSXf+3CUqO9R+Pre4Gi75DiY8AvaBTUwvU5jYEa00I+IPJWwBaJ9q53yalznnqtQqbNiSmWn/5+Bjz/e/77/St+xk/ny9m09bp2xcuvgm7ol2A/iAZnSbNfbgW8zS0jP8b5XEK38T3p8eXVYzWqoqOZW/NyJ/NJSWJK3kPAnXjLm5a3ctRT7zjXQXme0CzyinfNBfVo1dM0SqsTta6O7DOE3M70vAy0cf7kG74P8L/73z68u7lazh1LUwSuf5A1Vk0NjQtG0UeMRRDp4lXmBT5goUjBKElB6HLgojQDsrUf9ZN1582xE3nkMTbb2LrfOeUxReZvuHYMlDl4RXm2RWoFwGVI+qihu4GQbpwzTmqZQ+P9dMNksbJ2mFRKbxORskDEvC/yLh9yUBQs4g0uqJGYmVXLm1gJ9jehPuaw5j5Eg6xKEiEZikhepzvygHOGohYr0SUEFwz4FyCLoXo0C0c0l1YISPWJ1TAfkdSxHillKTB5BRttaG0vkOqDMH2BIm064wzP2/VycrYsRL9Fq4oMrXLymdW3ON5gLmOJJ1nIqKQShu5AzwJ0rbgtRCbQctNSztUCQ5hNFDP2y04oLpv2IblzoE2VFthfCFhlXiVR3EYfDU2y3myMnlE5v4qXneQ0g6rCQ5QqWtMDCYP25wxHnsmmIAZekCMxbYb+WMkrmzMDYDGZyAYoornQZCD0XeP8MCKpQzni/osG8goy2tDZHgDVB1a1pJoftoA20yG+vH+curbqkMRCddf6+IkS7XYe9w8UvidK/apiAsEBnZp8R0v0IFutZx24dL67GhKqXkjZjeRm6mjXCZGcYzpv6LML0wbVQ2rOQVNTWpGk9fDorWSb+vpf7s+98WvojNdEhgfBqPmmF0KYcL/LPcpPXwdKWX8KTOUFcWCDLJa/WPIGaZncB6OGYjayyLlsc3m1KXuVyOuYkYqYaVqH3+yE6+Y2S02T5TSfl4/IBkcpRQ4OEvSRy7UCygJdKGgN8oYrPVkuLYtl73eC5e3StxbW3NBZdS6XaIfp/urJCstmpHRMEsrFZUPWKziVo5U+udXzuv4odf9JpkHG8ZFHypp+gimIK1Pdg1XqyO+YXUN77KmodQ2zoKDnDlWZckVC8KlGLDarKC0WQ0qS5TSdl8TsqGRP9MFmZeQBIHvN7a7vQL84St/c3R0cENx9uHt/cHvgX54vF7OpplB20N+vx44MkTv3xMGFY8+fRDFHke6qeVUsPpU+fpWp0fELqRcnJO3q7kGMQv8Cxb+q7ai5yLrYs4hcxI7oGX2Xx6JGNxnx4fVe5nnJSvmxQickPpziPyoT7kOSO8jL6qocTBwcrFKCnOfUWlcb+I0OXtkZj4+bPH5+/PRwd3XRP8ttU5GYkX3Z4XELppKWw5mU0yeRZ3wL2nfS96ny4o90MrKhYUXbmlJ+lrrrcYwWyqAo4pKF0sAwQ+vQ2lFkLjnpAYBNeLs7X6gV0S7t5szngPnN/Bpf4UvXsS1dbfWr8v7k5OaXKisSvij8HVgfSIuvpCcdXyylSVRlgvDqUcXaox/qDkzHLORIhprdjz0yaW6IcgSmrTD9MwfsaBOtDW66oNuVYk0Dndq6V6ufzOpudbucu7YqC9yrPx/JFJO4tNq6oAa4H98cJsY1qTRaFsUiznykTUQ4tYYQRTXUXJb4tbsfVZ9e7TQNQYe9fze3ucv5SEYoW1jVrcXQVd93SchTicGl/m2ekrp0JDMFqz0zefKYD+VIYqoPU69zV+tR9+lTGSDbsoVHeMhzr96YjVooipsKcez4RDjKfJeHUpe1tMFVOez4Uz+Li4nbRVh0fcLILjdIGvi9JDPW+ZByJvNEzcaalceFezwQV+E3D0+t+6FRG+pSKZC95D+aF3rfiyrx25Uvlt7Am5q6IguP8OERdzp6cs9v0J9LbdkrFQ0tcZFIjWpY3PbbiLkzqVcK1WZWRbxUjxWtrduOVNgCBqXWHo7CyAdj+zX0LVjpJtzntZFULgmmETJGK0KXCYy7q820pJi+lKAXVjJ32xwTHA/Pg3lhalxaJawLkOEZJVcULPCyEnatZ+ZnElecIf585KqtGqpXVzP8uCZS1PfLFEbgkf9fReDsMkI8lp+LoMxVAe52WyZsEnJsMQhsiig7M8Cuq8N+xdnnKefpIKtIySa6oFErDPHc6uoG1AazFdRONyCSYov2ggiXBRUSspdSLYeQ/vuTp/uWRfmTC4E1t2aawpvUPOEuvwxPssA8hcoluYnPmsmEhQQVHDel1He5x7wxlNorYREk7bdek31RM3ExfVavUwwiSAEUqtRDdGQGmy3J1sqsnwlHeGK+QBVrU125y5mEO6RjLMGwIJapNWQS09d21lYrTeuBx9CW2mLi4CmetMKz0ym0ggHE5EkqOFA5x6sj+DeX3XmNVHz543W/rl7YN7UhWnhECn16YleiStTdviSIVBHS9qYF7ke8GGCtdpVjHoJP4wWwvAAgqdHA4qRHlSaGwzqUrXRqN7Aqr3oegzGhd+VdylN5YuoSZUb3qxft2D7T+XIFY12dlHde6H0cusPAwDHYNVASVMeSO23XIOayacJT1L867qP2133m69U/WodVniU2z6W934pkg5p+iMtFwTzeJMzQZg1UHsDUwqk8lIOfM65KChiJ0D5kLty/QjG4XPLCOX52E5YMrCHQi+6iyjzbPzh83ASNr3vMDtPCC71eoJUQDND8BStEjAHSFGpJ7eGC3Ao3v92ZnGTMg2UYSRZkyAkuJwvSYxMeae4sKcbWkT0xzTWUmcFCQGlfvSsch80P03btj2Dgh73y68LN8mvmuZa37nu7sPVc7jB/W9hzaUPGFpTfL9qllTgyk2SD4/uWMrd2TH2m3LZRFFdxQv+0v+8MfxF2i9qoIk2kOLiG40QvqVzaM48n0pZfP8oaN0zwbK8pOn/Ja2l1SsL4WNuH6WVoV9oSxTwfU7REk/Kj4XpuHags1RDkwTOVW/E1K10GStK1NCUgBamaS2mr1rYOwCoFBrRBx/G09NrYRkzK7o/REezUA1PgMRDVmHL2LGAmZZHg6TpkgsMtAWSONSGqB/0xl4M5OibiPHV5RR5NcKxmrj7gs4HGHPavZ2d1le8kNz50Na74+OX5tVOvwfekajxao9xVBYfWNaFAlq0BYDKVyjs6IzwYbuahs5gkOj8jQE1DRkb6aup96EsgH/ui1T581KZUErmNuF4GNhjckhKAK7xazr2pa0uUHUqnz8hmUbc2V6ZFbt4yKBd5fyHRZfxAqu6lCkVCh+yN3Zczd3iTdt6B5HrhmAf+6jDQGk7TGGXXHwqEmlOB9I4afTpwYTILhdKESSHEE4bRKQBVMrDyhvJJ+derhWvrKuUHTxNSVwDZazE6DeyY5C1FcJdHJFRhIUOCZ0UKpFRIASnpZjSlnFqMJkBMcwY4OKqOUMEpOat8Skgndbvglwy0YUIhZeLoqsD52Gp21nyVrASdmKnsU+RvPpZjPqBhg/vElyt5flFzrdmlizD8DJaKjsKrqAhblrH8tQdEDQ62K9LAotm2d4TIsw/EfJxSZDmxeblTmGhIyQi5J2PZp7lz5lFaTK3bYQuDLDEs6mzxODHpLRa7HAh2L/Xz6YzQZhW+69u7O8eRJGF9j6cH59bxL1aKnQnxEA84RkKkDdago1bnt/Arl2EaN08YaEO0cwrKeIbICzQgFPYwQDDcAyAFcEuEzIgcL5NMGFV3KlGMwSg3BwQDfaCJQu82R4FjqzUssUh/EtVDKvHbTkD9pxednA96QcJ3oQzz1HvYOL6tRZdVobaODnXw77AUSXJ1iMc6n5HuuV2iw4JYhLh8M8fqD4UEn4/0wabFVIMI10fQwekltEMHOih4D9/uFqJ31AvbZIwsFhsjumwE7L6/vzn3P+6/f/qA15gWs+nEsVpqsZRFflO3Kt91M174j+EY9aUM+Fiyhd5Zv+y3Urh6qKjXPHOHSupyAFkUXlHGHzOrjUY578IrvNK+z+mIoFjY/KkPhxTrx4mbl5eAy4+XH54eLlbexNBW6u0iNvBfpd9O8SYkpjbf3m2jqRbjB3IQ1P20Zmnyhz46PSyZLRLpa1EYKwPdLRatCwf7TN2Kg1ftcEcRCWRlwyd0aJx1IGjWjEMO4BF5GTC+C5L2CUTsrSvFf83A8S80ZBi8daSmqVSFJMfSciS0JbBYrcRoyTSZYQCMK+NyMcNzPMsxsPWQWn2FV9h/b4nhw/0Bz7sXjHyJ45LKOhGr5Enp1BnEFOZTpPoF9+x5dtLxKUU1kYioKqz98ajFp3cZX24nxlLliRp2LgHsXWuxfOb1f75V8LK8Do/QP5Mpfy5hWariw6sfsSSLF6ZrsWh0kV7clWVupKg/eLU6lCfIckpOc80hnZLiK2GgLvA9pAiiR6Yh1odD8JNTuuf76+GP//0v71/0xZb5l8OlEvjnoJx9vBK6hUkXU+m0kqWLUkKfSJar1iJt+qGPTo9ofB12c8+N+NtYbW2gEVX9ZRH5uO+Vs4rv4XvKTKh15g81nehaiQJQihQz45ADEES1VdgMDSn1CURcGzGYd85P1l/gcDyT5ZAvbN5sHkgzOLSgNaQttYTeEXd37aw4znpgWnqsJ/ffS41n2xalM0YhelWKD2nFM+dzFclz1Hgc70kTRJZVGDQxsWaHJKfUvxaspAEkTT4P5MoSlaQx0bbqm0Gq+UQ1fTSHH7Rbe5n/SofKaBFK5oGwF3f6wEfwqmP3fz3Y8dCTLTbdrZSRjbp3stW2QBIlnHLmTelG4WL+D4RMaAcx0z9oyCRc7aLXmcE+qfxtoszsB1hDpFPYPzgVSfXOrssOz2YCGFi1Gj3y/h0AR6O5DhYDxbV93gH0/PlhWkwEP7/JQeHuLiOCjkK9nNE5SYByo/yA8sapnSkBM2zcb8dDgUCYCZ5r4x4uvfv1cup0tU9DSfB21ZyYDRA+luLIUumZJyYuY8EcnvRjcKhI/kEJJnHBC4siqmnRor4T5s2GhnGBM2YZB7XblBV+dBuyDdPbQKfXfi30FFMfD+9X383JIo+klSHZRenZJLFeuWKD80SNxvJ8X3zrwbKmE193GzKMZwAW55wcEoWnPxXNZIjRN6wPNw4ZWpaxU2m+c9cukAb9LeS5rYxHK/+YJ6lRt6snTPK8ImwVyQUAZ1hasRGT7FlCSVYxwCxOK0XnGmsCFwDYS44DoM7afny9IE0W2fHj9r9wCedunbgmGi20lMoEV4lg/8iTJIQuNF4PauvEffwkj9OmcHVtIkWgTb7ce6mWI2KVsSkZkShNz0AChnE6wwxeB2YCTH0fBxqmpX/cl1HpTmJELYTtcjOhe1RMvNC7MB5JgyxzAQT0K1qkDHhlMCfEIdElhwFQoeIJ5VEpUG+bo5Xh321L1mjiRyVBeSId8HiRxPPxiacLL5N0IKD8n7Iklb0U8U4+nzOsFNgES8KndUQ2zdqd//aROTwmxkXSnW5CJMB4qOBCFMsUr1nBt0hYu4Hdl4mrojjoEYimaHDMcxxQgRyVAlOrUXGzHu2+Wy+80MeSRWGW0uei3CAgD8Kr3TiICDbbExT0FApHk7y1AfbSXmDES1GQlFLw8Ho/SbZJTS8JcoQYD9ItmyfNpx7JX7zxAQgQ8yICFe0wo6fwTq7QTB2O+EjCJABX7yBUHpBbx63VQG9BD10H6J4+1ZY/6/Xc1NWBYAGR98kQk9ZwCx72T+zGU5LbnJ5mpf24JNknXpCr3eWWdnyv4ho3I9yl+aY1wV20EGTvydfNpmyir7LwWgjgBuhmY60f094e1eYtVcZdnJu6bsKCjv2xb9pBMrg9WDLZMSZ2zUozIDCarhS7VPHPCoiuPYsgEl+jT691CbpaVxU4952iRTxD0/Jgq7z6QXqGvH2oE0hIaFTWpNuyWh5E1OM56aZnwzSSZAPxgc89+moYiXOawJEa+8uGJlu7bztr5Il0blZHzekOWLyI78PTSkGncWxqxTMTNrZKlmSKFxeyAPp0rvVakRNIV2u33nEV0nLxemI+84g0yl5XsSg2hUjl2OQTTR0VwTzMbmLUaz69Ovp6JCNpJJq2utal80oavwP1QjU+VFBJkeBFUCuIhloBhtEVXGwTtPvHp66ka/ECuGz/st9NWHEEdpT81bklNtU1BINDux/v/X4971tXVO/7fNTQJS5fBJi7x/mYAGJQ57w3OlolzHm2NGaBe/fkACf0RHi/hGvkUx2/ixHWu3XGvFxDA0nEOKcXKssIOCf0YSA55BVVqcU3NMbAfa17kCv/dmWenbKT1Vhj5PfXU5ZMUO+zHYjEagHlwt7ZNzBnV1hxNoKn4YG/J+eua4YZvAzcQm19CQ85RtfqVve4JBIjwEvBFcvvAaNp/5DspfovsrDNjEVoNjom/XFFSHoSuw5PUBRifG5mg7cgJ3SLdcvXUqgyd383YT/fQVmQHrrpU8DHSRFojPtOxnvXW08LMmMeTOfDl9ez/fGt6C38d9QgYq+qEDNwbGKxNRb+GVRKOSd8sFD+ayChOccYDdHA9MwazROiNQbqnobr1w+GZ4eSaNi7W+5H218em8G2+gEBjrggNMP/8KOZmXWbQZnl0Rfg26Kl8sKE9+YywBkcg4uVIGYghaUeIh+7RBFOUm5Vii4nxlifwEL/g8QUW+0YOmMwb3kgDaGCZskHFXTDnbnpgH+4Xfv4esB+7z5fhTYLgakJR9dVL6fBUKl02vA5gI1WnNUlgFu/ftSAvK33nGL3KD4CFRLeD/KZxSlSEJmICi5C5jbaD7HAfIgAJqKMmFXCDe6tDE23bWxEWoyVQM9ceBMr1I0VIT/2lLst8NQ1ZwwtjNW6YzWCT3Zz9mM9VoIXf8QFNAeKGKgSU43iXLpsrMtzzjHLrG6ne8TlrMrWMbF3QGqxVvshdyc5U+Z5fa9vuc1NZ6xIXJGy6KgksqUHOBKXiWaRPRJlmEm6hlqAUpSGJV4bhHKsSLzMaOry3FjQtFVPBq/dvT+OdtA/2wmiYnanPD6i9QGdMfhc9Fh5ND5cav47DYa8/lWobH28ucEPhJFM1mPDg9eC33nGok2iLfuheS3Q8p12BR7DjQDJMX5quZr1mxglqiQO607NjymOuT2TyN6SEyG8gZQa5Yf+/6Up0QZTkYqhSPNmIyjMjr9pchnO44+RSJB9xjMEXePw+fL1N661U3nnJwWRM007pycl5EHTX6QMpiWM65xzz9mLW/dLPx/JOUrrhvVsx2CthxhZ4chOyoZMBuNrnCuuv8B3Fg2WOGP3m3snFDJzBY6wxy4zrYXZWYX+KTU/ZPnji4D4ryLENBME25nBcb0hvzf8HyYs9FDscGKrhqYMTB7UDf8NVu3679Ng/caU3C5n4sO7Qyo+VaAHZDnQuxN92EN6BnHe9DSv7Lk8mwJa5x2xiFEGRc7ZWYg47dcw6Q92AMwwzc5NoxE/OBV2G3oAEefG5zrAX4NxqTtfKwyYKoIpvojZOIJY0mS//sgE8HOXm/5/gL9cJCk2YqNTrtZiGaMJAe76cdNEFbkUacYaIyLOAOGqexdmxXkwF/wdf/vuIsbw++sj6nrUkdJ3dAFtzwtXkN4I48WvTh56YBgJ62t/TS6mqXcpddNa1bqsLhAG+5x48Pppso2jUPIvasxbcfOCRjrjlZrSLiKR45zUClrSggXXeHU4OZYTzZtFAXkFcRd4nq7mZq+4w7qeLTZ+KsjOvv3ST8VsTvEZOEkMnS5/rNP41b5R5TaWnEydvzEYZoHlFAl82kg4owatYv7qJCVlkFlrSmyT1ysIw2qY9kf4+hlry7j+KG58VX75f8AruAoo+EigHgICMWIb7uE0Ag7UElg1H6G5beWxpB7BIBvXaQCEAeExLoxRqzIOg8lMzmT3btvTYqfQxdPWBlYnTPaFE8uDmP53nykHKpUeBgAA+FqzXPnXnFxupJpJ/anxv3V/ektp6Wd2acm/grgmJo62zkb3gtcC+MuRoGWldB3hIE0+OhJnluzSD0ZId6XChh0ZVgX870GnBmMeqUDQxQVaBiSxUc/TTtH+kv+yKzPH8y34cLexcDwxE0wsR2SCTbgvOYqIS2J+jWBepuzhrqZnztaGRrxRTtuhadoOhc3FHr9ARN8mshHUXI8CRY8btR0/v3Pc9Js1XfigVXTTwVHo0azvlXA22oyvHYOuAJV6YDDKTNjO9c23zj0O50nSv/9LTaP8wVHLg11vm6EMj1NIRY4IFL8g9iVvziZZEDoNw05YyQEmng/uLlKlOgOiBEXu82kphOHF+qNSE5xPE8inrLKrvVLHfL2mi8wrIz0u0AMJRPICkGutVBK++MUEscfRZSY/kg6KL1FhmFq7tgIUF3PUwuq+b1XuEaS98hcQ0zIuI6tUM10UDUQjlxe7MRvzcxoLKDM8Nm2b2Jb/qJxq6tpEkOE5ypNOYcPXjHqhevoydUfjv47msYalEn9Sr/BgsVWilcP1a3qTsBEdcYHOSF20K/POsFqozFBdLjEj+FR0NXpo/7002I2PN13JRcLZ0jKb/ug7PCDzwVFXrQD9UUW4P3cJ4lc6E/2qB6xxfwQ34n/l6HmW1YCkS0ioBGkkws+HNoipHr9eGAQ2a9ricHN7WHfVSkjDjzVS1x9dm/Avu1d3MKGj85t3P2GO1D8pJOIyUe1dSv6x0sFmUZZfkitDriHmtKWU9vCLLlGVKWOLUTlFzwqkzf4bWGuCCQ5wsndwwHJRUDFthF8uT5VElAtrKEuPUL2uHxw2N8NqRlNstQVzDLQVEFfW2/umm8XsTtcJzGCfe2s/XHCpr5zizjn+BnGTeSMCoiFGjOrpsrE2bjHhHLPFdb5gKPgR/nqwJa8bqjyXaICoBiWUdU/23+3D9f3L0xY5NqgRl7N/TBBT+y8vmd7Y9xQWwoyNSS9uy5OHF+wChCN2SA4zcNI5GvE+gQKDZA67Ny/Xo4Gjjgr25o25R413SFPvmEjjl+psy20nzKM8jEx3Lqqngi7y23sNnzqQY2p2VIH18oMaHhBOfWY63ByHD8TcnPHT4mixOjR+DSr9y4e6bfw+Or0CnEMEcacn6M46V2TMmGlnnGd1SDGP//pI1LKS0bn8vi+rvTbBIZjzvaKFt+91rGYynyf40YRSnih/ymHmvsFwvlgxgzl6o5asY1XgUfyiLIpKUZ6xmZ/wdn3qz70BrapyXxLjb/9+XOK79j6FfSy4HTH6oSLDAsmHoVONMidFp8fkCBd0oQKCW1AsQA51jMAsNrkuFha/DITzst3K85BLDKLfIa2J7PGUjtKP8vggeBiJq4RgceO45JQZNVfZZ1qRL3LslOs9D4fnO4HZZDipyz/QYIW+EEPZyBVIkI5Ugv+96mLQO32tHsUTBcelamyTPnfbG0z1mAcW9HlkaRQR/6f9/ab1kMaoVFIzCpwOAIH0+Co5f+H5jWOwXwK4cDNQ3pqfCHOBPdXFOJb/y1gTtpoBcEyjvW2yyPpPdvJI30lwdvwegHDfkURiVkUPLBXyqVei5lmWajiG+QN8HB/NG/sH0+v/hcbw04enwb8R9/TMEG+Fk5380AyeqXRqUpbJUO8YBEWiV9re3idPde0cwdPbp4/1Y812W3d39+uZlChSLmyFdnz+4mc0UOn4qeR7R2RSf/0xUNv0IzDV9+WB9fvwMLORVpA20g4vVhxDabxYKCh/ZDgAFrS3UIpOqzBBV7gjgikHi7PuUuallPSHJSg7KD7S/4/ZmPbhRErfXl97niQBrp+vn2yk1YnrnnJnQ4u8hgVZDhiCctHc+1i5wu3WyKYvngcCffMuMMjVqqQTbUhN7oNZIr5OM8BOflXt4iS7G+bP/WYh7jYtdp3whKbUBFksYp4VsPV6WZz0nhBrVwc9OlmgCxyZFH2666HnadpwaDW+iTbVJoo8FOeuPEv22DWXFfklUE7OV1v8HxAAceCZ03NgZRyv+RfJJn8DgFf7NnHzXG95TP+rUwLeONld2QjQguD1D22kPmfg0d6AJj1wt5SAuNB1w9vvGvESl7Tf51SC1DCfvY3o7yz3sRdwJy6/ajNBRmNyjBbrjDWzZQUyfs7e6GUufhvgkK8kt0TE1xOL0sMTVOflZAzVrzRqih4+4nnQtnlFIXpdO/vofugc8Edker7pvDZ7oS1O0aVOcQlxry9W8k0CX2FmS985+w+gbTbVDYkVjoP+jVWrUIuYdbq1X3e0xgGdAz0LPq1uiy+6M2/h/mydY6QDJ9WgofvNbNQi5KY2tdJfNR4AfpM9+ADAt63zYf9bUKMfglveWisUGiBv9i1PJdo8qeE+vKyfX/Udj9vYRS28BfwlJb+aa2pQ1lbv6yDrAb7RzzF77HmFu+6j5zd6TZeJzVMljm35GJhVrboah6LWGMq0f3NrJjDxt7QBG1E4FtgBJKPWWJhJ0EYGj+lxfCDHCbr5/NY2us1N7Fr31Te4qqq0V0vj2/hBfffBKrlhvR7b+knl1nVlyQ/vs/zWzDywkTHrI7yY9swkEtGitfh1Df3WTYy90tatb/PKQc6RQjJGlYve5/Cf935Rf39sgL/VrwpketTaKLK+4ZPanVd2ypFZpGbRH62PADof2hkF4tST9JHwnrfTP4QZT5WNqgKqh9N+8ImbvuNqmrth/lTbHJ/DFLpQKKiEshPGzF+cD57esN5lji0GxvtebTlNEcr7PN/Ots7+ctyASIYXkePnApcK+FTQy1nSFoy94Umr2tgLcTBXESV7zE02B3EKfarAt3ymjR7Uu33KPNVbpd4+tJG3AO/gpF7CXIjSxrw7hONL22+Ar4nzmns7KNvJfaHAVIWdIdj5zLKjAuxu53xPLzuqHWtT+4jGQcoccCZd4FgUdfWPaq6Dei88spPKDUkVVNmg82fKlA2aVOcDeJ8y2W9xCt+tVGN8GmN8Q8UV4F1h7rLusiQbAD7g1uv6VSUX+xVAgDuzsI3FRgiRYj6AF3tlWBAAxxAk3LgA0O7dvgKJPCBE7FIFKci8ChYHugqKXB7SsVgQinoXoMiIuURPza/vcAMNU3zEESHL13DUeayIYGHOzZYkY7YrDIA9wuCY6yPP4B5HirC/4V0kutbfqlCOoeIrgD//VgvM7OhHiZAqU45YEXbmxubDYTzSemNd4YUu6jQi/jZDe4LB89OxcwwDlhyMgWg71kifLlLhznGGB1vdw9tY2GtKe6QBGgeK7lzGT7Eyev3paGEx2u2t7+OOkcTS5BE8eWOMNtXBjTFcjaP08UEY1EBGlv7KyK+naA9Q8EWYtGU6SeW7xB3AAQLJxV23DXDQQIcs4crNIO7+8DDYHffc50nJi3eh8MBDjzzmw5dfYeAvwBAqTzxV6LmlDjsi0H9BgoUIFeaFl4q8ev1eX+2fSAmKldIpUa7MFolODUz2Vwo9y/+7Q6VKky7DayOMMjoKRkZDZmzIkh0HcuQaI89Y400wzlYTHZWvklaBLubqqptJpphqsu566KkXo3NOJ7YtlTbWeZwghSKxrURqJ5PbKxyUKooGkGHVnEarc3RydnF1c/fw1EdTK4OXL2/ffvGr3/xuJJLIFCqNzmCy2ByuiSnPzNzC0sq5C5euXLvhu3Xn3oNHkA+w0SbmZCxeLdl/NTlbdhVnUAZnSApTlOKUuKBeg0ZC0a6bzZ7Yfizb0cwobEPhcSAVp49+osTgEzjuGEnV9trnkstuOuGkU067EZ0ZLmKnzEyrKidSpdoZDCeOlutvRxU4nHHNMct88yww3S+c7zd9FdTQQAsd9DDACBPMsBwW+sFX1jB653tf18MGu/zx//YmPb/IbwF3Bh3zOj//+3mVKNX6ks7X4ZTyaLDiHsPawHRdv+/C3T7FXxaqgQ/PNIQaa6JUpoMqpc1caKa5Floafsbky2mrnfaFPtLJzB/Eu5jwQRD+iWSdRuiKaZ4FPdEqm7p02Dw6P4bvQi9hR897M7UtErPrNkchBRafg+QO44KuX6dOGIsqWycLktBunS7R6jejpC7V5OQUFMPlcI3Mwg3RHWwVJqXsuDDi0BY/VXTttiz9AxM286Zc2jbqSddU0xbsxTB1wllU2XrcorkpOyc1T7QQwvhQJPpDakQ9k+/WSNFhZMfOrpUu6lP/OH09z3rreBCN/FR2+nw+KCEWBbEqGu3em2CHQH4XQ7LR4Wt/nHCXVH0Drjvq61CdtV689WbyY7tung4UnpGrfDuhozxoIR4deQlz5nqMOmkH3L0h1XZ0+Howrs8ZpCjCxRH/Wn5I76Rd/N+wifTdgd7O0p/5nSCbbXxn9C2fxObgNz5dKDzmO6s+Oz7bOyNWHn+iOMs6ZTklPhWffPhp1fzv/nU+Xe4/96RlYlZlMU+DZf3TDN7PqyBl4q+zFuzfNw5yNMNr9hvXjE60B368YM87N6XG5049pTuVeGrwvsZml/5vnLilY5kbN8TjqUVBCwA=",nS="data:font/woff2;base64,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",iS=`The night has fallen deep and the young(?) couple is ready to get married, but a tragedy happens. They're out of drinks in the party. They go out to get more drinks for the guests and they engage into a zombie apocalypse.

Collect as many drinks as you can to increase your score. You lose a life point each time an enemy touches you. It's game over if you lose 3 life points or you fall into a pit. Jump to avoid enemies and pits.`;class rS extends Je{constructor(){super({label:"introduction-screen",alpha:0});const t=this.addComponent(new Jt({label:"text",text:iS,fontFamily:"PressStart2P",fontSize:24,textColor:13421772,position:{x:20,y:20},wordWrap:!0,wordWrapWidth:st.screen.width-40,align:"justify",lineHeight:40})),e=this.addComponent(new yl({label:"continue-button",resource:"continue-button.png",hoverResource:"continue-button-hover.png",disabledResource:"continue-button.png",position:{x:0,y:t.y+t.height+40},horizontalAlignment:"center",interactive:!1,cursor:"pointer",anchor:{x:.5,y:0},onClick:async()=>{e.interactive=!1,await this.animate({from:{alpha:1},to:{alpha:0},duration:1}),this.parent.showCharacterSelectionScreen()}}));this.animate({from:{alpha:0},to:{alpha:1},duration:1}).then(()=>{e.interactive=!0})}_onResize(){const t=this.components[0];t.wordWrapWidth=st.screen.width-40;const e=this.components[1];e.y=t.y+t.height+40}}const ft={selectedCharacter:"girl",started:!1,speed:3,originalSpeed:3,score:0};let sS=class extends Le{constructor(){super({label:"boy",resource:"boy/boy-selection.png",position:{x:224,y:79.5},anchor:{x:.5,y:.5},interactive:!0,cursor:"pointer"}),this._registerToSignal(tt.signals.chooseCharacter,this._onCharacterSelection)}_onClick(){this.interactive=!1,ft.selectedCharacter="boy",Re(tt.signals.chooseCharacter)}_onCharacterSelection(){ft.selectedCharacter!=="boy"?this.animate({from:{scaleX:1,scaleY:1},to:{scaleX:0,scaleY:0},duration:.2}):this.animate({from:{scaleX:1,scaleY:1},to:{scaleX:1.1,scaleY:1.1},duration:.2,revert:!0,repeat:1})}},oS=class extends Le{constructor(){super({label:"girl",resource:"girl/girl-selection.png",position:{x:64,y:79.5},anchor:{x:.5,y:.5},interactive:!0,cursor:"pointer"}),this._registerToSignal(tt.signals.chooseCharacter,this._onCharacterSelection)}_onClick(){this.interactive=!1,ft.selectedCharacter="girl",Re(tt.signals.chooseCharacter)}_onCharacterSelection(){ft.selectedCharacter!=="girl"?this.animate({from:{scaleX:1,scaleY:1},to:{scaleX:0,scaleY:0},duration:.2}):this.animate({from:{scaleX:1,scaleY:1},to:{scaleX:1.1,scaleY:1.1},duration:.2,revert:!0,repeat:1})}};class aS extends Je{constructor(){super({label:"character-selection",horizontalAlignment:"center",width:288,height:159,anchor:{x:.5,y:0}}),this.addComponent(new oS),this.addComponent(new sS)}}const lS="You can make both characters jump by clicking/tapping on the screen. Anastasia can reduce her speed if you click/tap on the screen and hold it for a while. She then jumps higher when you release it. Nikos can perform a double jump if you click/tap on the screen again while jumping.";class hS extends Je{constructor(){super({label:"character-selection-screen",alpha:0});const t=this.addComponent(new Jt({label:"text",text:lS,fontFamily:"PressStart2P",fontSize:24,textColor:13421772,position:{x:20,y:20},wordWrap:!0,wordWrapWidth:st.screen.width-40,align:"justify",lineHeight:40})),e=this.addComponent(new Jt({label:"choose-character",text:"Choose Character",fontFamily:"PressStart2P",fontSize:24,textColor:16763904,anchor:{x:.5,y:0},position:{x:0,y:t.y+t.height+40},horizontalAlignment:"center"})),i=this.addComponent(new aS);i.y=e.y+e.height+40,this.animate({from:{alpha:0},to:{alpha:1},duration:1}),this._registerToSignal(tt.signals.chooseCharacter,this._onCharacterSelection)}_onResize(){const t=this.components[0],e=this.components[1],i=this.components[2];t.wordWrapWidth=st.screen.width-40,e.y=t.y+t.height+40,i.y=e.y+e.height+40}async _onCharacterSelection(){await Promise.all([Ji(W.sounds.click),this.animate({from:{alpha:1},to:{alpha:0},duration:1,delay:.3})]),this.parent.showFormScreen()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},cS=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[e++],o=n[e++],a=n[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},R_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,h=l?n[r+2]:0,c=s>>2,p=(s&3)<<4|a>>4;let f=(a&15)<<2|h>>6,u=h&63;l||(u=64,o||(f=64)),i.push(e[c],e[p],e[f],e[u])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(I_(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):cS(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;const h=r<n.length?e[n.charAt(r)]:64;++r;const p=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||a==null||h==null||p==null)throw new uS;const f=s<<2|a>>4;if(i.push(f),h!==64){const u=a<<4&240|h>>2;if(i.push(u),p!==64){const m=h<<6&192|p;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dS=function(n){const t=I_(n);return R_.encodeByteArray(t,!0)},Ua=function(n){return dS(n).replace(/\./g,"")},pS=function(n){try{return R_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=()=>fS().__FIREBASE_DEFAULTS__,gS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&pS(n[1]);return t&&JSON.parse(t)},ju=()=>{try{return mS()||gS()||yS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_S=n=>{var t,e;return(e=(t=ju())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},vS=n=>{const t=_S(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},k_=()=>{var n;return(n=ju())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ua(JSON.stringify(e)),Ua(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){var n;const t=(n=ju())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TS(){return!AS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SS(){try{return typeof indexedDB=="object"}catch{return!1}}function ES(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="FirebaseError";class Jr extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=CS,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M_.prototype.create)}}class M_{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?PS(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Jr(r,a,i)}}function PS(n,t){return n.replace(IS,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const IS=/\{\$([^}]+)}/g;function kc(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const s=n[r],o=t[r];if(Df(s)&&Df(o)){if(!kc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function Df(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n){return n&&n._delegate?n._delegate:n}class lo{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new xS;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(MS(t))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Mi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mi){return this.instances.has(t)}getOptions(t=Mi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,e){var i;const r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kS(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Mi){return this.component?this.component.multipleInstances?t:Mi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kS(n){return n===Mi?void 0:n}function MS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new RS(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const DS={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},BS=ut.INFO,OS={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},FS=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=OS[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class V_{constructor(t){this.name=t,this._logLevel=BS,this._logHandler=FS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const LS=(n,t)=>t.some(e=>n instanceof e);let Bf,Of;function NS(){return Bf||(Bf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return Of||(Of=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D_=new WeakMap,Mc=new WeakMap,B_=new WeakMap,kh=new WeakMap,Gu=new WeakMap;function zS(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(ri(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&D_.set(e,n)}).catch(()=>{}),Gu.set(t,n),t}function jS(n){if(Mc.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Mc.set(n,t)}let Vc={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Mc.get(n);if(t==="objectStoreNames")return n.objectStoreNames||B_.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ri(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function GS(n){Vc=n(Vc)}function HS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Mh(this),t,...e);return B_.set(i,t.sort?t.sort():[t]),ri(i)}:US().includes(n)?function(...t){return n.apply(Mh(this),t),ri(D_.get(this))}:function(...t){return ri(n.apply(Mh(this),t))}}function qS(n){return typeof n=="function"?HS(n):(n instanceof IDBTransaction&&jS(n),LS(n,NS())?new Proxy(n,Vc):n)}function ri(n){if(n instanceof IDBRequest)return zS(n);if(kh.has(n))return kh.get(n);const t=qS(n);return t!==n&&(kh.set(n,t),Gu.set(t,n)),t}const Mh=n=>Gu.get(n);function WS(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,t),a=ri(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const YS=["get","getKey","getAll","getAllKeys","count"],XS=["put","add","delete","clear"],Vh=new Map;function Ff(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Vh.get(t))return Vh.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=XS.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||YS.includes(e)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let h=l.store;return i&&(h=h.index(a.shift())),(await Promise.all([h[e](...a),r&&l.done]))[0]};return Vh.set(t,s),s}GS(n=>({...n,get:(t,e,i)=>Ff(t,e)||n.get(t,e,i),has:(t,e)=>!!Ff(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(QS(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function QS(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Dc="@firebase/app",Lf="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new V_("@firebase/app"),JS="@firebase/app-compat",ZS="@firebase/analytics-compat",$S="@firebase/analytics",tE="@firebase/app-check-compat",eE="@firebase/app-check",nE="@firebase/auth",iE="@firebase/auth-compat",rE="@firebase/database",sE="@firebase/data-connect",oE="@firebase/database-compat",aE="@firebase/functions",lE="@firebase/functions-compat",hE="@firebase/installations",cE="@firebase/installations-compat",uE="@firebase/messaging",dE="@firebase/messaging-compat",pE="@firebase/performance",fE="@firebase/performance-compat",mE="@firebase/remote-config",gE="@firebase/remote-config-compat",yE="@firebase/storage",_E="@firebase/storage-compat",vE="@firebase/firestore",xE="@firebase/vertexai",bE="@firebase/firestore-compat",wE="firebase",AE="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]",TE={[Dc]:"fire-core",[JS]:"fire-core-compat",[$S]:"fire-analytics",[ZS]:"fire-analytics-compat",[eE]:"fire-app-check",[tE]:"fire-app-check-compat",[nE]:"fire-auth",[iE]:"fire-auth-compat",[rE]:"fire-rtdb",[sE]:"fire-data-connect",[oE]:"fire-rtdb-compat",[aE]:"fire-fn",[lE]:"fire-fn-compat",[hE]:"fire-iid",[cE]:"fire-iid-compat",[uE]:"fire-fcm",[dE]:"fire-fcm-compat",[pE]:"fire-perf",[fE]:"fire-perf-compat",[mE]:"fire-rc",[gE]:"fire-rc-compat",[yE]:"fire-gcs",[_E]:"fire-gcs-compat",[vE]:"fire-fst",[bE]:"fire-fst-compat",[xE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map,SE=new Map,Oc=new Map;function Nf(n,t){try{n.container.addComponent(t)}catch(e){jn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ja(n){const t=n.name;if(Oc.has(t))return jn.debug(`There were multiple attempts to register component ${t}.`),!1;Oc.set(t,n);for(const e of za.values())Nf(e,n);for(const e of SE.values())Nf(e,n);return!0}function EE(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new M_("app","Firebase",CE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=AE;function O_(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Bc,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw si.create("bad-app-name",{appName:String(r)});if(e||(e=k_()),!e)throw si.create("no-options");const s=za.get(r);if(s){if(kc(e,s.options)&&kc(i,s.config))return s;throw si.create("duplicate-app",{appName:r})}const o=new VS(r);for(const l of Oc.values())o.addComponent(l);const a=new PE(e,i,o);return za.set(r,a),a}function RE(n=Bc){const t=za.get(n);if(!t&&n===Bc&&k_())return O_();if(!t)throw si.create("no-app",{appName:n});return t}function Cr(n,t,e){var i;let r=(i=TE[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}ja(new lo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="firebase-heartbeat-database",ME=1,ho="firebase-heartbeat-store";let Dh=null;function F_(){return Dh||(Dh=WS(kE,ME,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ho)}catch(e){console.warn(e)}}}}).catch(n=>{throw si.create("idb-open",{originalErrorMessage:n.message})})),Dh}async function VE(n){try{const e=(await F_()).transaction(ho),i=await e.objectStore(ho).get(L_(n));return await e.done,i}catch(t){if(t instanceof Jr)jn.warn(t.message);else{const e=si.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});jn.warn(e.message)}}}async function Uf(n,t){try{const i=(await F_()).transaction(ho,"readwrite");await i.objectStore(ho).put(t,L_(n)),await i.done}catch(e){if(e instanceof Jr)jn.warn(e.message);else{const i=si.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});jn.warn(i.message)}}}function L_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=1024,BE=30*24*60*60*1e3;class OE{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new LE(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zf();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){jn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zf(),{heartbeatsToSend:i,unsentEntries:r}=FE(this._heartbeatsCache.heartbeats),s=Ua(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return jn.warn(e),""}}}function zf(){return new Date().toISOString().substring(0,10)}function FE(n,t=DE){const e=[];let i=n.slice();for(const r of n){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),jf(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),jf(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class LE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SS()?ES().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await VE(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function jf(n){return Ua(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n){ja(new lo("platform-logger",t=>new KS(t),"PRIVATE")),ja(new lo("heartbeat",t=>new OE(t),"PRIVATE")),Cr(Dc,Lf,n),Cr(Dc,Lf,"esm2017"),Cr("fire-js","")}NE("");var UE="firebase",zE="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(UE,zE,"app");var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,N_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,_){function x(){}x.prototype=_.prototype,w.D=_.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(A,R,M){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return _.prototype[R].apply(A,k)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,_,x){x||(x=0);var A=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)A[R]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(R=0;16>R;++R)A[R]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=w.g[0],x=w.g[1],R=w.g[2];var M=w.g[3],k=_+(M^x&(R^M))+A[0]+3614090360&4294967295;_=x+(k<<7&4294967295|k>>>25),k=M+(R^_&(x^R))+A[1]+3905402710&4294967295,M=_+(k<<12&4294967295|k>>>20),k=R+(x^M&(_^x))+A[2]+606105819&4294967295,R=M+(k<<17&4294967295|k>>>15),k=x+(_^R&(M^_))+A[3]+3250441966&4294967295,x=R+(k<<22&4294967295|k>>>10),k=_+(M^x&(R^M))+A[4]+4118548399&4294967295,_=x+(k<<7&4294967295|k>>>25),k=M+(R^_&(x^R))+A[5]+1200080426&4294967295,M=_+(k<<12&4294967295|k>>>20),k=R+(x^M&(_^x))+A[6]+2821735955&4294967295,R=M+(k<<17&4294967295|k>>>15),k=x+(_^R&(M^_))+A[7]+4249261313&4294967295,x=R+(k<<22&4294967295|k>>>10),k=_+(M^x&(R^M))+A[8]+1770035416&4294967295,_=x+(k<<7&4294967295|k>>>25),k=M+(R^_&(x^R))+A[9]+2336552879&4294967295,M=_+(k<<12&4294967295|k>>>20),k=R+(x^M&(_^x))+A[10]+4294925233&4294967295,R=M+(k<<17&4294967295|k>>>15),k=x+(_^R&(M^_))+A[11]+2304563134&4294967295,x=R+(k<<22&4294967295|k>>>10),k=_+(M^x&(R^M))+A[12]+1804603682&4294967295,_=x+(k<<7&4294967295|k>>>25),k=M+(R^_&(x^R))+A[13]+4254626195&4294967295,M=_+(k<<12&4294967295|k>>>20),k=R+(x^M&(_^x))+A[14]+2792965006&4294967295,R=M+(k<<17&4294967295|k>>>15),k=x+(_^R&(M^_))+A[15]+1236535329&4294967295,x=R+(k<<22&4294967295|k>>>10),k=_+(R^M&(x^R))+A[1]+4129170786&4294967295,_=x+(k<<5&4294967295|k>>>27),k=M+(x^R&(_^x))+A[6]+3225465664&4294967295,M=_+(k<<9&4294967295|k>>>23),k=R+(_^x&(M^_))+A[11]+643717713&4294967295,R=M+(k<<14&4294967295|k>>>18),k=x+(M^_&(R^M))+A[0]+3921069994&4294967295,x=R+(k<<20&4294967295|k>>>12),k=_+(R^M&(x^R))+A[5]+3593408605&4294967295,_=x+(k<<5&4294967295|k>>>27),k=M+(x^R&(_^x))+A[10]+38016083&4294967295,M=_+(k<<9&4294967295|k>>>23),k=R+(_^x&(M^_))+A[15]+3634488961&4294967295,R=M+(k<<14&4294967295|k>>>18),k=x+(M^_&(R^M))+A[4]+3889429448&4294967295,x=R+(k<<20&4294967295|k>>>12),k=_+(R^M&(x^R))+A[9]+568446438&4294967295,_=x+(k<<5&4294967295|k>>>27),k=M+(x^R&(_^x))+A[14]+3275163606&4294967295,M=_+(k<<9&4294967295|k>>>23),k=R+(_^x&(M^_))+A[3]+4107603335&4294967295,R=M+(k<<14&4294967295|k>>>18),k=x+(M^_&(R^M))+A[8]+1163531501&4294967295,x=R+(k<<20&4294967295|k>>>12),k=_+(R^M&(x^R))+A[13]+2850285829&4294967295,_=x+(k<<5&4294967295|k>>>27),k=M+(x^R&(_^x))+A[2]+4243563512&4294967295,M=_+(k<<9&4294967295|k>>>23),k=R+(_^x&(M^_))+A[7]+1735328473&4294967295,R=M+(k<<14&4294967295|k>>>18),k=x+(M^_&(R^M))+A[12]+2368359562&4294967295,x=R+(k<<20&4294967295|k>>>12),k=_+(x^R^M)+A[5]+4294588738&4294967295,_=x+(k<<4&4294967295|k>>>28),k=M+(_^x^R)+A[8]+2272392833&4294967295,M=_+(k<<11&4294967295|k>>>21),k=R+(M^_^x)+A[11]+1839030562&4294967295,R=M+(k<<16&4294967295|k>>>16),k=x+(R^M^_)+A[14]+4259657740&4294967295,x=R+(k<<23&4294967295|k>>>9),k=_+(x^R^M)+A[1]+2763975236&4294967295,_=x+(k<<4&4294967295|k>>>28),k=M+(_^x^R)+A[4]+1272893353&4294967295,M=_+(k<<11&4294967295|k>>>21),k=R+(M^_^x)+A[7]+4139469664&4294967295,R=M+(k<<16&4294967295|k>>>16),k=x+(R^M^_)+A[10]+3200236656&4294967295,x=R+(k<<23&4294967295|k>>>9),k=_+(x^R^M)+A[13]+681279174&4294967295,_=x+(k<<4&4294967295|k>>>28),k=M+(_^x^R)+A[0]+3936430074&4294967295,M=_+(k<<11&4294967295|k>>>21),k=R+(M^_^x)+A[3]+3572445317&4294967295,R=M+(k<<16&4294967295|k>>>16),k=x+(R^M^_)+A[6]+76029189&4294967295,x=R+(k<<23&4294967295|k>>>9),k=_+(x^R^M)+A[9]+3654602809&4294967295,_=x+(k<<4&4294967295|k>>>28),k=M+(_^x^R)+A[12]+3873151461&4294967295,M=_+(k<<11&4294967295|k>>>21),k=R+(M^_^x)+A[15]+530742520&4294967295,R=M+(k<<16&4294967295|k>>>16),k=x+(R^M^_)+A[2]+3299628645&4294967295,x=R+(k<<23&4294967295|k>>>9),k=_+(R^(x|~M))+A[0]+4096336452&4294967295,_=x+(k<<6&4294967295|k>>>26),k=M+(x^(_|~R))+A[7]+1126891415&4294967295,M=_+(k<<10&4294967295|k>>>22),k=R+(_^(M|~x))+A[14]+2878612391&4294967295,R=M+(k<<15&4294967295|k>>>17),k=x+(M^(R|~_))+A[5]+4237533241&4294967295,x=R+(k<<21&4294967295|k>>>11),k=_+(R^(x|~M))+A[12]+1700485571&4294967295,_=x+(k<<6&4294967295|k>>>26),k=M+(x^(_|~R))+A[3]+2399980690&4294967295,M=_+(k<<10&4294967295|k>>>22),k=R+(_^(M|~x))+A[10]+4293915773&4294967295,R=M+(k<<15&4294967295|k>>>17),k=x+(M^(R|~_))+A[1]+2240044497&4294967295,x=R+(k<<21&4294967295|k>>>11),k=_+(R^(x|~M))+A[8]+1873313359&4294967295,_=x+(k<<6&4294967295|k>>>26),k=M+(x^(_|~R))+A[15]+4264355552&4294967295,M=_+(k<<10&4294967295|k>>>22),k=R+(_^(M|~x))+A[6]+2734768916&4294967295,R=M+(k<<15&4294967295|k>>>17),k=x+(M^(R|~_))+A[13]+1309151649&4294967295,x=R+(k<<21&4294967295|k>>>11),k=_+(R^(x|~M))+A[4]+4149444226&4294967295,_=x+(k<<6&4294967295|k>>>26),k=M+(x^(_|~R))+A[11]+3174756917&4294967295,M=_+(k<<10&4294967295|k>>>22),k=R+(_^(M|~x))+A[2]+718787259&4294967295,R=M+(k<<15&4294967295|k>>>17),k=x+(M^(R|~_))+A[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+M&4294967295}i.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var x=_-this.blockSize,A=this.B,R=this.h,M=0;M<_;){if(R==0)for(;M<=x;)r(this,w,M),M+=this.blockSize;if(typeof w=="string"){for(;M<_;)if(A[R++]=w.charCodeAt(M++),R==this.blockSize){r(this,A),R=0;break}}else for(;M<_;)if(A[R++]=w[M++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=_},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var x=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=x&255,x/=256;for(this.u(w),w=Array(16),_=x=0;4>_;++_)for(var A=0;32>A;A+=8)w[x++]=this.g[_]>>>A&255;return w};function s(w,_){var x=a;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=_(w)}function o(w,_){this.h=_;for(var x=[],A=!0,R=w.length-1;0<=R;R--){var M=w[R]|0;A&&M==_||(x[R]=M,A=!1)}this.g=x}var a={};function l(w){return-128<=w&&128>w?s(w,function(_){return new o([_|0],0>_?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return y(h(-w));for(var _=[],x=1,A=0;w>=x;A++)_[A]=w/x|0,x*=4294967296;return new o(_,0)}function c(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return y(c(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(_,8)),A=p,R=0;R<w.length;R+=8){var M=Math.min(8,w.length-R),k=parseInt(w.substring(R,R+M),_);8>M?(M=h(Math.pow(_,M)),A=A.j(M).add(h(k))):(A=A.j(x),A=A.add(h(k)))}return A}var p=l(0),f=l(1),u=l(16777216);n=o.prototype,n.m=function(){if(g(this))return-y(this).m();for(var w=0,_=1,x=0;x<this.g.length;x++){var A=this.i(x);w+=(0<=A?A:4294967296+A)*_,_*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(m(this))return"0";if(g(this))return"-"+y(this).toString(w);for(var _=h(Math.pow(w,6)),x=this,A="";;){var R=P(x,_).g;x=b(x,R.j(_));var M=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=R,m(x))return M+A;for(;6>M.length;)M="0"+M;A=M+A}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function m(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function g(w){return w.h==-1}n.l=function(w){return w=b(this,w),g(w)?-1:m(w)?0:1};function y(w){for(var _=w.g.length,x=[],A=0;A<_;A++)x[A]=~w.g[A];return new o(x,~w.h).add(f)}n.abs=function(){return g(this)?y(this):this},n.add=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],A=0,R=0;R<=_;R++){var M=A+(this.i(R)&65535)+(w.i(R)&65535),k=(M>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);A=k>>>16,M&=65535,k&=65535,x[R]=k<<16|M}return new o(x,x[x.length-1]&-2147483648?-1:0)};function b(w,_){return w.add(y(_))}n.j=function(w){if(m(this)||m(w))return p;if(g(this))return g(w)?y(this).j(y(w)):y(y(this).j(w));if(g(w))return y(this.j(y(w)));if(0>this.l(u)&&0>w.l(u))return h(this.m()*w.m());for(var _=this.g.length+w.g.length,x=[],A=0;A<2*_;A++)x[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<w.g.length;R++){var M=this.i(A)>>>16,k=this.i(A)&65535,B=w.i(R)>>>16,O=w.i(R)&65535;x[2*A+2*R]+=k*O,T(x,2*A+2*R),x[2*A+2*R+1]+=M*O,T(x,2*A+2*R+1),x[2*A+2*R+1]+=k*B,T(x,2*A+2*R+1),x[2*A+2*R+2]+=M*B,T(x,2*A+2*R+2)}for(A=0;A<_;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=_;A<2*_;A++)x[A]=0;return new o(x,0)};function T(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function C(w,_){this.g=w,this.h=_}function P(w,_){if(m(_))throw Error("division by zero");if(m(w))return new C(p,p);if(g(w))return _=P(y(w),_),new C(y(_.g),y(_.h));if(g(_))return _=P(w,y(_)),new C(y(_.g),_.h);if(30<w.g.length){if(g(w)||g(_))throw Error("slowDivide_ only works with positive integers.");for(var x=f,A=_;0>=A.l(w);)x=S(x),A=S(A);var R=I(x,1),M=I(A,1);for(A=I(A,2),x=I(x,2);!m(A);){var k=M.add(A);0>=k.l(w)&&(R=R.add(x),M=k),A=I(A,1),x=I(x,1)}return _=b(w,R.j(_)),new C(R,_)}for(R=p;0<=w.l(_);){for(x=Math.max(1,Math.floor(w.m()/_.m())),A=Math.ceil(Math.log(x)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),M=h(x),k=M.j(_);g(k)||0<k.l(w);)x-=A,M=h(x),k=M.j(_);m(M)&&(M=f),R=R.add(M),w=b(w,k)}return new C(R,w)}n.A=function(w){return P(this,w).h},n.and=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],A=0;A<_;A++)x[A]=this.i(A)&w.i(A);return new o(x,this.h&w.h)},n.or=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],A=0;A<_;A++)x[A]=this.i(A)|w.i(A);return new o(x,this.h|w.h)},n.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],A=0;A<_;A++)x[A]=this.i(A)^w.i(A);return new o(x,this.h^w.h)};function S(w){for(var _=w.g.length+1,x=[],A=0;A<_;A++)x[A]=w.i(A)<<1|w.i(A-1)>>>31;return new o(x,w.h)}function I(w,_){var x=_>>5;_%=32;for(var A=w.g.length-x,R=[],M=0;M<A;M++)R[M]=0<_?w.i(M+x)>>>_|w.i(M+x+1)<<32-_:w.i(M+x);return new o(R,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,N_=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=c,Gi=o}).apply(typeof Gf<"u"?Gf:typeof self<"u"?self:typeof window<"u"?window:{});var $o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U_,Ms,z_,pa,Fc,j_,G_,H_;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof $o=="object"&&$o];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function r(d,v){if(v)t:{var E=i;d=d.split(".");for(var V=0;V<d.length-1;V++){var D=d[V];if(!(D in E))break t;E=E[D]}d=d[d.length-1],V=E[d],v=v(V),v!=V&&v!=null&&t(E,d,{configurable:!0,writable:!0,value:v})}}function s(d,v){d instanceof String&&(d+="");var E=0,V=!1,D={next:function(){if(!V&&E<d.length){var F=E++;return{value:v(F,d[F]),done:!1}}return V=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(d){return d||function(){return s(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function h(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function c(d,v,E){return d.call.apply(d.bind,arguments)}function p(d,v,E){if(!d)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,V),d.apply(v,D)}}return function(){return d.apply(v,arguments)}}function f(d,v,E){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:p,f.apply(null,arguments)}function u(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var V=E.slice();return V.push.apply(V,arguments),d.apply(this,V)}}function m(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(V,D,F){for(var G=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)G[xt-2]=arguments[xt];return v.prototype[D].apply(V,G)}}function g(d){const v=d.length;if(0<v){const E=Array(v);for(let V=0;V<v;V++)E[V]=d[V];return E}return[]}function y(d,v){for(let E=1;E<arguments.length;E++){const V=arguments[E];if(l(V)){const D=d.length||0,F=V.length||0;d.length=D+F;for(let G=0;G<F;G++)d[D+G]=V[G]}else d.push(V)}}class b{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function T(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var S=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function I(d,v,E){for(const V in d)v.call(E,d[V],V,d)}function w(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function _(d){const v={};for(const E in d)v[E]=d[E];return v}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,v){let E,V;for(let D=1;D<arguments.length;D++){V=arguments[D];for(E in V)d[E]=V[E];for(let F=0;F<x.length;F++)E=x[F],Object.prototype.hasOwnProperty.call(V,E)&&(d[E]=V[E])}}function R(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function M(d){a.setTimeout(()=>{throw d},0)}function k(){var d=j;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,E){const V=O.get();V.set(v,E),this.h?this.h.next=V:this.g=V,this.h=V}}var O=new b(()=>new U,d=>d.reset());class U{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let z,Q=!1,j=new B,H=()=>{const d=a.Promise.resolve(void 0);z=()=>{d.then(_t)}};var _t=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(E){M(E)}var v=O;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}Q=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};a.addEventListener("test",E,v),a.removeEventListener("test",E,v)}catch{}return d}();function It(d,v){if($.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,V=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(S){t:{try{P(v.nodeName);var D=!0;break t}catch{}D=!1}D||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:rt[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&It.aa.h.call(this)}}m(It,$);var rt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function Ne(d,v,E,V,D){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!V,this.ha=D,this.key=++Rt,this.da=this.fa=!1}function te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ee(d){this.src=d,this.g={},this.h=0}ee.prototype.add=function(d,v,E,V,D){var F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);var G=mn(d,v,V,D);return-1<G?(v=d[G],E||(v.fa=!1)):(v=new Ne(v,this.src,F,!!V,D),v.fa=E,d.push(v)),v};function kt(d,v){var E=v.type;if(E in d.g){var V=d.g[E],D=Array.prototype.indexOf.call(V,v,void 0),F;(F=0<=D)&&Array.prototype.splice.call(V,D,1),F&&(te(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function mn(d,v,E,V){for(var D=0;D<d.length;++D){var F=d[D];if(!F.da&&F.listener==v&&F.capture==!!E&&F.ha==V)return D}return-1}var In="closure_lm_"+(1e6*Math.random()|0),Ue={};function ze(d,v,E,V,D){if(Array.isArray(v)){for(var F=0;F<v.length;F++)ze(d,v[F],E,V,D);return null}return E=is(E),d&&d[Kt]?d.K(v,E,h(V)?!!V.capture:!!V,D):Ze(d,v,E,!1,V,D)}function Ze(d,v,E,V,D,F){if(!v)throw Error("Invalid event type");var G=h(D)?!!D.capture:!!D,xt=nr(d);if(xt||(d[In]=xt=new ee(d)),E=xt.add(v,E,V,G,F),E.proxy)return E;if(V=je(),E.proxy=V,V.src=d,V.listener=E,d.addEventListener)St||(D=G),D===void 0&&(D=!1),d.addEventListener(v.toString(),V,D);else if(d.attachEvent)d.attachEvent(Wn(v.toString()),V);else if(d.addListener&&d.removeListener)d.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return E}function je(){function d(E){return v.call(d.src,d.listener,E)}const v=So;return d}function ke(d,v,E,V,D){if(Array.isArray(v))for(var F=0;F<v.length;F++)ke(d,v[F],E,V,D);else V=h(V)?!!V.capture:!!V,E=is(E),d&&d[Kt]?(d=d.i,v=String(v).toString(),v in d.g&&(F=d.g[v],E=mn(F,E,V,D),-1<E&&(te(F[E]),Array.prototype.splice.call(F,E,1),F.length==0&&(delete d.g[v],d.h--)))):d&&(d=nr(d))&&(v=d.g[v.toString()],d=-1,v&&(d=mn(v,E,V,D)),(E=-1<d?v[d]:null)&&Rn(E))}function Rn(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Kt])kt(v.i,d);else{var E=d.type,V=d.proxy;v.removeEventListener?v.removeEventListener(E,V,d.capture):v.detachEvent?v.detachEvent(Wn(E),V):v.addListener&&v.removeListener&&v.removeListener(V),(E=nr(v))?(kt(E,d),E.h==0&&(E.src=null,v[In]=null)):te(d)}}}function Wn(d){return d in Ue?Ue[d]:Ue[d]="on"+d}function So(d,v){if(d.da)d=!0;else{v=new It(v,this);var E=d.listener,V=d.ha||d.src;d.fa&&Rn(d),d=E.call(V,v)}return d}function nr(d){return d=d[In],d instanceof ee?d:null}var ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function is(d){return typeof d=="function"?d:(d[ir]||(d[ir]=function(v){return d.handleEvent(v)}),d[ir])}function Ut(){J.call(this),this.i=new ee(this),this.M=this,this.F=null}m(Ut,J),Ut.prototype[Kt]=!0,Ut.prototype.removeEventListener=function(d,v,E,V){ke(this,d,v,E,V)};function ae(d,v){var E,V=d.F;if(V)for(E=[];V;V=V.F)E.push(V);if(d=d.M,V=v.type||v,typeof v=="string")v=new $(v,d);else if(v instanceof $)v.target=v.target||d;else{var D=v;v=new $(V,d),A(v,D)}if(D=!0,E)for(var F=E.length-1;0<=F;F--){var G=v.g=E[F];D=rr(G,V,!0,v)&&D}if(G=v.g=d,D=rr(G,V,!0,v)&&D,D=rr(G,V,!1,v)&&D,E)for(F=0;F<E.length;F++)G=v.g=E[F],D=rr(G,V,!1,v)&&D}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],V=0;V<E.length;V++)te(E[V]);delete d.g[v],d.h--}}this.F=null},Ut.prototype.K=function(d,v,E,V){return this.i.add(String(d),v,!1,E,V)},Ut.prototype.L=function(d,v,E,V){return this.i.add(String(d),v,!0,E,V)};function rr(d,v,E,V){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var D=!0,F=0;F<v.length;++F){var G=v[F];if(G&&!G.da&&G.capture==E){var xt=G.listener,le=G.ha||G.src;G.fa&&kt(d.i,G),D=xt.call(le,V)!==!1&&D}}return D&&!V.defaultPrevented}function _i(d,v,E){if(typeof d=="function")E&&(d=f(d,E));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(d,v||0)}function vi(d){d.g=_i(()=>{d.g=null,d.i&&(d.i=!1,vi(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class uv extends J{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:vi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(d){J.call(this),this.h=d,this.g={}}m(rs,J);var Sd=[];function Ed(d){I(d.g,function(v,E){this.g.hasOwnProperty(E)&&Rn(v)},d),d.g={}}rs.prototype.N=function(){rs.aa.N.call(this),Ed(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ml=a.JSON.stringify,dv=a.JSON.parse,pv=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Vl(){}Vl.prototype.h=null;function Cd(d){return d.h||(d.h=d.i())}function Pd(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dl(){$.call(this,"d")}m(Dl,$);function Bl(){$.call(this,"c")}m(Bl,$);var xi={},Id=null;function Eo(){return Id=Id||new Ut}xi.La="serverreachability";function Rd(d){$.call(this,xi.La,d)}m(Rd,$);function os(d){const v=Eo();ae(v,new Rd(v))}xi.STAT_EVENT="statevent";function kd(d,v){$.call(this,xi.STAT_EVENT,d),this.stat=v}m(kd,$);function Se(d){const v=Eo();ae(v,new kd(v,d))}xi.Ma="timingevent";function Md(d,v){$.call(this,xi.Ma,d),this.size=v}m(Md,$);function as(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function ls(){this.g=!0}ls.prototype.xa=function(){this.g=!1};function fv(d,v,E,V,D,F){d.info(function(){if(d.g)if(F)for(var G="",xt=F.split("&"),le=0;le<xt.length;le++){var pt=xt[le].split("=");if(1<pt.length){var ge=pt[0];pt=pt[1];var ye=ge.split("_");G=2<=ye.length&&ye[1]=="type"?G+(ge+"="+pt+"&"):G+(ge+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+V+") [attempt "+D+"]: "+v+`
`+E+`
`+G})}function mv(d,v,E,V,D,F,G){d.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+D+"]: "+v+`
`+E+`
`+F+" "+G})}function sr(d,v,E,V){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+yv(d,E)+(V?" "+V:"")})}function gv(d,v){d.info(function(){return"TIMEOUT: "+v})}ls.prototype.info=function(){};function yv(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var V=E[d];if(!(2>V.length)){var D=V[1];if(Array.isArray(D)&&!(1>D.length)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<D.length;G++)D[G]=""}}}}return Ml(E)}catch{return v}}var Co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ol;function Po(){}m(Po,Vl),Po.prototype.g=function(){return new XMLHttpRequest},Po.prototype.i=function(){return{}},Ol=new Po;function Yn(d,v,E,V){this.j=d,this.i=v,this.l=E,this.R=V||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dd}function Dd(){this.i=null,this.g="",this.h=!1}var Bd={},Fl={};function Ll(d,v,E){d.L=1,d.v=Mo(kn(v)),d.m=E,d.P=!0,Od(d,null)}function Od(d,v){d.F=Date.now(),Io(d),d.A=kn(d.v);var E=d.A,V=d.R;Array.isArray(V)||(V=[String(V)]),Qd(E.i,"t",V),d.C=0,E=d.j.J,d.h=new Dd,d.g=fp(d.j,E?v:null,!d.m),0<d.O&&(d.M=new uv(f(d.Y,d,d.g),d.O)),v=d.U,E=d.g,V=d.ca;var D="readystatechange";Array.isArray(D)||(D&&(Sd[0]=D.toString()),D=Sd);for(var F=0;F<D.length;F++){var G=ze(E,D[F],V||v.handleEvent,!1,v.h||v);if(!G)break;v.g[G.key]=G}v=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),os(),fv(d.i,d.u,d.A,d.l,d.R,d.m)}Yn.prototype.ca=function(d){d=d.target;const v=this.M;v&&Mn(d)==3?v.j():this.Y(d)},Yn.prototype.Y=function(d){try{if(d==this.g)t:{const ye=Mn(this.g);var v=this.g.Ba();const lr=this.g.Z();if(!(3>ye)&&(ye!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||ye!=4||v==7||(v==8||0>=lr?os(3):os(2)),Nl(this);var E=this.g.Z();this.X=E;e:if(Fd(this)){var V=ip(this.g);d="";var D=V.length,F=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bi(this),hs(this);var G="";break e}this.h.i=new a.TextDecoder}for(v=0;v<D;v++)this.h.h=!0,d+=this.h.i.decode(V[v],{stream:!(F&&v==D-1)});V.length=0,this.h.g+=d,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=E==200,mv(this.i,this.u,this.A,this.l,this.R,ye,E),this.o){if(this.T&&!this.K){e:{if(this.g){var xt,le=this.g;if((xt=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(xt)){var pt=xt;break e}}pt=null}if(E=pt)sr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,E);else{this.o=!1,this.s=3,Se(12),bi(this),hs(this);break t}}if(this.P){E=!0;let an;for(;!this.J&&this.C<G.length;)if(an=_v(this,G),an==Fl){ye==4&&(this.s=4,Se(14),E=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Bd){this.s=4,Se(15),sr(this.i,this.l,G,"[Invalid Chunk]"),E=!1;break}else sr(this.i,this.l,an,null),Ul(this,an);if(Fd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||G.length!=0||this.h.h||(this.s=1,Se(16),E=!1),this.o=this.o&&E,!E)sr(this.i,this.l,G,"[Invalid Chunked Response]"),bi(this),hs(this);else if(0<G.length&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.ba&&!ge.M&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Wl(ge),ge.M=!0,Se(11))}}else sr(this.i,this.l,G,null),Ul(this,G);ye==4&&bi(this),this.o&&!this.J&&(ye==4?cp(this.j,this):(this.o=!1,Io(this)))}else Bv(this.g),E==400&&0<G.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),bi(this),hs(this)}}}catch{}finally{}};function Fd(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function _v(d,v){var E=d.C,V=v.indexOf(`
`,E);return V==-1?Fl:(E=Number(v.substring(E,V)),isNaN(E)?Bd:(V+=1,V+E>v.length?Fl:(v=v.slice(V,V+E),d.C=V+E,v)))}Yn.prototype.cancel=function(){this.J=!0,bi(this)};function Io(d){d.S=Date.now()+d.I,Ld(d,d.I)}function Ld(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=as(f(d.ba,d),v)}function Nl(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Yn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(gv(this.i,this.A),this.L!=2&&(os(),Se(17)),bi(this),this.s=2,hs(this)):Ld(this,this.S-d)};function hs(d){d.j.G==0||d.J||cp(d.j,d)}function bi(d){Nl(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Ed(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Ul(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||zl(E.h,d))){if(!d.K&&zl(E.h,d)&&E.G==3){try{var V=E.Da.g.parse(v)}catch{V=null}if(Array.isArray(V)&&V.length==3){var D=V;if(D[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Lo(E),Oo(E);else break t;ql(E),Se(18)}}else E.za=D[1],0<E.za-E.T&&37500>D[2]&&E.F&&E.v==0&&!E.C&&(E.C=as(f(E.Za,E),6e3));if(1>=zd(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ai(E,11)}else if((d.K||E.g==d)&&Lo(E),!T(v))for(D=E.Da.g.parse(v),v=0;v<D.length;v++){let pt=D[v];if(E.T=pt[0],pt=pt[1],E.G==2)if(pt[0]=="c"){E.K=pt[1],E.ia=pt[2];const ge=pt[3];ge!=null&&(E.la=ge,E.j.info("VER="+E.la));const ye=pt[4];ye!=null&&(E.Aa=ye,E.j.info("SVER="+E.Aa));const lr=pt[5];lr!=null&&typeof lr=="number"&&0<lr&&(V=1.5*lr,E.L=V,E.j.info("backChannelRequestTimeoutMs_="+V)),V=E;const an=d.g;if(an){const Uo=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uo){var F=V.h;F.g||Uo.indexOf("spdy")==-1&&Uo.indexOf("quic")==-1&&Uo.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(jl(F,F.h),F.h=null))}if(V.D){const Yl=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;Yl&&(V.ya=Yl,At(V.I,V.D,Yl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),V=E;var G=d;if(V.qa=pp(V,V.J?V.ia:null,V.W),G.K){jd(V.h,G);var xt=G,le=V.L;le&&(xt.I=le),xt.B&&(Nl(xt),Io(xt)),V.g=G}else lp(V);0<E.i.length&&Fo(E)}else pt[0]!="stop"&&pt[0]!="close"||Ai(E,7);else E.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Ai(E,7):Hl(E):pt[0]!="noop"&&E.l&&E.l.ta(pt),E.v=0)}}os(4)}catch{}}var vv=class{constructor(d,v){this.g=d,this.map=v}};function Nd(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ud(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function zd(d){return d.h?1:d.g?d.g.size:0}function zl(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function jl(d,v){d.g?d.g.add(v):d.h=v}function jd(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Nd.prototype.cancel=function(){if(this.i=Gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Gd(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return g(d.i)}function xv(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var v=[],E=d.length,V=0;V<E;V++)v.push(d[V]);return v}v=[],E=0;for(V in d)v[E++]=d[V];return v}function bv(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const V in d)v[E++]=V;return v}}}function Hd(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=bv(d),V=xv(d),D=V.length,F=0;F<D;F++)v.call(void 0,V[F],E&&E[F],d)}var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wv(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var V=d[E].indexOf("="),D=null;if(0<=V){var F=d[E].substring(0,V);D=d[E].substring(V+1)}else F=d[E];v(F,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function wi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof wi){this.h=d.h,Ro(this,d.j),this.o=d.o,this.g=d.g,ko(this,d.s),this.l=d.l;var v=d.i,E=new ds;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Wd(this,E),this.m=d.m}else d&&(v=String(d).match(qd))?(this.h=!1,Ro(this,v[1]||"",!0),this.o=cs(v[2]||""),this.g=cs(v[3]||"",!0),ko(this,v[4]),this.l=cs(v[5]||"",!0),Wd(this,v[6]||"",!0),this.m=cs(v[7]||"")):(this.h=!1,this.i=new ds(null,this.h))}wi.prototype.toString=function(){var d=[],v=this.j;v&&d.push(us(v,Yd,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(us(v,Yd,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(us(E,E.charAt(0)=="/"?Sv:Tv,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",us(E,Cv)),d.join("")};function kn(d){return new wi(d)}function Ro(d,v,E){d.j=E?cs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function ko(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Wd(d,v,E){v instanceof ds?(d.i=v,Pv(d.i,d.h)):(E||(v=us(v,Ev)),d.i=new ds(v,d.h))}function At(d,v,E){d.i.set(v,E)}function Mo(d){return At(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function cs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function us(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,Av),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Av(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Yd=/[#\/\?@]/g,Tv=/[#\?:]/g,Sv=/[#\?]/g,Ev=/[#\?@]/g,Cv=/#/g;function ds(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Xn(d){d.g||(d.g=new Map,d.h=0,d.i&&wv(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=ds.prototype,n.add=function(d,v){Xn(this),this.i=null,d=or(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function Xd(d,v){Xn(d),v=or(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Kd(d,v){return Xn(d),v=or(d,v),d.g.has(v)}n.forEach=function(d,v){Xn(this),this.g.forEach(function(E,V){E.forEach(function(D){d.call(v,D,V,this)},this)},this)},n.na=function(){Xn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let V=0;V<v.length;V++){const D=d[V];for(let F=0;F<D.length;F++)E.push(v[V])}return E},n.V=function(d){Xn(this);let v=[];if(typeof d=="string")Kd(this,d)&&(v=v.concat(this.g.get(or(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},n.set=function(d,v){return Xn(this),this.i=null,d=or(this,d),Kd(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Qd(d,v,E){Xd(d,v),0<E.length&&(d.i=null,d.g.set(or(d,v),g(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var V=v[E];const F=encodeURIComponent(String(V)),G=this.V(V);for(V=0;V<G.length;V++){var D=F;G[V]!==""&&(D+="="+encodeURIComponent(String(G[V]))),d.push(D)}}return this.i=d.join("&")};function or(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Pv(d,v){v&&!d.j&&(Xn(d),d.i=null,d.g.forEach(function(E,V){var D=V.toLowerCase();V!=D&&(Xd(this,V),Qd(this,D,E))},d)),d.j=v}function Iv(d,v){const E=new ls;if(a.Image){const V=new Image;V.onload=u(Kn,E,"TestLoadImage: loaded",!0,v,V),V.onerror=u(Kn,E,"TestLoadImage: error",!1,v,V),V.onabort=u(Kn,E,"TestLoadImage: abort",!1,v,V),V.ontimeout=u(Kn,E,"TestLoadImage: timeout",!1,v,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=d}else v(!1)}function Rv(d,v){const E=new ls,V=new AbortController,D=setTimeout(()=>{V.abort(),Kn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:V.signal}).then(F=>{clearTimeout(D),F.ok?Kn(E,"TestPingServer: ok",!0,v):Kn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(D),Kn(E,"TestPingServer: error",!1,v)})}function Kn(d,v,E,V,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),V(E)}catch{}}function kv(){this.g=new pv}function Mv(d,v,E){const V=E||"";try{Hd(d,function(D,F){let G=D;h(D)&&(G=Ml(D)),v.push(V+F+"="+encodeURIComponent(G))})}catch(D){throw v.push(V+"type="+encodeURIComponent("_badmap")),D}}function Vo(d){this.l=d.Ub||null,this.j=d.eb||!1}m(Vo,Vl),Vo.prototype.g=function(){return new Do(this.l,this.j)},Vo.prototype.i=function(d){return function(){return d}}({});function Do(d,v){Ut.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Do,Ut),n=Do.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,fs(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ps(this):fs(this),this.readyState==3&&Jd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ps(this))},n.Qa=function(d){this.g&&(this.response=d,ps(this))},n.ga=function(){this.g&&ps(this)};function ps(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fs(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function fs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zd(d){let v="";return I(d,function(E,V){v+=V,v+=":",v+=E,v+=`\r
`}),v}function Gl(d,v,E){t:{for(V in E){var V=!1;break t}V=!0}V||(E=Zd(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):At(d,v,E))}function Ft(d){Ut.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ft,Ut);var Vv=/^https?$/i,Dv=["POST","PUT"];n=Ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,E,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ol.g(),this.v=this.o?Cd(this.o):Cd(Ol),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(F){$d(this,F);return}if(d=E||"",E=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var D in V)E.set(D,V[D]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const F of V.keys())E.set(F,V.get(F));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(E.keys()).find(F=>F.toLowerCase()=="content-type"),D=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Dv,v,void 0))||V||D||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of E)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{np(this),this.u=!0,this.g.send(d),this.u=!1}catch(F){$d(this,F)}};function $d(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,tp(d),Bo(d)}function tp(d){d.A||(d.A=!0,ae(d,"complete"),ae(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ae(this,"complete"),ae(this,"abort"),Bo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),Ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ep(this):this.bb())},n.bb=function(){ep(this)};function ep(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Mn(d)!=4||d.Z()!=2)){if(d.u&&Mn(d)==4)_i(d.Ea,0,d);else if(ae(d,"readystatechange"),Mn(d)==4){d.h=!1;try{const G=d.Z();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var V;if(V=G===0){var D=String(d.D).match(qd)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),V=!Vv.test(D?D.toLowerCase():"")}E=V}if(E)ae(d,"complete"),ae(d,"success");else{d.m=6;try{var F=2<Mn(d)?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.Z()+"]",tp(d)}}finally{Bo(d)}}}}function Bo(d,v){if(d.g){np(d);const E=d.g,V=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||ae(d,"ready");try{E.onreadystatechange=V}catch{}}}function np(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Mn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),dv(v)}};function ip(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Bv(d){const v={};d=(d.g&&2<=Mn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<d.length;V++){if(T(d[V]))continue;var E=R(d[V]);const D=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const F=v[D]||[];v[D]=F,F.push(E)}w(v,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ms(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function rp(d){this.Aa=0,this.i=[],this.j=new ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ms("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ms("baseRetryDelayMs",5e3,d),this.cb=ms("retryDelaySeedMs",1e4,d),this.Wa=ms("forwardChannelMaxRetries",2,d),this.wa=ms("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Nd(d&&d.concurrentRequestLimit),this.Da=new kv,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rp.prototype,n.la=8,n.G=1,n.connect=function(d,v,E,V){Se(0),this.W=d,this.H=v||{},E&&V!==void 0&&(this.H.OSID=E,this.H.OAID=V),this.F=this.X,this.I=pp(this,null,this.W),Fo(this)};function Hl(d){if(sp(d),d.G==3){var v=d.U++,E=kn(d.I);if(At(E,"SID",d.K),At(E,"RID",v),At(E,"TYPE","terminate"),gs(d,E),v=new Yn(d,d.j,v),v.L=2,v.v=Mo(kn(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=v.v,E=!0),E||(v.g=fp(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Io(v)}dp(d)}function Oo(d){d.g&&(Wl(d),d.g.cancel(),d.g=null)}function sp(d){Oo(d),d.u&&(a.clearTimeout(d.u),d.u=null),Lo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Fo(d){if(!Ud(d.h)&&!d.s){d.s=!0;var v=d.Ga;z||H(),Q||(z(),Q=!0),j.add(v,d),d.B=0}}function Ov(d,v){return zd(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=as(f(d.Ga,d,v),up(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const D=new Yn(this,this.j,d);let F=this.o;if(this.S&&(F?(F=_(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(D.H=F,F=null),this.P)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var V=this.i[E];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break e}V=void 0}if(V===void 0)break;if(v+=V,4096<v){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=ap(this,D,v),E=kn(this.I),At(E,"RID",d),At(E,"CVER",22),this.D&&At(E,"X-HTTP-Session-Id",this.D),gs(this,E),F&&(this.O?v="headers="+encodeURIComponent(String(Zd(F)))+"&"+v:this.m&&Gl(E,this.m,F)),jl(this.h,D),this.Ua&&At(E,"TYPE","init"),this.P?(At(E,"$req",v),At(E,"SID","null"),D.T=!0,Ll(D,E,null)):Ll(D,E,v),this.G=2}}else this.G==3&&(d?op(this,d):this.i.length==0||Ud(this.h)||op(this))};function op(d,v){var E;v?E=v.l:E=d.U++;const V=kn(d.I);At(V,"SID",d.K),At(V,"RID",E),At(V,"AID",d.T),gs(d,V),d.m&&d.o&&Gl(V,d.m,d.o),E=new Yn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=ap(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),jl(d.h,E),Ll(E,V,v)}function gs(d,v){d.H&&I(d.H,function(E,V){At(v,V,E)}),d.l&&Hd({},function(E,V){At(v,V,E)})}function ap(d,v,E){E=Math.min(d.i.length,E);var V=d.l?f(d.l.Na,d.l,d):null;t:{var D=d.i;let F=-1;for(;;){const G=["count="+E];F==-1?0<E?(F=D[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let xt=!0;for(let le=0;le<E;le++){let pt=D[le].g;const ge=D[le].map;if(pt-=F,0>pt)F=Math.max(0,D[le].g-100),xt=!1;else try{Mv(ge,G,"req"+pt+"_")}catch{V&&V(ge)}}if(xt){V=G.join("&");break t}}}return d=d.i.splice(0,E),v.D=d,V}function lp(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;z||H(),Q||(z(),Q=!0),j.add(v,d),d.v=0}}function ql(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=as(f(d.Fa,d),up(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=as(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Oo(this),hp(this))};function Wl(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function hp(d){d.g=new Yn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=kn(d.qa);At(v,"RID","rpc"),At(v,"SID",d.K),At(v,"AID",d.T),At(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&At(v,"TO",d.ja),At(v,"TYPE","xmlhttp"),gs(d,v),d.m&&d.o&&Gl(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Mo(kn(v)),E.m=null,E.P=!0,Od(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Oo(this),ql(this),Se(19))};function Lo(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function cp(d,v){var E=null;if(d.g==v){Lo(d),Wl(d),d.g=null;var V=2}else if(zl(d.h,v))E=v.D,jd(d.h,v),V=1;else return;if(d.G!=0){if(v.o)if(V==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var D=d.B;V=Eo(),ae(V,new Md(V,E)),Fo(d)}else lp(d);else if(D=v.s,D==3||D==0&&0<v.X||!(V==1&&Ov(d,v)||V==2&&ql(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),D){case 1:Ai(d,5);break;case 4:Ai(d,10);break;case 3:Ai(d,6);break;default:Ai(d,2)}}}function up(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function Ai(d,v){if(d.j.info("Error code "+v),v==2){var E=f(d.fb,d),V=d.Xa;const D=!V;V=new wi(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ro(V,"https"),Mo(V),D?Iv(V.toString(),E):Rv(V.toString(),E)}else Se(2);d.G=0,d.l&&d.l.sa(v),dp(d),sp(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function dp(d){if(d.G=0,d.ka=[],d.l){const v=Gd(d.h);(v.length!=0||d.i.length!=0)&&(y(d.ka,v),y(d.ka,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.ra()}}function pp(d,v,E){var V=E instanceof wi?kn(E):new wi(E);if(V.g!="")v&&(V.g=v+"."+V.g),ko(V,V.s);else{var D=a.location;V=D.protocol,v=v?v+"."+D.hostname:D.hostname,D=+D.port;var F=new wi(null);V&&Ro(F,V),v&&(F.g=v),D&&ko(F,D),E&&(F.l=E),V=F}return E=d.D,v=d.ya,E&&v&&At(V,E,v),At(V,"VER",d.la),gs(d,V),V}function fp(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Ft(new Vo({eb:E})):new Ft(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mp(){}n=mp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function No(){}No.prototype.g=function(d,v){return new Ge(d,v)};function Ge(d,v){Ut.call(this),this.g=new rp(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!T(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!T(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ar(this)}m(Ge,Ut),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Hl(this.g)},Ge.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ml(d),d=E);v.i.push(new vv(v.Ya++,d)),v.G==3&&Fo(v)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,Ge.aa.N.call(this)};function gp(d){Dl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){t:{for(const E in v){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}m(gp,Dl);function yp(){Bl.call(this),this.status=1}m(yp,Bl);function ar(d){this.g=d}m(ar,mp),ar.prototype.ua=function(){ae(this.g,"a")},ar.prototype.ta=function(d){ae(this.g,new gp(d))},ar.prototype.sa=function(d){ae(this.g,new yp)},ar.prototype.ra=function(){ae(this.g,"b")},No.prototype.createWebChannel=No.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,H_=function(){return new No},G_=function(){return Eo()},j_=xi,Fc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,pa=Co,Vd.COMPLETE="complete",z_=Vd,Pd.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Ms=Pd,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,U_=Ft}).apply(typeof $o<"u"?$o:typeof self<"u"?self:typeof window<"u"?window:{});const Hf="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new V_("@firebase/firestore");function pr(){return Ki.logLevel}function q(n,...t){if(Ki.logLevel<=ut.DEBUG){const e=t.map(Hu);Ki.debug(`Firestore (${Zr}): ${n}`,...e)}}function Gn(n,...t){if(Ki.logLevel<=ut.ERROR){const e=t.map(Hu);Ki.error(`Firestore (${Zr}): ${n}`,...e)}}function Lr(n,...t){if(Ki.logLevel<=ut.WARN){const e=t.map(Hu);Ki.warn(`Firestore (${Zr}): ${n}`,...e)}}function Hu(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n="Unexpected state"){const t=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: `+n;throw Gn(t),new Error(t)}function yt(n,t){n||et()}function it(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Jr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ve.UNAUTHENTICATED))}shutdown(){}}class GE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class HE{constructor(t){this.t=t,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){yt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve();let s=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oi,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oi)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string"),new q_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new ve(t)}}class qE{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class WE{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new qE(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XE{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){yt(this.o===void 0);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(yt(typeof e.token=="string"),this.R=e.token,new YE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=KE(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function lt(n,t){return n<t?-1:n>t?1:0}function Nr(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(t){return Zt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Zt(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Y(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Y(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Y(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?lt(this.nanoseconds,t.nanoseconds):lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(t){return new nt(t)}static min(){return new nt(new Zt(0,0))}static max(){return new nt(new Zt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,e,i){e===void 0?e=0:e>t.length&&et(),i===void 0?i=t.length-e:i>t.length-e&&et(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return co.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof co?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Tt extends co{construct(t,e,i){return new Tt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Y(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Tt(e)}static emptyPath(){return new Tt([])}}const QE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ce extends co{construct(t,e,i){return new ce(t,e,i)}static isValidIdentifier(t){return QE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ce.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ce(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Y(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Y(N.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Y(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ce(e)}static emptyPath(){return new ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.path=t}static fromPath(t){return new Z(Tt.fromString(t))}static fromName(t){return new Z(Tt.fromString(t).popFirst(5))}static empty(){return new Z(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Tt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Tt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Z(new Tt(t.slice()))}}function JE(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=nt.fromTimestamp(i===1e9?new Zt(e+1,0):new Zt(e,i));return new ui(r,Z.empty(),t)}function ZE(n){return new ui(n.readTime,n.key,-1)}class ui{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ui(nt.min(),Z.empty(),-1)}static max(){return new ui(nt.max(),Z.empty(),-1)}}function $E(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Z.comparator(n.documentKey,t.documentKey),e!==0?e:lt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==tC)throw n;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new L((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof L?e:L.resolve(e)}catch(e){return L.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):L.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):L.reject(e)}static resolve(t){return new L((e,i)=>{e(t)})}static reject(t){return new L((e,i)=>{i(t)})}static waitFor(t){return new L((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=L.resolve(!1);for(const i of t)e=e.next(r=>r?L.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new L((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(c=>{o[h]=c,++a,a===s&&i(o)},c=>r(c))}})}static doWhile(t,e){return new L((i,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}}function nC(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ts(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ie(i),this.se=i=>e.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}_l.oe=-1;function vl(n){return n==null}function Ga(n){return n===0&&1/n==-1/0}function iC(n){return typeof n=="number"&&Number.isInteger(n)&&!Ga(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=qf(t)),t=sC(n.get(e),t);return qf(t)}function sC(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="";break;case"":e+="";break;default:e+=s}}return e}function qf(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Zi(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Y_(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e){this.comparator=t,this.root=e||he.EMPTY}insert(t,e){return new Ot(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,he.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,he.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ta(this.root,t,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ta(this.root,t,this.comparator,!0)}}class ta{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class he{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??he.RED,this.left=r??he.EMPTY,this.right=s??he.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new he(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return he.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return he.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,he.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,he.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const t=this.left.check();if(t!==this.right.check())throw et();return t+(this.isRed()?0:1)}}he.EMPTY=null,he.RED=!0,he.BLACK=!1;he.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(t,e,i,r,s){return this}insert(t,e,i){return new he(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Yf(this.data.getIterator())}getIteratorFrom(t){return new Yf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new $t(this.comparator);return e.data=t,e}}class Yf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.fields=t,t.sort(ce.comparator)}static empty(){return new un([])}unionWith(t){let e=new $t(ce.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new un(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Nr(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new X_("Invalid base64 string: "+s):s}}(t);return new fe(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new fe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fe.EMPTY_BYTE_STRING=new fe("");const oC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(n){if(yt(!!n),typeof n=="string"){let t=0;const e=oC.exec(n);if(yt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pi(n){return typeof n=="string"?fe.fromBase64String(n):fe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function xl(n){const t=n.mapValue.fields.__previous_value__;return qu(t)?xl(t):t}function uo(n){const t=di(n.mapValue.fields.__local_write_time__.timestampValue);return new Zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,e,i,r,s,o,a,l,h){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h}}class po{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof po&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qu(n)?4:hC(n)?9007199254740991:lC(n)?10:11:et()}function Pn(n,t){if(n===t)return!0;const e=fi(n);if(e!==fi(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return uo(n).isEqual(uo(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=di(r.timestampValue),a=di(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return pi(r.bytesValue).isEqual(pi(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return jt(r.geoPointValue.latitude)===jt(s.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return jt(r.integerValue)===jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=jt(r.doubleValue),a=jt(s.doubleValue);return o===a?Ga(o)===Ga(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return Nr(n.arrayValue.values||[],t.arrayValue.values||[],Pn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Wf(o)!==Wf(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pn(o[l],a[l])))return!1;return!0}(n,t);default:return et()}}function fo(n,t){return(n.values||[]).find(e=>Pn(e,t))!==void 0}function Ur(n,t){if(n===t)return 0;const e=fi(n),i=fi(t);if(e!==i)return lt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,t.booleanValue);case 2:return function(s,o){const a=jt(s.integerValue||s.doubleValue),l=jt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return Xf(n.timestampValue,t.timestampValue);case 4:return Xf(uo(n),uo(t));case 5:return lt(n.stringValue,t.stringValue);case 6:return function(s,o){const a=pi(s),l=pi(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const c=lt(a[h],l[h]);if(c!==0)return c}return lt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){const a=lt(jt(s.latitude),jt(o.latitude));return a!==0?a:lt(jt(s.longitude),jt(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Kf(n.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,h,c;const p=s.fields||{},f=o.fields||{},u=(a=p.value)===null||a===void 0?void 0:a.arrayValue,m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,g=lt(((h=u==null?void 0:u.values)===null||h===void 0?void 0:h.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return g!==0?g:Kf(u,m)}(n.mapValue,t.mapValue);case 11:return function(s,o){if(s===ea.mapValue&&o===ea.mapValue)return 0;if(s===ea.mapValue)return 1;if(o===ea.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),h=o.fields||{},c=Object.keys(h);l.sort(),c.sort();for(let p=0;p<l.length&&p<c.length;++p){const f=lt(l[p],c[p]);if(f!==0)return f;const u=Ur(a[l[p]],h[c[p]]);if(u!==0)return u}return lt(l.length,c.length)}(n.mapValue,t.mapValue);default:throw et()}}function Xf(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return lt(n,t);const e=di(n),i=di(t),r=lt(e.seconds,i.seconds);return r!==0?r:lt(e.nanos,i.nanos)}function Kf(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const s=Ur(e[r],i[r]);if(s)return s}return lt(e.length,i.length)}function zr(n){return Lc(n)}function Lc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=di(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return pi(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Z.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const s of e.values||[])r?r=!1:i+=",",i+=Lc(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Lc(e.fields[o])}`;return r+"}"}(n.mapValue):et()}function fa(n){switch(fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xl(n);return t?16+fa(t):16;case 5:return 2*n.stringValue.length;case 6:return pi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+fa(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Zi(i.fields,(s,o)=>{r+=s.length+fa(o)}),r}(n.mapValue);default:throw et()}}function Qf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Nc(n){return!!n&&"integerValue"in n}function Wu(n){return!!n&&"arrayValue"in n}function Jf(n){return!!n&&"nullValue"in n}function Zf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ma(n){return!!n&&"mapValue"in n}function lC(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Gs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Zi(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Gs(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Gs(n.arrayValue.values[e]);return t}return Object.assign({},n)}function hC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.value=t}static empty(){return new en({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!ma(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gs(e)}setAll(t){let e=ce.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=Gs(o):r.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());ma(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Pn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Zi(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new en(Gs(this.value))}}function K_(n){const t=[];return Zi(n.fields,(e,i)=>{const r=new ce([e]);if(ma(i)){const s=K_(i.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new un(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new xe(t,0,nt.min(),nt.min(),nt.min(),en.empty(),0)}static newFoundDocument(t,e,i,r){return new xe(t,1,e,nt.min(),i,r,0)}static newNoDocument(t,e){return new xe(t,2,e,nt.min(),nt.min(),en.empty(),0)}static newUnknownDocument(t,e){return new xe(t,3,e,nt.min(),nt.min(),en.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof xe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,e){this.position=t,this.inclusive=e}}function $f(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],o=n.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(o.referenceValue),e.key):i=Ur(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function tm(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Pn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,e="asc"){this.field=t,this.dir=e}}function cC(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{}class Yt extends Q_{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new dC(t,e,i):e==="array-contains"?new mC(t,i):e==="in"?new gC(t,i):e==="not-in"?new yC(t,i):e==="array-contains-any"?new _C(t,i):new Yt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new pC(t,i):new fC(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Ur(e,this.value)):e!==null&&fi(this.value)===fi(e)&&this.matchesComparison(Ur(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends Q_{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new dn(t,e)}matches(t){return J_(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J_(n){return n.op==="and"}function Z_(n){return uC(n)&&J_(n)}function uC(n){for(const t of n.filters)if(t instanceof dn)return!1;return!0}function Uc(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+zr(n.value);if(Z_(n))return n.filters.map(t=>Uc(t)).join(",");{const t=n.filters.map(e=>Uc(e)).join(",");return`${n.op}(${t})`}}function $_(n,t){return n instanceof Yt?function(i,r){return r instanceof Yt&&i.op===r.op&&i.field.isEqual(r.field)&&Pn(i.value,r.value)}(n,t):n instanceof dn?function(i,r){return r instanceof dn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&$_(o,r.filters[a]),!0):!1}(n,t):void et()}function t0(n){return n instanceof Yt?function(e){return`${e.field.canonicalString()} ${e.op} ${zr(e.value)}`}(n):n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(t0).join(" ,")+"}"}(n):"Filter"}class dC extends Yt{constructor(t,e,i){super(t,e,i),this.key=Z.fromName(i.referenceValue)}matches(t){const e=Z.comparator(t.key,this.key);return this.matchesComparison(e)}}class pC extends Yt{constructor(t,e){super(t,"in",e),this.keys=e0("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class fC extends Yt{constructor(t,e){super(t,"not-in",e),this.keys=e0("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function e0(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Z.fromName(i.referenceValue))}class mC extends Yt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Wu(e)&&fo(e.arrayValue,this.value)}}class gC extends Yt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&fo(this.value.arrayValue,e)}}class yC extends Yt{constructor(t,e){super(t,"not-in",e)}matches(t){if(fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!fo(this.value.arrayValue,e)}}class _C extends Yt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Wu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>fo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function em(n,t=null,e=[],i=[],r=null,s=null,o=null){return new vC(n,t,e,i,r,s,o)}function Yu(n){const t=it(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Uc(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),vl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>zr(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>zr(i)).join(",")),t.ue=e}return t.ue}function Xu(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!cC(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!$_(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!tm(n.startAt,t.startAt)&&tm(n.endAt,t.endAt)}function zc(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xC(n,t,e,i,r,s,o,a){return new es(n,t,e,i,r,s,o,a)}function n0(n){return new es(n)}function nm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i0(n){return n.collectionGroup!==null}function Hs(n){const t=it(n);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $t(ce.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new mo(s,i))}),e.has(ce.keyField().canonicalString())||t.ce.push(new mo(ce.keyField(),i))}return t.ce}function Sn(n){const t=it(n);return t.le||(t.le=bC(t,Hs(n))),t.le}function bC(n,t){if(n.limitType==="F")return em(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new mo(r.field,s)});const e=n.endAt?new Ha(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ha(n.startAt.position,n.startAt.inclusive):null;return em(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function jc(n,t){const e=n.filters.concat([t]);return new es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function qa(n,t,e){return new es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function bl(n,t){return Xu(Sn(n),Sn(t))&&n.limitType===t.limitType}function r0(n){return`${Yu(Sn(n))}|lt:${n.limitType}`}function fr(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>t0(r)).join(", ")}]`),vl(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>zr(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>zr(r)).join(",")),`Target(${i})`}(Sn(n))}; limitType=${n.limitType})`}function wl(n,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(const s of Hs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const h=$f(o,a,l);return o.inclusive?h<=0:h<0}(i.startAt,Hs(i),r)||i.endAt&&!function(o,a,l){const h=$f(o,a,l);return o.inclusive?h>=0:h>0}(i.endAt,Hs(i),r))}(n,t)}function wC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s0(n){return(t,e)=>{let i=!1;for(const r of Hs(n)){const s=AC(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function AC(n,t,e){const i=n.field.isKeyField()?Z.comparator(t.key,e.key):function(s,o,a){const l=o.data.field(s),h=a.data.field(s);return l!==null&&h!==null?Ur(l,h):et()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Zi(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Ot(Z.comparator);function Hn(){return TC}const o0=new Ot(Z.comparator);function Vs(...n){let t=o0;for(const e of n)t=t.insert(e.key,e);return t}function a0(n){let t=o0;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Li(){return qs()}function l0(){return qs()}function qs(){return new $i(n=>n.toString(),(n,t)=>n.isEqual(t))}const SC=new Ot(Z.comparator),EC=new $t(Z.comparator);function at(...n){let t=EC;for(const e of n)t=t.add(e);return t}const CC=new $t(lt);function PC(){return CC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ga(t)?"-0":t}}function h0(n){return{integerValue:""+n}}function IC(n,t){return iC(t)?h0(t):Ku(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this._=void 0}}function RC(n,t,e){return n instanceof Wa?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&qu(s)&&(s=xl(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof go?u0(n,t):n instanceof yo?d0(n,t):function(r,s){const o=c0(r,s),a=im(o)+im(r.Pe);return Nc(o)&&Nc(r.Pe)?h0(a):Ku(r.serializer,a)}(n,t)}function kC(n,t,e){return n instanceof go?u0(n,t):n instanceof yo?d0(n,t):e}function c0(n,t){return n instanceof Ya?function(i){return Nc(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Wa extends Al{}class go extends Al{constructor(t){super(),this.elements=t}}function u0(n,t){const e=p0(t);for(const i of n.elements)e.some(r=>Pn(r,i))||e.push(i);return{arrayValue:{values:e}}}class yo extends Al{constructor(t){super(),this.elements=t}}function d0(n,t){let e=p0(t);for(const i of n.elements)e=e.filter(r=>!Pn(r,i));return{arrayValue:{values:e}}}class Ya extends Al{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function im(n){return jt(n.integerValue||n.doubleValue)}function p0(n){return Wu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MC(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof go&&r instanceof go||i instanceof yo&&r instanceof yo?Nr(i.elements,r.elements,Pn):i instanceof Ya&&r instanceof Ya?Pn(i.Pe,r.Pe):i instanceof Wa&&r instanceof Wa}(n.transform,t.transform)}class VC{constructor(t,e){this.version=t,this.transformResults=e}}class Ln{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ln}static exists(t){return new Ln(void 0,t)}static updateTime(t){return new Ln(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ga(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Tl{}function f0(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new g0(n.key,Ln.none()):new bo(n.key,n.data,Ln.none());{const e=n.data,i=en.empty();let r=new $t(ce.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new tr(n.key,i,new un(r.toArray()),Ln.none())}}function DC(n,t,e){n instanceof bo?function(r,s,o){const a=r.value.clone(),l=sm(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof tr?function(r,s,o){if(!ga(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sm(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(m0(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Ws(n,t,e,i){return n instanceof bo?function(s,o,a,l){if(!ga(s.precondition,o))return a;const h=s.value.clone(),c=om(s.fieldTransforms,l,o);return h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,t,e,i):n instanceof tr?function(s,o,a,l){if(!ga(s.precondition,o))return a;const h=om(s.fieldTransforms,l,o),c=o.data;return c.setAll(m0(s)),c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(s,o,a){return ga(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function BC(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=c0(i.transform,r||null);s!=null&&(e===null&&(e=en.empty()),e.set(i.field,s))}return e||null}function rm(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Nr(i,r,(s,o)=>MC(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class bo extends Tl{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tr extends Tl{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function m0(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function sm(n,t,e){const i=new Map;yt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,kC(o,a,e[r]))}return i}function om(n,t,e){const i=new Map;for(const r of n){const s=r.transform,o=e.data.field(r.field);i.set(r.field,RC(s,o,t))}return i}class g0 extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&DC(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Ws(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Ws(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=l0();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;const l=f0(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(nt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),at())}isEqual(t){return this.batchId===t.batchId&&Nr(this.mutations,t.mutations,(e,i)=>rm(e,i))&&Nr(this.baseMutations,t.baseMutations,(e,i)=>rm(e,i))}}class Qu{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){yt(t.mutations.length===i.length);let r=function(){return SC}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Qu(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,ct;function UC(n){switch(n){default:return et();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function y0(n){if(n===void 0)return Gn("GRPC error has no .code"),N.UNKNOWN;switch(n){case qt.OK:return N.OK;case qt.CANCELLED:return N.CANCELLED;case qt.UNKNOWN:return N.UNKNOWN;case qt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case qt.INTERNAL:return N.INTERNAL;case qt.UNAVAILABLE:return N.UNAVAILABLE;case qt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case qt.NOT_FOUND:return N.NOT_FOUND;case qt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case qt.ABORTED:return N.ABORTED;case qt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case qt.DATA_LOSS:return N.DATA_LOSS;default:return et()}}(ct=qt||(qt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Gi([4294967295,4294967295],0);function am(n){const t=zC().encode(n),e=new N_;return e.update(t),new Uint8Array(e.digest())}function lm(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Gi([e,i],0),new Gi([r,s],0)]}class Ju{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Ds(`Invalid padding: ${e}`);if(i<0)throw new Ds(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ds(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Ds(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ie=Gi.fromNumber(this.Te)}Ee(t,e,i){let r=t.add(e.multiply(Gi.fromNumber(i)));return r.compare(jC)===1&&(r=new Gi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const e=am(t),[i,r]=lm(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Ju(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const e=am(t),[i,r]=lm(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Ds extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,wo.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Sl(nt.min(),r,new Ot(lt),Hn(),at())}}class wo{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new wo(i,e,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}}class _0{constructor(t,e){this.targetId=t,this.me=e}}class v0{constructor(t,e,i=fe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class hm{constructor(){this.fe=0,this.ge=cm(),this.pe=fe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=at(),e=at(),i=at();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:et()}}),new wo(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=cm()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GC{constructor(t){this.Le=t,this.Be=new Map,this.ke=Hn(),this.qe=na(),this.Qe=na(),this.Ke=new Ot(lt)}$e(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(e,t.Ve):this.We(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.We(e,t.key,t.Ve)}Ge(t){this.forEachTarget(t,e=>{const i=this.ze(e);switch(t.state){case 0:this.je(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.je(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),i.De(t.resumeToken));break;default:et()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.je(r)&&e(r)})}Je(t){const e=t.targetId,i=t.me.count,r=this.Ye(e);if(r){const s=r.target;if(zc(s))if(i===0){const o=new Z(s.path);this.We(e,o,xe.newNoDocument(o,nt.min()))}else yt(i===1);else{const o=this.Ze(e);if(o!==i){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(e);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,h)}}}}}Xe(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e;let o,a;try{o=pi(i).toUint8Array()}catch(l){if(l instanceof X_)return Lr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ju(o,r,s)}catch(l){return Lr(l instanceof Ds?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,e,i){return e.me.count===i-this.rt(t,e.targetId)?0:2}rt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(e,s,null),r++)}),r}it(t){const e=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&zc(a.target)){const l=new Z(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,xe.newNoDocument(l,t))}s.be&&(e.set(o,s.ve()),s.Ce())}});let i=at();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Ye(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new Sl(t,e,this.Ke,this.ke,i);return this.ke=Hn(),this.qe=na(),this.Qe=na(),this.Ke=new Ot(lt),r}Ue(t,e){if(!this.je(t))return;const i=this.ot(t,e.key)?2:0;this.ze(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t)),this.Qe=this.Qe.insert(e.key,this._t(e.key).add(t))}We(t,e,i){if(!this.je(t))return;const r=this.ze(t);this.ot(t,e)?r.Fe(e,1):r.Me(e),this.Qe=this.Qe.insert(e,this._t(e).delete(t)),this.Qe=this.Qe.insert(e,this._t(e).add(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let e=this.Be.get(t);return e||(e=new hm,this.Be.set(t,e)),e}_t(t){let e=this.Qe.get(t);return e||(e=new $t(lt),this.Qe=this.Qe.insert(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new $t(lt),this.qe=this.qe.insert(t,e)),e}je(t){const e=this.Ye(t)!==null;return e||q("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new hm),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.We(t,e,null)})}ot(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function na(){return new Ot(Z.comparator)}function cm(){return new Ot(Z.comparator)}const HC={asc:"ASCENDING",desc:"DESCENDING"},qC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WC={and:"AND",or:"OR"};class YC{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Gc(n,t){return n.useProto3Json||vl(t)?t:{value:t}}function Xa(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function x0(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function XC(n,t){return Xa(n,t.toTimestamp())}function En(n){return yt(!!n),nt.fromTimestamp(function(e){const i=di(e);return new Zt(i.seconds,i.nanos)}(n))}function Zu(n,t){return Hc(n,t).canonicalString()}function Hc(n,t){const e=function(r){return new Tt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function b0(n){const t=Tt.fromString(n);return yt(E0(t)),t}function qc(n,t){return Zu(n.databaseId,t.path)}function Bh(n,t){const e=b0(t);if(e.get(1)!==n.databaseId.projectId)throw new Y(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Y(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Z(A0(e))}function w0(n,t){return Zu(n.databaseId,t)}function KC(n){const t=b0(n);return t.length===4?Tt.emptyPath():A0(t)}function Wc(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function A0(n){return yt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function um(n,t,e){return{name:qc(n,t),fields:e.value.mapValue.fields}}function QC(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:et()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,c){return h.useProto3Json?(yt(c===void 0||typeof c=="string"),fe.fromBase64String(c||"")):(yt(c===void 0||c instanceof Buffer||c instanceof Uint8Array),fe.fromUint8Array(c||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(h){const c=h.code===void 0?N.UNKNOWN:y0(h.code);return new Y(c,h.message||"")}(o);e=new v0(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Bh(n,i.document.name),s=En(i.document.updateTime),o=i.document.createTime?En(i.document.createTime):nt.min(),a=new en({mapValue:{fields:i.document.fields}}),l=xe.newFoundDocument(r,s,o,a),h=i.targetIds||[],c=i.removedTargetIds||[];e=new ya(h,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Bh(n,i.document),s=i.readTime?En(i.readTime):nt.min(),o=xe.newNoDocument(r,s),a=i.removedTargetIds||[];e=new ya([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Bh(n,i.document),s=i.removedTargetIds||[];e=new ya([],s,r,null)}else{if(!("filter"in t))return et();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new NC(r,s),a=i.targetId;e=new _0(a,o)}}return e}function JC(n,t){let e;if(t instanceof bo)e={update:um(n,t.key,t.value)};else if(t instanceof g0)e={delete:qc(n,t.key)};else if(t instanceof tr)e={update:um(n,t.key,t.data),updateMask:oP(t.fieldMask)};else{if(!(t instanceof OC))return et();e={verify:qc(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw et()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:XC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:et()}(n,t.precondition)),e}function ZC(n,t){return n&&n.length>0?(yt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?En(r.updateTime):En(s);return o.isEqual(nt.min())&&(o=En(s)),new VC(o,r.transformResults||[])}(e,t))):[]}function $C(n,t){return{documents:[w0(n,t.path)]}}function tP(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=w0(n,r);const s=function(h){if(h.length!==0)return S0(dn.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(c=>function(f){return{field:mr(f.field),direction:iP(f.dir)}}(c))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=Gc(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ct:e,parent:r}}function eP(n){let t=KC(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){yt(i===1);const c=e.from[0];c.allDescendants?r=c.collectionId:t=t.child(c.collectionId)}let s=[];e.where&&(s=function(p){const f=T0(p);return f instanceof dn&&Z_(f)?f.getFilters():[f]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(f=>function(m){return new mo(gr(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(e.orderBy));let a=null;e.limit&&(a=function(p){let f;return f=typeof p=="object"?p.value:p,vl(f)?null:f}(e.limit));let l=null;e.startAt&&(l=function(p){const f=!!p.before,u=p.values||[];return new Ha(u,f)}(e.startAt));let h=null;return e.endAt&&(h=function(p){const f=!p.before,u=p.values||[];return new Ha(u,f)}(e.endAt)),xC(t,r,o,s,a,"F",l,h)}function nP(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function T0(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=gr(e.unaryFilter.field);return Yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=gr(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gr(e.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gr(e.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):n.fieldFilter!==void 0?function(e){return Yt.create(gr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return dn.create(e.compositeFilter.filters.map(i=>T0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et()}function iP(n){return HC[n]}function rP(n){return qC[n]}function sP(n){return WC[n]}function mr(n){return{fieldPath:n.canonicalString()}}function gr(n){return ce.fromServerFormat(n.fieldPath)}function S0(n){return n instanceof Yt?function(e){if(e.op==="=="){if(Zf(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NAN"}};if(Jf(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Zf(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NOT_NAN"}};if(Jf(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(e.field),op:rP(e.op),value:e.value}}}(n):n instanceof dn?function(e){const i=e.getFilters().map(r=>S0(r));return i.length===1?i[0]:{compositeFilter:{op:sP(e.op),filters:i}}}(n):et()}function oP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function E0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t,e,i,r,s=nt.min(),o=nt.min(),a=fe.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new ei(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(t){this.ht=t}}function lP(n){const t=eP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.ln=new cP}addToCollectionParentIndex(t,e){return this.ln.add(e),L.resolve()}getCollectionParents(t,e){return L.resolve(this.ln.getEntries(e))}addFieldIndex(t,e){return L.resolve()}deleteFieldIndex(t,e){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,e){return L.resolve()}getDocumentsMatchingTarget(t,e){return L.resolve(null)}getIndexType(t,e){return L.resolve(0)}getFieldIndexes(t,e){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,e){return L.resolve(ui.min())}getMinOffsetFromCollectionGroup(t,e){return L.resolve(ui.min())}updateCollectionGroup(t,e,i){return L.resolve()}updateIndexEntries(t,e){return L.resolve()}}class cP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new $t(Tt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new $t(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Me{static withCacheSize(t){return new Me(t,Me.DEFAULT_COLLECTION_PERCENTILE,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Me.DEFAULT_COLLECTION_PERCENTILE=10,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Me.DEFAULT=new Me(41943040,Me.DEFAULT_COLLECTION_PERCENTILE,Me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Me.DISABLED=new Me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new jr(0)}static Qn(){return new jr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm([n,t],[e,i]){const r=lt(n,e);return r===0?lt(t,i):r}class uP{constructor(t){this.Gn=t,this.buffer=new $t(pm),this.zn=0}jn(){return++this.zn}Hn(t){const e=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();pm(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class dP{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){q("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ts(e)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await $r(e)}await this.Yn(3e5)})}}class pP{constructor(t,e){this.Zn=t,this.params=e}calculateTargetCount(t,e){return this.Zn.Xn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return L.resolve(_l.oe);const i=new uP(e);return this.Zn.forEachTarget(t,r=>i.Hn(r.sequenceNumber)).next(()=>this.Zn.er(t,r=>i.Hn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Zn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Zn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(dm)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dm):this.tr(t,e))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,e){let i,r,s,o,a,l,h;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(t,i,e))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),pr()<=ut.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-c}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function fP(n,t){return new pP(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.changes=new $i(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,xe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?L.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Ws(i.mutation,r,un.empty(),Zt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,at()).next(()=>i))}getLocalViewOfDocuments(t,e,i=at()){const r=Li();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=Vs();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Li();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,at()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=Hn();const o=qs(),a=function(){return qs()}();return e.forEach((l,h)=>{const c=i.get(h.key);r.has(h.key)&&(c===void 0||c.mutation instanceof tr)?s=s.insert(h.key,h):c!==void 0?(o.set(h.key,c.mutation.getFieldMask()),Ws(c.mutation,h,c.mutation.getFieldMask(),Zt.now())):o.set(h.key,un.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,c)=>o.set(h,c)),e.forEach((h,c)=>{var p;return a.set(h,new gP(c,(p=o.get(h))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(t,e){const i=qs();let r=new Ot((o,a)=>o-a),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=e.get(l);if(h===null)return;let c=i.get(l)||un.empty();c=a.applyToLocalView(h,c),i.set(l,c);const p=(r.get(a.batchId)||at()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,c=l.value,p=l0();c.forEach(f=>{if(!s.has(f)){const u=f0(e.get(f),i.get(f));u!==null&&p.set(f,u),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,p))}return L.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):i0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):L.resolve(Li());let a=-1,l=s;return o.next(h=>L.forEach(h,(c,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(c)?L.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,at())).next(c=>({batchId:a,changes:a0(c)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Z(e)).next(i=>{let r=Vs();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const s=e.collectionGroup;let o=Vs();return this.indexManager.getCollectionParents(t,s).next(a=>L.forEach(a,l=>{const h=function(p,f){return new es(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(c=>{c.forEach((p,f)=>{o=o.insert(p,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,h)=>{const c=h.getKey();o.get(c)===null&&(o=o.insert(c,xe.newInvalidDocument(c)))});let a=Vs();return o.forEach((l,h)=>{const c=s.get(l);c!==void 0&&Ws(c.mutation,h,un.empty(),Zt.now()),wl(e,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,e){return L.resolve(this.Tr.get(e))}saveBundleMetadata(t,e){return this.Tr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:En(r.createTime)}}(e)),L.resolve()}getNamedQuery(t,e){return L.resolve(this.Ir.get(e))}saveNamedQuery(t,e){return this.Ir.set(e.name,function(r){return{name:r.name,query:lP(r.bundledQuery),readTime:En(r.readTime)}}(e)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.overlays=new Ot(Z.comparator),this.Er=new Map}getOverlay(t,e){return L.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Li();return L.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Tt(t,e,s)}),L.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Er.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(i)),L.resolve()}getOverlaysForCollection(t,e,i){const r=Li(),s=e.length+1,o=new Z(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return L.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Ot((h,c)=>h-c);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>i){let c=s.get(h.largestBatchId);c===null&&(c=Li(),s=s.insert(h.largestBatchId,c)),c.set(h.getKey(),h)}}const a=Li(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,c)=>a.set(h,c)),!(a.size()>=r)););return L.resolve(a)}Tt(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Er.get(r.largestBatchId).delete(i.key);this.Er.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new LC(e,i));let s=this.Er.get(e);s===void 0&&(s=at(),this.Er.set(e,s)),this.Er.set(e,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.sessionToken=fe.EMPTY_BYTE_STRING}getSessionToken(t){return L.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.dr=new $t(ie.Ar),this.Rr=new $t(ie.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,e){const i=new ie(t,e);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.gr(new ie(t,e))}pr(t,e){t.forEach(i=>this.removeReference(i,e))}yr(t){const e=new Z(new Tt([])),i=new ie(e,t),r=new ie(e,t+1),s=[];return this.Rr.forEachInRange([i,r],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const e=new Z(new Tt([])),i=new ie(e,t),r=new ie(e,t+1);let s=at();return this.Rr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new ie(t,0),i=this.dr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class ie{constructor(t,e){this.key=t,this.br=e}static Ar(t,e){return Z.comparator(t.key,e.key)||lt(t.br,e.br)}static Vr(t,e){return lt(t.br,e.br)||Z.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Dr=1,this.vr=new $t(ie.Ar)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FC(s,e,i,r);this.mutationQueue.push(o);for(const a of r)this.vr=this.vr.add(new ie(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(t,e){return L.resolve(this.Cr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.Fr(i),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ie(e,0),r=new ie(e,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([i,r],o=>{const a=this.Cr(o.br);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new $t(lt);return e.forEach(r=>{const s=new ie(r,0),o=new ie(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{i=i.add(a.br)})}),L.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Z.isDocumentKey(s)||(s=s.child(""));const o=new ie(new Z(s),0);let a=new $t(lt);return this.vr.forEachWhile(l=>{const h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(a=a.add(l.br)),!0)},o),L.resolve(this.Mr(a))}Mr(t){const e=[];return t.forEach(i=>{const r=this.Cr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){yt(this.Or(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return L.forEach(e.mutations,r=>{const s=new ie(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.vr=i})}Ln(t){}containsKey(t,e){const i=new ie(e,0),r=this.vr.firstAfterOrEqual(i);return L.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}Or(t,e){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const e=this.Fr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(t){this.Nr=t,this.docs=function(){return new Ot(Z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.Nr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return L.resolve(i?i.document.mutableCopy():xe.newInvalidDocument(e))}getEntries(t,e){let i=Hn();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():xe.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Hn();const o=e.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:c}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||$E(ZE(c),i)<=0||(r.has(c.key)||wl(e,c))&&(s=s.insert(c.key,c.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(t,e,i,r){et()}Lr(t,e){return L.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new AP(this)}getSize(t){return L.resolve(this.size)}}class AP extends mP{constructor(t){super(),this.hr=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.hr.addEntry(t,r)):this.hr.removeEntry(i)}),L.waitFor(e)}getFromCache(t,e){return this.hr.getEntry(t,e)}getAllFromCache(t,e){return this.hr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(t){this.persistence=t,this.Br=new $i(e=>Yu(e),Xu),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.kr=0,this.qr=new $u,this.targetCount=0,this.Qr=jr.qn()}forEachTarget(t,e){return this.Br.forEach((i,r)=>e(r)),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.kr&&(this.kr=e),L.resolve()}Un(t){this.Br.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Qr=new jr(e),this.highestTargetId=e),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,e){return this.Un(e),this.targetCount+=1,L.resolve()}updateTargetData(t,e){return this.Un(e),L.resolve()}removeTargetData(t,e){return this.Br.delete(e.target),this.qr.yr(e.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,e){const i=this.Br.get(e)||null;return L.resolve(i)}addMatchingKeys(t,e,i){return this.qr.mr(e,i),L.resolve()}removeMatchingKeys(t,e,i){this.qr.pr(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qr.yr(e),L.resolve()}getMatchingKeysForTargetId(t,e){const i=this.qr.Sr(e);return L.resolve(i)}containsKey(t,e){return L.resolve(this.qr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,e){this.Kr={},this.overlays={},this.$r=new _l(0),this.Ur=!1,this.Ur=!0,this.Wr=new xP,this.referenceDelegate=t(this),this.Gr=new TP(this),this.indexManager=new hP,this.remoteDocumentCache=function(r){return new wP(r)}(i=>this.referenceDelegate.zr(i)),this.serializer=new aP(e),this.jr=new _P(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new vP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Kr[t.toKey()];return i||(i=new bP(e,this.referenceDelegate),this.Kr[t.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,e,i){q("MemoryPersistence","Starting transaction:",t);const r=new SP(this.$r.next());return this.referenceDelegate.Hr(),i(r).next(s=>this.referenceDelegate.Jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Yr(t,e){return L.or(Object.values(this.Kr).map(i=>()=>i.containsKey(t,e)))}}class SP extends eC{constructor(t){super(),this.currentSequenceNumber=t}}class td{constructor(t){this.persistence=t,this.Zr=new $u,this.Xr=null}static ei(t){return new td(t)}get ti(){if(this.Xr)return this.Xr;throw et()}addReference(t,e,i){return this.Zr.addReference(i,e),this.ti.delete(i.toString()),L.resolve()}removeReference(t,e,i){return this.Zr.removeReference(i,e),this.ti.add(i.toString()),L.resolve()}markPotentiallyOrphaned(t,e){return this.ti.add(e.toString()),L.resolve()}removeTarget(t,e){this.Zr.yr(e.targetId).forEach(r=>this.ti.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.ti.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Hr(){this.Xr=new Set}Jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ti,i=>{const r=Z.fromPath(i);return this.ni(t,r).next(s=>{s||e.removeEntry(r,nt.min())})}).next(()=>(this.Xr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ni(t,e).next(i=>{i?this.ti.delete(e.toString()):this.ti.add(e.toString())})}zr(t){return 0}ni(t,e){return L.or([()=>L.resolve(this.Zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Yr(t,e)])}}class Ka{constructor(t,e){this.persistence=t,this.ri=new $i(i=>rC(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=fP(this,e)}static ei(t,e){return new Ka(t,e)}Hr(){}Jr(t){return L.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Xn(t){const e=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}nr(t){let e=0;return this.er(t,i=>{e++}).next(()=>e)}er(t,e){return L.forEach(this.ri,(i,r)=>this.ir(t,i,r).next(s=>s?L.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Lr(t,o=>this.ir(t,o,e).next(a=>{a||(i++,s.removeEntry(o,nt.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.ri.set(e,t.currentSequenceNumber),L.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),L.resolve()}removeReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),L.resolve()}updateLimboDocument(t,e){return this.ri.set(e,t.currentSequenceNumber),L.resolve()}zr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=fa(t.data.value)),e}ir(t,e,i){return L.or([()=>this.persistence.Yr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.ri.get(e);return L.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Wi=i,this.Gi=r}static zi(t,e){let i=at(),r=at();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ed(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return TS()?8:nC(wS())>0?6:4}()}initialize(t,e){this.Zi=t,this.indexManager=e,this.ji=!0}getDocumentsMatchingQuery(t,e,i,r){const s={result:null};return this.Xi(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new EP;return this.ts(t,e,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,e,o,a.size)})}).next(()=>s.result)}ns(t,e,i,r){return i.documentReadCount<this.Ji?(pr()<=ut.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",fr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),L.resolve()):(pr()<=ut.DEBUG&&q("QueryEngine","Query:",fr(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Yi*r?(pr()<=ut.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",fr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Sn(e))):L.resolve())}Xi(t,e){if(nm(e))return L.resolve(null);let i=Sn(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=qa(e,null,"F"),i=Sn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=at(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const h=this.rs(e,a);return this.ss(e,h,o,l.readTime)?this.Xi(t,qa(e,null,"F")):this.os(t,h,e,l)}))})))}es(t,e,i,r){return nm(e)||r.isEqual(nt.min())?L.resolve(null):this.Zi.getDocuments(t,i).next(s=>{const o=this.rs(e,s);return this.ss(e,o,i,r)?L.resolve(null):(pr()<=ut.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fr(e)),this.os(t,o,e,JE(r,-1)).next(a=>a))})}rs(t,e){let i=new $t(s0(t));return e.forEach((r,s)=>{wl(t,s)&&(i=i.add(s))}),i}ss(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ts(t,e,i){return pr()<=ut.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",fr(e)),this.Zi.getDocumentsMatchingQuery(t,e,ui.min(),i)}os(t,e,i,r){return this.Zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,e,i,r){this.persistence=t,this._s=e,this.serializer=r,this.us=new Ot(lt),this.cs=new $i(s=>Yu(s),Xu),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(i)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yP(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.us))}}function IP(n,t,e,i){return new PP(n,t,e,i)}async function P0(n,t){const e=it(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Ps(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=at();for(const h of r){o.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}for(const h of s){a.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}return e.localDocuments.getDocuments(i,l).next(h=>({Ts:h,removedBatchIds:o,addedBatchIds:a}))})})}function RP(n,t){const e=it(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,h,c){const p=h.batch,f=p.keys();let u=L.resolve();return f.forEach(m=>{u=u.next(()=>c.getEntry(l,m)).next(g=>{const y=h.docVersions.get(m);yt(y!==null),g.version.compareTo(y)<0&&(p.applyToRemoteDocument(g,h),g.isValidDocument()&&(g.setReadTime(h.commitVersion),c.addEntry(g)))})}),u.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=at();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(l=l.add(a.batch.mutations[h].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function I0(n){const t=it(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Gr.getLastRemoteSnapshotVersion(e))}function kP(n,t){const e=it(n),i=t.snapshotVersion;let r=e.us;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.hs.newChangeBuffer({trackRemovals:!0});r=e.us;const a=[];t.targetChanges.forEach((c,p)=>{const f=r.get(p);if(!f)return;a.push(e.Gr.removeMatchingKeys(s,c.removedDocuments,p).next(()=>e.Gr.addMatchingKeys(s,c.addedDocuments,p)));let u=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?u=u.withResumeToken(fe.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):c.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(c.resumeToken,i)),r=r.insert(p,u),function(g,y,b){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,u,c)&&a.push(e.Gr.updateTargetData(s,u))});let l=Hn(),h=at();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(MP(s,o,t.documentUpdates).next(c=>{l=c.Is,h=c.Es})),!i.isEqual(nt.min())){const c=e.Gr.getLastRemoteSnapshotVersion(s).next(p=>e.Gr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(c)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.us=r,s))}function MP(n,t,e){let i=at(),r=at();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=Hn();return e.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(nt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Is:o,Es:r}})}function VP(n,t){const e=it(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function DP(n,t){const e=it(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Gr.getTargetData(i,t).next(s=>s?(r=s,L.resolve(r)):e.Gr.allocateTargetId(i).next(o=>(r=new ei(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Gr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.us.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.us=e.us.insert(i.targetId,i),e.cs.set(t,i.targetId)),i})}async function Yc(n,t,e){const i=it(n),r=i.us.get(t),s=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ts(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.us=i.us.remove(t),i.cs.delete(r.target)}function fm(n,t,e){const i=it(n);let r=nt.min(),s=at();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,c){const p=it(l),f=p.cs.get(c);return f!==void 0?L.resolve(p.us.get(f)):p.Gr.getTargetData(h,c)}(i,o,Sn(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i._s.getDocumentsMatchingQuery(o,t,e?r:nt.min(),e?s:at())).next(a=>(BP(i,wC(t),a),{documents:a,ds:s})))}function BP(n,t,e){let i=n.ls.get(t)||nt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ls.set(t,i)}class mm{constructor(){this.activeTargetIds=PC()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class OP{constructor(){this._o=new mm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,e,i){this.ao[t]=e}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new mm,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=null;function Oh(){return ia===null?ia=function(){return 268435456+Math.round(2147483648*Math.random())}():ia++,"0x"+ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e="WebChannelConnection";class UP extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+e.host,this.Mo=`projects/${r}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Oo(e,i,r,s,o){const a=Oh(),l=this.No(e,i.toUriEncodedString());q("RestConnection",`Sending RPC '${e}' ${a}:`,l,r);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(h,s,o),this.Bo(e,l,h,r).then(c=>(q("RestConnection",`Received RPC '${e}' ${a}: `,c),c),c=>{throw Lr("RestConnection",`RPC '${e}' ${a} failed with error: `,c,"url: ",l,"request:",r),c})}ko(e,i,r,s,o,a){return this.Oo(e,i,r,s,o)}Lo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}No(e,i){const r=LP[e];return`${this.Fo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,e,i,r){const s=Oh();return new Promise((o,a)=>{const l=new U_;l.setWithCredentials(!0),l.listenOnce(z_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pa.NO_ERROR:const c=l.getResponseJson();q(_e,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case pa.TIMEOUT:q(_e,`RPC '${t}' ${s} timed out`),a(new Y(N.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:const p=l.getStatus();if(q(_e,`RPC '${t}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const u=f==null?void 0:f.error;if(u&&u.status&&u.message){const m=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(b)>=0?b:N.UNKNOWN}(u.status);a(new Y(m,u.message))}else a(new Y(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(N.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{q(_e,`RPC '${t}' ${s} completed.`)}});const h=JSON.stringify(r);q(_e,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",h,i,15)})}qo(t,e,i){const r=Oh(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=H_(),a=G_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;const c=s.join("");q(_e,`Creating RPC '${t}' stream ${r}: ${c}`,l);const p=o.createWebChannel(c,l);let f=!1,u=!1;const m=new NP({Eo:y=>{u?q(_e,`Not sending because RPC '${t}' stream ${r} is closed:`,y):(f||(q(_e,`Opening RPC '${t}' stream ${r} transport.`),p.open(),f=!0),q(_e,`RPC '${t}' stream ${r} sending:`,y),p.send(y))},Ao:()=>p.close()}),g=(y,b,T)=>{y.listen(b,C=>{try{T(C)}catch(P){setTimeout(()=>{throw P},0)}})};return g(p,Ms.EventType.OPEN,()=>{u||(q(_e,`RPC '${t}' stream ${r} transport opened.`),m.So())}),g(p,Ms.EventType.CLOSE,()=>{u||(u=!0,q(_e,`RPC '${t}' stream ${r} transport closed`),m.Do())}),g(p,Ms.EventType.ERROR,y=>{u||(u=!0,Lr(_e,`RPC '${t}' stream ${r} transport errored:`,y),m.Do(new Y(N.UNAVAILABLE,"The operation could not be completed")))}),g(p,Ms.EventType.MESSAGE,y=>{var b;if(!u){const T=y.data[0];yt(!!T);const C=T,P=(C==null?void 0:C.error)||((b=C[0])===null||b===void 0?void 0:b.error);if(P){q(_e,`RPC '${t}' stream ${r} received error:`,P);const S=P.status;let I=function(x){const A=qt[x];if(A!==void 0)return y0(A)}(S),w=P.message;I===void 0&&(I=N.INTERNAL,w="Unknown error status: "+S+" with message "+P.message),u=!0,m.Do(new Y(I,w)),p.close()}else q(_e,`RPC '${t}' stream ${r} received:`,T),m.vo(T)}}),g(a,j_.STAT_EVENT,y=>{y.stat===Fc.PROXY?q(_e,`RPC '${t}' stream ${r} detected buffering proxy`):y.stat===Fc.NOPROXY&&q(_e,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n){return new YC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t,e,i=1e3,r=1.5,s=6e4){this.li=t,this.timerId=e,this.Qo=i,this.Ko=r,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const e=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),r=Math.max(0,e-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,e,i,r,s,o,a,l){this.li=t,this.Yo=i,this.Zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new R0(t,e)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,e){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():e&&e.code===N.RESOURCE_EXHAUSTED?(Gn(e.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):e&&e.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(e)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),e=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Xo===e&&this.I_(i,r)},i=>{t(()=>{const r=new Y(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(r)})})}I_(t,e){const i=this.T_(this.Xo);this.stream=this.d_(t,e),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{i(()=>this.E_(r))}),this.stream.onMessage(r=>{i(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(t){return q("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return e=>{this.li.enqueueAndForget(()=>this.Xo===t?e():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zP extends k0{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}d_(t,e){return this.connection.qo("Listen",t,e)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const e=QC(this.serializer,t),i=function(s){if(!("targetChange"in s))return nt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?En(o.readTime):nt.min()}(t);return this.listener.R_(e,i)}V_(t){const e={};e.database=Wc(this.serializer),e.addTarget=function(s,o){let a;const l=o.target;if(a=zc(l)?{documents:$C(s,l)}:{query:tP(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=x0(s,o.resumeToken);const h=Gc(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(nt.min())>0){a.readTime=Xa(s,o.snapshotVersion.toTimestamp());const h=Gc(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,t);const i=nP(this.serializer,t);i&&(e.labels=i),this.c_(e)}m_(t){const e={};e.database=Wc(this.serializer),e.removeTarget=t,this.c_(e)}}class jP extends k0{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,e){return this.connection.qo("Write",t,e)}A_(t){return yt(!!t.streamToken),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const e=ZC(t.writeResults,t.commitTime),i=En(t.commitTime);return this.listener.y_(i,e)}w_(){const t={};t.database=Wc(this.serializer),this.c_(t)}g_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>JC(this.serializer,i))};this.c_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new Y(N.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,e,i,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,Hc(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(N.UNKNOWN,s.toString())})}ko(t,e,i,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,Hc(e,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(N.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class HP{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Gn(e),this.C_=!1):q("OnlineStateTracker",e)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{i.enqueueAndForget(async()=>{er(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=it(l);h.k_.add(4),await Ao(h),h.K_.set("Unknown"),h.k_.delete(4),await Cl(h)}(this))})}),this.K_=new HP(i,r)}}async function Cl(n){if(er(n))for(const t of n.q_)await t(!0)}async function Ao(n){for(const t of n.q_)await t(!1)}function M0(n,t){const e=it(n);e.B_.has(t.targetId)||(e.B_.set(t.targetId,t),sd(e)?rd(e):ns(e).s_()&&id(e,t))}function nd(n,t){const e=it(n),i=ns(e);e.B_.delete(t),i.s_()&&V0(e,t),e.B_.size===0&&(i.s_()?i.a_():er(e)&&e.K_.set("Unknown"))}function id(n,t){if(n.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ns(n).V_(t)}function V0(n,t){n.U_.xe(t),ns(n).m_(t)}function rd(n){n.U_=new GC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>n.B_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),ns(n).start(),n.K_.F_()}function sd(n){return er(n)&&!ns(n).i_()&&n.B_.size>0}function er(n){return it(n).k_.size===0}function D0(n){n.U_=void 0}async function WP(n){n.K_.set("Online")}async function YP(n){n.B_.forEach((t,e)=>{id(n,t)})}async function XP(n,t){D0(n),sd(n)?(n.K_.O_(t),rd(n)):n.K_.set("Unknown")}async function KP(n,t,e){if(n.K_.set("Online"),t instanceof v0&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.B_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.B_.delete(a),r.U_.removeTarget(a))}(n,t)}catch(i){q("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Qa(n,i)}else if(t instanceof ya?n.U_.$e(t):t instanceof _0?n.U_.Je(t):n.U_.Ge(t),!e.isEqual(nt.min()))try{const i=await I0(n.localStore);e.compareTo(i)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.B_.get(h);c&&s.B_.set(h,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const c=s.B_.get(l);if(!c)return;s.B_.set(l,c.withResumeToken(fe.EMPTY_BYTE_STRING,c.snapshotVersion)),V0(s,l);const p=new ei(c.target,l,h,c.sequenceNumber);id(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e)}catch(i){q("RemoteStore","Failed to raise snapshot:",i),await Qa(n,i)}}async function Qa(n,t,e){if(!ts(t))throw t;n.k_.add(1),await Ao(n),n.K_.set("Offline"),e||(e=()=>I0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await e(),n.k_.delete(1),await Cl(n)})}function B0(n,t){return t().catch(e=>Qa(n,e,t))}async function Pl(n){const t=it(n),e=mi(t);let i=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;QP(t);)try{const r=await VP(t.localStore,i);if(r===null){t.L_.length===0&&e.a_();break}i=r.batchId,JP(t,r)}catch(r){await Qa(t,r)}O0(t)&&F0(t)}function QP(n){return er(n)&&n.L_.length<10}function JP(n,t){n.L_.push(t);const e=mi(n);e.s_()&&e.f_&&e.g_(t.mutations)}function O0(n){return er(n)&&!mi(n).i_()&&n.L_.length>0}function F0(n){mi(n).start()}async function ZP(n){mi(n).w_()}async function $P(n){const t=mi(n);for(const e of n.L_)t.g_(e.mutations)}async function tI(n,t,e){const i=n.L_.shift(),r=Qu.from(i,t,e);await B0(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Pl(n)}async function eI(n,t){t&&mi(n).f_&&await async function(i,r){if(function(o){return UC(o)&&o!==N.ABORTED}(r.code)){const s=i.L_.shift();mi(i).__(),await B0(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Pl(i)}}(n,t),O0(n)&&F0(n)}async function ym(n,t){const e=it(n);e.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const i=er(e);e.k_.add(3),await Ao(e),i&&e.K_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.k_.delete(3),await Cl(e)}async function nI(n,t){const e=it(n);t?(e.k_.delete(2),await Cl(e)):t||(e.k_.add(2),await Ao(e),e.K_.set("Unknown"))}function ns(n){return n.W_||(n.W_=function(e,i,r){const s=it(e);return s.b_(),new zP(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:WP.bind(null,n),mo:YP.bind(null,n),po:XP.bind(null,n),R_:KP.bind(null,n)}),n.q_.push(async t=>{t?(n.W_.__(),sd(n)?rd(n):n.K_.set("Unknown")):(await n.W_.stop(),D0(n))})),n.W_}function mi(n){return n.G_||(n.G_=function(e,i,r){const s=it(e);return s.b_(),new jP(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:ZP.bind(null,n),po:eI.bind(null,n),p_:$P.bind(null,n),y_:tI.bind(null,n)}),n.q_.push(async t=>{t?(n.G_.__(),await Pl(n)):(await n.G_.stop(),n.L_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){const o=Date.now()+i,a=new od(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ad(n,t){if(Gn("AsyncQueue",`${t}: ${n}`),ts(n))return new Y(N.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{static emptySet(t){return new Pr(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Z.comparator(e.key,i.key):(e,i)=>Z.comparator(e.key,i.key),this.keyedMap=Vs(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Pr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Pr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.z_=new Ot(Z.comparator)}track(t){const e=t.doc.key,i=this.z_.get(e);i?t.type!==0&&i.type===3?this.z_=this.z_.insert(e,t):t.type===3&&i.type!==1?this.z_=this.z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.z_=this.z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.z_=this.z_.remove(e):t.type===1&&i.type===2?this.z_=this.z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):et():this.z_=this.z_.insert(e,t)}j_(){const t=[];return this.z_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Gr{constructor(t,e,i,r,s,o,a,l,h){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,i,r,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Gr(t,e,Pr.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class rI{constructor(){this.queries=vm(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(e,i){const r=it(e),s=r.queries;r.queries=vm(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(i)})})(this,new Y(N.ABORTED,"Firestore shutting down"))}}function vm(){return new $i(n=>r0(n),bl)}async function sI(n,t){const e=it(n);let i=3;const r=t.query;let s=e.queries.get(r);s?!s.Y_()&&t.Z_()&&(i=2):(s=new iI,i=t.Z_()?0:1);try{switch(i){case 0:s.H_=await e.onListen(r,!0);break;case 1:s.H_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const a=ad(o,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.J_.push(t),t.ea(e.onlineState),s.H_&&t.ta(s.H_)&&ld(e)}async function oI(n,t){const e=it(n),i=t.query;let r=3;const s=e.queries.get(i);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?r=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function aI(n,t){const e=it(n);let i=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const a of o.J_)a.ta(r)&&(i=!0);o.H_=r}}i&&ld(e)}function lI(n,t,e){const i=it(n),r=i.queries.get(t);if(r)for(const s of r.J_)s.onError(e);i.queries.delete(t)}function ld(n){n.X_.forEach(t=>{t.next()})}var Xc,xm;(xm=Xc||(Xc={})).na="default",xm.Cache="cache";class hI{constructor(t,e,i){this.query=t,this.ra=e,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Gr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ia?this.oa(t)&&(this.ra.next(t),e=!0):this._a(t,this.onlineState)&&(this.aa(t),e=!0),this.sa=t,e}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let e=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),e=!0),e}_a(t,e){if(!t.fromCache||!this.Z_())return!0;const i=e!=="Offline";return(!this.options.ua||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const e=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}aa(t){t=Gr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==Xc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t){this.key=t}}class N0{constructor(t){this.key=t}}class cI{constructor(t,e){this.query=t,this.da=e,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=at(),this.mutatedKeys=at(),this.Va=s0(t),this.ma=new Pr(this.Va)}get fa(){return this.da}ga(t,e){const i=e?e.pa:new _m,r=e?e.ma:this.ma;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((c,p)=>{const f=r.get(c),u=wl(this.query,p)?p:null,m=!!f&&this.mutatedKeys.has(f.key),g=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let y=!1;f&&u?f.data.isEqual(u.data)?m!==g&&(i.track({type:3,doc:u}),y=!0):this.ya(f,u)||(i.track({type:2,doc:u}),y=!0,(l&&this.Va(u,l)>0||h&&this.Va(u,h)<0)&&(a=!0)):!f&&u?(i.track({type:0,doc:u}),y=!0):f&&!u&&(i.track({type:1,doc:f}),y=!0,(l||h)&&(a=!0)),y&&(u?(o=o.add(u),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),i.track({type:1,doc:c})}return{ma:o,pa:i,ss:a,mutatedKeys:s}}ya(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,p)=>function(u,m){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return g(u)-g(m)}(c.type,p.type)||this.Va(c.doc,p.doc)),this.wa(i),r=r!=null&&r;const a=e&&!r?this.Sa():[],l=this.Ra.size===0&&this.current&&!r?1:0,h=l!==this.Aa;return this.Aa=l,o.length!==0||h?{snapshot:new Gr(this.query,t.ma,s,o,t.mutatedKeys,l===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new _m,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(e=>this.da=this.da.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.da=this.da.delete(e)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=at(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const e=[];return t.forEach(i=>{this.Ra.has(i)||e.push(new N0(i))}),this.Ra.forEach(i=>{t.has(i)||e.push(new L0(i))}),e}va(t){this.da=t.ds,this.Ra=at();const e=this.ga(t.documents);return this.applyChanges(e,!0)}Ca(){return Gr.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class uI{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class dI{constructor(t){this.key=t,this.Fa=!1}}class pI{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new $i(a=>r0(a),bl),this.Oa=new Map,this.Na=new Set,this.La=new Ot(Z.comparator),this.Ba=new Map,this.ka=new $u,this.qa={},this.Qa=new Map,this.Ka=jr.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function fI(n,t,e=!0){const i=q0(n);let r;const s=i.xa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Ca()):r=await U0(i,t,e,!0),r}async function mI(n,t){const e=q0(n);await U0(e,t,!0,!1)}async function U0(n,t,e,i){const r=await DP(n.localStore,Sn(t)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,e);let a;return i&&(a=await gI(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&M0(n.remoteStore,r),a}async function gI(n,t,e,i,r){n.Ua=(p,f,u)=>async function(g,y,b,T){let C=y.view.ga(b);C.ss&&(C=await fm(g.localStore,y.query,!1).then(({documents:w})=>y.view.ga(w,C)));const P=T&&T.targetChanges.get(y.targetId),S=T&&T.targetMismatches.get(y.targetId)!=null,I=y.view.applyChanges(C,g.isPrimaryClient,P,S);return wm(g,y.targetId,I.ba),I.snapshot}(n,p,f,u);const s=await fm(n.localStore,t,!0),o=new cI(t,s.ds),a=o.ga(s.documents),l=wo.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),h=o.applyChanges(a,n.isPrimaryClient,l);wm(n,e,h.ba);const c=new uI(t,e,o);return n.xa.set(t,c),n.Oa.has(e)?n.Oa.get(e).push(t):n.Oa.set(e,[t]),h.snapshot}async function yI(n,t,e){const i=it(n),r=i.xa.get(t),s=i.Oa.get(r.targetId);if(s.length>1)return i.Oa.set(r.targetId,s.filter(o=>!bl(o,t))),void i.xa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Yc(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&nd(i.remoteStore,r.targetId),Kc(i,r.targetId)}).catch($r)):(Kc(i,r.targetId),await Yc(i.localStore,r.targetId,!0))}async function _I(n,t){const e=it(n),i=e.xa.get(t),r=e.Oa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),nd(e.remoteStore,i.targetId))}async function vI(n,t,e){const i=EI(n);try{const r=await function(o,a){const l=it(o),h=Zt.now(),c=a.reduce((u,m)=>u.add(m.key),at());let p,f;return l.persistence.runTransaction("Locally write mutations","readwrite",u=>{let m=Hn(),g=at();return l.hs.getEntries(u,c).next(y=>{m=y,m.forEach((b,T)=>{T.isValidDocument()||(g=g.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(u,m)).next(y=>{p=y;const b=[];for(const T of a){const C=BC(T,p.get(T.key).overlayedDocument);C!=null&&b.push(new tr(T.key,C,K_(C.value.mapValue),Ln.exists(!0)))}return l.mutationQueue.addMutationBatch(u,h,b,a)}).next(y=>{f=y;const b=y.applyToLocalDocumentSet(p,g);return l.documentOverlayCache.saveOverlays(u,y.batchId,b)})}).then(()=>({batchId:f.batchId,changes:a0(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let h=o.qa[o.currentUser.toKey()];h||(h=new Ot(lt)),h=h.insert(a,l),o.qa[o.currentUser.toKey()]=h}(i,r.batchId,e),await To(i,r.changes),await Pl(i.remoteStore)}catch(r){const s=ad(r,"Failed to persist write");e.reject(s)}}async function z0(n,t){const e=it(n);try{const i=await kP(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Ba.get(s);o&&(yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Fa=!0:r.modifiedDocuments.size>0?yt(o.Fa):r.removedDocuments.size>0&&(yt(o.Fa),o.Fa=!1))}),await To(e,i,t)}catch(i){await $r(i)}}function bm(n,t,e){const i=it(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=it(o);l.onlineState=a;let h=!1;l.queries.forEach((c,p)=>{for(const f of p.J_)f.ea(a)&&(h=!0)}),h&&ld(l)}(i.eventManager,t),r.length&&i.Ma.R_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function xI(n,t,e){const i=it(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Ba.get(t),s=r&&r.key;if(s){let o=new Ot(Z.comparator);o=o.insert(s,xe.newNoDocument(s,nt.min()));const a=at().add(s),l=new Sl(nt.min(),new Map,new Ot(lt),o,a);await z0(i,l),i.La=i.La.remove(s),i.Ba.delete(t),hd(i)}else await Yc(i.localStore,t,!1).then(()=>Kc(i,t,e)).catch($r)}async function bI(n,t){const e=it(n),i=t.batch.batchId;try{const r=await RP(e.localStore,t);G0(e,i,null),j0(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await To(e,r)}catch(r){await $r(r)}}async function wI(n,t,e){const i=it(n);try{const r=await function(o,a){const l=it(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let c;return l.mutationQueue.lookupMutationBatch(h,a).next(p=>(yt(p!==null),c=p.keys(),l.mutationQueue.removeMutationBatch(h,p))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,c)).next(()=>l.localDocuments.getDocuments(h,c))})}(i.localStore,t);G0(i,t,e),j0(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await To(i,r)}catch(r){await $r(r)}}function j0(n,t){(n.Qa.get(t)||[]).forEach(e=>{e.resolve()}),n.Qa.delete(t)}function G0(n,t,e){const i=it(n);let r=i.qa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.qa[i.currentUser.toKey()]=r}}function Kc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Oa.get(t))n.xa.delete(i),e&&n.Ma.Wa(i,e);n.Oa.delete(t),n.isPrimaryClient&&n.ka.yr(t).forEach(i=>{n.ka.containsKey(i)||H0(n,i)})}function H0(n,t){n.Na.delete(t.path.canonicalString());const e=n.La.get(t);e!==null&&(nd(n.remoteStore,e),n.La=n.La.remove(t),n.Ba.delete(e),hd(n))}function wm(n,t,e){for(const i of e)i instanceof L0?(n.ka.addReference(i.key,t),AI(n,i)):i instanceof N0?(q("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,t),n.ka.containsKey(i.key)||H0(n,i.key)):et()}function AI(n,t){const e=t.key,i=e.path.canonicalString();n.La.get(e)||n.Na.has(i)||(q("SyncEngine","New document in limbo: "+e),n.Na.add(i),hd(n))}function hd(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const t=n.Na.values().next().value;n.Na.delete(t);const e=new Z(Tt.fromString(t)),i=n.Ka.next();n.Ba.set(i,new dI(e)),n.La=n.La.insert(e,i),M0(n.remoteStore,new ei(Sn(n0(e.path)),i,"TargetPurposeLimboResolution",_l.oe))}}async function To(n,t,e){const i=it(n),r=[],s=[],o=[];i.xa.isEmpty()||(i.xa.forEach((a,l)=>{o.push(i.Ua(l,t,e).then(h=>{var c;if((h||e)&&i.isPrimaryClient){const p=h?!h.fromCache:(c=e==null?void 0:e.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){r.push(h);const p=ed.zi(l.targetId,h);s.push(p)}}))}),await Promise.all(o),i.Ma.R_(r),await async function(l,h){const c=it(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(h,f=>L.forEach(f.Wi,u=>c.persistence.referenceDelegate.addReference(p,f.targetId,u)).next(()=>L.forEach(f.Gi,u=>c.persistence.referenceDelegate.removeReference(p,f.targetId,u)))))}catch(p){if(!ts(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const f=p.targetId;if(!p.fromCache){const u=c.us.get(f),m=u.snapshotVersion,g=u.withLastLimboFreeSnapshotVersion(m);c.us=c.us.insert(f,g)}}}(i.localStore,s))}async function TI(n,t){const e=it(n);if(!e.currentUser.isEqual(t)){q("SyncEngine","User change. New user:",t.toKey());const i=await P0(e.localStore,t);e.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Y(N.CANCELLED,o))})}),s.Qa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await To(e,i.Ts)}}function SI(n,t){const e=it(n),i=e.Ba.get(t);if(i&&i.Fa)return at().add(i.key);{let r=at();const s=e.Oa.get(t);if(!s)return r;for(const o of s){const a=e.xa.get(o);r=r.unionWith(a.view.fa)}return r}}function q0(n){const t=it(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=z0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xI.bind(null,t),t.Ma.R_=aI.bind(null,t.eventManager),t.Ma.Wa=lI.bind(null,t.eventManager),t}function EI(n){const t=it(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wI.bind(null,t),t}class Ja{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=El(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,e){return null}Ya(t,e){return null}Ha(t){return IP(this.persistence,new CP,t.initialUser,this.serializer)}ja(t){return new C0(td.ei,this.serializer)}za(t){return new OP}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ja.provider={build:()=>new Ja};class CI extends Ja{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,e){yt(this.persistence.referenceDelegate instanceof Ka);const i=this.persistence.referenceDelegate.garbageCollector;return new dP(i,t.asyncQueue,e)}ja(t){const e=this.cacheSizeBytes!==void 0?Me.withCacheSize(this.cacheSizeBytes):Me.DEFAULT;return new C0(i=>Ka.ei(i,e),this.serializer)}}class Qc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TI.bind(null,this.syncEngine),await nI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rI}()}createDatastore(t){const e=El(t.databaseInfo.databaseId),i=function(s){return new UP(s)}(t.databaseInfo);return function(s,o,a,l){return new GP(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,a){return new qP(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>bm(this.syncEngine,e,0),function(){return gm.p()?new gm:new FP}())}createSyncEngine(t,e){return function(r,s,o,a,l,h,c){const p=new pI(r,s,o,a,l,h);return c&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const s=it(r);q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Ao(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Qc.provider={build:()=>new Qc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):Gn("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t,e,i,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=ve.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=ad(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Lh(n,t){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await P0(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Am(n,t){n.asyncQueue.verifyOperationInProgress();const e=await RI(n);q("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>ym(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>ym(t.remoteStore,r)),n._onlineComponents=t}async function RI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===N.FAILED_PRECONDITION||r.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;Lr("Error using user provided cache. Falling back to memory cache: "+e),await Lh(n,new Ja)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Lh(n,new CI(void 0));return n._offlineComponents}async function W0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Am(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Am(n,new Qc))),n._onlineComponents}function kI(n){return W0(n).then(t=>t.syncEngine)}async function MI(n){const t=await W0(n),e=t.eventManager;return e.onListen=fI.bind(null,t.syncEngine),e.onUnlisten=yI.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=mI.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=_I.bind(null,t.syncEngine),e}function VI(n,t,e={}){const i=new oi;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const c=new PI({next:f=>{c.eu(),o.enqueueAndForget(()=>oI(s,p)),f.fromCache&&l.source==="server"?h.reject(new Y(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(f)},error:f=>h.reject(f)}),p=new hI(a,c,{includeMetadataChanges:!0,ua:!0});return sI(s,p)}(await MI(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,t,e){if(!e)throw new Y(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function DI(n,t,e,i){if(t===!0&&i===!0)throw new Y(N.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Sm(n){if(!Z.isDocumentKey(n))throw new Y(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Em(n){if(Z.isDocumentKey(n))throw new Y(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Il(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":et()}function _o(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Y(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Il(n);throw new Y(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y0((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rl{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Y(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cm(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jE;switch(i.type){case"firstParty":return new WE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Tm.get(e);i&&(q("ComponentProvider","Removing Datastore"),Tm.delete(e),i.terminate())}(this),Promise.resolve()}}function BI(n,t,e,i={}){var r;const s=(n=_o(n,Rl))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=ve.MOCK_USER;else{a=bS(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Y(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ve(h)}n._authCredentials=new GE(new q_(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new yi(this.firestore,t,this._query)}}class Ke{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ke(this.firestore,t,this._key)}}class ai extends yi{constructor(t,e,i){super(t,e,n0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ke(this.firestore,null,new Z(t))}withConverter(t){return new ai(this.firestore,t,this._path)}}function OI(n,t,...e){if(n=Fr(n),X0("collection","path",t),n instanceof Rl){const i=Tt.fromString(t,...e);return Em(i),new ai(n,null,i)}{if(!(n instanceof Ke||n instanceof ai))throw new Y(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(t,...e));return Em(i),new ai(n.firestore,null,i)}}function FI(n,t,...e){if(n=Fr(n),arguments.length===1&&(t=W_.newId()),X0("doc","path",t),n instanceof Rl){const i=Tt.fromString(t,...e);return Sm(i),new Ke(n,null,new Z(i))}{if(!(n instanceof Ke||n instanceof ai))throw new Y(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Tt.fromString(t,...e));return Sm(i),new Ke(n.firestore,n instanceof ai?n.converter:null,new Z(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new R0(this,"async_queue_retry"),this.fu=()=>{const i=Fh();i&&q("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=t;const e=Fh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;const e=Fh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});const e=new oi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!ts(t))throw t;q("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const e=this.gu.then(()=>(this.Ru=!0,t().catch(i=>{this.Au=i,this.Ru=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Gn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ru=!1,i))));return this.gu=e,e}enqueueAfterDelay(t,e,i){this.pu(),this.mu.indexOf(t)>-1&&(e=0);const r=od.createAndSchedule(this,t,e,i,s=>this.Su(s));return this.du.push(r),r}pu(){this.Au&&et()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const e of this.du)if(e.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.du.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.du)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const e=this.du.indexOf(t);this.du.splice(e,1)}}class cd extends Rl{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Pm,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Pm(t),this._firestoreClient=void 0,await t}}}function LI(n,t){const e=typeof n=="object"?n:RE(),i=typeof n=="string"?n:"(default)",r=EE(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=vS("firestore");s&&BI(r,...s)}return r}function K0(n){if(n._terminated)throw new Y(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||NI(n),n._firestoreClient}function NI(n){var t,e,i;const r=n._freezeSettings(),s=function(a,l,h,c){return new aC(a,l,h,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Y0(c.experimentalLongPollingOptions),c.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new II(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hr(fe.fromBase64String(t))}catch(e){throw new Y(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hr(fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Y(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Y(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Y(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return lt(this._lat,t._lat)||lt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=/^__.*__$/;class zI{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,e,this.fieldTransforms):new bo(t,this.data,e,this.fieldTransforms)}}function J0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class fd{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new fd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Lu(t),r}Bu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Fu(),r}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return Za(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(J0(this.Mu)&&UI.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class jI{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||El(t)}$u(t,e,i,r=!1){return new fd({Mu:t,methodName:e,Ku:i,path:ce.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z0(n){const t=n._freezeSettings(),e=El(n._databaseId);return new jI(n._databaseId,!!t.ignoreUndefinedProperties,e)}function GI(n,t,e,i,r,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,t,e,r);ev("Data must be an object, but it was:",o,i);const a=$0(i,o);let l,h;if(s.merge)l=new un(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const p of s.mergeFields){const f=qI(t,p,e);if(!o.contains(f))throw new Y(N.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YI(c,f)||c.push(f)}l=new un(c),h=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=o.fieldTransforms;return new zI(new en(a),l,h)}function HI(n,t,e,i=!1){return md(e,n.$u(i?4:3,t))}function md(n,t){if(tv(n=Fr(n)))return ev("Unsupported field value:",t,n),$0(n,t);if(n instanceof Q0)return function(i,r){if(!J0(r.Mu))throw r.qu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=md(a,r.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=Fr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Zt.fromDate(i);return{timestampValue:Xa(r.serializer,s)}}if(i instanceof Zt){const s=new Zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xa(r.serializer,s)}}if(i instanceof dd)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hr)return{bytesValue:x0(r.serializer,i._byteString)};if(i instanceof Ke){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Zu(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof pd)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return Ku(a.serializer,l)})}}}}}}(i,r);throw r.qu(`Unsupported field value: ${Il(i)}`)}(n,t)}function $0(n,t){const e={};return Y_(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zi(n,(i,r)=>{const s=md(r,t.Ou(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function tv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof dd||n instanceof Hr||n instanceof Ke||n instanceof Q0||n instanceof pd)}function ev(n,t,e){if(!tv(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const i=Il(e);throw i==="an object"?t.qu(n+" a custom object"):t.qu(n+" "+i)}}function qI(n,t,e){if((t=Fr(t))instanceof ud)return t._internalPath;if(typeof t=="string")return nv(n,t);throw Za("Field path arguments must be of type string or ",n,!1,void 0,e)}const WI=new RegExp("[~\\*/\\[\\]]");function nv(n,t,e){if(t.search(WI)>=0)throw Za(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ud(...t.split("."))._internalPath}catch{throw Za(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Za(n,t,e,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Y(N.INVALID_ARGUMENT,a+n+l)}function YI(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new XI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(gd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class XI extends iv{data(){return super.data()}}function gd(n,t){return typeof t=="string"?nv(n,t):t instanceof ud?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yd{}class _d extends yd{}function QI(n,t,...e){let i=[];t instanceof yd&&i.push(t),i=i.concat(e),function(s){const o=s.filter(l=>l instanceof xd).length,a=s.filter(l=>l instanceof vd).length;if(o>1||o>0&&a>0)throw new Y(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class vd extends _d{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new vd(t,e,i)}_apply(t){const e=this._parse(t);return rv(t._query,e),new yi(t.firestore,t.converter,jc(t._query,e))}_parse(t){const e=Z0(t.firestore);return function(s,o,a,l,h,c,p){let f;if(h.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Y(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Rm(p,c);const u=[];for(const m of p)u.push(Im(l,s,m));f={arrayValue:{values:u}}}else f=Im(l,s,p)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Rm(p,c),f=HI(a,o,p,c==="in"||c==="not-in");return Yt.create(h,c,f)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class xd extends yd{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new xd(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:dn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)rv(o,l),o=jc(o,l)}(t._query,e),new yi(t.firestore,t.converter,jc(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bd extends _d{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new bd(t,e)}_apply(t){const e=function(r,s,o){if(r.startAt!==null)throw new Y(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(s,o)}(t._query,this._field,this._direction);return new yi(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new es(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function JI(n,t="asc"){const e=t,i=gd("orderBy",n);return bd._create(i,e)}class wd extends _d{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new wd(t,e,i)}_apply(t){return new yi(t.firestore,t.converter,qa(t._query,this._limit,this._limitType))}}function ZI(n){return wd._create("limit",n,"F")}function Im(n,t,e){if(typeof(e=Fr(e))=="string"){if(e==="")throw new Y(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i0(t)&&e.indexOf("/")!==-1)throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Tt.fromString(e));if(!Z.isDocumentKey(i))throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qf(n,new Z(i))}if(e instanceof Ke)return Qf(n,e._key);throw new Y(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Il(e)}.`)}function Rm(n,t){if(!Array.isArray(n)||n.length===0)throw new Y(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rv(n,t){const e=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Y(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Y(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class $I{convertValue(t,e="none"){switch(fi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw et()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Zi(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertVectorValue(t){var e,i,r;const s=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>jt(o.doubleValue));return new pd(s)}convertGeoPoint(t){return new dd(jt(t.latitude),jt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=xl(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(uo(t));default:return null}}convertTimestamp(t){const e=di(t);return new Zt(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Tt.fromString(t);yt(E0(i));const r=new po(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(e)||Gn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class eR extends iv{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new _a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(gd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class _a extends eR{data(t={}){return super.data(t)}}class nR{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ra(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new _a(this._firestore,this._userDataWriter,i.key,i,new ra(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Y(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new _a(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ra(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new _a(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ra(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,c=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:iR(a.type),doc:l,oldIndex:h,newIndex:c}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function iR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}class rR extends $I{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ke(this.firestore,null,e)}}function sR(n){n=_o(n,yi);const t=_o(n.firestore,cd),e=K0(t),i=new rR(t);return KI(n._query),VI(e,n._query).then(r=>new nR(t,i,n,r))}function oR(n,t,e){n=_o(n,Ke);const i=_o(n.firestore,cd),r=tR(n.converter,t,e);return aR(i,[GI(Z0(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Ln.none())])}function aR(n,t){return function(i,r){const s=new oi;return i.asyncQueue.enqueueAndForget(async()=>vI(await kI(i),r,s)),s.promise}(K0(n),t)}(function(t,e=!0){(function(r){Zr=r})(IE),ja(new lo("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new cd(new HE(i.getProvider("auth-internal")),new XE(i.getProvider("app-check-internal")),function(h,c){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(h.options.projectId,c)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cr(Hf,"4.7.5",t),Cr(Hf,"4.7.5","esm2017")})();const sv="couplesRun_nickname",ov="couplesRun_playerId",av="couplesRun_highScore";let Ad;const lv=()=>localStorage.getItem(sv)??"",lR=n=>localStorage.setItem(sv,n)??"",Td=()=>localStorage.getItem(ov)??"",hR=n=>localStorage.setItem(ov,n),cR=async n=>{let t=Td();t||(t=window.crypto.randomUUID(),hR(t));const e=Jc();return n<=e.amount?!0:(cv({amount:n,stored:!1}),await hv())},uR=()=>{const n=O_({apiKey:tt.fireBaseApiKey,authDomain:tt.fireBaseAuthDomain,projectId:tt.fireBaseProjectId,storageBucket:tt.fireBaseStorageBucket,messagingSenderId:tt.fireBaseMessagingSenderId,appId:tt.fireBaseAppId});Ad=LI(n),setInterval(()=>hv(),5e3)},dR=async()=>{if(!navigator.onLine)return[];try{const n=QI(OI(Ad,"scores"),JI("score","desc"),ZI(10)),t=await sR(n),e=[];return t.forEach(i=>{const r=i.data();e.push({id:i.id,nickname:r.nickname,score:r.score})}),e}catch(n){return console.error("An error occurred while fetching the leaderboard",n),[]}},hv=async()=>{if(!navigator.onLine)return!1;const{amount:n,stored:t}=Jc();if(n===0||t)return!0;try{await oR(FI(Ad,"scores",Td()),{nickname:lv(),score:n,timestamp:Date.now()},{merge:!0})}catch(e){return console.error("An error occurred while saving to firestore",e),!1}return Jc().amount===n&&cv({amount:n,stored:!0}),!0},Jc=()=>{const n=localStorage.getItem(av);return n?JSON.parse(n):{amount:0,stored:!1}},cv=n=>localStorage.setItem(av,JSON.stringify(n));class pR extends Je{constructor(){super({label:"form-screen",alpha:0});vt(this,"_accepted",!1);vt(this,"_nickname",lv());this.addComponent(new Jt({label:"text",text:"Enter your nickname:",fontFamily:"PressStart2P",fontSize:24,textColor:16763904,landscape:{position:{x:20,y:44},anchor:{x:0,y:.5}},portrait:{position:{x:20,y:20},anchor:0}})),this.addComponent(new bT({background:"input.png",fontFamily:"Arial, sans-serif",fontSize:24,label:"nickname",textColor:0,text:this._nickname,maxLength:10,padding:15,landscape:{position:{x:520,y:20}},portrait:{position:{x:20,y:80}},onChange:s=>{var o;this._nickname=s,r.enabled=!!((o=this._nickname)!=null&&o.trim())&&this._accepted,r.interactive=r.enabled}}));const e=this.addComponent(new Le({label:"checkbox",resource:"checkbox-off.png",interactive:!0,cursor:"pointer",landscape:{position:{x:20,y:120}},portrait:{position:{x:20,y:180}},onClick:()=>{var s;this._accepted=!this._accepted,r.enabled=!!((s=this._nickname)!=null&&s.trim())&&this._accepted,r.interactive=r.enabled,e.texture=this._accepted?"checkbox-on.png":"checkbox-off.png"}}));this.addComponent(new Jt({label:"agreement",fontFamily:"PressStart2P",fontSize:24,textColor:16763904,text:"",lineHeight:40,landscape:{position:{x:100,y:125},text:"By accepting you agree to the privacy policy"},portrait:{position:{x:100,y:185},text:`By accepting you agree to
the privacy policy`}}));const i=this.addComponent(new Je({label:"buttons",landscape:{y:250},portrait:{y:340},horizontalAlignment:"center",width:650}));i.addComponent(new x_({label:"policy-button",url:tt.privacyPolicyUrl,resource:"policy-button.png",hoverResource:"policy-button-hover.png",disabledResource:"policy-button.png",interactive:!0,cursor:"pointer"}));const r=i.addComponent(new yl({label:"play-button",resource:"play-button.png",hoverResource:"play-button-hover.png",disabledResource:"play-button-disabled.png",position:{x:350,y:0},cursor:"pointer",onClick:async()=>{r.interactive=!1,lR(this._nickname),this.parent.goToGame()}}));r.enabled=!1,this.animate({from:{alpha:0},to:{alpha:1},duration:1})}}class fR extends Qr{async init(){this.alpha=0,this.addComponent(new w_({label:"city-bg",resource:"city-bg.png"})),await Promise.all([this.animate({from:{alpha:0},to:{alpha:1},duration:2}),Nu(tt.sounds.menuLoop,{toVolume:.3,fadeDuration:.5,loop:!0})]),this.addComponent(new rS)}showCharacterSelectionScreen(){this.components[1].destroy(),this.addComponent(new hS)}showFormScreen(){this.components[1].destroy(),this.addComponent(new pR)}async goToGame(){await Promise.all([Uu(tt.sounds.menuLoop,{fadeDuration:2}),this.animate({from:{alpha:1},to:{alpha:0},duration:2})]),Re(tt.signals.goToGame)}}class mR extends b_{constructor(){super({label:"background",resource:"city-bg.png"}),this._registerToSignal(tt.signals.moveScreen,this._move)}_move(t){this.tilePosition.x=-t}}class gR extends Je{constructor(){super({label:"info",position:{x:20,y:20}});vt(this,"_totalLifePoints");let e=this.addComponent(new Jt({label:"life-points-indicator",text:"Life Points:",fontFamily:"PressStart2P",fontSize:16,textColor:13421772,position:{x:0,y:3}})).width+10;for(let i=0;i<tt.lifePoints;i++)e+=this.addComponent(new Le({label:`life-point-${i}`,resource:"life.png",position:{x:e,y:0}})).width+5;e+=this.addComponent(new Le({label:"separator",resource:"separator.png",position:{x:e+10,y:0}})).width+25,e+=this.addComponent(new Jt({label:"score-indicator",text:"Score:",fontFamily:"PressStart2P",fontSize:16,textColor:13421772,position:{x:e,y:3}})).width+10,this.addComponent(new Jt({label:"score",text:ft.score.toString(),fontFamily:"PressStart2P",fontSize:16,textColor:13421772,position:{x:e,y:3},bitmap:!0})),this._totalLifePoints=tt.lifePoints,this._registerToSignal(tt.signals.loseLifePoints,this._removeLifePoints),this._registerToSignal(tt.signals.updateScore,this._updateScore)}get _score(){return this.components[this.components.length-1]}async _removeLifePoints(e){for(let i=this.components.length-1;i>=0&&e>0;i--)if(this.components[i].label.startsWith("life-point-")&&(this.removeComponent(this.components[i]),i++,this._totalLifePoints--,e--,this._totalLifePoints===0)){ft.started=!1,Uu(tt.sounds.mainLoop,{fadeDuration:.5}),Ji(tt.sounds.gameOver),await this.delay(4),Re(tt.signals.gameOver);break}}_updateScore(){this._score.text=ft.score.toString()}}const Nh={run:(n,t)=>`${n}/run/${n}-run-${t%8+1}.png`,jump:(n,t)=>t<=6?`${n}/${n}-jump.png`:`${n}/${n}-idle.png`,idle:(n,t)=>`${n}/${n}-idle.png`},yR=5;class kl extends Le{constructor(e){super({label:"character",resource:Nh.idle(e,0),scale:{x:2,y:2},position:{x:130,y:-100}});vt(this,"_resourceType");vt(this,"_moveFrame",0);vt(this,"_moveSprite",0);vt(this,"_moveState","idle");vt(this,"_onGround",!1);vt(this,"_currentJump",0);vt(this,"_pressing",!1);vt(this,"_pressed",!1);vt(this,"_nextIncreaseSpeedMilestone",0);vt(this,"_canDamage",!0);this._resourceType=e,fl({target:this,rectangle:{x:this.x+49,y:this.y+40,width:46,height:64},movement:{linearMovement:{velocity:{x:0,y:0}}},onUpdatePosition:this._updatePosition.bind(this)})}jump(){this._canJump()&&(this._currentJump++,this._changeState("jump"))}press(){!this.hasPressAndRelease||!this._canJump()||(this._pressing=!0,this._setVelocity())}release(){!this.hasPressAndRelease||!this._pressing||!ft.started||(this._pressing=!1,this._pressed=!0,this._currentJump++,this._changeState("jump"))}async damage(){if(!this._canDamage||!ft.started)return;this._canDamage=!1,Ji(tt.sounds.playerHit,{volume:2}),Re(tt.signals.loseLifePoints,1);const e=this.tint;await this.animate({from:{tint:16763904},to:{tint:16711680},duration:.2,repeat:10,revert:!0}),this.tint=e,this._canDamage=!0}_onTick(){ft.started&&(this._moveState==="idle"&&this._changeState("run"),this._moveFrame++,this._moveFrame%yR===0&&(this._moveFrame=0,this._moveSprite++,this.texture=Nh[this._moveState](this._resourceType,this._moveSprite)))}_changeState(e){this._moveState=e,this._moveFrame=0,this._moveSprite=0,this.texture=Nh[this._moveState](this._resourceType,this._moveSprite+1),this._setVelocity()}_updatePosition(e,i,r){if(!(!ft.started&&this._moveState!=="idle")){if(this.x=e-49,this.y=i-40,this._onGround=r,this.y>st.screen.height+100){Re(tt.signals.loseLifePoints,tt.lifePoints);return}Re(tt.signals.moveScreen,this.x-130),r&&this._moveState!=="run"&&ft.started&&(this._pressed=!1,this._currentJump=0,this._changeState("run")),this._canIncreaseSpeed()&&(this._nextIncreaseSpeedMilestone>0&&ft.speed++,this._nextIncreaseSpeedMilestone=this.x+this._increaseSpeedMilestone)}}_canIncreaseSpeed(){return this.x>=this._nextIncreaseSpeedMilestone}_canJump(){return ft.started?this._moveState==="jump"&&this._currentJump<this._totalAllowedJumps?!0:this._moveState==="run"&&this._onGround:!1}_setVelocity(){const{x:e,y:i}=this._getNewVelocity();Lu(this,{linearMovement:{velocity:{x:e,y:i}}})}_getNewVelocity(){return this._moveState==="jump"?{x:ft.speed,y:this._pressed?-15:-10}:this._moveState==="run"?{x:this._pressing?ft.speed/2:ft.speed,y:0}:{x:0,y:0}}}class _R extends Le{constructor(t,e){super({label:`drink-${t.x}-${t.y}`,resource:"drink.png",position:t,scale:{x:3,y:3}}),fl({target:this,rectangle:{x:e+this.x,y:this.y,width:this.width,height:this.height},onCollision:async i=>{ft.started&&i instanceof kl&&(ft.score+=10,Re(tt.signals.updateScore),Ji(tt.sounds.coin,{volume:2}),this.destroy())}}),this.animate({from:{y:this.y},to:{y:this.y-5},duration:1,repeat:-1,revert:!0})}}const vR=5;class xR extends Le{constructor(e,i){super({label:`position-${e.x}-${e.y}`,resource:"zombie/walk/zombie-walk-1.png",position:e,scale:{x:.2,y:.2}});vt(this,"_started",!1);vt(this,"_distance",0);vt(this,"_moveFrame",0);vt(this,"_moveSprite",0);vt(this,"_acceleration",0);this._distance=i,fl({target:this,rectangle:{x:this._distance+this.x,y:this.y,width:this.width,height:this.height},onUpdatePosition:this._updatePosition.bind(this),onCollision:this._onCollision.bind(this)}),this._registerToSignal(tt.signals.moveScreen,this._onMoveScreen)}_onTick(){!this._started||!ft.started||(this.x+this.width>=0?Pf(this,-1,0):(this._acceleration++,Pf(this,0,this._acceleration)),this._moveFrame++,this._moveFrame%vR===0&&(this._moveFrame=0,this._moveSprite++,this.texture=`zombie/walk/zombie-walk-${this._moveSprite%10+1}.png`))}_updatePosition(e,i){this.x=e-this._distance,this.y=i}_onCollision(e){ft.started&&e instanceof kl&&e.damage()}_onMoveScreen(e){ft.started&&e+st.screen.width>=this._distance+this.x&&(this._started=!0,Lu(this,{linearMovement:{velocity:{x:-1,y:0}}}),this._unregisterFromSignal(tt.signals.moveScreen))}}class km extends Je{constructor(e,i,r){super({label:`platform-${r}`,position:{x:r,y:0}});vt(this,"_topOffset",0);this._topOffset=(8-e)*32;let s=this._topOffset;s+=this.addComponent(new so({label:"platform-top",resource:"platform-top.png",width:i,position:{x:0,y:s}})).height;for(let o=0;o<e;o++)s+=this.addComponent(new so({label:`platform-middle-${o}`,resource:"platform-middle.png",width:i,position:{x:0,y:s}})).height;fl({target:this,rectangle:{x:this.x,y:this.components[0].position.y+4,width:this.width,height:this.height-4},surface:!0}),this._createDrinks(r),this._createZombies(r)}_createDrinks(e){let i=e===0?200:0;const r=37,s=49,o=5,a=5;for(;i+r<=this.width;){i+=Qn(0,this.width-r);const l=this._topOffset-s-Qn(0,o)*s,h=Qn(0,a);for(let c=0;c<h&&i+r<=this.width;c++)this.addComponent(new _R({x:i,y:l},e)),i+=r;i+=20}}_createZombies(e){if(e===0)return;const i=40,r=61.6;let s=Qn(0,1e3);const o=this._topOffset-r;for(;s+i<=this.width;)this.addComponent(new xR({x:s,y:o},e)),s+=300+Qn(0,this.width-i)}}class bR extends kl{constructor(){super("girl")}get hasPressAndRelease(){return!0}get _increaseSpeedMilestone(){return 2e4}get _totalAllowedJumps(){return 1}}class wR extends kl{constructor(){super("boy")}get hasPressAndRelease(){return!1}get _increaseSpeedMilestone(){return 1e4}get _totalAllowedJumps(){return 2}}class AR extends Je{constructor(){super({label:"platforms",verticalAlignment:"bottom",height:292});vt(this,"_limit",0);this.addComponent(ft.selectedCharacter==="girl"?new bR:new wR),this._limit=this.addComponent(new km(2,1e3,0)).width,this._createPlatforms(),this._registerToSignal(tt.signals.moveScreen,this._move)}get character(){return this.components[0]}_move(e){this.x=-e,this._deleteExpiredPlatforms(),this._createPlatforms()}_createPlatforms(){for(;this._limit+this.x<=W.screen.width+1e3;){const e=Qn(1,8),i=Qn(200,1500),r=Qn(100,200);this.addComponent(new km(e,i,this._limit+r)),this._limit+=r+i}}_deleteExpiredPlatforms(){for(;;){const e=this.components[1];if(e.x+e.width+100<-this.x)e.destroy();else break}}}class Mm extends Qr{constructor(){super(...arguments);vt(this,"_cancelClickDebounce",null);vt(this,"_keepingClick",!1)}get _platforms(){return this.components[2]}async init(){ft.speed=ft.originalSpeed,ft.score=0,this.alpha=0,this.interactive=!0,this.addComponent(new mR),this.addComponent(new gR),this.addComponent(new AR),await Promise.all([this.animate({from:{alpha:0},to:{alpha:1},duration:1}),Nu(tt.sounds.mainLoop,{toVolume:.3,fadeDuration:.5,loop:!0})]),await this.delay(1),ft.started=!0}_onClick(){if(!ft.started)return;if(!this._platforms.character.hasPressAndRelease){this._platforms.character.jump();return}this._keepingClick=!1;const{start:e,cancel:i}=zu(()=>{this._keepingClick=!0,this._platforms.character.press()},()=>{},300,0);this._cancelClickDebounce=i,e()}_onPointerUp(){var e;!ft.started||!this._platforms.character.hasPressAndRelease||((e=this._cancelClickDebounce)==null||e.call(this),this._cancelClickDebounce=null,this._keepingClick?this._platforms.character.release():this._platforms.character.jump())}}const TR=[{name:"default",assets:[{alias:["audio/sounds.json"],src:["audio/sounds-EgVUtQ.json"],data:{tags:{}}},{alias:["audio/sounds.mp3"],src:["audio/sounds-wkfo.mp3","audio/sounds-nYlG.ogg"],data:{tags:{}}},{alias:["default"],src:["default-vbWOIQ@0.5x.png.json","default-uhPi.png.json","default-PxBCOQ.webp.json","default-Hk_gWQ@0.5x.avif.json","default-h9YFuA.avif.json","default-ca-T0Q@0.5x.webp.json"],data:{tags:{tps:!0}}}]}],SR={bundles:TR};class ER extends Qr{constructor(){super(...arguments);vt(this,"_leaderboard",[])}async init(){const e=this.addComponent(new Jt({label:"game-over",text:"Game Over",fontFamily:W.loadingScene.fontFamily,fontSize:48,textColor:W.loadingScene.textColor,anchor:{x:.5,y:.5},horizontalAlignment:"center",verticalAlignment:"center",margin:{x:0,y:-50}})),i=this.addComponent(new Jt({label:"score",text:`Your score is ${ft.score}`,fontFamily:W.loadingScene.fontFamily,fontSize:28,textColor:W.loadingScene.textColor,anchor:{x:.5,y:.5},horizontalAlignment:"center",verticalAlignment:"center",margin:{x:0,y:50}}));if(await Promise.all([this.delay(2),this._saveAndGetLeaderboard()]),this._leaderboard.length===0){Re(tt.signals.goToGame);return}await Promise.all([e.animate({from:{alpha:1},to:{alpha:0},duration:1}),i.animate({from:{alpha:1},to:{alpha:0},duration:1})]),e.destroy(),i.destroy(),this._showLeaderboard(),await this.delay(2+.5*(this._leaderboard.length+1)),Re(tt.signals.goToGame)}_showLeaderboard(){const i=this.addComponent(new Je({label:"leaderboard",width:549,height:549,verticalAlignment:"center",horizontalAlignment:"center"}));let r=0;r+=i.addComponent(new Jt({label:"title",text:"Leaderboard",fontFamily:W.loadingScene.fontFamily,fontSize:48,textColor:W.loadingScene.textColor,anchor:{x:.5,y:0},position:{x:549/2,y:0},alpha:0,animations:[{from:{alpha:0},to:{alpha:1},duration:.5}]})).height+50,this._leaderboard.forEach((s,o)=>{const a=s.id===Td()?16763904:W.loadingScene.textColor;i.addComponent(new Jt({label:`player-${o}`,text:`${o+1}. ${s.nickname}`,fontFamily:W.loadingScene.fontFamily,fontSize:24,textColor:a,position:{x:0,y:r},alpha:0,animations:[{from:{alpha:0},to:{alpha:1},duration:.5,delay:.5*(o+1)}]})),r+=i.addComponent(new Jt({label:`score-${o}`,text:s.score.toString(),fontFamily:W.loadingScene.fontFamily,fontSize:24,textColor:a,anchor:{x:1,y:0},position:{x:549,y:r},alpha:0,animations:[{from:{alpha:0},to:{alpha:1},duration:.5,delay:.5*(o+1)}]})).height+20})}async _saveAndGetLeaderboard(){if(!await cR(ft.score))return[];this._leaderboard=await dR()}}const CR=n=>{const t=new URLSearchParams(window.location.search??""),e=Es(W.signals.destroyLoadingScene,()=>{Pa(e.name,e.binding),ks(t.has("character")?new Mm:new tS)}),i=Es(tt.signals.goToIntro,()=>{Pa(i.name,i.binding),ks(new fR)});Es(tt.signals.goToGame,()=>{uR(),ks(new Mm)}),Es(tt.signals.gameOver,()=>{ks(new ER)}),W.gameName="couples-run",W.assets.basePath=n.assetsBasePath,W.maxFPS=Number(t.get("maxFPS"))||60,W.debug=!!t.get("debug"),W.assets.manifest=SR,W.assets.extra=[{alias:"Lobster",src:eS,data:{family:"Lobster"}},{alias:"PressStart2P",src:nS,data:{family:"PressStart2P"}}],tt.creditsUrl=n.creditsUrl,tt.privacyPolicyUrl=n.privacyPolicyUrl,tt.fireBaseApiKey=n.fireBaseApiKey,tt.fireBaseAppId=n.fireBaseAppId,tt.fireBaseAuthDomain=n.fireBaseAuthDomain,tt.fireBaseMessagingSenderId=n.fireBaseMessagingSenderId,tt.fireBaseProjectId=n.fireBaseProjectId,tt.fireBaseStorageBucket=n.fireBaseStorageBucket,ft.selectedCharacter=t.get("character")==="boy"?"boy":"girl",UT()};exports.$=mt;exports.$l=hu;exports.$o=qh;exports.Aa=cc;exports.Ad=Yg;exports.Af=wg;exports.Ai=qi;exports.At=ue;exports.Ca=uc;exports.Cd=Xg;exports.Ct=de;exports.D=K;exports.Dl=su;exports.Er=Ea;exports.H=dt;exports.Hf=Vg;exports.Hl=lu;exports.It=Te;exports.Jr=el;exports.Ln=sa;exports.Md=Jg;exports.Rl=ru;exports.Ro=jh;exports.Rt=Ce;exports.Sd=Wg;exports.Se=An;exports.Si=Hi;exports.Sl=iu;exports.Tr=Ta;exports.Tt=me;exports.Vf=Mg;exports.Vl=au;exports.W=ot;exports.Xe=Jn;exports.Yo=Yh;exports.Zl=uu;exports._d=Gg;exports._e=pn;exports._r=wa;exports.ah=du;exports.bp=ly;exports.ct=Lt;exports.dl=nu;exports.dr=xa;exports.dt=Ht;exports.ea=ic;exports.eu=Lm;exports.fn=vo;exports.ft=Gt;exports.gd=jg;exports.gt=Xt;exports.hh=fu;exports.ho=hl;exports.ia=rc;exports.ii=li;exports.iu=zm;exports.j=gt;exports.kf=Eg;exports.kr=Sa;exports.ku=Zm;exports.ls=Rr;exports.md=zg;exports.me=Nn;exports.mp=iy;exports.mu=Ym;exports.of=_g;exports.ot=Pt;exports.pd=Ug;exports.qf=Fg;exports.qu=fg;exports.renderGame=CR;exports.sa=sc;exports.st=Et;exports.su=jm;exports.to=nl;exports.ul=eu;exports.vd=Hg;exports.wd=qg;exports.we=xn;exports.zs=Os;
